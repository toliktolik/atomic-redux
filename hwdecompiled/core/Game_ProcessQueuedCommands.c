/*
 * Function: Game_ProcessQueuedCommands
 * Address: 004ad0a0
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Game_ProcessQueuedCommands(int param_1)

{
  uint uVar1;
  uint *puVar2;
  undefined4 *puVar3;
  int iVar4;
  uint **ppuVar5;
  int extraout_ECX;
  int extraout_ECX_00;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 extraout_EDX_01;
  uint extraout_EDX_02;
  uint *puVar6;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint *puVar7;
  undefined8 uVar8;
  undefined1 local_44 [4];
  uint *local_40;
  undefined4 local_3c;
  undefined1 local_38 [4];
  uint *local_34;
  undefined4 local_30;
  undefined4 local_2c;
  uint *local_28;
  uint *local_24;
  int local_20;
  int local_1c;
  uint *local_18;
  undefined1 local_11;
  void *pvStack_10;
  undefined4 uStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5165e0;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  local_20 = param_1;
  puVar2 = (uint *)Collision_DistanceToLine();
  local_30 = 0;
  local_8 = 0;
  local_44[0] = local_11;
  local_34 = puVar2;
  uVar8 = Collision_CalculateNormal();
  iVar4 = (int)uVar8;
  *(undefined1 *)(iVar4 + 0x29) = 1;
  *(int *)(iVar4 + 4) = iVar4;
  *(int *)iVar4 = iVar4;
  *(int *)(iVar4 + 8) = iVar4;
  local_3c = 0;
  local_8 = CONCAT31(local_8._1_3_,1);
  if (*(undefined4 **)(param_1 + 0x524) == (undefined4 *)0x0) {
    local_18 = (uint *)0x0;
  }
  else {
    local_18 = (uint *)**(undefined4 **)(param_1 + 0x524);
  }
  if (local_18 != *(uint **)(param_1 + 0x524)) {
    do {
      puVar7 = local_18;
      local_40 = (uint *)uVar8;
      puVar6 = local_18 + 2;
      if (local_18[2] == 2) {
        puVar3 = Math_NormalizeVector(param_1 + 0x514,(int)puVar6);
        uVar8 = CONCAT44(extraout_EDX,local_40);
        if (puVar3 == (undefined4 *)0x0) {
          Math_DotProduct(param_1,(short)extraout_EDX,(int)puVar6);
          uVar8 = CONCAT44(extraout_EDX_00,local_40);
          if ((char)puVar7[8] != '\0') {
            puVar3 = Game_CreateStringData(puVar2,puVar2[1],local_18 + 2);
            Image_AdjustBrightness(local_38,1);
            uVar8 = CONCAT44(extraout_EDX_01,local_40);
            puVar2[1] = (uint)puVar3;
            *(undefined4 **)puVar3[1] = puVar3;
            puVar2 = local_34;
          }
        }
      }
      local_18 = (uint *)*local_18;
    } while (local_18 != *(uint **)(param_1 + 0x524));
  }
  local_40 = (uint *)uVar8;
  local_1c = 0;
  if (*(undefined4 **)(param_1 + 0x518) == (undefined4 *)0x0) {
    local_18 = (uint *)0x0;
  }
  else {
    local_18 = (uint *)**(undefined4 **)(param_1 + 0x518);
  }
  if (local_18 != *(uint **)(param_1 + 0x518)) {
    do {
      puVar7 = local_18;
      local_40 = (uint *)uVar8;
      puVar6 = local_18 + 2;
      if ((local_18[2] == 2) &&
         (Math_DotProduct(param_1,(short)((ulonglong)uVar8 >> 0x20),(int)puVar6),
         (char)puVar7[8] != '\0')) {
        if (*(char *)((int)puVar7 + 0x22) == '\0') {
          if (*(char *)((int)puVar7 + 0x23) == '\0') {
            TreeMap_FindOrInsert(local_44,&local_2c,(_String_base *)(puVar7 + 0x10));
            local_1c = local_1c + 1;
          }
        }
        else {
          local_24 = puVar2 + 1;
          puVar3 = Game_CreateStringData(puVar2,puVar2[1],puVar6);
          Image_AdjustBrightness(local_38,1);
          *local_24 = (uint)puVar3;
          *(undefined4 **)puVar3[1] = puVar3;
          puVar2 = local_34;
        }
      }
      if (*(char *)((int)puVar7 + 0x22) == '\0') {
        puVar6 = (uint *)*local_18;
        puVar7 = (uint *)*local_18;
      }
      else {
        puVar7 = (uint *)*local_18;
        puVar6 = local_18;
        puVar2 = local_34;
        if (local_18 != *(uint **)(param_1 + 0x518)) {
          *(uint *)local_18[1] = *local_18;
          uVar1 = *local_18;
          puVar2 = local_18 + 2;
          *(uint *)(uVar1 + 4) = local_18[1];
          local_18 = puVar7;
          Input_ProcessEvents((int)puVar2,uVar1);
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX_02);
        }
      }
      local_18 = puVar7;
      uVar8 = CONCAT44(puVar6,local_40);
    } while (local_18 != *(uint **)(param_1 + 0x518));
  }
  if ((puVar2 != (uint *)0x0) && (puVar7 = (uint *)*puVar2, (uint *)*puVar2 != puVar2)) {
    do {
      if (*(int *)(param_1 + 4) <= local_1c) break;
      local_28 = local_40;
      local_24 = Collision_SphereIntersect(local_44,(int)(puVar7 + 0x10));
      if (local_24 == local_40) {
LAB_004ad2f7:
        local_18 = local_40;
        ppuVar5 = &local_18;
      }
      else {
        if (puVar7[0x16] < 0x10) {
          puVar2 = puVar7 + 0x11;
        }
        else {
          puVar2 = (uint *)puVar7[0x11];
        }
        iVar4 = Debug_LogMessage((int)puVar2,(char)local_24[9]);
        if (iVar4 < 0) goto LAB_004ad2f7;
        ppuVar5 = &local_24;
      }
      if (*ppuVar5 == local_28) {
        TreeMap_FindOrInsert(local_44,&local_2c,(_String_base *)(puVar7 + 0x10));
        *(undefined1 *)((int)puVar7 + 0x22) = 1;
        iVar4 = *(int *)(local_20 + 0x518);
        puVar3 = Game_CreateStringData(iVar4,*(undefined4 *)(iVar4 + 4),puVar7 + 2);
        Image_AdjustBrightness((void *)(local_20 + 0x514),1);
        *(undefined4 **)(iVar4 + 4) = puVar3;
        *(undefined4 **)puVar3[1] = puVar3;
        puVar6 = (uint *)*puVar7;
        local_1c = local_1c + 1;
        if (puVar7 != local_34) {
          *(uint *)puVar7[1] = *puVar7;
          uVar1 = *puVar7;
          *(uint *)(uVar1 + 4) = puVar7[1];
          Input_ProcessEvents((int)(puVar7 + 2),uVar1);
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,extraout_EDX_03);
        }
      }
      else {
        puVar6 = (uint *)*puVar7;
      }
      puVar7 = puVar6;
      puVar2 = local_34;
      param_1 = local_20;
    } while (puVar6 != local_34);
  }
  if (puVar2 == (uint *)0x0) {
    puVar7 = (uint *)0x0;
  }
  else {
    puVar7 = (uint *)*puVar2;
  }
  if (puVar7 != puVar2) {
    do {
      if (*(int *)(param_1 + 4) <= local_1c) break;
      *(undefined1 *)((int)puVar7 + 0x22) = 1;
      iVar4 = *(int *)(param_1 + 0x518);
      puVar3 = Game_CreateStringData(iVar4,*(undefined4 *)(iVar4 + 4),puVar7 + 2);
      Image_AdjustBrightness((void *)(local_20 + 0x514),1);
      *(undefined4 **)(iVar4 + 4) = puVar3;
      *(undefined4 **)puVar3[1] = puVar3;
      puVar7 = (uint *)*puVar7;
      local_1c = local_1c + 1;
      param_1 = local_20;
    } while (puVar7 != local_34);
  }
  local_8 = local_8 & 0xffffff00;
  TreeSet_RemoveRange2(local_44,&local_28,(uint *)*local_40,local_40);
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler((int)local_40,extraout_EDX_04);
}


