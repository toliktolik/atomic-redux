/*
 * Function: GameState_LoadProgress
 * Address: 0043ba90
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall GameState_LoadProgress(void *this,int param_1)

{
  int iVar1;
  char *pcVar2;
  void *pvVar3;
  undefined4 uVar4;
  char *pcVar5;
  undefined4 *puVar6;
  double *pdVar7;
  double *pdVar8;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  double *pdVar9;
  undefined1 local_40 [4];
  uint local_3c;
  undefined4 local_2c;
  uint local_28;
  void *local_24;
  int local_20;
  double *local_1c;
  void *local_18;
  int *local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005124c8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_24 = this;
  Boss_HelicopterTurretSystem(this,param_1);
  local_8 = 0;
  *(undefined ***)this = &PTR_Boss_FinalWeaponInitialize_00530820;
  GameState_SaveProgress();
  *(undefined4 *)((int)this + 0x40) = *(undefined4 *)((int)this + 0x58);
  *(undefined4 *)((int)this + 0x44) = *(undefined4 *)((int)this + 0x5c);
  pvVar3 = operator_new(0x20);
  local_8._0_1_ = 1;
  if (pvVar3 == (void *)0x0) {
    uVar4 = 0;
  }
  else {
    uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
  }
  *(undefined4 *)((int)this + 0x60) = uVar4;
  local_8._0_1_ = 0;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar2 = "images\\eye\\eye";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_40,(_String_base *)"images\\eye\\eye",(uint)(pcVar5 + -0x5308d8));
  local_8._0_1_ = 2;
  Sprite_GetHeight(*(void **)((int)this + 0x60),local_40,6,1);
  local_8._0_1_ = 0;
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_3c,extraout_EDX);
  }
  pvVar3 = operator_new(0x20);
  local_8._0_1_ = 3;
  if (pvVar3 == (void *)0x0) {
    uVar4 = 0;
  }
  else {
    uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
  }
  *(undefined4 *)((int)this + 0x70) = uVar4;
  local_8._0_1_ = 0;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar2 = "images\\eye\\body";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_40,(_String_base *)"images\\eye\\body",(uint)(pcVar5 + -0x5308c8));
  local_8._0_1_ = 4;
  Sprite_GetHeight(*(void **)((int)this + 0x70),local_40,1,1);
  local_8._0_1_ = 0;
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX_00);
  }
  pvVar3 = operator_new(0x20);
  local_8._0_1_ = 5;
  if (pvVar3 == (void *)0x0) {
    uVar4 = 0;
  }
  else {
    uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
  }
  *(undefined4 *)((int)this + 0x74) = uVar4;
  local_8._0_1_ = 0;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar2 = "images\\eye\\arm";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_40,(_String_base *)"images\\eye\\arm",(uint)(pcVar5 + -0x5308b8));
  local_8._0_1_ = 6;
  Sprite_GetHeight(*(void **)((int)this + 0x74),local_40,1,1);
  local_8._0_1_ = 0;
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_3c,extraout_EDX_01);
  }
  pvVar3 = operator_new(0x20);
  local_8._0_1_ = 7;
  if (pvVar3 == (void *)0x0) {
    uVar4 = 0;
  }
  else {
    uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
  }
  *(undefined4 *)((int)this + 0x78) = uVar4;
  local_8._0_1_ = 0;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar2 = "images\\eye\\glow";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_40,(_String_base *)"images\\eye\\glow",(uint)(pcVar5 + -0x5308a8));
  local_8._0_1_ = 8;
  Sprite_GetHeight(*(void **)((int)this + 0x78),local_40,1,1);
  local_8._0_1_ = 0;
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,extraout_EDX_02);
  }
  pvVar3 = operator_new(0x20);
  local_8._0_1_ = 9;
  if (pvVar3 == (void *)0x0) {
    uVar4 = 0;
  }
  else {
    uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
  }
  *(undefined4 *)((int)this + 0x7c) = uVar4;
  local_8._0_1_ = 0;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar2 = "images\\eye\\hand";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_40,(_String_base *)"images\\eye\\hand",(uint)(pcVar5 + -0x530898));
  local_8._0_1_ = 10;
  Sprite_GetHeight(*(void **)((int)this + 0x7c),local_40,1,1);
  local_8._0_1_ = 0;
  if (local_28 < 0x10) {
    pvVar3 = operator_new(0x20);
    local_8._0_1_ = 0xb;
    if (pvVar3 == (void *)0x0) {
      uVar4 = 0;
    }
    else {
      uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
    }
    *(undefined4 *)((int)this + 0x80) = uVar4;
    local_8._0_1_ = 0;
    local_28 = 0xf;
    local_2c = 0;
    local_3c = local_3c & 0xffffff00;
    pcVar2 = "images\\eye\\bolt";
    do {
      pcVar5 = pcVar2;
      pcVar2 = pcVar5 + 1;
    } while (*pcVar5 != '\0');
    String_Assign(local_40,(_String_base *)"images\\eye\\bolt",(uint)(pcVar5 + -0x530888));
    local_8._0_1_ = 0xc;
    Sprite_GetHeight(*(void **)((int)this + 0x80),local_40,1,1);
    local_8._0_1_ = 0;
    if (local_28 < 0x10) {
      pvVar3 = operator_new(0x20);
      local_8._0_1_ = 0xd;
      if (pvVar3 == (void *)0x0) {
        uVar4 = 0;
      }
      else {
        uVar4 = Sprite_GetWidth(pvVar3,*(undefined4 *)(*(int *)((int)this + 0x4c) + 0x5c));
      }
      *(undefined4 *)((int)this + 0x84) = uVar4;
      local_8._0_1_ = 0;
      local_28 = 0xf;
      local_2c = 0;
      local_3c = local_3c & 0xffffff00;
      pcVar2 = "images\\eye\\handglow";
      do {
        pcVar5 = pcVar2;
        pcVar2 = pcVar5 + 1;
      } while (*pcVar5 != '\0');
      String_Assign(local_40,(_String_base *)"images\\eye\\handglow",(uint)(pcVar5 + -0x530874));
      local_8._0_1_ = 0xe;
      Sprite_GetHeight(*(void **)((int)this + 0x84),local_40,1,1);
      local_8._0_1_ = 0;
      if (local_28 < 0x10) {
        *(undefined4 *)((int)this + 0x9c) = *(undefined4 *)((int)this + 0xa0);
        *(undefined1 *)((int)this + 0x48) = 0;
        *(undefined4 *)((int)this + 0x88) = 0;
        *(undefined4 *)((int)this + 0x8c) = 0;
        *(undefined4 *)((int)this + 0x90) = 0;
        *(undefined4 *)((int)this + 0x94) = 0x4067c000;
        *(undefined4 *)((int)this + 0xac) = *(undefined4 *)((int)this + 0xb0);
        *(undefined4 *)((int)this + 0xa8) = 0xffffffff;
        *(undefined4 *)((int)this + 0xb4) = 0;
        *(undefined4 *)((int)this + 0xb8) = 0;
        *(undefined4 *)((int)this + 0xbc) = 0;
        *(undefined4 *)((int)this + 0xc0) = 6;
        *(undefined4 *)((int)this + 0xc4) = 499;
        *(undefined4 *)((int)this + 8) = 0;
        *(undefined4 *)((int)this + 0xc) = 0;
        *(undefined4 *)((int)this + 0x10) = 0;
        *(undefined4 *)((int)this + 0x14) = 0xc0590000;
        param_1 = 0;
        local_14 = &DAT_005307f4;
        pdVar9 = (double *)((int)this + 0x3d0);
        local_1c = (double *)((int)this + 0xd0);
        do {
          local_8._0_1_ = 0;
          local_20 = param_1 / 3;
          local_18 = (void *)(local_20 * 0xc0 + -0x60 + local_14[-1]);
          pdVar9[-1] = (double)(int)local_18;
          iVar1 = *local_14;
          *(undefined4 *)(pdVar9 + 1) = 0;
          *(undefined4 *)((int)pdVar9 + 0xc) = 0;
          *(undefined4 *)(pdVar9 + 2) = 0;
          *(undefined4 *)((int)pdVar9 + 0x14) = 0;
          *pdVar9 = (double)iVar1;
          local_18 = operator_new(0x78);
          local_8._0_1_ = 0xf;
          if (local_18 == (void *)0x0) {
            puVar6 = (undefined4 *)0x0;
          }
          else {
            puVar6 = GameState_InitializeNewGame
                               (local_18,*(int *)((int)this + 0x4c),(int)this,param_1);
          }
          pdVar7 = local_1c;
          *(undefined4 **)(pdVar9 + 3) = puVar6;
          local_18 = (void *)0x0;
          local_1c = (double *)0x8;
          do {
            pdVar8 = pdVar7 + 2;
            pdVar7[-1] = (double)local_14[-1] + (double)(int)local_18 + *(double *)((int)this + 8);
            local_18 = (void *)((int)local_18 + local_20 * 0x18 + -0xc);
            local_1c = (double *)((int)local_1c + -1);
            *pdVar7 = (double)*local_14 + *(double *)((int)this + 0x10);
            pdVar7 = pdVar8;
          } while (local_1c != (double *)0x0);
          local_14 = local_14 + 2;
          param_1 = param_1 + 1;
          pdVar9 = pdVar9 + 5;
          local_1c = pdVar8;
        } while ((int)local_14 < 0x530824);
        ExceptionList = local_10;
        return (undefined4 *)this;
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_3c,extraout_EDX_05);
    }
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_01,extraout_EDX_04);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(local_3c,extraout_EDX_03);
}


