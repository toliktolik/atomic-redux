/*
 * Function: Image_ApplyVerticalFilter
 * Address: 004d9a20
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Image_ApplyVerticalFilter(int param_1,int param_2,int param_3,int param_4)

{
  byte bVar1;
  byte *pbVar2;
  undefined1 *puVar3;
  byte *pbVar4;
  int iVar5;
  undefined4 *puVar6;
  byte *pbVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  byte *pbVar11;
  int iVar12;
  int iVar13;
  void *this;
  uint uVar14;
  int local_18;
  
  this = (void *)(*(int *)(param_2 + 0x1c) * 8);
  Image_FillPixelBoundaries(this,param_3 + -4,*(int *)(param_1 + 0xdc) + 2,*(int *)(param_1 + 0x1c))
  ;
  iVar5 = *(int *)(param_1 + 0xb4) * 0x40;
  iVar10 = (0x80 - *(int *)(param_1 + 0xb4)) * 0x200;
  local_18 = 0;
  if (0 < *(int *)(param_2 + 0xc)) {
    puVar6 = (undefined4 *)(param_3 + 4);
    do {
      pbVar2 = (byte *)puVar6[-2];
      puVar3 = *(undefined1 **)(param_4 + local_18 * 4);
      pbVar4 = (byte *)puVar6[-1];
      uVar14 = (uint)*pbVar4;
      iVar12 = (uint)*pbVar2 + uVar14 + *(byte *)*puVar6;
      pbVar7 = (byte *)*puVar6 + 1;
      pbVar11 = pbVar4 + 1;
      iVar8 = (uint)*pbVar7 + (uint)pbVar2[1] + (uint)pbVar4[1];
      *puVar3 = (char)(((iVar12 * 2 - uVar14) + iVar8) * iVar5 + 0x8000 + uVar14 * iVar10 >> 0x10);
      for (iVar13 = (int)this + -2; puVar3 = puVar3 + 1, iVar13 != 0; iVar13 = iVar13 + -1) {
        bVar1 = *pbVar11;
        pbVar11 = pbVar11 + 1;
        pbVar7 = pbVar7 + 1;
        iVar9 = (uint)*pbVar7 + (uint)pbVar2[2] + (uint)*pbVar11;
        *puVar3 = (char)(((iVar12 - (uint)bVar1) + iVar9 + iVar8) * iVar5 + 0x8000 +
                         (uint)bVar1 * iVar10 >> 0x10);
        pbVar2 = pbVar2 + 1;
        iVar12 = iVar8;
        iVar8 = iVar9;
      }
      *puVar3 = (char)(((iVar8 * 2 - (uint)*pbVar11) + iVar12) * iVar5 + 0x8000 +
                       (uint)*pbVar11 * iVar10 >> 0x10);
      local_18 = local_18 + 1;
      puVar6 = puVar6 + 1;
    } while (local_18 < *(int *)(param_2 + 0xc));
  }
  return;
}


