/*
 * Function: GameInitialization_LoadUserDataAndAssets
 * Address: 0040d2c0
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Type propagation algorithm not settling */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall GameInitialization_LoadUserDataAndAssets(int *param_1)

{
  char cVar1;
  _String_base _Var2;
  undefined1 uVar3;
  undefined4 uVar4;
  _String_base *p_Var5;
  undefined4 *puVar6;
  char *pcVar7;
  _String_base *p_Var8;
  int iVar9;
  char *pcVar10;
  int iVar11;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  undefined4 extraout_ECX_04;
  int extraout_ECX_05;
  int extraout_ECX_06;
  int extraout_ECX_07;
  int extraout_ECX_08;
  int extraout_ECX_09;
  int extraout_ECX_10;
  int extraout_ECX_11;
  undefined2 extraout_DX;
  undefined2 extraout_DX_00;
  undefined4 *extraout_EDX;
  undefined4 *extraout_EDX_00;
  undefined4 *puVar12;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint uVar13;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  uint extraout_EDX_07;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  uint extraout_EDX_10;
  uint extraout_EDX_11;
  uint extraout_EDX_12;
  uint extraout_EDX_13;
  uint extraout_EDX_14;
  uint extraout_EDX_15;
  char *pcVar14;
  int *piVar15;
  uint unaff_retaddr;
  char local_17c [96];
  _String_base local_11c [32];
  undefined4 local_fc [6];
  undefined4 local_e4;
  undefined4 local_e0 [6];
  undefined4 local_c8;
  undefined4 local_c4;
  undefined4 local_c0;
  undefined1 local_bc [4];
  uint local_b8;
  undefined4 local_a8;
  uint local_a4;
  undefined1 local_a0 [4];
  uint local_9c;
  undefined4 local_8c;
  uint local_88;
  int local_84;
  _String_base local_80 [4];
  uint local_7c;
  undefined4 local_6c;
  uint local_68;
  undefined1 local_64 [4];
  uint local_60;
  undefined4 local_50;
  uint local_4c;
  undefined4 *local_48;
  char *local_44;
  int *local_40;
  _String_base local_3c [4];
  uint local_38;
  undefined4 local_28;
  uint local_24;
  uint local_20;
  int *local_1c;
  char local_15;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0050ffce;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_20 = 0;
  ExceptionList = &local_10;
  ErrorReporter_InitializeConstants(param_1);
  piVar15 = param_1 + 0x266;
  for (iVar11 = 0x5c; iVar11 != 0; iVar11 = iVar11 + -1) {
    *piVar15 = 0;
    piVar15 = piVar15 + 1;
  }
  local_1c = (int *)operator_new(0x20);
  local_8 = 0;
  if (local_1c == (undefined4 *)0x0) {
    local_48 = (undefined4 *)0x0;
  }
  else {
    local_48 = (undefined4 *)ObjectType2_Constructor(local_1c);
  }
  local_8 = 0xffffffff;
  local_24 = 0xf;
  local_28 = 0;
  local_38 = local_38 & 0xffffff00;
  pcVar14 = "userdata\\users.dat";
  do {
    pcVar10 = pcVar14;
    pcVar14 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_3c,(_String_base *)"userdata\\users.dat",(uint)(pcVar10 + -0x52a3a4));
  local_8 = 1;
  uVar4 = Math_MaxValue((int)param_1,extraout_DX,local_3c,local_48,'\0');
  puVar6 = local_48;
  local_15 = (char)uVar4;
  local_8 = 0xffffffff;
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_38);
  }
  puVar12 = extraout_EDX;
  if (local_15 != '\0') {
    iVar11 = String_ToLowerCase((int)local_48);
    if ((byte)iVar11 != 0) {
      if ((byte)iVar11 < 0x15) {
        CopyFileA("userdata\\users.dat","userdata\\users.bak",0);
        DeleteFileA("userdata\\users.dat");
        local_24 = 0xf;
        local_28 = 0;
        local_38 = local_38 & 0xffffff00;
        pcVar14 = "Message";
        do {
          pcVar10 = pcVar14;
          pcVar14 = pcVar10 + 1;
        } while (*pcVar10 != '\0');
        String_Assign(local_3c,(_String_base *)"Message",(uint)(pcVar10 + -0x52a3dc));
        local_8 = 2;
        local_4c = 0xf;
        local_50 = 0;
        local_60 = local_60 & 0xffffff00;
        pcVar14 = 
        "Due to some big changes in the user file format, your old user file has been deleted. Sorry! However, a backup of the old file can be found in the userdata\\users.bak file in your Heavy Weapon Deluxe folder."
        ;
        do {
          pcVar10 = pcVar14;
          pcVar14 = pcVar10 + 1;
        } while (*pcVar10 != '\0');
        String_Assign(local_64,(_String_base *)
                               "Due to some big changes in the user file format, your old user file has been deleted. Sorry! However, a backup of the old file can be found in the userdata\\users.bak file in your Heavy Weapon Deluxe folder."
                      ,(uint)(pcVar10 + -0x52a8b8));
        local_8 = CONCAT31(local_8._1_3_,3);
        (**(code **)(*param_1 + 0x6c))();
        if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,(uint)extraout_EDX_00);
        }
        local_4c = 0xf;
        local_50 = 0;
        local_60 = local_60 & 0xffffff00;
        local_8 = 0xffffffff;
        puVar12 = extraout_EDX_00;
        if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_38,(uint)extraout_EDX_00);
        }
        goto LAB_0040d521;
      }
      Level_InitializeFrigistan((int)puVar6);
    }
    local_1c = (undefined4 *)0x0;
    iVar11 = Level_InitializePetrovakia((int)puVar6);
    puVar12 = (undefined4 *)((uint)((int)((iVar11 >> 0x1f & 7U) + iVar11) >> 3) / 0x60);
    if (puVar12 != (undefined4 *)0x0) {
      do {
        pcVar14 = local_17c;
        for (iVar11 = 0x18; iVar11 != 0; iVar11 = iVar11 + -1) {
          pcVar14[0] = '\0';
          pcVar14[1] = '\0';
          pcVar14[2] = '\0';
          pcVar14[3] = '\0';
          pcVar14 = pcVar14 + 4;
        }
        Array_Resize(local_48,(int)local_17c,0x60);
        local_44 = local_17c;
        puVar12 = (undefined4 *)((int)local_17c + 1);
        do {
          cVar1 = *local_44;
          local_44 = local_44 + 1;
        } while (cVar1 != '\0');
        local_44 = local_44 + -(int)puVar12;
        if (local_44 == (char *)0x0) break;
        Vector_PushBack_96ByteObjects(param_1 + 0x522,(undefined4 *)local_17c);
        puVar6 = (undefined4 *)((int)local_1c + 1);
        local_1c = puVar6;
        iVar11 = Level_InitializePetrovakia((int)local_48);
        puVar12 = (undefined4 *)((uint)((int)((iVar11 >> 0x1f & 7U) + iVar11) >> 3) / 0x60);
      } while (puVar6 < puVar12);
    }
  }
LAB_0040d521:
  puVar6 = local_48;
  Image_Rotate((int)local_48,(uint)puVar12);
  local_24 = 0xf;
  local_28 = 0;
  local_38 = local_38 & 0xffffff00;
  pcVar14 = "userdata\\hiscores.dat";
  do {
    pcVar10 = pcVar14;
    pcVar14 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_3c,(_String_base *)"userdata\\hiscores.dat",(uint)(pcVar10 + -0x52a3c4));
  local_8 = 4;
  uVar4 = Math_MaxValue((int)param_1,extraout_DX_00,local_3c,puVar6,'\0');
  local_15 = (char)uVar4;
  local_8 = 0xffffffff;
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_38,extraout_EDX_01);
  }
  if (local_15 != '\0') {
    iVar11 = Level_InitializePetrovakia((int)puVar6);
    if ((int)(iVar11 + (iVar11 >> 0x1f & 7U)) >> 3 == 0x280) {
      local_1c = (int *)0xa;
      do {
        Array_Resize(puVar6,(int)local_e0,0x24);
        Array_Resize(puVar6,(int)local_fc,0x1c);
        Vector_PushBack_36ByteObjects(param_1 + 0x50e,local_e0);
        Vector_PushBack_28ByteObjects(param_1 + 0x512,local_fc);
        local_1c = (int *)((int)local_1c + -1);
      } while (local_1c != (int *)0x0);
      local_1c = (int *)0x0;
      goto LAB_0040d77d;
    }
    DeleteFileA("userdata\\hiscore.dat");
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    pcVar14 = "Message";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_3c,(_String_base *)"Message",(uint)(pcVar10 + -0x52a3dc));
    local_4c = 0xf;
    local_8 = 5;
    local_50 = 0;
    local_60 = local_60 & 0xffffff00;
    pcVar14 = "There is now a new high score file format.  I\'m deleting the old one!";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_64,(_String_base *)
                           "There is now a new high score file format.  I\'m deleting the old one!",
                  (uint)(pcVar10 + -0x52a858));
    local_8 = CONCAT31(local_8._1_3_,6);
    (**(code **)(*param_1 + 0x6c))();
    if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_01,extraout_EDX_02);
    }
    local_4c = 0xf;
    local_50 = 0;
    local_60 = local_60 & 0xffffff00;
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_38,extraout_EDX_02);
    }
  }
  local_8 = 0xffffffff;
  local_1c = (int *)&stack0xffad87fc;
  local_44 = &stack0xffad8958;
  local_40 = &DAT_00527720;
  puVar6 = &DAT_005275e4;
  do {
    pcVar14 = (char *)(puVar6 + -7);
    do {
      cVar1 = *pcVar14;
      local_44[(int)pcVar14] = cVar1;
      pcVar14 = pcVar14 + 1;
    } while (cVar1 != '\0');
    local_c4 = *puVar6;
    local_c8 = puVar6[-1];
    pcVar14 = (char *)(local_40 + -6);
    do {
      cVar1 = *pcVar14;
      *(char *)((int)local_1c + (int)pcVar14) = cVar1;
      pcVar14 = pcVar14 + 1;
    } while (cVar1 != '\0');
    local_e4 = *local_40;
    local_c0 = local_c4;
    Vector_PushBack_36ByteObjects(param_1 + 0x50e,local_e0);
    Vector_PushBack_28ByteObjects(param_1 + 0x512,local_fc);
    local_44 = local_44 + -0x20;
    puVar6 = puVar6 + 8;
    local_1c = (int *)((int)local_1c + -0x1c);
    local_40 = local_40 + 7;
  } while ((int)puVar6 < 0x527724);
LAB_0040d77d:
  if (local_48 != (undefined4 *)0x0) {
    (**(code **)*local_48)();
  }
  local_1c = param_1 + 0x249;
  local_44 = "RubberStampLET42";
  do {
    local_40 = (int *)operator_new(0x50);
    local_8 = 7;
    if (local_40 == (undefined4 *)0x0) {
      puVar6 = (undefined4 *)0x0;
      uVar13 = extraout_EDX_03;
    }
    else {
      local_24 = 0xf;
      local_28 = 0;
      local_38 = local_38 & 0xffffff00;
      pcVar14 = ".txt";
      do {
        pcVar10 = pcVar14;
        pcVar14 = pcVar10 + 1;
      } while (*pcVar10 != '\0');
      String_Assign(local_3c,(_String_base *)&DAT_0052a850,(uint)(pcVar10 + -0x52a850));
      local_8 = CONCAT31(local_8._1_3_,8);
      local_20 = local_20 | 1;
      local_4c = 0xf;
      local_50 = 0;
      local_60 = local_60 & 0xffffff00;
      pcVar14 = "Fonts\\";
      do {
        pcVar10 = pcVar14;
        pcVar14 = pcVar10 + 1;
      } while (*pcVar10 != '\0');
      String_Assign(local_64,(_String_base *)&DAT_0052a848,(uint)(pcVar10 + -0x52a848));
      local_20 = local_20 | 2;
      local_8 = 9;
      p_Var5 = Intel_DisplayPopulationData
                         (local_44,(uint)local_64,local_80,(_String_base *)local_64,
                          (_String_base *)local_44);
      uVar13 = local_20;
      local_20 = local_20 | 4;
      local_8 = 10;
      p_Var5 = Background_ProcessBackgroundLayer
                         (local_3c,(uint)local_bc,(_String_base *)local_bc,p_Var5,(int)local_3c);
      local_20 = uVar13 | 0xc;
      local_8 = 0xb;
      puVar6 = Font_LoadFromFile(local_40,param_1,p_Var5);
      uVar13 = extraout_EDX_04;
    }
    *local_1c = (int)puVar6;
    if ((local_20 & 8) != 0) {
      local_20 = local_20 & 0xfffffff7;
      if (0xf < local_a4) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_20,local_b8);
      }
      local_a4 = 0xf;
      local_a8 = 0;
      local_b8 = local_b8 & 0xffffff00;
    }
    if ((local_20 & 4) != 0) {
      local_20 = local_20 & 0xfffffffb;
      if (0xf < local_68) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_20,uVar13);
      }
      local_68 = 0xf;
      local_6c = 0;
      local_7c = local_7c & 0xffffff00;
    }
    if ((local_20 & 2) != 0) {
      local_20 = local_20 & 0xfffffffd;
      if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_60,uVar13);
      }
      local_4c = 0xf;
      local_50 = 0;
      local_60 = local_60 & 0xffffff00;
    }
    local_8 = 0xffffffff;
    if ((local_20 & 1) != 0) {
      local_20 = local_20 & 0xfffffffe;
      if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_20,local_38);
      }
      local_24 = 0xf;
      local_28 = 0;
      local_38 = local_38 & 0xffffff00;
    }
    local_1c = local_1c + 1;
    local_44 = local_44 + 0x1e;
  } while ((int)local_44 < 0x5274c0);
  local_1c = (int *)0x0;
  pcVar14 = "LoveTheme.ogg";
  do {
    local_8 = 0xffffffff;
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    pcVar10 = "music\\";
    do {
      pcVar7 = pcVar10;
      pcVar10 = pcVar7 + 1;
    } while (*pcVar7 != '\0');
    String_Assign(local_3c,(_String_base *)&DAT_0052a840,(uint)(pcVar7 + -0x52a840));
    local_8 = 0x10;
    Intel_DisplayPopulationData(local_80,extraout_EDX_05,local_80,local_3c,(_String_base *)pcVar14);
    local_8 = CONCAT31(local_8._1_3_,0x11);
    (**(code **)(*(int *)param_1[0xcc] + 4))();
    if (0xf < local_68) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_7c,extraout_EDX_06);
    }
    local_68 = 0xf;
    local_6c = 0;
    local_7c = local_7c & 0xffffff00;
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,local_38);
    }
    pcVar14 = (char *)((_String_base *)pcVar14 + 0x2c);
    local_1c = (int *)((int)local_1c + 1);
    local_38 = local_38 & 0xffffff00;
  } while ((int)pcVar14 < 0x5275c8);
  local_40 = param_1 + 0x1a2;
  piVar15 = &DAT_0052784c;
  do {
    local_8 = 0xffffffff;
    local_24 = 0xf;
    local_28 = 0;
    local_68 = 0xf;
    local_6c = 0;
    local_1c = (int *)operator_new(0x20);
    local_8 = 0x12;
    if (local_1c == (int *)0x0) {
      iVar11 = 0;
    }
    else {
      iVar11 = Sprite_GetWidth(local_1c,param_1);
    }
    local_8 = 0xffffffff;
    local_24 = 0xf;
    local_28 = 0;
    *local_40 = iVar11;
    local_38 = local_38 & 0xffffff00;
    pcVar14 = "images\\";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_3c,(_String_base *)"images\\",(uint)(pcVar10 + -0x52a1a0));
    local_8 = 0x13;
    p_Var5 = Intel_DisplayPopulationData
                       (local_80,(uint)(piVar15 + -0xb),local_80,local_3c,
                        (_String_base *)(piVar15 + -0xb));
    local_8 = CONCAT31(local_8._1_3_,0x14);
    Sprite_GetHeight((void *)*local_40,p_Var5,piVar15[-1],*piVar15);
    if (0xf < local_68) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_03,extraout_EDX_07);
    }
    local_68 = 0xf;
    local_6c = 0;
    local_7c = local_7c & 0xffffff00;
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_38,extraout_EDX_07);
    }
    piVar15 = piVar15 + 0xd;
    local_40 = local_40 + 1;
    uVar13 = local_38 >> 8;
    local_38 = uVar13 << 8;
  } while ((int)piVar15 < 0x527a88);
  local_24 = 0xf;
  local_28 = 0;
  local_38 = uVar13 << 8;
  pcVar14 = "sounds\\";
  do {
    pcVar10 = pcVar14;
    pcVar14 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_3c,(_String_base *)"sounds\\",(uint)(pcVar10 + -0x52a198));
  local_8 = 0x15;
  p_Var5 = Intel_DisplayPopulationData
                     (extraout_ECX_04,(uint)local_3c,local_80,local_3c,(_String_base *)"gunpowerup")
  ;
  puVar6 = (undefined4 *)0x0;
  local_8 = CONCAT31(local_8._1_3_,0x16);
  (**(code **)(*(int *)param_1[0x10e] + 8))();
  if (0xf < local_68) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_05,extraout_EDX_08);
  }
  local_68 = 0xf;
  local_6c = 0;
  local_7c = local_7c & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_38,extraout_EDX_08);
  }
  (**(code **)(*(int *)param_1[0x10e] + 0x14))();
  local_1c = param_1 + 0x23f;
  iVar11 = 0;
  do {
    iVar11 = iVar11 + 1;
    Exception_Release(local_11c,"images\\target%i");
    p_Var8 = local_11c;
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    do {
      _Var2 = *p_Var8;
      p_Var8 = p_Var8 + 1;
    } while (_Var2 != (_String_base)0x0);
    String_Assign(local_3c,local_11c,(int)p_Var8 - (int)(local_11c + 1));
    local_8 = 0x17;
    iVar9 = (**(code **)(*param_1 + 0xe8))();
    local_8 = 0xffffffff;
    *local_1c = iVar9;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler((int)local_1c,local_38);
    }
    local_1c = local_1c + 1;
    local_24 = 0xf;
    local_28 = 0;
    uVar13 = local_38 >> 8;
    local_38 = uVar13 << 8;
  } while (iVar11 < 8);
  local_24 = 0xf;
  local_28 = 0;
  local_38 = uVar13 << 8;
  pcVar14 = "LastUser";
  do {
    pcVar10 = pcVar14;
    pcVar14 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_3c,(_String_base *)"LastUser",(uint)(pcVar10 + -0x52a45c));
  local_8 = 0x18;
  uVar4 = STL_Vector_Erase(param_1,local_3c,param_1 + 0x2d0);
  local_15 = (char)uVar4 == '\0';
  local_8 = 0xffffffff;
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_38,extraout_EDX_09);
  }
  if ((bool)local_15) {
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    pcVar14 = "LastUser";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_3c,(_String_base *)"LastUser",(uint)(pcVar10 + -0x52a45c));
    local_8 = 0x19;
    STL_Vector_Resize(param_1,local_3c);
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_06,extraout_EDX_10);
    }
    param_1[0x2d0] = 0;
  }
  local_8 = 0xffffffff;
  pcVar14 = "@Particles";
  local_24 = 0xf;
  local_28 = 0;
  local_38 = local_38 & 0xffffff00;
  do {
    pcVar14 = pcVar14 + 1;
  } while (*pcVar14 != '\0');
  String_Assign(local_3c,(_String_base *)0x52a450,(uint)(pcVar14 + -0x52a450));
  local_8 = 0x1a;
  uVar4 = STL_Vector_Erase(param_1,local_3c,&local_84);
  local_15 = (char)uVar4 == '\0';
  local_8 = 0xffffffff;
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_07,extraout_EDX_11);
  }
  if ((bool)local_15) {
    pcVar14 = "@Particles";
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    do {
      pcVar14 = pcVar14 + 1;
    } while (*pcVar14 != '\0');
    String_Assign(local_3c,(_String_base *)0x52a450,(uint)(pcVar14 + -0x52a450));
    local_8 = 0x1b;
    STL_Vector_Resize(param_1,local_3c);
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_08,local_38);
    }
    param_1[0x2ca] = 0;
    param_1[0x2cb] = 0x3ff00000;
  }
  else {
    *(double *)(param_1 + 0x2ca) = (double)local_84 * _DAT_0052a828;
  }
  local_8 = 0xffffffff;
  local_24 = 0xf;
  local_28 = 0;
  local_38 = local_38 & 0xffffff00;
  pcVar14 = "AutoUpdate";
  do {
    pcVar10 = pcVar14;
    pcVar14 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_3c,(_String_base *)"AutoUpdate",(uint)(pcVar10 + -0x52a43c));
  local_8 = 0x1c;
  uVar4 = STL_Vector_Clear(param_1,local_3c,param_1 + 0x2cf);
  local_15 = (char)uVar4 == '\0';
  local_8 = 0xffffffff;
  if (local_24 < 0x10) {
    if ((bool)local_15) {
      local_24 = 0xf;
      local_28 = 0;
      local_38 = local_38 & 0xffffff00;
      pcVar14 = "AutoUpdate";
      do {
        pcVar10 = pcVar14;
        pcVar14 = pcVar10 + 1;
      } while (*pcVar10 != '\0');
      String_Assign(local_3c,(_String_base *)"AutoUpdate",(uint)(pcVar10 + -0x52a43c));
      local_8 = 0x1d;
      STL_Vector_PushBack(param_1,local_3c,'\0');
      local_8 = 0xffffffff;
      if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_09,extraout_EDX_13);
      }
    }
    local_8 = 0xffffffff;
    *(undefined1 *)(param_1 + 0x151) = 1;
    *(undefined1 *)(param_1 + 0x14d) = 1;
    *(undefined1 *)(param_1 + 0x11f) = 0;
    System_GetSystemTime(param_1,0,*(int *)(param_1[0x1ab] + 8));
    System_GetSystemTime(param_1,1,*(int *)(param_1[0x1aa] + 8));
    System_GetSystemTime(param_1,2,*(int *)(param_1[0x1a9] + 8));
    System_GetSystemTime(param_1,3,*(int *)(param_1[0x1ac] + 8));
    CraftSystem_LoadCraftXML((int)param_1);
    LevelSystem_LoadLevelsXML();
    AnimationSystem_LoadAnimsXML();
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    pcVar14 = "MaxPlays";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_3c,(_String_base *)"MaxPlays",(uint)(pcVar10 + -0x52a2a8));
    local_8 = 0x1e;
    local_1c = (int *)HTTP_SetUserAgent(param_1,local_3c,0);
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_38,extraout_EDX_14);
    }
    local_24 = 0xf;
    local_28 = 0;
    local_38 = local_38 & 0xffffff00;
    pcVar14 = "MaxExecutions";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_3c,(_String_base *)"MaxExecutions",(uint)(pcVar10 + -0x52a298));
    local_8 = 0x1f;
    local_44 = (char *)HTTP_SetUserAgent(param_1,local_3c,0);
    local_8 = 0xffffffff;
    if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_10,extraout_EDX_15);
    }
    local_88 = 0xf;
    local_8c = 0;
    local_9c = local_9c & 0xffffff00;
    pcVar14 = "MaxTime";
    do {
      pcVar10 = pcVar14;
      pcVar14 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_a0,(_String_base *)"MaxTime",(uint)(pcVar10 + -0x52a2b4));
    local_8 = 0x20;
    iVar11 = HTTP_SetUserAgent(param_1,local_a0,0x3c);
    local_8 = 0xffffffff;
    if (local_88 < 0x10) {
      local_88 = 0xf;
      local_8c = 0;
      local_9c = local_9c & 0xffffff00;
      if (((char)param_1[0x19d] == '\0') &&
         ((((0 < (int)local_1c && ((int)local_1c <= param_1[0x19e])) ||
           ((0 < (int)local_44 && ((int)local_44 < param_1[0x19f])))) ||
          ((0 < iVar11 && (iVar11 <= param_1[0x19e])))))) {
        uVar3 = 1;
      }
      else {
        uVar3 = 0;
      }
      *(undefined1 *)((int)param_1 + 0xb32) = uVar3;
      if (((char)param_1[0x2cf] != '\0') && (*(char *)((int)param_1 + 0x5fd) == '\0')) {
        UpdateSystem_CheckForUpdates(param_1,'\x01');
      }
      local_1c = (int *)operator_new(0x88);
      local_8 = 0x21;
      if (local_1c == (int *)0x0) {
        piVar15 = (int *)0x0;
      }
      else {
        piVar15 = Weapon_ProcessLaserCannon(local_1c,param_1);
      }
      local_8 = 0xffffffff;
      param_1[0x252] = (int)piVar15;
      SexyWidget_GetColor((void *)param_1[0xb7],piVar15);
      UI_Widget_ApplyBlending((void *)param_1[0xb7],(int *)param_1[0x252]);
      (**(code **)(*(int *)param_1[0x252] + 0xbc))();
      ExceptionList = local_10;
      Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),puVar6,(undefined4 *)p_Var5);
      return;
    }
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_11,local_9c);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(local_38,extraout_EDX_12);
}


