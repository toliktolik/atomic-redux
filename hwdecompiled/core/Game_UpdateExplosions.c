/*
 * Function: Game_UpdateExplosions
 * Address: 00487be0
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Game_UpdateExplosions(void *this,int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int extraout_ECX;
  int iVar5;
  int iVar6;
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  int local_8;
  
  iVar1 = SexyWidget_GetWidth(param_1);
  iVar2 = SexyWidget_GetHeight(extraout_ECX);
  *(int *)((int)this + 0x24) = iVar1;
  *(int *)((int)this + 0x28) = iVar2;
  SexyWidget_GetGeometry
            ((int *)((int)this + 0x24),(int *)((int)this + 0x28),'\0','\x01',
             (byte)*(undefined4 *)((int)this + 0x40));
  param_1 = iVar1 % *(int *)((int)this + 0x24);
  local_c = *(int *)((int)this + 0x28);
  iVar3 = *(int *)((int)this + 0x24);
  if (0 < param_1) {
    SexyWidget_GetGeometry(&param_1,&local_c,'\x01','\x01',(byte)*(undefined4 *)((int)this + 0x40));
    iVar3 = param_1;
  }
  param_1 = iVar3;
  local_10 = *(int *)((int)this + 0x24);
  local_8 = iVar2 % *(int *)((int)this + 0x28);
  iVar3 = *(int *)((int)this + 0x28);
  if (0 < local_8) {
    SexyWidget_GetGeometry(&local_10,&local_8,'\x01','\x01',(byte)*(undefined4 *)((int)this + 0x40))
    ;
    iVar3 = local_8;
  }
  local_8 = iVar3;
  local_14 = param_1;
  local_18 = local_8;
  SexyWidget_GetGeometry(&local_14,&local_18,'\x01','\x01',(byte)*(undefined4 *)((int)this + 0x40));
  iVar3 = (*(int *)((int)this + 0x24) + -1 + iVar1) / *(int *)((int)this + 0x24);
  iVar4 = (*(int *)((int)this + 0x28) + -1 + iVar2) / *(int *)((int)this + 0x28);
  *(int *)((int)this + 0x1c) = iVar3;
  *(int *)((int)this + 0x20) = iVar4;
  D3D_Present(this,iVar4 * iVar3);
  iVar3 = 0;
  iVar4 = 0;
  while( true ) {
    iVar6 = *(int *)((int)this + 4);
    if (iVar6 == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = (*(int *)((int)this + 8) - iVar6) / 0xc;
    }
    if (iVar5 <= iVar3) break;
    *(undefined4 *)(iVar4 + iVar6) = 0;
    *(undefined4 *)(iVar4 + 4 + iVar6) = *(undefined4 *)((int)this + 0x24);
    *(undefined4 *)(iVar4 + 8 + iVar6) = *(undefined4 *)((int)this + 0x28);
    iVar3 = iVar3 + 1;
    iVar4 = iVar4 + 0xc;
  }
  iVar3 = *(int *)((int)this + 0x1c) + -1;
  while( true ) {
    iVar4 = *(int *)((int)this + 4);
    if (iVar4 == 0) {
      iVar6 = 0;
    }
    else {
      iVar6 = (*(int *)((int)this + 8) - iVar4) / 0xc;
    }
    if (iVar6 <= iVar3) break;
    iVar4 = iVar4 + iVar3 * 0xc;
    *(int *)(iVar4 + 4) = param_1;
    *(int *)(iVar4 + 8) = local_c;
    iVar3 = iVar3 + *(int *)((int)this + 0x1c);
  }
  iVar3 = (*(int *)((int)this + 0x20) + -1) * *(int *)((int)this + 0x1c);
  iVar4 = iVar3 * 0xc;
  while( true ) {
    iVar6 = *(int *)((int)this + 4);
    if (iVar6 == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = (*(int *)((int)this + 8) - iVar6) / 0xc;
    }
    if (iVar5 <= iVar3) break;
    *(int *)(iVar4 + 4 + iVar6) = local_10;
    *(int *)(iVar4 + 8 + iVar6) = local_8;
    iVar3 = iVar3 + 1;
    iVar4 = iVar4 + 0xc;
  }
  *(int *)(*(int *)((int)this + 8) + -8) = local_14;
  *(int *)(*(int *)((int)this + 8) + -4) = local_18;
  *(float *)((int)this + 0x34) = (float)iVar1 / (float)*(int *)((int)this + 0x24);
  *(float *)((int)this + 0x38) = (float)iVar2 / (float)*(int *)((int)this + 0x28);
  return;
}


