/*
 * Function: Game_InputStateHandler
 * Address: 00417090
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
Game_InputStateHandler(void *this,undefined4 param_1,undefined4 param_2,int param_3,int param_4)

{
  byte *pbVar1;
  void *this_00;
  int iVar2;
  undefined4 in_stack_ffffffc8;
  undefined4 in_stack_ffffffcc;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005102ab;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(undefined4 *)((int)this + 0x60) = param_1;
  *(undefined4 *)((int)this + 100) = param_2;
  if ((param_3 == 0) && (param_4 != 0)) {
    *(undefined1 *)((int)this + 0x128) = 0;
    if (*(int *)((int)this + 300) != 0) {
      iVar2 = **(int **)((int)this + 0x5c);
      Math_FloatToUInt64();
      (**(code **)(iVar2 + 0xb8))();
    }
    if ((*(int *)((int)this + 0x1d8) < 2) && (*(int *)((int)this + 0x1d8) != 0)) {
      iVar2 = *(int *)((int)this + 0x1d4) + 1;
      *(int *)((int)this + 0x1d4) = iVar2;
      if ((((5 < iVar2) &&
           (iVar2 = *(int *)((int)this + 0x5c),
           (*(byte *)(*(int *)(iVar2 + 0xb40) * 0x60 + *(int *)(iVar2 + 0x148c) + 0x42) & 2) == 0))
          && ((*(byte *)(iVar2 + 0xb3e) & 1) == 0)) &&
         ((*(int *)(iVar2 + 0x958) == 0 && (*(char *)((int)this + 0x327) == '\0')))) {
        *(undefined4 *)((int)this + 0x1d4) = 0;
        this_00 = operator_new(0x128);
        local_8 = 0;
        if (this_00 != (void *)0x0) {
          Level_InitializeDictastroika
                    (&stack0xffffffc8,
                     "You can auto-fire by holding down the left mouse button. Don\'t worry, you can\'t run out of ammo!"
                    );
          TipDialog_Constructor
                    (this_00,*(int *)((int)this + 0x5c),in_stack_ffffffc8,in_stack_ffffffcc);
        }
        local_8 = 0xffffffff;
        (**(code **)(**(int **)((int)this + 0x5c) + 0x100))();
        pbVar1 = (byte *)(*(int *)((int)this + 0x5c) + 0xb3e);
        *pbVar1 = *pbVar1 | 1;
      }
    }
    else {
      *(undefined4 *)((int)this + 0x1d4) = 0;
    }
  }
  if ((((*(char *)((int)this + 0x20) == '\0') && (*(char *)((int)this + 0x128) == '\0')) &&
      ((*(int *)((int)this + 0x300) == 0 && (*(int *)((int)this + 0x308) == 0)))) &&
     ((*(int *)((int)this + 0x17c) <= *(int *)((int)this + 0x184) ||
      (*(char *)((int)this + 0x327) != '\0')))) {
    Physics_ProcessCollisions((int)this);
  }
  ExceptionList = local_10;
  return;
}


