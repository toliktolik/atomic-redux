/*
 * Function: GameEngine_ProcessStateTransitions
 * Address: 0040d020
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall GameEngine_ProcessStateTransitions(void *param_1,uint param_2)

{
  char *pcVar1;
  int *piVar2;
  char *pcVar3;
  int iVar4;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  undefined4 *puVar5;
  undefined1 local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  void *local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0050fe7b;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(undefined4 *)((int)param_1 + 0xb08) = 0;
  *(undefined4 *)((int)param_1 + 0xb0c) = 0;
  *(undefined4 *)((int)param_1 + 0xb10) = 0;
  *(undefined4 *)((int)param_1 + 0xb14) = 0;
  *(undefined4 *)((int)param_1 + 0xb18) = 0;
  *(undefined4 *)((int)param_1 + 0xb1c) = 0;
  *(undefined4 *)((int)param_1 + 0xb20) = 0;
  *(undefined4 *)((int)param_1 + 0x964) = 1;
  *(undefined4 *)((int)param_1 + 0x95c) = 0;
  WaveSystem_LoadWavesXML(param_1,param_2,1);
  puVar5 = (undefined4 *)((int)param_1 + 0x968);
  for (iVar4 = 6; iVar4 != 0; iVar4 = iVar4 + -1) {
    *puVar5 = 0;
    puVar5 = puVar5 + 1;
  }
  puVar5 = (undefined4 *)((int)param_1 + 0x980);
  for (iVar4 = 6; iVar4 != 0; iVar4 = iVar4 + -1) {
    *puVar5 = 0;
    puVar5 = puVar5 + 1;
  }
  *(undefined4 *)((int)param_1 + 0x968) = 1;
  local_14 = operator_new(0x368);
  local_8 = 0;
  if (local_14 == (void *)0x0) {
    piVar2 = (int *)0x0;
  }
  else {
    piVar2 = GameEngine_Constructor(local_14,param_1,1);
  }
  local_8 = 0xffffffff;
  *(int **)((int)param_1 + 0x920) = piVar2;
  SexyWidget_GetColor(*(void **)((int)param_1 + 0x2dc),piVar2);
  UI_ValidateChildBinding(*(void **)((int)param_1 + 0x2dc),*(int **)((int)param_1 + 0x920));
  UI_Widget_ApplyBlending(*(void **)((int)param_1 + 0x2dc),*(int **)((int)param_1 + 0x920));
  (**(code **)(**(int **)((int)param_1 + 0x920) + 0xbc))();
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  pcVar1 = "images\\backgrounds\\survival_sky";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_30,(_String_base *)"images\\backgrounds\\survival_sky",
                (uint)(pcVar3 + -0x52a804));
  local_8 = 1;
  Sprite_GetHeight(*(void **)((int)param_1 + 0x6b8),local_30,1,1);
  local_8 = 0xffffffff;
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_2c,extraout_EDX);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  iVar4 = *(int *)(*(int *)((int)param_1 + 0x6b8) + 8);
  *(uint *)(iVar4 + 0x24) = *(uint *)(iVar4 + 0x24) | 8;
  pcVar1 = "images\\backgrounds\\survival_bg";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_30,(_String_base *)"images\\backgrounds\\survival_bg",
                (uint)(pcVar3 + -0x52a7e4));
  local_8 = 2;
  Sprite_GetHeight(*(void **)((int)param_1 + 0x6bc),local_30,1,1);
  local_8 = 0xffffffff;
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_2c,extraout_EDX_00);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  pcVar1 = "images\\backgrounds\\survival_bg2";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_30,(_String_base *)"images\\backgrounds\\survival_bg2",
                (uint)(pcVar3 + -0x52a7c4));
  local_8 = 3;
  Sprite_GetHeight(*(void **)((int)param_1 + 0x6c0),local_30,1,1);
  local_8 = 0xffffffff;
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
  }
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  pcVar1 = "images\\backgrounds\\survival_ground";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_4c,(_String_base *)"images\\backgrounds\\survival_ground",
                (uint)(pcVar3 + -0x52a7a0));
  local_8 = 4;
  Sprite_GetHeight(*(void **)((int)param_1 + 0x6c8),local_4c,1,1);
  if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_48);
  }
  ExceptionList = local_10;
  return;
}


