/*
 * Function: Settings_ApplyChanges
 * Address: 00428e60
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall
Settings_ApplyChanges(void *this,int param_1,char param_2,undefined4 param_3)

{
  _String_base _Var1;
  _String_base *p_Var2;
  undefined4 *puVar3;
  void *pvVar4;
  char *pcVar5;
  int *piVar6;
  int extraout_ECX;
  _String_base *p_Var7;
  int extraout_ECX_00;
  uint extraout_EDX;
  int iVar8;
  uint extraout_EDX_00;
  char *pcVar9;
  _String_base local_84 [4];
  uint local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [4];
  uint local_64;
  undefined4 local_54;
  uint local_50;
  _String_base local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  undefined1 local_30 [4];
  uint local_2c;
  undefined1 local_24 [8];
  undefined4 local_1c;
  uint local_18;
  void *local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005115d9;
  local_10 = ExceptionList;
  local_6c = 0xf;
  local_70 = 0;
  local_80 = local_80 & 0xffffff00;
  pcVar9 = "";
  do {
    pcVar5 = pcVar9;
    pcVar9 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  ExceptionList = &local_10;
  local_14 = this;
  String_Assign(local_84,(_String_base *)&DAT_0052c7cf,(uint)(pcVar5 + -0x52c7cf));
  local_50 = 0xf;
  local_8 = 0;
  local_54 = 0;
  local_64 = local_64 & 0xffffff00;
  pcVar9 = "Please enter your name.";
  do {
    pcVar5 = pcVar9;
    pcVar9 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_68,(_String_base *)"Please enter your name.",(uint)(pcVar5 + -0x52e76c));
  local_8._0_1_ = 1;
  pcVar9 = "RENAME USER";
  if (param_2 == '\0') {
    pcVar9 = "NEW USER";
  }
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  p_Var2 = (_String_base *)pcVar9;
  do {
    _Var1 = *p_Var2;
    p_Var2 = p_Var2 + 1;
  } while (_Var1 != (_String_base)0x0);
  String_Assign(local_4c,(_String_base *)pcVar9,(int)p_Var2 - (int)((_String_base *)pcVar9 + 1));
  local_8._0_1_ = 2;
  SexyWidget_ProcessScale
            (this,*(int *)(*(int *)(param_1 + 0x714) + 8),0,0x1b,1,local_4c,(uint)local_68,local_84,
             0);
  if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_48);
  }
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX);
  }
  local_50 = 0xf;
  local_54 = 0;
  local_64 = local_64 & 0xffffff00;
  local_8._0_1_ = 4;
  if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_80,extraout_EDX);
  }
  *(undefined ***)((int)this + 0x114) = &PTR_Algorithm_IterSwap_0052ca90;
  *(undefined ***)this = &PTR_Settings_ValidateConfiguration_0052e680;
  *(undefined ***)((int)this + 0x58) = &PTR_EmptyFunction_NoOp_0052e660;
  *(undefined ***)((int)this + 0x114) = &PTR_LAB_0052e650;
  *(int *)((int)this + 0x118) = param_1;
  *(char *)((int)this + 0x129) = param_2;
  *(undefined4 *)((int)this + 300) = param_3;
  local_6c = 0xf;
  local_70 = 0;
  local_80 = local_80 & 0xffffff00;
  if (*(int *)(param_1 + 0x148c) == 0) {
    iVar8 = 0;
  }
  else {
    iVar8 = (*(int *)(param_1 + 0x1490) - *(int *)(param_1 + 0x148c)) / 0x60;
  }
  *(bool *)((int)this + 0x128) = iVar8 == 0;
  UI_InitializeWidgetManager(this,*(undefined4 *)(param_1 + 0x92c));
  UI_Widget_SetCallback(this,*(int **)(param_1 + 0x928));
  UI_Widget_ProcessCallback(this,*(int **)(param_1 + 0x92c));
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xff,0xff,0);
  SexyWidget_GetAnimationFrame(this,0,puVar3);
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xc0,0xc0,0xc0);
  SexyWidget_GetAnimationFrame(this,1,puVar3);
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0,0,0);
  SexyWidget_GetAnimationFrame(this,3,puVar3);
  puVar3 = (undefined4 *)CreateColor(local_24,0x19,0x19,0x19,0x19);
  *(undefined4 *)((int)this + 0xe0) = *puVar3;
  *(undefined4 *)((int)this + 0xe4) = puVar3[1];
  *(undefined4 *)((int)this + 0xe8) = puVar3[2];
  *(undefined4 *)((int)this + 0xec) = puVar3[3];
  pvVar4 = operator_new(0x108);
  local_8._0_1_ = 7;
  if (pvVar4 == (void *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    puVar3 = UIButton_Constructor(pvVar4,*(int *)((int)this + 0x118),(int)this + 0x58,0x1c);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 0x11c) = puVar3;
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0x40,0xc0,0x40);
  UIButton_SetColor(*(void **)((int)this + 0x11c),puVar3);
  pcVar9 = "OK";
  do {
    pcVar5 = pcVar9;
    pcVar9 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign((void *)(*(int *)((int)this + 0x11c) + 0x5c),(_String_base *)&DAT_0052d4f8,
                (uint)(pcVar5 + -0x52d4f8));
  pvVar4 = operator_new(0x108);
  local_8._0_1_ = 8;
  if (pvVar4 == (void *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    puVar3 = UIButton_Constructor(pvVar4,*(int *)((int)this + 0x118),(int)this + 0x58,0x1d);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 0x120) = puVar3;
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xc0,0x40,0x40);
  UIButton_SetColor(*(void **)((int)this + 0x120),puVar3);
  pcVar9 = "Cancel";
  do {
    pcVar5 = pcVar9;
    pcVar9 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign((void *)(*(int *)((int)this + 0x120) + 0x5c),(_String_base *)"Cancel",
                (uint)(pcVar5 + -0x52e758));
  pvVar4 = operator_new(0xf4);
  local_8._0_1_ = 9;
  if (pvVar4 == (void *)0x0) {
    piVar6 = (int *)0x0;
  }
  else {
    piVar6 = SexyWidget_UpdateAnimation(pvVar4,0x1e,(int)this + 0x114);
  }
  *(int **)((int)this + 0x124) = piVar6;
  local_8._0_1_ = 4;
  (**(code **)(*piVar6 + 0xc4))(*(undefined4 *)(*(int *)((int)this + 0x118) + 0x92c),0);
  SexyWidget_ValidateInput
            (*(void **)((int)this + 0x124),*(int **)(*(int *)((int)this + 0x118) + 0x928),0xe6);
  *(undefined4 *)(*(int *)((int)this + 0x124) + 0xc0) = 0x14;
  (**(code **)(**(int **)((int)this + 0x124) + 0x18))(&DAT_00561d58,5);
  if (*(char *)((int)this + 0x129) != '\0') {
    local_18 = 0xf;
    p_Var7 = (_String_base *)
             (*(int *)((int)this + 300) * 0x60 + *(int *)(*(int *)((int)this + 0x118) + 0x148c));
    local_1c = 0;
    local_2c = local_2c & 0xffffff00;
    p_Var2 = p_Var7;
    do {
      _Var1 = *p_Var2;
      p_Var2 = p_Var2 + 1;
    } while (_Var1 != (_String_base)0x0);
    String_Assign(local_30,p_Var7,(int)p_Var2 - (int)(p_Var7 + 1));
    local_8._0_1_ = 10;
    (**(code **)(**(int **)((int)this + 0x124) + 200))(local_30,1);
    local_8._0_1_ = 4;
    if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
    }
  }
  *(undefined4 *)((int)this + 0x10) = 0x14a;
  *(undefined4 *)((int)this + 0x14) = 0xbe;
  Settings_ProcessFramerateCap(this,0x9b,0x91,0x14a,0xbe);
  ExceptionList = local_10;
  return (undefined4 *)this;
}


