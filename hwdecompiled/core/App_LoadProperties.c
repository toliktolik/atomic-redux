/*
 * Function: App_LoadProperties
 * Address: 004b17a0
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall App_LoadProperties(void *param_1)

{
  char *pcVar1;
  char cVar2;
  undefined1 uVar3;
  _String_base *p_Var4;
  char *pcVar5;
  undefined4 *puVar6;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  int extraout_ECX_04;
  int extraout_ECX_05;
  int iVar7;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff58;
  undefined4 *in_stack_ffffff5c;
  uint local_90;
  _String_base local_8c [4];
  uint local_88;
  int local_78;
  uint local_74;
  undefined1 local_70 [4];
  uint local_6c;
  undefined4 local_5c;
  uint local_58;
  _String_base local_54 [4];
  uint local_50;
  undefined4 local_40;
  uint local_3c;
  void *local_38;
  undefined1 local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  char local_15;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x516cc1;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  cVar2 = Registry_CloseKey((int)param_1);
  local_38 = (void *)CONCAT31(local_38._1_3_,'\x01' - (cVar2 != '\0'));
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  pcVar1 = "properties\\partner.xml";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_34,(_String_base *)"properties\\partner.xml",(uint)(pcVar5 + -0x536c60));
  local_8 = 0;
  PropertiesFile_Load(param_1,(int)local_34,'\0',(char)local_38);
  local_8 = 0xffffffff;
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_30);
  }
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  pcVar1 = "NoReg";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_34,(_String_base *)"NoReg",(uint)(pcVar5 + -0x536c58));
  local_8 = 1;
  local_15 = HTTP_DecodeURL(param_1,local_34,0);
  local_8 = 0xffffffff;
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_30,extraout_EDX);
  }
  if (local_15 != '\0') {
    *(undefined1 *)((int)param_1 + 0x674) = 1;
    *(undefined1 *)((int)param_1 + 0x675) = 1;
  }
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  pcVar1 = "ProdName";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_34,(_String_base *)"ProdName",(uint)(pcVar5 + -0x536c4c));
  local_8 = 2;
  p_Var4 = HTTP_AddHeader(param_1,local_54,local_34,(uint)((int)param_1 + 0x24));
  local_8 = CONCAT31(local_8._1_3_,3);
  PowerUp_ProcessThunderstrike
            ((_String_base *)((int)param_1 + 0x24),extraout_EDX_00,p_Var4,0,0xffffffff);
  if (0xf < local_3c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_50,extraout_EDX_01);
  }
  local_3c = 0xf;
  local_40 = 0;
  local_50 = local_50 & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_30);
  }
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  pcVar1 = "DefaultWindowed";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_34,(_String_base *)"DefaultWindowed",(uint)(pcVar5 + -0x536c3c));
  local_8 = 4;
  uVar3 = HTTP_DecodeURL(param_1,local_34,*(undefined1 *)((int)param_1 + 0x2fe));
  *(undefined1 *)((int)param_1 + 0x2fe) = uVar3;
  local_8 = 0xffffffff;
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_01,local_30);
  }
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  pcVar1 = "";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_34,(_String_base *)&DAT_0052c7cf,(uint)(pcVar5 + -0x52c7cf));
  local_8 = 5;
  local_3c = 0xf;
  local_40 = 0;
  local_50 = local_50 & 0xffffff00;
  pcVar1 = "Title";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_54,(_String_base *)"Title",(uint)(pcVar5 + -0x536c34));
  local_8._0_1_ = 6;
  HTTP_AddHeader(param_1,local_8c,local_54,(uint)local_34);
  if (0xf < local_3c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_02,extraout_EDX_02);
  }
  local_3c = 0xf;
  local_40 = 0;
  local_50 = local_50 & 0xffffff00;
  local_8._0_1_ = 8;
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_30,extraout_EDX_02);
  }
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  if (local_78 != 0) {
    p_Var4 = Intel_DisplayPopulationData
                       (extraout_ECX_02,(uint)local_8c,(_String_base *)&stack0xffffff58,local_8c,
                        (_String_base *)&DAT_00531ca0);
    local_8._0_1_ = 10;
    p_Var4 = Background_ProcessBackgroundLayer
                       ((int)param_1 + 0x354,(uint)local_70,(_String_base *)local_70,p_Var4,
                        (int)param_1 + 0x354);
    local_8._0_1_ = 0xb;
    PowerUp_ProcessThunderstrike
              ((_String_base *)((int)param_1 + 0x40),extraout_EDX_03,p_Var4,0,0xffffffff);
    if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_03,extraout_EDX_04);
    }
    local_58 = 0xf;
    local_5c = 0;
    local_6c = local_6c & 0xffffff00;
    local_8._0_1_ = 8;
    if (0xf < local_90) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler((int)in_stack_ffffff5c,extraout_EDX_04);
    }
  }
  local_8._0_1_ = 8;
  Thunk_Graphics_DrawSprite(*(undefined4 **)((int)param_1 + 0x598));
  local_38 = operator_new(0x1a8);
  local_8 = CONCAT31(local_8._1_3_,0xc);
  if (local_38 == (void *)0x0) {
    puVar6 = (undefined4 *)0x0;
    iVar7 = extraout_ECX_04;
  }
  else {
    puVar6 = ErrorReporter_Constructor(local_38,param_1);
    iVar7 = extraout_ECX_05;
  }
  *(undefined4 **)((int)param_1 + 0x59c) = puVar6;
  if (0xf < local_74) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar7,local_88);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff58,in_stack_ffffff5c);
  return;
}


