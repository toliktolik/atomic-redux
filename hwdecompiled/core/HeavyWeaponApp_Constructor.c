/*
 * Function: HeavyWeaponApp_Constructor
 * Address: 004af980
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x004afbf0) */

void __fastcall HeavyWeaponApp_Constructor(undefined4 *param_1)

{
  _String_base _Var1;
  char *pcVar2;
  _String_base *p_Var3;
  undefined4 *puVar4;
  char *pcVar5;
  long lVar6;
  undefined4 extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffa0;
  uint in_stack_ffffffa4;
  uint local_48;
  _String_base local_44 [4];
  uint local_40;
  undefined4 local_30;
  uint local_2c;
  char local_28 [12];
  undefined4 *local_1c;
  undefined4 *local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0051698d;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  local_18 = param_1;
  SexyAppFramework_Constructor(param_1);
  *param_1 = &PTR_EmptyFunction_NoOp_0053690c;
  param_1[0x16e] = 0xf;
  param_1[0x16d] = 0;
  *(undefined1 *)(param_1 + 0x169) = 0;
  param_1[0x175] = 0xf;
  param_1[0x174] = 0;
  *(undefined1 *)(param_1 + 0x170) = 0;
  param_1[0x17d] = 0xf;
  param_1[0x17c] = 0;
  *(undefined1 *)(param_1 + 0x178) = 0;
  param_1[0x187] = 0xf;
  param_1[0x186] = 0;
  *(undefined1 *)(param_1 + 0x182) = 0;
  param_1[0x18e] = 0xf;
  param_1[0x18d] = 0;
  *(undefined1 *)(param_1 + 0x189) = 0;
  param_1[0x195] = 0xf;
  param_1[0x194] = 0;
  *(undefined1 *)(param_1 + 400) = 0;
  param_1[0x19c] = 0xf;
  param_1[0x19b] = 0;
  *(undefined1 *)(param_1 + 0x197) = 0;
  local_8._0_1_ = 7;
  local_8._1_3_ = 0;
  DAT_005a437c = param_1;
  param_1[0x19e] = 0;
  param_1[0x19f] = 0;
  *(undefined1 *)(param_1 + 0x1a0) = 0;
  *(undefined1 *)(param_1 + 0x19d) = 0;
  *(undefined1 *)((int)param_1 + 0x675) = 0;
  param_1[0x176] = 0;
  pcVar2 = "ingame";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(param_1 + 0x177,(_String_base *)"ingame",(uint)(pcVar5 + -0x536ad4));
  *(undefined1 *)(param_1 + 0x17f) = 0;
  *(undefined1 *)((int)param_1 + 0x5fd) = 0;
  param_1[0x17e] = 0;
  pcVar2 = "popcap";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign((_String_base *)(param_1 + 0x125),(_String_base *)"popcap",
                (uint)(pcVar5 + -0x536acc));
  p_Var3 = Intel_DisplayPopulationData
                     (extraout_ECX,extraout_EDX,(_String_base *)&stack0xffffffa0,
                      (_String_base *)(param_1 + 0x125),(_String_base *)&DAT_0053205c);
  local_8._0_1_ = 8;
  PowerUp_ProcessThunderstrike((_String_base *)(param_1 + 300),extraout_EDX_00,p_Var3,0,0xffffffff);
  local_8._0_1_ = 7;
  if (0xf < local_48) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(in_stack_ffffffa4,extraout_EDX_01);
  }
  pcVar2 = "PopCap";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(param_1 + 2,(_String_base *)"PopCap",(uint)(pcVar5 + -0x536ac4));
  local_1c = (undefined4 *)operator_new(0x538);
  local_8._0_1_ = 9;
  if (local_1c == (undefined4 *)0x0) {
    puVar4 = (undefined4 *)0x0;
  }
  else {
    puVar4 = Network_ClientManager_Constructor(local_1c);
  }
  param_1[0x166] = puVar4;
  local_8._0_1_ = 7;
  param_1[0x167] = 0;
  *(undefined1 *)(param_1 + 0x36) = 0;
  puVar4 = (undefined4 *)(in_stack_ffffffa4 & 0xffffff00);
  pcVar2 = 
  "Contacting PopCap.com to determine if there are any updates available for this product ...";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(&stack0xffffffa0,
                (_String_base *)
                "Contacting PopCap.com to determine if there are any updates available for this product ..."
                ,(uint)(pcVar5 + -0x536a68));
  local_8._0_1_ = 10;
  local_2c = 0xf;
  local_30 = 0;
  local_40 = local_40 & 0xffffff00;
  pcVar2 = "UPDATE_CHECK_BODY";
  do {
    pcVar5 = pcVar2;
    pcVar2 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_44,(_String_base *)"UPDATE_CHECK_BODY",(uint)(pcVar5 + -0x52fe3c));
  local_8._0_1_ = 0xb;
  STL_Iterator_SubtractionOperator
            ((int)param_1,(uint)&stack0xffffffa0,local_44,(_String_base *)&stack0xffffffa0);
  if (local_2c < 0x10) {
    local_2c = 0xf;
    local_30 = 0;
    local_40 = local_40 & 0xffffff00;
    local_8 = CONCAT31(local_8._1_3_,7);
    local_28[1] = '\0';
    local_28[2] = '\0';
    local_28[3] = '\0';
    local_28[4] = '\0';
    local_28[0] = '\0';
    local_28[5] = '\0';
    local_28[6] = '\0';
    local_28[7] = '\0';
    local_28[8] = '\0';
    Assembly_FloatingPointComparison
              ((int *)PTR_s_00000000PACPOPPOPCAPPACPOPPOPCAP_005677fc,local_28);
    lVar6 = _atol(local_28);
    param_1[0x180] = lVar6;
    if (lVar6 != 0) {
      p_Var3 = (_String_base *)(PTR_s_00000000PACPOPPOPCAPPACPOPPOPCAP_005677fc + 8);
      do {
        _Var1 = *p_Var3;
        p_Var3 = p_Var3 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(param_1 + 0x181,
                    (_String_base *)(PTR_s_00000000PACPOPPOPCAPPACPOPPOPCAP_005677fc + 8),
                    (int)p_Var3 - (int)(PTR_s_00000000PACPOPPOPCAPPACPOPPOPCAP_005677fc + 9));
    }
    ExceptionList = local_10;
    Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffa0,puVar4);
    return;
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(local_40,extraout_EDX_02);
}


