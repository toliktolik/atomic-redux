/*
 * Function: Game_WindowMessageHandler
 * Address: 004a6b80
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Game_WindowMessageHandler(HWND param_1,UINT param_2,WPARAM param_3,LPARAM param_4)

{
  void *this;
  char *pcVar1;
  LONG LVar2;
  char *pcVar3;
  LPCSTR lpString;
  int extraout_ECX;
  uint extraout_EDX;
  int iVar4;
  undefined4 *in_stack_ffffffd0;
  LPCSTR in_stack_ffffffd4;
  uint local_18;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  this = DAT_00569f5c;
  local_8 = 0xffffffff;
  uStack_c = 0x516558;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  LVar2 = GetWindowLongA(param_1,-0x15);
  if (param_2 == 0x10) {
    Scoring_SetHighScore(LVar2 + 0x28);
  }
  else {
    if (param_2 == 0x111) {
      if ((short)param_3 == 2) {
        Scoring_SetHighScore(LVar2 + 0x28);
        *(undefined1 *)(LVar2 + 0x124) = 1;
      }
    }
    else if ((param_2 == 0x113) && (iVar4 = 0, LVar2 != 0)) {
      if (param_3 == 0) {
        iVar4 = Network_GetClientState(LVar2 + 0x28);
        if (iVar4 != 2) {
          iVar4 = Network_GetClientState(LVar2 + 0x28);
          if (iVar4 != 1) {
            *(undefined1 *)(LVar2 + 0x125) = 1;
          }
        }
      }
      else if (param_3 == 1) {
        *(int *)(LVar2 + 0x14) = *(int *)(LVar2 + 0x14) + 1;
        Level_InitializeDictastroika(&stack0xffffffd0,"Please Wait");
        local_8 = 0;
        if (0 < *(int *)(LVar2 + 0x14) % 10) {
          do {
            pcVar1 = " .";
            do {
              pcVar3 = pcVar1;
              pcVar1 = pcVar3 + 1;
            } while (*pcVar3 != '\0');
            Enemy_ProcessSatelliteLogic
                      (&stack0xffffffd0,(_String_base *)&DAT_00535a18,(uint)(pcVar3 + -0x535a18));
            iVar4 = iVar4 + 1;
          } while (iVar4 < *(int *)(LVar2 + 0x14) % 10);
        }
        lpString = in_stack_ffffffd4;
        if (local_18 < 0x10) {
          lpString = &stack0xffffffd4;
        }
        SetWindowTextA(*(HWND *)(LVar2 + 0x1c),lpString);
        if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX);
        }
      }
    }
    DefWindowProcA(param_1,param_2,param_3,param_4);
  }
  ExceptionList = local_10;
  Exception_SetMessage(this,in_stack_ffffffd0,(undefined4 *)in_stack_ffffffd4);
  return;
}


