/*
 * Function: Weapon_SpreadshotSystem
 * Address: 00418c90
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Weapon_SpreadshotSystem(void *param_1)

{
  double dVar1;
  double dVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 uVar7;
  int *piVar8;
  int iVar9;
  float10 fVar10;
  ulonglong uVar11;
  ulonglong uVar12;
  ulonglong uVar13;
  int iVar14;
  int iVar15;
  char cVar16;
  int iVar17;
  char cVar18;
  char cVar19;
  
  iVar9 = *(int *)((int)param_1 + 0x98) + -0xc;
  iVar3 = *(int *)((int)param_1 + 100);
  if (iVar9 < *(int *)((int)param_1 + 100)) {
    iVar3 = iVar9;
  }
  fVar10 = (float10)fpatan((float10)(*(int *)((int)param_1 + 0x60) + -0x140) -
                           (float10)*(double *)((int)param_1 + 0x90),
                           (float10)((*(int *)((int)param_1 + 0x98) - iVar3) + -0xc));
  *(double *)((int)param_1 + 0x150) = (double)(fVar10 - (float10)_DAT_0052c530);
  Timer_CountdownWithSounds(param_1,2);
  *(undefined4 *)((int)param_1 + 0x158) = 0;
  *(undefined4 *)((int)param_1 + 0x15c) = 0x40418000;
  do {
    fVar10 = (float10)fcos((float10)*(double *)((int)param_1 + 0x150));
    dVar1 = (double)(fVar10 * (float10)*(double *)((int)param_1 + 0x158) +
                    (float10)*(double *)((int)param_1 + 0x90));
    fVar10 = (float10)fsin((float10)*(double *)((int)param_1 + 0x150));
    dVar2 = (double)((float10)(*(int *)((int)param_1 + 0x98) + -0xc) +
                    fVar10 * (float10)*(double *)((int)param_1 + 0x158));
    if (((dVar1 < _DAT_0052c860 != (NAN(dVar1) || NAN(_DAT_0052c860))) || (_DAT_0052c858 < dVar1))
       || (dVar2 < _DAT_0052a0c0 != (NAN(dVar2) || NAN(_DAT_0052a0c0)))) break;
    *(undefined4 *)((int)param_1 + 0x1f8) = *(undefined4 *)((int)param_1 + 500);
    while (iVar9 = *(int *)(*(int *)((int)param_1 + 0x1f8) + 4), iVar9 != 0) {
      *(int *)((int)param_1 + 0x1f8) = iVar9;
      if (*(int *)((int)param_1 + 0x200) == 0) {
        piVar8 = (int *)0x0;
      }
      else {
        piVar8 = (int *)**(undefined4 **)((int)param_1 + 0x1f8);
      }
      if (((char)piVar8[0xe] == '\0') && ((char)piVar8[0x12] != '\0')) {
        cVar18 = (char)piVar8[0xc];
        cVar19 = '\x01';
        iVar17 = 0;
        uVar11 = Math_FloatToUInt64();
        iVar9 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        iVar3 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        iVar4 = (int)uVar11;
        iVar5 = Boss_ProcessHeadBustczar((int)piVar8);
        cVar16 = '\0';
        iVar15 = 0;
        iVar14 = 0;
        uVar11 = Math_FloatToUInt64();
        iVar6 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        uVar7 = Collision_PixelPerfectDetection
                          (*(void **)(*(int *)((int)param_1 + 0x5c) + 0x784),(int)uVar11,iVar6,
                           iVar14,iVar15,cVar16,iVar5,iVar4,iVar3,iVar9,iVar17,cVar18,cVar19);
        if ((char)uVar7 != '\0') {
          (**(code **)(*piVar8 + 0x10))();
          Boss_BattleshipCannonSystem((int)piVar8);
        }
      }
    }
    uVar11 = Math_FloatToUInt64();
    uVar12 = Math_FloatToUInt64();
    Projectile_HitDetectionSystem
              (param_1,*(void **)(*(int *)((int)param_1 + 0x5c) + 0x784),(int)uVar12,(int)uVar11,0,0
               ,10000.0);
    *(undefined4 *)((int)param_1 + 0x1e8) = *(undefined4 *)((int)param_1 + 0x1e4);
    while (iVar9 = *(int *)(*(int *)((int)param_1 + 0x1e8) + 4), iVar9 != 0) {
      *(int *)((int)param_1 + 0x1e8) = iVar9;
      if (*(int *)((int)param_1 + 0x1f0) == 0) {
        iVar9 = 0;
      }
      else {
        iVar9 = **(int **)((int)param_1 + 0x1e8);
      }
      if (*(char *)(iVar9 + 0x30) != '\0') {
        iVar3 = *(int *)(iVar9 + 0x3c);
        iVar4 = *(int *)(iVar9 + 0x38);
        cVar16 = '\x01';
        cVar18 = '\0';
        uVar13 = Math_FloatToUInt64();
        iVar5 = (int)uVar13;
        uVar13 = Math_FloatToUInt64();
        uVar7 = Collision_PixelPerfectDetection
                          (*(void **)(*(int *)((int)param_1 + 0x5c) + 0x784),(int)uVar12,(int)uVar11
                           ,0,0,'\0',*(int *)(iVar9 + 0x34),(int)uVar13,iVar5,iVar4,iVar3,cVar18,
                           cVar16);
        if ((char)uVar7 != '\0') {
          uVar13 = Math_FloatToUInt64();
          iVar9 = (int)uVar13;
          uVar13 = Math_FloatToUInt64();
          Game_DisplayScoreChange(param_1,10,(int)uVar13,iVar9);
          LinkedList_PopNode((int *)((int)param_1 + 0x1e4));
        }
      }
    }
    *(double *)((int)param_1 + 0x158) = *(double *)((int)param_1 + 0x158) + _DAT_0052c628;
  } while (*(double *)((int)param_1 + 0x158) < _DAT_0052c740 !=
           (NAN(*(double *)((int)param_1 + 0x158)) || NAN(_DAT_0052c740)));
  if (*(int **)((int)param_1 + 0x310) != (int *)0x0) {
    iVar9 = **(int **)((int)param_1 + 0x310);
    uVar11 = Math_FloatToUInt64();
    (**(code **)(iVar9 + 0x18))((int)uVar11);
  }
  return;
}


