/*
 * Function: Particle_RenderFire
 * Address: 00437e50
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Particle_RenderFire(int param_1)

{
  double dVar1;
  double dVar2;
  int iVar3;
  void *this;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 uVar7;
  int iVar8;
  uint uVar9;
  ulonglong uVar10;
  int iVar11;
  char cVar12;
  int iVar13;
  int iVar14;
  char cVar15;
  char cVar16;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005120db;
  local_10 = ExceptionList;
  if (*(int *)(*(int *)(param_1 + 0x4c) + 0x184) <= *(int *)(*(int *)(param_1 + 0x4c) + 0x17c)) {
    ExceptionList = &local_10;
    Boss_ProcessWreckerWarWrecker(param_1);
    iVar3 = *(int *)(param_1 + 0x4c);
    if (*(double *)(iVar3 + 0x188) < _DAT_0052c5a0 ==
        (NAN(*(double *)(iVar3 + 0x188)) || NAN(_DAT_0052c5a0))) {
      *(double *)(param_1 + 8) =
           *(double *)(param_1 + 8) - *(double *)(iVar3 + 0x188) * _DAT_00530678;
    }
    else {
      *(undefined1 *)(param_1 + 0x48) = 1;
      *(double *)(param_1 + 8) = *(double *)(param_1 + 8) + *(double *)(param_1 + 0x18);
      if (*(int *)(iVar3 + 0x80) != 0) {
        *(undefined4 *)(param_1 + 0x78) = 3;
      }
      if (*(int *)(param_1 + 0x74) == 0) {
        if ((*(char *)(param_1 + 0x80) == '\0') || (*(int *)(iVar3 + 0x300) != 0)) {
          if (*(int *)(param_1 + 0x7c) == 0) {
            dVar1 = *(double *)(param_1 + 0x98) + *(double *)(param_1 + 0x20);
            *(double *)(param_1 + 0x20) = dVar1;
            if (*(double *)(param_1 + 0x90) < dVar1) {
              *(undefined4 *)(param_1 + 0x20) = *(undefined4 *)(param_1 + 0x90);
              *(undefined4 *)(param_1 + 0x24) = *(undefined4 *)(param_1 + 0x94);
            }
            if (_DAT_0052a0e8 < *(double *)(param_1 + 0x20)) {
              *(undefined4 *)(param_1 + 0x28) = 0;
              *(undefined4 *)(param_1 + 0x2c) = 0x40200000;
            }
            dVar1 = *(double *)(param_1 + 0x20) + *(double *)(param_1 + 0x10);
            *(double *)(param_1 + 0x10) = dVar1;
            if (_DAT_00530680 < dVar1) {
              if (*(int *)(iVar3 + 0x300) == 0) {
                *(undefined4 *)(param_1 + 0x84) = 0x80;
                iVar3 = **(int **)(param_1 + 0x50);
                uVar10 = Math_FloatToUInt64();
                (**(code **)(iVar3 + 0xb8))(0x4f,(int)uVar10);
              }
              *(undefined4 *)(param_1 + 0x10) = 0;
              *(undefined4 *)(param_1 + 0x14) = 0x4073b000;
              *(undefined4 *)(param_1 + 0x18) = 0;
              *(undefined4 *)(param_1 + 0x1c) = 0;
              uVar10 = Math_FloatToUInt64();
              uVar9 = (int)(uint)uVar10 >> 0x1f;
              *(undefined4 *)(param_1 + 0x28) = 0;
              if ((int)(((uint)uVar10 ^ uVar9) - uVar9) < 100) {
                *(undefined4 *)(param_1 + 0x7c) = 0x32;
                *(undefined4 *)(param_1 + 0x2c) = 0x40180000;
              }
              else {
                *(undefined4 *)(param_1 + 0x74) = 1;
                *(undefined4 *)(param_1 + 0x2c) = 0;
                if (*(int *)(*(int *)(param_1 + 0x4c) + 0x300) == 0) {
                  *(byte *)(param_1 + 0x30) = *(byte *)(param_1 + 0x30) ^ 1;
                }
              }
            }
          }
          else {
            iVar3 = *(int *)(param_1 + 0x7c) + -1;
            *(int *)(param_1 + 0x7c) = iVar3;
            if (iVar3 == 0) {
              *(undefined4 *)(param_1 + 0x28) = 0;
              *(undefined4 *)(param_1 + 0x2c) = 0x401c0000;
              *(double *)(param_1 + 0x20) = -*(double *)(param_1 + 0x90);
              *(double *)(param_1 + 0x18) =
                   -((double)(int)((uint)*(byte *)(param_1 + 0x30) * 2 + -1) *
                    *(double *)(param_1 + 0x88));
            }
          }
        }
        else {
          dVar1 = *(double *)(param_1 + 0x28) + *(double *)(param_1 + 0xa0);
          *(double *)(param_1 + 0x28) = dVar1;
          if (_DAT_00530688 < dVar1) {
            *(undefined4 *)(param_1 + 0x28) = 0;
            *(undefined4 *)(param_1 + 0x2c) = 0;
            *(int *)(param_1 + 0x78) = *(int *)(param_1 + 0x78) + 1;
            *(undefined4 *)(param_1 + 0x74) = 1;
          }
          if (((_DAT_0052c550 <= *(double *)(param_1 + 0x28)) &&
              (dVar1 = *(double *)(param_1 + 0x28) - *(double *)(param_1 + 0xa0),
              dVar1 < _DAT_0052c550 != (NAN(dVar1) || NAN(_DAT_0052c550)))) &&
             (*(int *)(iVar3 + 0x300) == 0)) {
            this = operator_new(0x70);
            local_8 = 0;
            if (this != (void *)0x0) {
              dVar1 = (double)(int)((uint)*(byte *)(param_1 + 0x30) * -6 + 3);
              dVar2 = *(double *)(param_1 + 0x10) - _DAT_0052f620;
              Math_CalculateDistance
                        (this,*(int *)(param_1 + 0x4c),*(undefined4 *)(param_1 + 8),
                         *(undefined4 *)(param_1 + 0xc),SUB84(dVar2,0),
                         (int)((ulonglong)dVar2 >> 0x20),SUB84(dVar1,0),
                         (int)((ulonglong)dVar1 >> 0x20),*(byte *)(param_1 + 0x30),6);
            }
            local_8 = 0xffffffff;
          }
        }
      }
      else {
        iVar3 = *(int *)(param_1 + 0x74) + -1;
        *(int *)(param_1 + 0x74) = iVar3;
        if (iVar3 == 0) {
          if (*(int *)(param_1 + 0x78) == 3) {
            *(undefined4 *)(param_1 + 0x7c) = 0x32;
            *(undefined4 *)(param_1 + 0x28) = 0;
            *(undefined4 *)(param_1 + 0x2c) = 0x40180000;
            *(undefined4 *)(param_1 + 0x78) = 0;
            *(undefined1 *)(param_1 + 0x80) = 0;
          }
          else {
            *(undefined1 *)(param_1 + 0x80) = 1;
          }
        }
      }
      iVar3 = *(int *)(param_1 + 0x84);
      if (iVar3 != 0) {
        iVar13 = **(int **)(param_1 + 0x4c);
        iVar4 = Collision_HandleEnemyHit();
        uVar9 = iVar3 >> 0x1f;
        iVar8 = iVar4 % (((int)(iVar3 + (uVar9 & 0xf)) >> 4) + 1) -
                ((int)(iVar3 + (uVar9 & 0x1f)) >> 5);
        iVar4 = Collision_HandleEnemyHit();
        (**(code **)(iVar13 + 0x38))
                  (iVar4 % (((int)(iVar3 + (uVar9 & 0xf)) >> 4) + 1) -
                   ((int)(iVar3 + (uVar9 & 0x1f)) >> 5),iVar8);
        *(int *)(param_1 + 0x84) = *(int *)(param_1 + 0x84) + -2;
      }
      if ((*(int *)(*(int *)(param_1 + 0x4c) + 0x80) == 2) &&
         (((*(int *)(param_1 + 0x78) == 3 && (*(char *)(param_1 + 0x30) == '\x01')) ||
          ((*(char *)(param_1 + 0x30) == '\0' &&
           (*(double *)(param_1 + 8) < _DAT_0052a0c0 !=
            (NAN(*(double *)(param_1 + 8)) || NAN(_DAT_0052a0c0)))))))) {
        *(undefined4 *)(*(int *)(param_1 + 0x4c) + 0x80) = 3;
      }
      iVar3 = *(int *)(param_1 + 0x4c);
      if ((*(int *)(iVar3 + 0x300) == 0) && (*(int *)(iVar3 + 0x80) == 0)) {
        cVar16 = '\x01';
        cVar15 = '\0';
        iVar14 = 0;
        uVar10 = Math_FloatToUInt64();
        iVar4 = (int)uVar10;
        iVar13 = *(int *)(iVar3 + 0x98);
        uVar10 = Math_FloatToUInt64();
        iVar8 = (int)uVar10;
        cVar12 = *(char *)(param_1 + 0x30);
        iVar3 = *(int *)(*(int *)(iVar3 + 0x5c) + 0x6cc);
        iVar11 = 0;
        uVar10 = Math_FloatToUInt64();
        iVar5 = (int)uVar10;
        uVar10 = Math_FloatToUInt64();
        iVar6 = (int)uVar10;
        uVar10 = Math_FloatToUInt64();
        uVar7 = Collision_PixelPerfectDetection
                          (*(void **)(param_1 + 0x60),(int)uVar10,iVar6,iVar5,iVar11,cVar12,iVar3,
                           iVar8,iVar13,iVar4,iVar14,cVar15,cVar16);
        if ((char)uVar7 != '\0') {
          Particles_UpdateFire(*(void **)(param_1 + 0x4c));
          ExceptionList = local_10;
          return;
        }
      }
    }
  }
  ExceptionList = local_10;
  return;
}


