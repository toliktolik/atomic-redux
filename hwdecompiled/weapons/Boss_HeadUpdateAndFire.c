/*
 * Function: Boss_HeadUpdateAndFire
 * Address: 00435790
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Boss_HeadUpdateAndFire(int param_1)

{
  bool bVar1;
  double dVar2;
  double dVar3;
  int iVar4;
  void *this;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51202b;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  Boss_ProcessWreckerWarWrecker(param_1);
  iVar4 = *(int *)(param_1 + 0x4c);
  if ((*(int *)(iVar4 + 0x80) == 0) &&
     ((*(int *)(iVar4 + 0x17c) < *(int *)(iVar4 + 0x184) + -700 ||
      (*(char *)(iVar4 + 0x327) != '\0')))) {
    if ((_DAT_0052c860 < *(double *)(param_1 + 8)) &&
       (*(double *)(param_1 + 8) < _DAT_0052c858 !=
        (NAN(*(double *)(param_1 + 8)) || NAN(_DAT_0052c858)))) {
      *(double *)(param_1 + 0x18) = *(double *)(param_1 + 0x18) * _DAT_00530568;
    }
  }
  else {
    dVar2 = _DAT_0052c838;
    if (*(char *)(param_1 + 0x30) == '\0') {
      dVar2 = _DAT_00530560;
    }
    dVar2 = dVar2 + *(double *)(param_1 + 0x18);
    *(double *)(param_1 + 0x18) = dVar2;
    if (dVar2 < _DAT_0052f6b0 != (NAN(dVar2) || NAN(_DAT_0052f6b0))) {
      *(undefined4 *)(param_1 + 0x18) = 0;
      *(undefined4 *)(param_1 + 0x1c) = 0xbff00000;
    }
    if (_DAT_0052a0f0 < *(double *)(param_1 + 0x18)) {
      *(undefined4 *)(param_1 + 0x18) = 0;
      *(undefined4 *)(param_1 + 0x1c) = 0x3ff00000;
    }
  }
  if (0 < *(int *)(param_1 + 0x70)) {
    *(int *)(param_1 + 0x70) = *(int *)(param_1 + 0x70) + -1;
  }
  dVar2 = *(double *)(param_1 + 0x18) * _DAT_0052c648 + *(double *)(param_1 + 0x28) + _DAT_0052c580;
  bVar1 = _DAT_0052c568 <= dVar2;
  *(double *)(param_1 + 0x28) = dVar2;
  if (bVar1) {
    *(double *)(param_1 + 0x28) = dVar2 - _DAT_0052c568;
  }
  if (*(double *)(param_1 + 0x28) < _DAT_0052a0c0 !=
      (NAN(*(double *)(param_1 + 0x28)) || NAN(_DAT_0052a0c0))) {
    *(double *)(param_1 + 0x28) = *(double *)(param_1 + 0x28) + _DAT_0052a0e0;
  }
  if ((((*(int *)(param_1 + 0x70) == 0) && (*(int *)(iVar4 + 0x80) == 0)) &&
      (_DAT_0052c860 < *(double *)(param_1 + 8))) &&
     ((*(double *)(param_1 + 8) < _DAT_0052c858 !=
       (NAN(*(double *)(param_1 + 8)) || NAN(_DAT_0052c858)) &&
      (iVar4 = Collision_HandleEnemyHit(), iVar4 % 0x14 == 0)))) {
    *(undefined4 *)(param_1 + 0x70) = 100;
    this = operator_new(0x70);
    local_8 = 0;
    if (this != (void *)0x0) {
      iVar4 = Collision_HandleEnemyHit();
      dVar2 = (double)(iVar4 % 100 + 0x32) * _DAT_0052d860;
      dVar3 = *(double *)(param_1 + 0x10) - _DAT_00530558;
      Array_Sort(this,*(int *)(param_1 + 0x4c),*(undefined4 *)(param_1 + 8),
                 *(undefined4 *)(param_1 + 0xc),SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20),
                 *(undefined1 *)(param_1 + 0x30),SUB84(dVar2,0),(int)((ulonglong)dVar2 >> 0x20));
    }
    local_8 = 0xffffffff;
  }
  iVar4 = Boss_ProcessApeKommieKong(param_1);
  if ((*(double *)(param_1 + 8) < (double)(-0x140 - iVar4 / 2)) ||
     (iVar4 = Boss_ProcessApeKommieKong(param_1), dVar2 = (double)(iVar4 / 2 + 0x140),
     dVar2 < *(double *)(param_1 + 8) != (NAN(dVar2) || NAN(*(double *)(param_1 + 8))))) {
    *(undefined1 *)(*(int *)(param_1 + 0x4c) + 0x1b8) = 0;
    *(undefined1 *)(*(int *)(param_1 + 0x4c) + 0x1b9) = 0;
    Boss_BattleshipCannonSystem(param_1);
  }
  ExceptionList = local_10;
  return;
}


