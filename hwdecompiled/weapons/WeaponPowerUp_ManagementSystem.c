/*
 * Function: WeaponPowerUp_ManagementSystem
 * Address: 00418f50
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall WeaponPowerUp_ManagementSystem(void *this,float param_1)

{
  int *piVar1;
  double dVar2;
  float fVar3;
  int iVar4;
  int extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int iVar5;
  int *piVar6;
  ulonglong uVar7;
  int local_c;
  
  GetBossIndex(*(void **)((int)this + 0x5c),*(int *)((int)*(void **)((int)this + 0x5c) + 0x960));
  piVar6 = (int *)((int)this + 0x314);
  local_c = 4;
  do {
    piVar1 = (int *)*piVar6;
    if (piVar1 != (int *)0x0) {
      iVar4 = *(int *)(*piVar1 + 0x18);
      iVar5 = iVar4;
      if ((char)piVar1[0xc] != '\0') {
        iVar5 = iVar4 + -1;
      }
      if (*(char *)((int)piVar1 + 0x31) == '\0') {
        uVar7 = Math_FloatToUInt64();
        *(double *)(piVar1 + 2) =
             (double)piVar1[0x11] * *(double *)(piVar1[0xe] + (int)uVar7 * 8) +
             *(double *)(piVar1 + 2);
        dVar2 = (double)iVar5;
        iVar4 = *piVar6;
        if (dVar2 < *(double *)(iVar4 + 8) == (dVar2 == *(double *)(iVar4 + 8))) {
          if (*(double *)(iVar4 + 8) < _DAT_0052a0c0 !=
              (NAN(*(double *)(iVar4 + 8)) || NAN(_DAT_0052a0c0))) {
            *(undefined4 *)(iVar4 + 0x44) = 1;
            iVar4 = *piVar6;
            *(undefined4 *)(iVar4 + 8) = 0;
            *(undefined4 *)(iVar4 + 0xc) = 0x3ff00000;
          }
        }
        else if (*(int *)(iVar4 + 0x48) == 1) {
          *(undefined4 *)(iVar4 + 0x44) = 0xffffffff;
          *(double *)(*piVar6 + 8) = (double)(iVar5 + -1);
        }
        else {
          *(double *)(iVar4 + 8) = *(double *)(iVar4 + 8) - dVar2;
        }
      }
      else {
        *(double *)(piVar1 + 2) = (double)(iVar4 + -1);
      }
      iVar4 = *piVar6;
      *(double *)(iVar4 + 0x18) =
           (double)(param_1 * (float)*(double *)(iVar4 + 0x28) *
                    (float)*(double *)((int)this + 0x188) + (float)*(double *)(iVar4 + 0x18));
      iVar4 = *piVar6;
      switch(*(undefined4 *)(iVar4 + 0x10)) {
      case 0:
        fVar3 = param_1 * (float)*(double *)((int)this + 0x188);
        break;
      case 1:
        fVar3 = param_1 * (float)*(double *)((int)this + 0x188) * (float)_DAT_0052c580;
        break;
      case 2:
        fVar3 = param_1 * (float)*(double *)((int)this + 0x188) * (float)_DAT_0052c590;
        break;
      case 3:
        fVar3 = param_1 * (float)*(double *)((int)this + 0x188) * (float)_DAT_0052c5a0;
        break;
      default:
        goto switchD_00419045_default;
      }
      *(double *)(iVar4 + 0x18) = (double)((float)*(double *)(iVar4 + 0x18) - fVar3);
switchD_00419045_default:
      piVar1 = (int *)*piVar6;
      iVar4 = SexyWidget_GetTextureId(*piVar1);
      if (*(double *)(piVar1 + 6) < (double)-iVar4) {
        if (*piVar6 != 0) {
          SingleDataStructure_Clear(*piVar6,extraout_EDX);
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX_00);
        }
        *piVar6 = 0;
      }
    }
    piVar6 = piVar6 + 1;
    local_c = local_c + -1;
    if (local_c == 0) {
      return;
    }
  } while( true );
}


