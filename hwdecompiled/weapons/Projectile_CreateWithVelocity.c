/*
 * Function: Projectile_CreateWithVelocity
 * Address: 00411850
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall
Projectile_CreateWithVelocity(void *this,int param_1,int param_2,double param_3,double param_4)

{
  undefined4 uVar1;
  int iVar2;
  double *pdVar3;
  undefined4 *puVar4;
  float10 fVar5;
  float10 fVar6;
  ulonglong uVar7;
  
  if ((*(int *)((int)this + 0x80) == 0) && (*(int *)((int)this + 0x300) == 0)) {
    pdVar3 = (double *)operator_new(0x40);
    puVar4 = (undefined4 *)operator_new(0xc);
    uVar1 = *(undefined4 *)((int)this + 0x1ec);
    puVar4[1] = 0;
    puVar4[2] = uVar1;
    *(undefined4 **)(*(int *)((int)this + 0x1ec) + 4) = puVar4;
    *puVar4 = pdVar3;
    *(undefined4 **)((int)this + 0x1ec) = puVar4;
    *(int *)((int)this + 0x1f0) = *(int *)((int)this + 0x1f0) + 1;
    *(undefined1 *)(pdVar3 + 6) = 1;
    *(undefined4 *)(pdVar3 + 4) = 0;
    *(undefined4 *)((int)pdVar3 + 0x24) = 0;
    uVar1 = *(undefined4 *)(*(int *)((int)this + 0x5c) + 0x71c);
    *pdVar3 = (double)param_1;
    *(undefined4 *)((int)pdVar3 + 0x34) = uVar1;
    pdVar3[1] = (double)param_2;
    fVar5 = (float10)param_4;
    if ((NAN(fVar5) || NAN((float10)_DAT_0052a0c0)) != (fVar5 == (float10)_DAT_0052a0c0)) {
      fVar5 = (float10)_DAT_0052c5c0;
    }
    fVar6 = (float10)fcos((float10)param_3);
    *(undefined4 *)(pdVar3 + 7) = 0;
    *(undefined4 *)((int)pdVar3 + 0x3c) = 0;
    pdVar3[2] = (double)-(fVar6 * fVar5);
    fVar6 = (float10)fsin((float10)param_3);
    pdVar3[3] = (double)(fVar6 * fVar5);
    iVar2 = **(int **)((int)this + 0x5c);
    uVar7 = Math_FloatToUInt64();
    (**(code **)(iVar2 + 0xb8))(0x36,(int)uVar7);
  }
  return;
}


