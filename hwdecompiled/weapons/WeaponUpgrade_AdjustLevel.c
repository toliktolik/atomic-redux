/*
 * Function: WeaponUpgrade_AdjustLevel
 * Address: 0042feb0
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall WeaponUpgrade_AdjustLevel(void *this,int param_1)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  (**(code **)(**(int **)((int)this + 4) + 0xb8))(0x12,(*(int *)((int)this + -0x50) + -0xe4) * 3);
  if (param_1 == 0) {
    piVar3 = *(int **)((int)this + 4);
    if ((piVar3[*(int *)((int)this + 0x18) + 0x260] < 3) &&
       (iVar1 = *(int *)(*(int *)((int)this + 8) + 0xa0),
       iVar2 = *(int *)(*(int *)((int)this + 8) + 0x9c), iVar1 != iVar2 && -1 < iVar1 - iVar2)) {
      piVar3[*(int *)((int)this + 0x18) + 0x260] = piVar3[*(int *)((int)this + 0x18) + 0x260] + 1;
      iVar1 = *(int *)((int)this + 8);
      iVar2 = *(int *)(iVar1 + 0x9c) + 1;
      goto LAB_0042ff42;
    }
  }
  else {
    if (param_1 != 1) {
      return;
    }
    piVar3 = *(int **)((int)this + 4);
    if (0 < piVar3[*(int *)((int)this + 0x18) + 0x260]) {
      piVar3[*(int *)((int)this + 0x18) + 0x260] = piVar3[*(int *)((int)this + 0x18) + 0x260] + -1;
      iVar1 = *(int *)((int)this + 8);
      iVar2 = *(int *)(iVar1 + 0x9c) + -1;
LAB_0042ff42:
      *(int *)(iVar1 + 0x9c) = iVar2;
      *(undefined4 *)(*(int *)((int)this + 8) + 0x80 + *(int *)((int)this + 0x18) * 4) = 0xff;
      return;
    }
  }
  (**(code **)(*piVar3 + 0xb8))(0x15,(*(int *)((int)this + -0x50) + -0xe4) * 3);
  return;
}


