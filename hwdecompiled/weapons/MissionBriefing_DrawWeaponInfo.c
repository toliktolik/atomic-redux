/*
 * Function: MissionBriefing_DrawWeaponInfo
 * Address: 00424bf0
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall MissionBriefing_DrawWeaponInfo(void *this,void *param_1)

{
  void *this_00;
  _String_base _Var1;
  void *this_01;
  undefined4 *puVar2;
  int iVar3;
  _String_base *p_Var4;
  _String_base *p_Var5;
  undefined4 uVar6;
  int iVar7;
  void *pvVar8;
  char *pcVar9;
  uint uVar10;
  char *pcVar11;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  int extraout_ECX_04;
  uint extraout_EDX;
  uint extraout_EDX_00;
  ulonglong uVar12;
  uint unaff_retaddr;
  char cVar13;
  int iVar14;
  int iVar15;
  char cVar16;
  undefined4 *in_stack_ffffff6c;
  undefined4 *in_stack_ffffff70;
  undefined1 local_74 [16];
  _String_base local_64 [4];
  uint local_60;
  undefined4 local_58;
  undefined4 local_54;
  undefined4 local_50;
  uint local_4c;
  _String_base local_48 [4];
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  undefined1 local_34 [4];
  uint local_30;
  undefined4 local_28;
  undefined4 local_24;
  undefined8 local_20;
  int local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  this_01 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &DAT_00511230;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (*(int *)((int)this + 0xb0) < 1) {
    ExceptionList = &local_10;
    iVar3 = GetBossIndex(*(void **)((int)this + 0x5c),
                         *(int *)((int)*(void **)((int)this + 0x5c) + 0x960));
    local_18 = iVar3;
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7bc),param_1,0,0,'\0',0,0,'\0');
    if (0 < *(int *)((int)this + 0x90)) {
      uVar12 = Math_FloatToUInt64();
      puVar2 = (undefined4 *)CreateColor(&local_58,0,0,0,(int)uVar12);
      SexyWidget_SetRectangle(param_1,puVar2);
      Graphics_FillRect(param_1,0,0,0x280,0x1e0);
    }
    SexyWidget_SetColorizeFlag2(param_1,1);
    puVar2 = (undefined4 *)CreateColor(&local_58,0,0xff,0,0xff - *(int *)((int)this + 0x94));
    SexyWidget_SetRectangle(param_1,puVar2);
    cVar16 = '\0';
    iVar15 = 0;
    iVar14 = 0;
    cVar13 = '\x01';
    uVar12 = Math_FloatToUInt64();
    iVar7 = (int)uVar12;
    uVar12 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7fc),param_1,(int)uVar12,iVar7,cVar13,
               iVar14,iVar15,cVar16);
    cVar16 = '\0';
    iVar15 = 0;
    iVar14 = 1;
    cVar13 = '\x01';
    uVar12 = Math_FloatToUInt64();
    iVar7 = (int)uVar12;
    uVar12 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7fc),param_1,(int)uVar12,iVar7,cVar13,
               iVar14,iVar15,cVar16);
    cVar16 = '\0';
    iVar15 = 0;
    iVar14 = 2;
    cVar13 = '\x01';
    uVar12 = Math_FloatToUInt64();
    iVar7 = (int)uVar12;
    uVar12 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7fc),param_1,(int)uVar12,iVar7,cVar13,
               iVar14,iVar15,cVar16);
    cVar16 = '\0';
    iVar15 = 0;
    iVar14 = 3;
    cVar13 = '\x01';
    uVar12 = Math_FloatToUInt64();
    iVar7 = (int)uVar12;
    uVar12 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7fc),param_1,(int)uVar12,iVar7,cVar13,
               iVar14,iVar15,cVar16);
    SexyWidget_SetColorizeFlag2(param_1,0);
    if (*(int *)((int)this + 0x94) != 0) {
      puVar2 = (undefined4 *)CreateColor(&local_58,0xff,0xff,0xff,*(int *)((int)this + 0x94));
      SexyWidget_SetRectangle(param_1,puVar2);
      Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x924));
      Exception_Release(local_48,"MISSION %i");
      p_Var4 = local_48;
      local_20 = 3.18299368644791e-313;
      local_30 = local_30 & 0xffffff00;
      do {
        _Var1 = *p_Var4;
        p_Var4 = p_Var4 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_34,local_48,(int)p_Var4 - (int)(local_48 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8 = 0;
      (**(code **)(*this + 0x90))(&local_58,param_1,0x32,local_34);
      local_8 = 0xffffffff;
      if (0xf < local_20._4_4_) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,local_30);
      }
      Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x928));
      SexyWidget_Translate(param_1,-0xa0,0);
      iVar3 = iVar3 * 0x30;
      iVar7 = *(int *)(*(int *)((int)this + 0x5c) + 0x145c);
      if (*(uint *)(iVar7 + 0x18 + iVar3) < 0x10) {
        p_Var4 = (_String_base *)(iVar7 + 4 + iVar3);
      }
      else {
        p_Var4 = *(_String_base **)(iVar7 + 4 + iVar3);
      }
      local_20 = 3.18299368644791e-313;
      local_30 = local_30 & 0xffffff00;
      p_Var5 = p_Var4;
      do {
        _Var1 = *p_Var5;
        p_Var5 = p_Var5 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_34,p_Var4,(int)p_Var5 - (int)(p_Var4 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8 = 1;
      (**(code **)(*this + 0x90))(&local_58,param_1,100,local_34);
      local_8 = 0xffffffff;
      if (0xf < local_20._4_4_) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,extraout_EDX);
      }
      SexyWidget_Translate(param_1,0x140,0);
      local_20 = 3.18299368644791e-313;
      local_30 = local_30 & 0xffffff00;
      pcVar11 = "ENEMY INTEL";
      do {
        pcVar9 = pcVar11;
        pcVar11 = pcVar9 + 1;
      } while (*pcVar9 != '\0');
      String_Assign(local_34,(_String_base *)"ENEMY INTEL",(uint)(pcVar9 + -0x52dd8c));
                    /* WARNING: Load size is inaccurate */
      local_8 = 2;
      (**(code **)(*this + 0x90))(&local_58,param_1,0x11d,local_34);
      local_8 = 0xffffffff;
      if (0xf < local_20._4_4_) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,local_30);
      }
      SexyWidget_Translate(param_1,-0xa0,0);
      puVar2 = (undefined4 *)CreateColor(&local_58,0x80,0x80,0x80,*(undefined4 *)((int)this + 0x94))
      ;
      SexyWidget_SetRectangle(param_1,puVar2);
      Graphics_ProcessBlit(param_1,0x140,0x41,0x140,0x1df);
      Graphics_ProcessBlit(param_1,0,0x41,0x27f,0x41);
      Graphics_ProcessBlit(param_1,0x140,0xfa,0x27f,0xfa);
      puVar2 = (undefined4 *)CreateColor(&local_58,0,0xff,0,*(undefined4 *)((int)this + 0x94));
      SexyWidget_SetRectangle(param_1,puVar2);
      Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x938));
      iVar7 = *(int *)((int)this + 0x5c);
      iVar14 = *(int *)(iVar7 + 0x960) / 9;
      if (1 < iVar14) {
        iVar14 = 1;
      }
      if (*(int *)(iVar7 + 0x960) == 0x12) {
        iVar14 = 0;
      }
      iVar3 = *(int *)(*(int *)(iVar7 + 0x145c) + 0x20 + iVar3);
      local_28 = 0x154;
      local_24 = 0x50;
      local_20 = 7.85138442795489e-312;
                    /* WARNING: Load size is inaccurate */
      iVar15 = *this;
      uVar6 = (**(code **)(**(int **)(iVar7 + 0x938) + 0x18))(0xffffffff);
      (**(code **)(iVar15 + 0x98))(param_1,&local_28,iVar3 + iVar14 * 0x1c,uVar6);
      iVar3 = *(int *)(*(int *)((int)this + 0xcc) + *(int *)((int)this + 0xc0) * 4);
      Options_Constructor(this,param_1,iVar3);
                    /* WARNING: Load size is inaccurate */
      iVar3 = iVar3 * 0x68;
      (**(code **)(*this + 0x94))
                (param_1,iVar3 + 0xb64 + *(int *)((int)this + 0x5c),0x154,0x19a,0xffffffff,
                 0xffffffff,1,0,0xffffffff);
      iVar7 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x938) + 0x18))();
      pvVar8 = (void *)(iVar7 + 0x19a);
      this_00 = (void *)(iVar3 + 0xb80 + *(int *)((int)this + 0x5c));
      local_20 = (double)CONCAT44("WAFFLE",(undefined4)local_20);
      pcVar11 = "";
      do {
        pcVar9 = pcVar11;
        pcVar11 = pcVar9 + 1;
      } while (*pcVar9 != '\0');
      uVar10 = String_Compare(this_00,0,*(uint *)((int)this_00 + 0x14),(_String_base *)&DAT_0052c7cf
                              ,(uint)(pcVar9 + -0x52c7cf));
      if (uVar10 != 0) {
        p_Var4 = Survival_LoadConfiguration
                           (local_64,(_String_base *)"Weapon: ",
                            iVar3 + 0xb80 + *(int *)((int)this + 0x5c));
                    /* WARNING: Load size is inaccurate */
        local_8 = 3;
        (**(code **)(*this + 0x94))
                  (param_1,p_Var4,0x154,pvVar8,0xffffffff,0xffffffff,1,0,0xffffffff);
        local_8 = 0xffffffff;
        if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_02,local_60);
        }
        iVar3 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x938) + 0x18))();
        pvVar8 = (void *)((int)pvVar8 + iVar3);
      }
      param_1 = pvVar8;
      Math_FloatToUInt64();
      Exception_Release(&stack0xffffff6c,"Armor: %i");
      pcVar11 = &stack0xffffff6c;
      local_4c = 0xf;
      local_50 = 0;
      local_60 = local_60 & 0xffffff00;
      do {
        cVar13 = *pcVar11;
        pcVar11 = pcVar11 + 1;
      } while (cVar13 != '\0');
      String_Assign(local_64,(_String_base *)&stack0xffffff6c,(int)pcVar11 - (int)&stack0xffffff6d);
                    /* WARNING: Load size is inaccurate */
      local_8 = 4;
      (**(code **)(*this + 0x94))
                (this_01,local_64,0x154,param_1,0xffffffff,0xffffffff,1,0,0xffffffff);
      local_8 = 0xffffffff;
      if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_03,extraout_EDX_00);
      }
      iVar3 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x938) + 0x18))();
      Exception_Release(&stack0xffffff6c,"Score: %i");
      pcVar11 = &stack0xffffff6c;
      local_4c = 0xf;
      local_50 = 0;
      local_60 = local_60 & 0xffffff00;
      do {
        cVar13 = *pcVar11;
        pcVar11 = pcVar11 + 1;
      } while (cVar13 != '\0');
      String_Assign(local_64,(_String_base *)&stack0xffffff6c,(int)pcVar11 - (int)&stack0xffffff6d);
                    /* WARNING: Load size is inaccurate */
      local_8 = 5;
      (**(code **)(*this + 0x94))
                (this_01,local_64,0x154,(int)param_1 + iVar3,0xffffffff,0xffffffff,1,0,0xffffffff);
      local_8 = 0xffffffff;
      iVar3 = local_18;
      if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_04,local_60);
      }
    }
    if (0 < *(int *)((int)this + 0x90)) {
      SexyWidget_SetColorizeFlag2(this_01,1);
      if ((NAN(*(double *)((int)this + 0xa8)) || NAN(_DAT_0052a0c0)) ==
          (*(double *)((int)this + 0xa8) == _DAT_0052a0c0)) {
        puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(&local_58,0xff,0,0);
        SexyWidget_SetRectangle(this_01,puVar2);
        uVar6 = Compression_GetCompressedSize(*(int *)((int)this + 0x5c));
        Graphics_SwapBuffers(this_01,(char)uVar6 == '\0');
        uVar6 = SexyWidget_GetTextureId(*(int *)(*(int *)((int)this + 0x5c) + 0x7c0 + iVar3 * 4));
        local_38 = Level_InitializePetrovakia
                             (*(int *)(*(int *)((int)this + 0x5c) + 0x7c0 + iVar3 * 4));
        local_44 = 0;
        local_40 = 0;
        local_3c = uVar6;
        local_20._4_4_ = local_38;
        uVar12 = Math_FloatToUInt64();
        local_58 = (undefined4)uVar12;
        local_20 = (double)(int)local_20._4_4_ * *(double *)((int)this + 0xa8);
        uVar12 = Math_FloatToUInt64();
        local_54 = (undefined4)uVar12;
        uVar12 = Math_FloatToUInt64();
        local_50 = (undefined4)uVar12;
        uVar12 = Math_FloatToUInt64();
        local_4c = (uint)uVar12;
        Graphics_SetImageAlpha
                  (this_01,*(undefined4 *)
                            (*(int *)(*(int *)((int)this + 0x5c) + 0x7c0 + iVar3 * 4) + 8),
                   (int)&local_58,&local_44);
      }
      else {
        puVar2 = (undefined4 *)
                 CreateColor(local_74,*(int *)((int)this + 0xa0),0xff - *(int *)((int)this + 0xa0),0
                             ,*(undefined4 *)((int)this + 0x90));
        SexyWidget_SetRectangle(this_01,puVar2);
        cVar16 = '\0';
        iVar15 = 0;
        iVar14 = 0;
        cVar13 = '\0';
        uVar12 = Math_FloatToUInt64();
        iVar7 = (int)uVar12;
        uVar12 = Math_FloatToUInt64();
        DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7c0 + iVar3 * 4),this_01,(int)uVar12,
                   iVar7,cVar13,iVar14,iVar15,cVar16);
      }
      SexyWidget_SetColorizeFlag2(this_01,0);
    }
  }
  else {
    ExceptionList = &local_10;
    puVar2 = (undefined4 *)CreateColor(&local_58,0xff,0,0,*(int *)((int)this + 0xb0));
    SexyWidget_SetRectangle(param_1,puVar2);
    Graphics_FillRect(param_1,0,0,0x280,0x1e0);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff6c,in_stack_ffffff70);
  return;
}


