/*
 * Function: Projectile_UpdateMovementAndCollision
 * Address: 00431e30
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Projectile_UpdateMovementAndCollision(int param_1)

{
  bool bVar1;
  double dVar2;
  int iVar3;
  int iVar4;
  ulonglong uVar5;
  int iVar6;
  char cVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  char cVar13;
  undefined4 uVar14;
  char cVar15;
  undefined4 uVar16;
  
  if (*(int *)(*(int *)(param_1 + 0x58) + 0x80) != 0) {
    *(undefined1 *)(param_1 + 0x68) = 1;
  }
  if ((*(int *)(param_1 + 0x38) == 0) && (*(int *)(param_1 + 0x3c) == 0x3ff00000)) {
    dVar2 = *(double *)(param_1 + 0x18) - _DAT_0052c620;
  }
  else {
    dVar2 = *(double *)(param_1 + 0x18) + _DAT_0052c560;
  }
  *(double *)(param_1 + 0x18) = dVar2;
  iVar3 = String_FindSubstring(param_1);
  if (((*(double *)(param_1 + 0x18) < (double)-iVar3) && (*(int *)(param_1 + 0x38) == 0)) &&
     (*(int *)(param_1 + 0x3c) == 0x3ff00000)) {
    *(undefined4 *)(param_1 + 0x38) = 0;
    *(undefined4 *)(param_1 + 0x3c) = 0;
    *(undefined1 *)(param_1 + 0x54) = 1;
    *(undefined1 *)(param_1 + 0x55) = 0;
    if (*(char *)(param_1 + 0x68) != '\0') goto LAB_00431fec;
  }
  dVar2 = *(double *)(param_1 + 0x30) + _DAT_00530230;
  bVar1 = _DAT_0052c568 <= dVar2;
  *(double *)(param_1 + 0x30) = dVar2;
  if (bVar1) {
    *(double *)(param_1 + 0x30) = dVar2 - _DAT_0052c568;
  }
  if (_DAT_0052c958 < *(double *)(param_1 + 0x18)) {
    uVar16 = 0;
    uVar14 = 0;
    iVar11 = 0;
    iVar10 = 0;
    iVar9 = -0x40100000;
    iVar8 = 0;
    iVar3 = Level_InitializePetrovakia(*(int *)(param_1 + 0x5c));
    iVar3 = iVar3 + 0x28;
    iVar4 = SexyWidget_GetTextureId(*(int *)(param_1 + 0x5c));
    SexyAppFramework_HandleActivation
              (*(void **)(param_1 + 0x58),*(int *)(param_1 + 0x10),*(int *)(param_1 + 0x14),
               *(int *)(param_1 + 0x18),*(int *)(param_1 + 0x1c),iVar4 + 0x28,iVar3,iVar8,iVar9,
               iVar10,iVar11,(double)CONCAT44(uVar16,uVar14));
    String_Trim(param_1);
    return;
  }
  iVar3 = *(int *)(param_1 + 0x58);
  if ((*(int *)(iVar3 + 0x80) == 0) &&
     ((NAN(*(double *)(param_1 + 0x38)) || NAN(_DAT_0052a0c0)) !=
      (*(double *)(param_1 + 0x38) == _DAT_0052a0c0))) {
    cVar15 = '\x01';
    cVar13 = '\0';
    iVar12 = 0;
    uVar5 = Math_FloatToUInt64();
    iVar8 = (int)uVar5;
    iVar4 = *(int *)(iVar3 + 0x98);
    uVar5 = Math_FloatToUInt64();
    iVar9 = (int)uVar5;
    iVar3 = *(int *)(*(int *)(iVar3 + 0x5c) + 0x6cc);
    cVar7 = '\0';
    iVar6 = 0;
    uVar5 = Math_FloatToUInt64();
    iVar10 = (int)uVar5;
    uVar5 = Math_FloatToUInt64();
    iVar11 = (int)uVar5;
    uVar5 = Math_FloatToUInt64();
    uVar14 = Collision_PixelPerfectDetection
                       (*(void **)(param_1 + 0x5c),(int)uVar5,iVar11,iVar10,iVar6,cVar7,iVar3,iVar9,
                        iVar4,iVar8,iVar12,cVar13,cVar15);
    if ((char)uVar14 != '\0') {
      uVar16 = 0;
      uVar14 = 0;
      iVar11 = 0;
      iVar10 = 0;
      iVar9 = -0x40100000;
      iVar8 = 0;
      iVar3 = Level_InitializePetrovakia(*(int *)(param_1 + 0x5c));
      iVar3 = iVar3 + 0x28;
      iVar4 = SexyWidget_GetTextureId(*(int *)(param_1 + 0x5c));
      SexyAppFramework_HandleActivation
                (*(void **)(param_1 + 0x58),*(int *)(param_1 + 0x10),*(int *)(param_1 + 0x14),
                 *(int *)(param_1 + 0x18),*(int *)(param_1 + 0x1c),iVar4 + 0x28,iVar3,iVar8,iVar9,
                 iVar10,iVar11,(double)CONCAT44(uVar16,uVar14));
      Particles_UpdateFire(*(void **)(param_1 + 0x58));
LAB_00431fec:
      String_ToLowerCase(param_1);
      return;
    }
  }
  if ((NAN(*(double *)(param_1 + 0x38)) || NAN(_DAT_0052a0c0)) ==
      (*(double *)(param_1 + 0x38) == _DAT_0052a0c0)) {
    iVar3 = *(int *)(param_1 + 0x50) + -0x18;
    *(int *)(param_1 + 0x50) = iVar3;
    if (iVar3 < 0) {
      *(undefined4 *)(param_1 + 0x50) = 0;
    }
    return;
  }
  Powerup_NukeCollisionAndActivation(param_1);
  return;
}


