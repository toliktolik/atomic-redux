/*
 * Function: WeaponSystem_Constructor
 * Address: 0042ff80
 * Category: weapons
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall
WeaponSystem_Constructor(void *this,int param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 *puVar1;
  void *pvVar2;
  undefined4 *puVar3;
  int *piVar4;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x511e49;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  SexyWidget_Constructor((undefined4 *)this);
  puVar1 = (undefined4 *)((int)this + 0x58);
  *puVar1 = &PTR_EmptyFunction_NoOp_0053127c;
  *(undefined ***)this = &PTR_Level_InitializeFrigistan_0052fe90;
  *puVar1 = &PTR_LAB_0052fe74;
  *(int *)((int)this + 0x60) = param_1;
  local_8 = 0;
  *(undefined4 *)((int)this + 0x5c) = *(undefined4 *)(param_1 + 0x5c);
  *(undefined4 *)((int)this + 0x70) = param_2;
  *(undefined4 *)((int)this + 0x78) = param_3;
  *(undefined4 *)((int)this + 0x74) = 0;
  pvVar2 = operator_new(0x108);
  local_8._0_1_ = 1;
  if (pvVar2 == (void *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    puVar3 = WeaponComponent_Constructor
                       (pvVar2,*(undefined4 *)((int)this + 0x5c),(uint)puVar1,0,
                        *(undefined4 *)((int)this + 0x78));
  }
  local_8._0_1_ = 0;
  *(undefined4 **)((int)this + 100) = puVar3;
  pvVar2 = operator_new(0x108);
  local_8._0_1_ = 2;
  if (pvVar2 == (void *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    puVar3 = WeaponComponent_Constructor
                       (pvVar2,*(undefined4 *)((int)this + 0x5c),(uint)puVar1,1,
                        *(undefined4 *)((int)this + 0x78));
  }
  local_8._0_1_ = 0;
  *(undefined4 **)((int)this + 0x68) = puVar3;
  pvVar2 = operator_new(0xf0);
  local_8 = CONCAT31(local_8._1_3_,3);
  if (pvVar2 == (void *)0x0) {
    piVar4 = (int *)0x0;
  }
  else {
    piVar4 = SexyWidget_SetAnimationFrame(pvVar2,0,(uint)puVar1);
  }
  *(int **)((int)this + 0x6c) = piVar4;
  *(undefined1 *)(piVar4 + 0x12) = 1;
  *(undefined1 *)(*(int *)((int)this + 0x6c) + 0xd1) = 1;
  ExceptionList = local_10;
  return (undefined4 *)this;
}


