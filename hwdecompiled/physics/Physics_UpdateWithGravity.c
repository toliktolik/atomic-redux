/*
 * Function: Physics_UpdateWithGravity
 * Address: 00411980
 * Category: physics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Physics_UpdateWithGravity(int param_1)

{
  int iVar1;
  double dVar2;
  double *pdVar3;
  uint uVar4;
  
  *(undefined4 *)(param_1 + 0x288) = *(undefined4 *)(param_1 + 0x284);
  do {
    iVar1 = *(int *)(*(int *)(param_1 + 0x288) + 4);
    if (iVar1 == 0) {
      return;
    }
    *(int *)(param_1 + 0x288) = iVar1;
    if (*(int *)(param_1 + 0x290) == 0) {
      pdVar3 = (double *)0x0;
    }
    else {
      pdVar3 = (double *)**(undefined4 **)(param_1 + 0x288);
    }
    *pdVar3 = pdVar3[2] + *pdVar3;
    pdVar3[1] = pdVar3[1] + pdVar3[3];
    pdVar3[2] = pdVar3[2] * _DAT_0052c570;
    dVar2 = pdVar3[3] + _DAT_0052c5e0;
    pdVar3[3] = dVar2;
    if (_DAT_0052c5d8 < dVar2) {
      *(undefined4 *)(pdVar3 + 3) = 0;
      *(undefined4 *)((int)pdVar3 + 0x1c) = 0x40000000;
    }
  } while (((*pdVar3 < _DAT_0052c5d0 == (NAN(*pdVar3) || NAN(_DAT_0052c5d0))) &&
           (pdVar3[1] <= _DAT_0052c5c8)) ||
          (iVar1 = *(int *)(param_1 + 0x288), iVar1 == *(int *)(param_1 + 0x284)));
  if (iVar1 == *(int *)(param_1 + 0x28c)) {
    *(undefined4 *)(param_1 + 0x28c) = *(undefined4 *)(iVar1 + 8);
  }
  uVar4 = *(uint *)(iVar1 + 8);
  *(undefined4 *)(uVar4 + 4) = *(undefined4 *)(iVar1 + 4);
  iVar1 = *(int *)(*(int *)(param_1 + 0x288) + 4);
  if (iVar1 != 0) {
    uVar4 = *(uint *)(*(int *)(param_1 + 0x288) + 8);
    *(uint *)(iVar1 + 8) = uVar4;
  }
  if (**(int **)(param_1 + 0x288) != 0) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar1,uVar4);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(iVar1,uVar4);
}


