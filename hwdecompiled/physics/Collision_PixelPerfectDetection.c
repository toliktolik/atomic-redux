/*
 * Function: Collision_PixelPerfectDetection
 * Address: 0042d750
 * Category: physics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __thiscall
Collision_PixelPerfectDetection
          (void *this,int param_1,int param_2,int param_3,int param_4,char param_5,int param_6,
          int param_7,int param_8,int param_9,int param_10,char param_11,char param_12)

{
  char cVar1;
  void *pvVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  char cVar9;
  int iVar10;
  int iVar11;
  int local_38;
  int local_34;
  int local_30;
  uint local_2c;
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  void *local_8;
  
  if (param_12 != '\0') {
    param_1 = param_1 - *(int *)((int)this + 0x10) / 2;
    param_2 = param_2 - *(int *)((int)this + 0x14) / 2;
    param_7 = param_7 - *(int *)(param_6 + 0x10) / 2;
    param_8 = param_8 - *(int *)(param_6 + 0x14) / 2;
  }
  iVar3 = *(int *)(param_6 + 0x10);
  iVar4 = *(int *)(param_6 + 0x14);
  local_18 = param_1;
  iVar5 = *(int *)((int)this + 0x10);
  local_14 = param_2;
  iVar10 = *(int *)((int)this + 0x14);
  local_28 = param_7;
  uVar8 = param_8;
  if ((((param_1 < iVar3 + param_7) && (param_2 < iVar4 + param_8)) && (param_7 < iVar5 + param_1))
     && (param_8 < iVar10 + param_2)) {
    local_24 = param_8;
    local_20 = iVar3;
    local_1c = iVar4;
    local_10 = iVar5;
    local_c = iVar10;
    local_8 = this;
    Collision_CalculateIntersection(&local_18,&local_38,&local_28);
    local_18 = (iVar5 * param_3 - param_1) + local_38;
    local_28 = (iVar3 * param_9 - param_7) + local_38;
    iVar3 = (iVar4 * param_10 - param_8) + local_34;
    iVar4 = Sprite_GetPixelData((int)local_8);
    iVar5 = Sprite_GetPixelData(param_6);
    param_8 = 0;
    uVar8 = local_2c;
    if (0 < (int)local_2c) {
      iVar10 = ((iVar10 * param_4 - param_2) + local_34) - iVar3;
      do {
        iVar11 = 0;
        if (0 < local_30) {
          do {
            pvVar2 = local_8;
            if (param_5 == '\0') {
              iVar6 = SexyWidget_GetWidth(*(int *)((int)local_8 + 8));
              cVar9 = *(char *)(iVar6 * (iVar10 + iVar3) + iVar11 + iVar4 + local_18);
            }
            else {
              iVar6 = SexyWidget_GetWidth(*(int *)((int)local_8 + 8));
              iVar6 = (iVar6 * (iVar10 + iVar3) - iVar11) - local_18;
              iVar7 = SexyWidget_GetWidth(*(int *)((int)pvVar2 + 8));
              cVar9 = *(char *)(iVar7 + -1 + iVar4 + iVar6);
            }
            if (param_11 == '\0') {
              iVar6 = SexyWidget_GetWidth(*(int *)(param_6 + 8));
              iVar7 = iVar6 * iVar3 + iVar11 + iVar5;
              cVar1 = *(char *)(iVar7 + local_28);
            }
            else {
              iVar6 = SexyWidget_GetWidth(*(int *)(param_6 + 8));
              iVar6 = (iVar6 * iVar3 - iVar11) - local_28;
              iVar7 = SexyWidget_GetWidth(*(int *)(param_6 + 8));
              cVar1 = *(char *)(iVar7 + -1 + iVar5 + iVar6);
            }
            if ((cVar9 != '\0') && (cVar1 != '\0')) {
              return CONCAT31((int3)((uint)iVar7 >> 8),1);
            }
            iVar11 = iVar11 + 1;
          } while (iVar11 < local_30);
        }
        uVar8 = param_8 + 1;
        iVar3 = iVar3 + 1;
        param_8 = uVar8;
      } while ((int)uVar8 < (int)local_2c);
    }
  }
  return uVar8 & 0xffffff00;
}


