/*
 * Function: SexyWidget_ApplyRotation
 * Address: 0046a340
 * Category: core
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __thiscall SexyWidget_ApplyRotation(void *this,int *param_1,undefined4 *param_2)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  int *piVar4;
  undefined4 *puVar5;
  LPCRITICAL_SECTION lpCriticalSection;
  undefined4 local_ec [21];
  int local_98;
  int local_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_64;
  int local_60;
  int local_5c;
  int local_38 [8];
  int local_18;
  LPCRITICAL_SECTION local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x514cf8;
  local_10 = ExceptionList;
  lpCriticalSection = (LPCRITICAL_SECTION)((int)this + 0x3c);
  ExceptionList = &local_10;
  local_14 = lpCriticalSection;
  EnterCriticalSection(lpCriticalSection);
  piVar3 = *(int **)((int)this + 0x5c);
  local_8 = 0;
  if (piVar3 == (int *)0x0) {
    piVar3 = local_80;
    for (iVar1 = 0x1b; iVar1 != 0; iVar1 = iVar1 + -1) {
      *piVar3 = 0;
      piVar3 = piVar3 + 1;
    }
    local_80[1] = param_1[1];
    local_80[2] = param_1[2];
    local_80[3] = param_1[3];
    local_6c = param_1[5];
    local_70 = param_1[4];
    local_64 = param_1[7];
    local_68 = param_1[6];
    local_5c = param_1[9];
    local_60 = param_1[8];
    iVar1 = param_1[0x1a];
    local_80[0] = 0x6c;
    piVar3 = param_1 + 0x12;
    piVar4 = local_38;
    for (iVar2 = 8; iVar2 != 0; iVar2 = iVar2 + -1) {
      *piVar4 = *piVar3;
      piVar3 = piVar3 + 1;
      piVar4 = piVar4 + 1;
    }
    local_18 = iVar1;
    iVar1 = (**(code **)(**(int **)((int)this + 0x58) + 0x18))
                      (*(int **)((int)this + 0x58),local_80,param_2,0);
    lpCriticalSection = local_14;
  }
  else {
    iVar1 = (**(code **)(*piVar3 + 0x18))(piVar3,param_1,&param_1,0);
    if (iVar1 < 0) goto LAB_0046a4ac;
    iVar1 = (**(code **)*param_1)(param_1,&DAT_00532f00,param_2);
    (**(code **)(*param_1 + 8))(param_1);
  }
  if (-1 < iVar1) {
    piVar3 = *(int **)((int)this + 0x60);
    puVar5 = local_ec;
    for (iVar2 = 0x1b; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar5 = 0;
      puVar5 = puVar5 + 1;
    }
    local_ec[0] = 0x6c;
    local_ec[1] = 0x1000;
    (**(code **)(*piVar3 + 0x58))(piVar3,local_ec);
    puVar5 = param_2;
    lpCriticalSection = local_14;
    if ((local_98 != 0x10) && (local_98 != 0x20)) {
      (**(code **)(*(int *)*param_2 + 8))((int *)*param_2);
      *puVar5 = 0;
      LeaveCriticalSection(local_14);
      ExceptionList = local_10;
      return -0x7789ff6f;
    }
  }
LAB_0046a4ac:
  LeaveCriticalSection(lpCriticalSection);
  ExceptionList = local_10;
  return iVar1;
}


