/*
 * Function: _atol
 * Address: 004fb83a
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


long __cdecl _atol(char *_Str)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_ECX;
  uint uVar4;
  int iVar5;
  byte *pbVar6;
  undefined8 uVar7;
  
  uVar7 = Assembly_EmptyFunction_4();
  puVar1 = *(undefined **)((int)uVar7 + 100);
  if (puVar1 != PTR_DAT_0056a40c) {
    puVar1 = (undefined *)Counter_IncrementValue(extraout_ECX,(int)((ulonglong)uVar7 >> 0x20));
  }
  while( true ) {
    if (*(int *)(puVar1 + 0x28) < 2) {
      uVar2 = *(byte *)(*(int *)(puVar1 + 0x48) + (uint)(byte)*_Str * 2) & 8;
    }
    else {
      uVar2 = func_0x00503474(puVar1,(uint)(byte)*_Str,8);
    }
    if (uVar2 == 0) break;
    _Str = (char *)((byte *)_Str + 1);
  }
  uVar2 = (uint)(byte)*_Str;
  pbVar6 = (byte *)_Str + 1;
  if ((uVar2 == 0x2d) || (uVar4 = uVar2, uVar2 == 0x2b)) {
    uVar4 = (uint)*pbVar6;
    pbVar6 = (byte *)_Str + 2;
  }
  iVar3 = 0;
  while( true ) {
    if ((uVar4 < 0x30) || (0x39 < uVar4)) {
      iVar5 = -1;
    }
    else {
      iVar5 = uVar4 - 0x30;
    }
    if (iVar5 == -1) break;
    iVar3 = iVar5 + iVar3 * 10;
    uVar4 = (uint)*pbVar6;
    pbVar6 = pbVar6 + 1;
  }
  if (uVar2 == 0x2d) {
    iVar3 = -iVar3;
  }
  return iVar3;
}


