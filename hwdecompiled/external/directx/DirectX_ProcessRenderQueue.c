/*
 * Function: DirectX_ProcessRenderQueue
 * Address: 0047c870
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
DirectX_ProcessRenderQueue(void *this,int *param_1,char param_2,int param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined1 local_230 [88];
  undefined4 local_1d8 [22];
  undefined4 local_180 [27];
  int local_114 [4];
  undefined4 local_104 [25];
  int local_a0;
  int local_9c;
  int local_98;
  int local_94;
  int local_90;
  int local_8c;
  int local_88;
  int local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  int local_70;
  int local_6c;
  int local_68;
  int local_64;
  int local_60;
  int local_5c;
  int local_58;
  int local_54;
  int local_50;
  int local_4c;
  int local_48;
  int local_44;
  int local_40;
  int local_3c;
  int local_38;
  int local_34;
  int local_30;
  int local_2c;
  tagPOINT local_28;
  int local_20;
  int local_1c;
  int local_18;
  int local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5146c6;
  local_10 = ExceptionList;
  if ((*(int *)((int)this + 0xccc) != 0) &&
     (piVar1 = *(int **)((int)this + 0x60), piVar1 != (int *)0x0)) {
    puVar4 = local_180;
    for (iVar2 = 0x1b; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar4 = 0;
      puVar4 = puVar4 + 1;
    }
    local_180[0] = 0x6c;
    local_180[1] = 0x1006;
    ExceptionList = &local_10;
    (**(code **)(*piVar1 + 0x58))(piVar1,local_180);
    local_28.y = *(int *)((int)this + 0xcb8);
    local_28.x = *(int *)((int)this + 0xcb4);
    local_44 = local_180[2];
    local_48 = local_180[3];
    local_50 = 0;
    local_4c = 0;
    iVar2 = *(int *)((int)this + 0xcc8) - local_28.y / 2;
    local_30 = *(int *)((int)this + 0xcc4) - local_28.x / 2;
    local_34 = *(undefined4 *)((int)this + 0x70);
    local_38 = *(undefined4 *)((int)this + 0x6c);
    local_40 = 0;
    local_3c = 0;
    local_2c = iVar2;
    Collision_CalculateIntersection(&local_30,&local_20,&local_40);
    local_9c = local_1c - iVar2;
    local_a0 = local_20 - local_30;
    if (param_2 != '\0') {
      local_28.x = 0;
      local_28.y = 0;
      ClientToScreen(*(HWND *)((int)this + 0xc94),&local_28);
      local_20 = local_20 + local_28.x;
      local_1c = local_1c + local_28.y;
    }
    local_98 = local_18 + local_a0;
    local_94 = local_14 + local_9c;
    local_88 = local_18 + local_20;
    local_84 = local_14 + local_1c;
    local_28.y = *(int *)((int)this + 0xcb8);
    iVar2 = param_4 - local_28.y / 2;
    local_28.x = *(int *)((int)this + 0xcb4);
    local_30 = param_3 - local_28.x / 2;
    local_34 = *(undefined4 *)((int)this + 0x70);
    local_38 = *(undefined4 *)((int)this + 0x6c);
    local_40 = 0;
    local_3c = 0;
    local_90 = local_20;
    local_8c = local_1c;
    local_2c = iVar2;
    Collision_CalculateIntersection(&local_30,&local_20,&local_40);
    iVar2 = local_1c - iVar2;
    local_60 = local_20 - local_30;
    local_40 = local_60;
    if (param_2 != '\0') {
      local_28.x = 0;
      local_28.y = 0;
      ClientToScreen(*(HWND *)((int)this + 0xc94),&local_28);
      local_20 = local_20 + local_28.x;
      local_1c = local_1c + local_28.y;
    }
    local_58 = local_18 + local_60;
    local_54 = local_14 + iVar2;
    local_68 = local_18 + local_20;
    local_64 = local_14 + local_1c;
    puVar4 = local_104;
    local_70 = local_20;
    local_6c = local_1c;
    local_28.x = local_58;
    for (iVar3 = 0x19; iVar3 != 0; iVar3 = iVar3 + -1) {
      *puVar4 = 0;
      puVar4 = puVar4 + 1;
    }
    local_104[0] = 100;
    local_5c = iVar2;
    iVar3 = (**(code **)(**(int **)((int)this + 0xcd8) + 0x14))
                      (*(int **)((int)this + 0xcd8),&local_60,param_1,&local_70,0x1000000,local_104)
    ;
    if (iVar3 != 0) {
      local_30 = local_20;
      local_2c = local_1c;
      piVar1 = (int *)Collision_CalculateIntersection(&local_20,local_114,&local_50);
      local_6c = piVar1[1];
      local_70 = *piVar1;
      local_18 = piVar1[2];
      local_14 = piVar1[3];
      local_60 = local_40 + (local_70 - local_30);
      local_58 = local_18 + local_60;
      local_5c = (iVar2 - local_2c) + local_6c;
      local_54 = local_14 + local_5c;
      local_64 = local_14 + local_6c;
      local_68 = local_18 + local_70;
      local_28.x = local_58;
      (**(code **)(**(int **)((int)this + 0xcd8) + 0x14))
                (*(int **)((int)this + 0xcd8),&local_60,param_1,&local_70,0x1000000,local_104);
    }
    local_44 = *(int *)((int)this + 0xcb8);
    local_48 = *(int *)((int)this + 0xcb4);
    iVar2 = param_4 - *(int *)((int)this + 0xcc8);
    local_50 = 0;
    local_4c = 0;
    iVar3 = param_3 - *(int *)((int)this + 0xcc4);
    local_40 = iVar3;
    local_3c = iVar2;
    local_38 = local_48;
    local_34 = local_44;
    Collision_CalculateIntersection(&local_40,&local_20,&local_50);
    if ((0 < local_18) || (0 < local_14)) {
      local_3c = local_1c - iVar2;
      local_40 = local_20 - iVar3;
      local_48 = local_18 + local_20;
      local_44 = local_14 + local_1c;
      local_4c = local_1c;
      local_38 = local_18 + local_40;
      local_34 = local_14 + local_3c;
      local_50 = local_20;
      (**(code **)(**(int **)((int)this + 0xcd8) + 0x14))
                (*(int **)((int)this + 0xcd8),&local_40,*(undefined4 *)((int)this + 0xcd4),&local_50
                 ,0x1000000,local_104);
      Graphics_InitializeSurface(local_1d8,*(undefined4 *)((int)this + 0xcdc));
      local_8 = 0;
      Graphics_DrawImage(local_1d8,*(int *)((int)this + 0xccc));
      local_8 = 0xffffffff;
      Graphics_ClearClipRect(local_1d8);
    }
    (**(code **)(*param_1 + 0x14))
              (param_1,&local_90,*(undefined4 *)((int)this + 0xcd4),&local_a0,0x1000000,local_104);
    local_74 = *(undefined4 *)((int)this + 0xcb8);
    local_78 = *(undefined4 *)((int)this + 0xcb4);
    local_80 = 0;
    local_7c = 0;
    (**(code **)(**(int **)((int)this + 0xcd4) + 0x14))
              (*(int **)((int)this + 0xcd4),&local_80,*(undefined4 *)((int)this + 0xcd8),&local_80,
               0x1000000,local_104);
    Graphics_InitializeSurface(local_230,*(undefined4 *)((int)this + 0xce0));
    local_8 = 1;
    Graphics_DrawImage(local_230,*(int *)((int)this + 0xccc));
    (**(code **)(*param_1 + 0x14))
              (param_1,&local_70,*(undefined4 *)((int)this + 0xcd8),&local_60,0x1000000,local_104);
    *(int *)((int)this + 0xcc4) = param_3;
    *(int *)((int)this + 0xcc8) = param_4;
    ExceptionList = local_10;
    return;
  }
  *(undefined1 *)((int)this + 0xcd0) = 0;
  return;
}


