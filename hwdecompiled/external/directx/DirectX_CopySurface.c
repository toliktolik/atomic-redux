/*
 * Function: DirectX_CopySurface
 * Address: 0047d290
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
DirectX_CopySurface(void *this,int param_1,undefined4 param_2,undefined4 param_3,int param_4,
                   int param_5,int *param_6)

{
  int *piVar1;
  int iVar2;
  HGDIOBJ h;
  uint uVar3;
  LPCSTR lpString;
  int y;
  int extraout_ECX;
  undefined4 *extraout_ECX_00;
  uint extraout_EDX;
  byte *unaff_EBP;
  uint unaff_ESI;
  ulonglong uVar4;
  int in_stack_fffffff4;
  HDC in_stack_fffffff8;
  
  uVar4 = Memory_ValidateHeap(*(void **)(param_1 + 4),(undefined1 *)*(void **)(param_1 + 4),0,
                              0x566184,&Sexy::DDImage::RTTI_Type_Descriptor,0,unaff_ESI,
                              in_stack_fffffff4,in_stack_fffffff8,unaff_EBP);
  if ((((int *)uVar4 != (int *)0x0) &&
      (piVar1 = (int *)SexyWidget_EnsureTexture((int *)uVar4), piVar1 != (int *)0x0)) &&
     (iVar2 = (**(code **)(*piVar1 + 0x44))(piVar1,&stack0xfffffff8), iVar2 == 0)) {
    h = SelectObject(in_stack_fffffff8,*(HGDIOBJ *)((int)this + 0x14));
    SetBkMode(in_stack_fffffff8,1);
    IntersectClipRect(in_stack_fffffff8,*param_6,param_6[1],param_6[2] + *param_6,
                      param_6[3] + param_6[1]);
    SexyWidget_GetHeight(param_5);
    SexyWidget_GetWidth(extraout_ECX);
    uVar3 = SexyWidget_ResetMatrix(extraout_ECX_00);
    SetTextColor(in_stack_fffffff8,extraout_EDX | uVar3 & 0xff);
    iVar2 = *(int *)(param_4 + 0x14);
    if (*(uint *)(param_4 + 0x18) < 0x10) {
      lpString = (LPCSTR)(param_4 + 4);
    }
    else {
      lpString = *(LPCSTR *)(param_4 + 4);
    }
    uVar4 = Math_FloatToUInt64();
    y = (int)uVar4;
    uVar4 = Math_FloatToUInt64();
    TextOutA(in_stack_fffffff8,(int)uVar4,y,lpString,iVar2);
    SelectObject(in_stack_fffffff8,h);
    (**(code **)(*piVar1 + 0x68))(piVar1,in_stack_fffffff8);
  }
  return;
}


