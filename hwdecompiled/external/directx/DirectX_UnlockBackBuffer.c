/*
 * Function: DirectX_UnlockBackBuffer
 * Address: 0047d120
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
DirectX_UnlockBackBuffer
          (void *this,int param_1,int param_2,int param_3,DWORD param_4,char param_5,byte param_6,
          byte param_7,char param_8)

{
  HDC hdc;
  int iVar1;
  HFONT h;
  HGDIOBJ h_00;
  LPCSTR pszFaceName;
  tagTEXTMETRICA local_3c;
  
  *(int *)((int)this + 0x18) = param_1;
  hdc = GetDC(*(HWND *)(param_1 + 0x30c));
  if (param_8 == '\0') {
    iVar1 = 0x60;
  }
  else {
    iVar1 = GetDeviceCaps(hdc,0x5a);
  }
  iVar1 = MulDiv(param_3,iVar1,0x48);
  if (*(uint *)(param_2 + 0x18) < 0x10) {
    pszFaceName = (LPCSTR)(param_2 + 4);
  }
  else {
    pszFaceName = *(LPCSTR *)(param_2 + 4);
  }
  h = CreateFontA(-iVar1,0,0,0,(-(uint)(param_5 != '\0') & 300) + 400,(uint)param_6,(uint)param_7,0,
                  param_4,4,0,4,0,pszFaceName);
  *(HFONT *)((int)this + 0x14) = h;
  h_00 = SelectObject(hdc,h);
  GetTextMetricsA(hdc,&local_3c);
  SelectObject(hdc,h_00);
  ReleaseDC(*(HWND *)(*(int *)((int)this + 0x18) + 0x30c),hdc);
  *(LONG *)((int)this + 0xc) = local_3c.tmHeight;
  *(LONG *)((int)this + 4) = local_3c.tmAscent;
  return;
}


