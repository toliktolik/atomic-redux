/*
 * Function: STL_String_FindLast
 * Address: 004568a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x00456957) */

void __thiscall STL_String_FindLast(void *this,_String_base *param_1)

{
  void *this_00;
  BOOL BVar1;
  HANDLE hMem;
  _String_base *p_Var2;
  undefined4 *in_stack_ffffffcc;
  uint in_stack_ffffffd0;
  undefined4 *puVar3;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  this_00 = DAT_00569f5c;
  uStack_c = 0x513128;
  local_10 = ExceptionList;
  puVar3 = (undefined4 *)(in_stack_ffffffd0 & 0xffffff00);
  local_8 = 0;
  ExceptionList = &local_10;
  if ((*(char *)((int)this + 0x491) == '\0') &&
     (ExceptionList = &local_10, BVar1 = OpenClipboard(*(HWND *)((int)this + 0x30c)), BVar1 != 0)) {
    hMem = GetClipboardData(1);
    if ((hMem != (HANDLE)0x0) &&
       (p_Var2 = (_String_base *)GlobalLock(hMem), p_Var2 != (_String_base *)0x0)) {
      Background_UpdateParallaxLayers(&stack0xffffffcc,p_Var2);
      GlobalUnlock(hMem);
    }
    CloseClipboard();
  }
  STL_Map_UpperBound(this,(_String_base *)&stack0xffffffcc);
  *(undefined4 *)(param_1 + 0x18) = 0xf;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike
            (param_1,(uint)&stack0xffffffcc,(_String_base *)&stack0xffffffcc,0,0xffffffff);
  ExceptionList = local_10;
  Exception_SetMessage(this_00,in_stack_ffffffcc,puVar3);
  return;
}


