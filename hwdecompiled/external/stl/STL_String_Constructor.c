/*
 * Function: STL_String_Constructor
 * Address: 00457870
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void STL_String_Constructor(undefined4 param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  char *pcVar4;
  int *piVar5;
  undefined1 *puVar6;
  uint *puVar7;
  int *piVar8;
  undefined3 uVar9;
  undefined3 extraout_var;
  int *extraout_ECX;
  undefined3 extraout_var_00;
  int *extraout_ECX_00;
  uint extraout_EDX;
  uint uVar10;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  int *piVar11;
  int *piVar12;
  bool bVar13;
  undefined8 uVar14;
  undefined1 *puVar15;
  undefined **local_60 [10];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  void *local_1c;
  int *local_18;
  undefined1 local_11;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  piVar8 = param_2;
  local_8 = 0xffffffff;
  uStack_c = 0x5135d8;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  if (*(char *)((int)param_2 + 0x39) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    pcVar3 = "invalid map/set<T> iterator";
    do {
      pcVar4 = pcVar3;
      pcVar3 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    ExceptionList = &pvStack_10;
    String_Assign(local_38,(_String_base *)"invalid map/set<T> iterator",(uint)(pcVar4 + -0x52a114))
    ;
    local_8 = 0;
    Level_InitializeFrigistan(local_60,local_38);
    local_60[0] = &PTR_Level_InitializePetrovakia_00531574;
    CRuntime_CxxThrowException(local_60,&DAT_0054f69c);
  }
  local_18 = piVar8;
  Tree_FindMinimumNode((int *)&param_2);
  piVar11 = (int *)*piVar8;
  puVar7 = (uint *)(piVar8 + 2);
  uVar10 = extraout_EDX;
  piVar5 = piVar8;
  if (*(char *)((int)piVar11 + 0x39) == '\0') {
    uVar10 = *puVar7;
    if (*(char *)(uVar10 + 0x39) != '\0') goto LAB_00457918;
    puVar7 = (uint *)(param_2 + 2);
    piVar5 = param_2;
  }
  piVar11 = (int *)*puVar7;
LAB_00457918:
  if (piVar5 == piVar8) {
    piVar12 = (int *)piVar8[1];
    uVar14 = CONCAT44(uVar10,piVar12);
    if (*(char *)((int)piVar11 + 0x39) == '\0') {
      piVar11[1] = (int)piVar12;
    }
    if (*(int **)(*(int *)((int)local_1c + 4) + 4) == local_18) {
      *(int **)(*(int *)((int)local_1c + 4) + 4) = piVar11;
    }
    else if ((int *)*piVar12 == local_18) {
      *piVar12 = (int)piVar11;
    }
    else {
      piVar12[2] = (int)piVar11;
    }
    if ((int *)**(int **)((int)local_1c + 4) == local_18) {
      if (*(char *)((int)piVar11 + 0x39) == '\0') {
        uVar14 = Tree_BalanceAfterInsertion(piVar11);
      }
      uVar10 = (uint)((ulonglong)uVar14 >> 0x20);
      **(undefined4 **)((int)local_1c + 4) = (int)uVar14;
    }
    piVar8 = local_18;
    if (*(int **)(*(int *)((int)local_1c + 4) + 8) == local_18) {
      if (*(char *)((int)piVar11 + 0x39) == '\0') {
        uVar14 = LinkedList_FindNextActiveNode((int)piVar11);
        uVar10 = (uint)((ulonglong)uVar14 >> 0x20);
        piVar8 = *(int **)((int)local_1c + 4);
        piVar8[2] = (int)uVar14;
      }
      else {
        piVar8 = *(int **)((int)local_1c + 4);
        piVar8[2] = (int)piVar12;
      }
    }
  }
  else {
    *(int **)(*piVar8 + 4) = piVar5;
    *piVar5 = *piVar8;
    piVar12 = piVar5;
    if (piVar5 != (int *)piVar8[2]) {
      piVar12 = (int *)piVar5[1];
      if (*(char *)((int)piVar11 + 0x39) == '\0') {
        piVar11[1] = (int)piVar12;
      }
      *piVar12 = (int)piVar11;
      *puVar7 = local_18[2];
      *(int **)(local_18[2] + 4) = piVar5;
    }
    if (*(int **)(*(int *)((int)local_1c + 4) + 4) == local_18) {
      *(int **)(*(int *)((int)local_1c + 4) + 4) = piVar5;
    }
    else {
      piVar8 = (int *)local_18[1];
      if ((int *)*piVar8 == local_18) {
        *piVar8 = (int)piVar5;
      }
      else {
        piVar8[2] = (int)piVar5;
      }
    }
    iVar1 = local_18[1];
    piVar5[1] = iVar1;
    iVar2 = piVar5[0xe];
    piVar8 = (int *)CONCAT31((int3)((uint)iVar1 >> 8),(char)iVar2);
    uVar10 = CONCAT31((int3)((uint)local_1c >> 8),(char)local_18[0xe]);
    *(char *)(piVar5 + 0xe) = (char)local_18[0xe];
    *(char *)(local_18 + 0xe) = (char)iVar2;
  }
  if ((char)local_18[0xe] == '\x01') {
    piVar8 = *(int **)((int)local_1c + 4);
    if (piVar11 != (int *)piVar8[1]) {
      do {
        if ((char)piVar11[0xe] != '\x01') break;
        piVar5 = (int *)*piVar12;
        uVar9 = (undefined3)((uint)piVar8 >> 8);
        if (piVar11 == piVar5) {
          piVar5 = (int *)piVar12[2];
          if ((char)piVar5[0xe] == '\0') {
            *(undefined1 *)(piVar5 + 0xe) = 1;
            *(undefined1 *)(piVar12 + 0xe) = 0;
            XML_LoadDocument(local_1c,(int)piVar12);
            piVar5 = (int *)piVar12[2];
            uVar9 = extraout_var;
          }
          piVar8 = (int *)CONCAT31(uVar9,*(char *)((int)piVar5 + 0x39));
          if (*(char *)((int)piVar5 + 0x39) == '\0') {
            if ((*(char *)(*piVar5 + 0x38) != '\x01') ||
               (piVar8 = (int *)piVar5[2], (char)piVar8[0xe] != '\x01')) {
              if (*(char *)(piVar5[2] + 0x38) == '\x01') {
                *(undefined1 *)(*piVar5 + 0x38) = 1;
                *(undefined1 *)(piVar5 + 0xe) = 0;
                XML_ValidateDocument(local_1c,piVar5);
                piVar5 = (int *)piVar12[2];
              }
              *(char *)(piVar5 + 0xe) = (char)piVar12[0xe];
              *(undefined1 *)(piVar12 + 0xe) = 1;
              *(undefined1 *)(piVar5[2] + 0x38) = 1;
              XML_LoadDocument(local_1c,(int)piVar12);
              piVar8 = extraout_ECX;
              uVar10 = extraout_EDX_00;
              break;
            }
LAB_00457acc:
            *(undefined1 *)(piVar5 + 0xe) = 0;
          }
        }
        else {
          if ((char)piVar5[0xe] == '\0') {
            *(undefined1 *)(piVar5 + 0xe) = 1;
            *(undefined1 *)(piVar12 + 0xe) = 0;
            XML_ValidateDocument(local_1c,piVar12);
            piVar5 = (int *)*piVar12;
            uVar9 = extraout_var_00;
          }
          piVar8 = (int *)CONCAT31(uVar9,*(char *)((int)piVar5 + 0x39));
          if (*(char *)((int)piVar5 + 0x39) == '\0') {
            if ((*(char *)(piVar5[2] + 0x38) == '\x01') &&
               (piVar8 = (int *)*piVar5, (char)piVar8[0xe] == '\x01')) goto LAB_00457acc;
            if (*(char *)(*piVar5 + 0x38) == '\x01') {
              *(undefined1 *)(piVar5[2] + 0x38) = 1;
              *(undefined1 *)(piVar5 + 0xe) = 0;
              XML_LoadDocument(local_1c,(int)piVar5);
              piVar5 = (int *)*piVar12;
            }
            *(char *)(piVar5 + 0xe) = (char)piVar12[0xe];
            *(undefined1 *)(piVar12 + 0xe) = 1;
            *(undefined1 *)(*piVar5 + 0x38) = 1;
            XML_ValidateDocument(local_1c,piVar12);
            piVar8 = extraout_ECX_00;
            uVar10 = extraout_EDX_01;
            break;
          }
        }
        uVar10 = *(uint *)((int)local_1c + 4);
        bVar13 = piVar12 != *(int **)(uVar10 + 4);
        piVar11 = piVar12;
        piVar12 = (int *)piVar12[1];
      } while (bVar13);
    }
    *(undefined1 *)(piVar11 + 0xe) = 1;
  }
  if ((uint)local_18[10] < 0x10) {
    puVar15 = &local_11;
    local_18[10] = 0xf;
    local_11 = 0;
    local_18[9] = 0;
    puVar6 = (undefined1 *)String_GetDataPointer((int)(local_18 + 4));
    Utility_CopyByte(puVar6,puVar15);
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)local_18,extraout_EDX_02);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler((int)piVar8,uVar10);
}


