/*
 * Function: STL_Vector_MoveData
 * Address: 00455370
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void STL_Vector_MoveData(void)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  void *this;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int extraout_ECX;
  uint extraout_EDX;
  float10 fVar7;
  ulonglong uVar8;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff4c;
  undefined4 *in_stack_ffffff50;
  _String_base local_5c [4];
  uint local_58;
  undefined4 local_48;
  uint local_44;
  undefined1 local_40 [4];
  uint local_3c;
  undefined4 local_34 [2];
  undefined4 local_2c;
  uint local_28;
  undefined4 local_24 [2];
  undefined8 local_1c;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  uStack_c = 0x5133e4;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  DAT_0056da08 = DAT_0056da08 + 1;
  ExceptionList = &local_10;
  if ((_DAT_0056dab4 & 1) == 0) {
    _DAT_0056dab4 = _DAT_0056dab4 | 1;
    local_8 = 0;
    local_28 = 0xf;
    local_2c = 0;
    local_3c = local_3c & 0xffffff00;
    pcVar2 = "Tahoma";
    do {
      pcVar3 = pcVar2;
      pcVar2 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    ExceptionList = &local_10;
    String_Assign(local_40,(_String_base *)"Tahoma",(uint)(pcVar3 + -0x531414));
    local_8 = CONCAT31(local_8._1_3_,1);
    System_CancelScheduledTask(&DAT_0056da98,DAT_0056da10,(int)local_40,8,0,'\0',0,0);
    if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,local_3c);
    }
    _atexit((_func_4879 *)&DAT_00526940);
  }
  local_8 = 0xffffffff;
  if (DAT_0056da28 == (int *)0x0) {
    this = operator_new(200);
    local_1c = (double)CONCAT44(this,(undefined4)local_1c);
    local_8 = 2;
    if (this == (void *)0x0) {
      DAT_0056da28 = (int *)0x0;
    }
    else {
      DAT_0056da28 = Game_UpdateParticles(this,*(int *)(DAT_0056da10 + 0x328));
    }
    local_8 = 0xffffffff;
    iVar1 = *DAT_0056da28;
    iVar4 = Graphics_SetTransform(0x56da98);
    (**(code **)(iVar1 + 0x60))(0x32,iVar4 + 4);
    (**(code **)(*DAT_0056da28 + 0x68))(0,0);
    (**(code **)(*DAT_0056da28 + 0x6c))(1);
  }
  fVar7 = Matrix_SetRotation(0x56da48);
  if (((float10)_DAT_0052c578 <= fVar7) || (DAT_0056da2c != '\0')) {
    Matrix_RotateY(0x56da48);
    if (DAT_0056da2c == '\0') {
      local_1c = (double)(DAT_0056da08 * 1000);
      Matrix_SetRotation(0x56da48);
      uVar8 = Math_FloatToUInt64();
      DAT_0056da0c = (undefined4)uVar8;
    }
    else {
      DAT_0056da2c = '\0';
      DAT_0056da0c = 0;
    }
    Matrix_RotateX((LARGE_INTEGER *)&DAT_0056da48);
    DAT_0056da08 = 0;
    Graphics_InitializeSurface(&stack0xffffff4c,DAT_0056da28);
    local_8 = 3;
    Graphics_SetProjection(&stack0xffffff4c,&DAT_0056da98);
    Sound_SetPosition(local_5c,"FPS: %d");
    local_8 = CONCAT31(local_8._1_3_,4);
    SexyWidget_GetMatrix(local_24,0);
    SexyWidget_SetRectangle(&stack0xffffff4c,local_24);
    uVar5 = SexyWidget_GetHeight((int)DAT_0056da28);
    uVar6 = SexyWidget_GetWidth((int)DAT_0056da28);
    Graphics_FillRect(&stack0xffffff4c,0,0,uVar6,uVar5);
    SexyWidget_GetMatrix(local_34,0xffffff);
    SexyWidget_SetRectangle(&stack0xffffff4c,local_34);
    uVar5 = SexyWidget_GetWidth(0x56da98);
    SexyWidget_DrawWithInterface(&stack0xffffff4c,local_5c,2,uVar5);
    Graphics_SetTextureFilter(DAT_0056da28);
    DAT_0056da28[7] = DAT_0056da28[7] + 1;
    if (0xf < local_44) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_58,extraout_EDX);
    }
    local_44 = 0xf;
    local_48 = 0;
    local_58 = local_58 & 0xffffff00;
    local_8 = 0xffffffff;
    Graphics_ClearClipRect((undefined4 *)&stack0xffffff4c);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff4c,in_stack_ffffff50);
  return;
}


