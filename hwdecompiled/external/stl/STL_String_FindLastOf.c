/*
 * Function: STL_String_FindLastOf
 * Address: 00456a20
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall STL_String_FindLastOf(void *this,undefined4 *param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  undefined4 *puVar3;
  int *piVar4;
  bool local_c;
  int *local_8;
  
  piVar1 = *(int **)((int)this + 4);
  local_c = true;
  piVar4 = piVar1;
  if (*(char *)(piVar1[1] + 0x15) == '\0') {
    piVar2 = (int *)piVar1[1];
    do {
      piVar4 = piVar2;
      local_c = *param_2 < piVar4[3];
      if (local_c) {
        piVar2 = (int *)*piVar4;
      }
      else {
        piVar2 = (int *)piVar4[2];
      }
    } while (*(char *)((int)piVar2 + 0x15) == '\0');
  }
  local_8 = piVar4;
  if (local_c) {
    if (piVar4 == (int *)*piVar1) {
      puVar3 = (undefined4 *)DataMap_InsertElement(this,&param_2,'\x01',piVar4,param_2);
      *param_1 = *puVar3;
      *(undefined1 *)(param_1 + 1) = 1;
      return;
    }
    Threading_HandleAudioStreaming((int *)&local_8);
  }
  if (local_8[3] < *param_2) {
    puVar3 = (undefined4 *)DataMap_InsertElement(this,&param_2,local_c,piVar4,param_2);
    *param_1 = *puVar3;
    *(undefined1 *)(param_1 + 1) = 1;
    return;
  }
  *param_1 = local_8;
  *(undefined1 *)(param_1 + 1) = 0;
  return;
}


