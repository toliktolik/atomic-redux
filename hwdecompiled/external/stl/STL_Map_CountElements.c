/*
 * Function: STL_Map_CountElements
 * Address: 004539d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __fastcall
STL_Map_CountElements(int *param_1,uint param_2,_String_base *param_3,undefined1 param_4)

{
  HINSTANCE pHVar1;
  DWORD DVar2;
  _String_base *p_Var3;
  uint uVar4;
  uint extraout_EDX;
  
  if ((char)param_1[0xe3] != '\0') {
    if ((uint)param_1[0xea] < 0x10) {
      p_Var3 = (_String_base *)(param_1 + 0xe5);
    }
    else {
      p_Var3 = (_String_base *)param_1[0xe5];
    }
    pHVar1 = (HINSTANCE)String_Compare(param_3,0,*(uint *)(param_3 + 0x14),p_Var3,param_1[0xe9]);
    param_2 = extraout_EDX;
    if (pHVar1 == (HINSTANCE)0x0) goto LAB_00453a14;
  }
  *(undefined1 *)((int)param_1 + 0x38d) = param_4;
  *(undefined1 *)(param_1 + 0xe3) = 1;
  PowerUp_ProcessThunderstrike((_String_base *)(param_1 + 0xe4),param_2,param_3,0,0xffffffff);
  DVar2 = GetTickCount();
  param_1[0xeb] = DVar2;
  if (*(uint *)(param_3 + 0x18) < 0x10) {
    p_Var3 = param_3 + 4;
  }
  else {
    p_Var3 = *(_String_base **)(param_3 + 4);
  }
  pHVar1 = ShellExecuteA((HWND)0x0,"open",(LPCSTR)p_Var3,(LPCSTR)0x0,(LPCSTR)0x0,1);
  if ((int)pHVar1 < 0x21) {
    uVar4 = (**(code **)(*param_1 + 0x7c))(param_3);
    return uVar4 & 0xffffff00;
  }
LAB_00453a14:
  return CONCAT31((int3)((uint)pHVar1 >> 8),1);
}


