/*
 * Function: STL_String_Assign
 * Address: 004f19ee
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void STL_String_Assign(void)

{
  void *this;
  uint *puVar1;
  uint uVar2;
  facet *this_00;
  int iVar3;
  undefined4 *puVar4;
  int *piVar5;
  undefined4 uVar6;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  int unaff_EBP;
  undefined8 uVar7;
  undefined4 *in_stack_0000d281;
  undefined4 *in_stack_0000d285;
  
  Assembly_BitShiftLocking();
  uVar2 = DAT_00569f5c ^ *(uint *)(unaff_EBP + 4);
  *(undefined4 *)(unaff_EBP + -0x14) = 0xffffffff;
  this = *(void **)(unaff_EBP + 0x1c);
  *(uint *)(unaff_EBP + -0x10) = uVar2;
  if ((*(uint *)((int)this + 0xc) & 0x4000) == 0) {
    puVar4 = (undefined4 *)System_GetSystemInfo();
    *puVar4 = 0;
    SexyWidget_ProcessInput(this,(int *)(unaff_EBP + -0x18));
    *(undefined4 *)(unaff_EBP + -4) = 4;
    STL_String_Replace();
    uVar2 = System_GetProcAddress();
    *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
    SmartPointer_Destructor((uint *)(unaff_EBP + -0x18));
    if (((*(int *)(unaff_EBP + -0x1c) != unaff_EBP + -0x58) &&
        (piVar5 = (int *)System_GetSystemInfo(), *piVar5 == 0)) && (uVar2 < 2)) {
      *(uint *)(unaff_EBP + -0x14) = uVar2;
    }
  }
  else {
    SexyWidget_ProcessInput(this,(int *)(unaff_EBP + 0x1c));
    *(undefined4 *)(unaff_EBP + -4) = 0;
    this_00 = Log_FlushBuffer();
    *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
    SmartPointer_Destructor((uint *)(unaff_EBP + 0x1c));
    Collision_ClosestPoint(unaff_EBP + -0x38,extraout_EDX,'\0');
    FID_conflict_assign((_String_base *)(unaff_EBP + -0x38),extraout_EDX_00,1,0);
    *(undefined4 *)(unaff_EBP + -4) = 1;
    iVar3 = Resource_FreeResource(this_00,unaff_EBP + -0x54);
    *(undefined1 *)(unaff_EBP + -4) = 2;
    FID_conflict_append((_String_base *)(unaff_EBP + -0x38),extraout_EDX_01,iVar3,0,0xffffffff);
    *(undefined1 *)(unaff_EBP + -4) = 1;
    Collision_ClosestPoint(unaff_EBP + -0x54,extraout_EDX_02,'\x01');
    UI_ShowLivesDisplay((void *)(unaff_EBP + -0x38),1,0);
    iVar3 = STL_String_Insert(this_00,unaff_EBP + -0x54);
    *(undefined1 *)(unaff_EBP + -4) = 3;
    FID_conflict_append((_String_base *)(unaff_EBP + -0x38),extraout_EDX_03,iVar3,0,0xffffffff);
    *(undefined1 *)(unaff_EBP + -4) = 1;
    Collision_ClosestPoint(unaff_EBP + -0x54,extraout_EDX_04,'\x01');
    uVar7 = STL_String_Erase();
    *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
    *(int *)(unaff_EBP + -0x14) = (int)uVar7;
    Collision_ClosestPoint(unaff_EBP + -0x38,(uint)((ulonglong)uVar7 >> 0x20),'\x01');
  }
  uVar6 = equal((void *)(unaff_EBP + 0xc),(int *)(unaff_EBP + 0x14));
  puVar1 = *(uint **)(unaff_EBP + 0x20);
  if ((char)uVar6 != '\0') {
    *puVar1 = *puVar1 | 1;
  }
  if (*(int *)(unaff_EBP + -0x14) < 0) {
    *puVar1 = *puVar1 | 2;
  }
  else {
    *(bool *)*(undefined4 *)(unaff_EBP + 0x24) = *(int *)(unaff_EBP + -0x14) != 0;
  }
  puVar4 = *(undefined4 **)(unaff_EBP + 8);
  *puVar4 = *(undefined4 *)(unaff_EBP + 0xc);
  puVar4[1] = *(undefined4 *)(unaff_EBP + 0x10);
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  Exception_SetMessage
            ((void *)(*(uint *)(unaff_EBP + -0x10) ^ *(uint *)(unaff_EBP + 4)),in_stack_0000d281,
             in_stack_0000d285);
  return;
}


