/*
 * Function: STL_Map_RemoveNode
 * Address: 004a7b70
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void STL_Map_RemoveNode(undefined4 param_1,int *param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  int *piVar4;
  undefined4 uVar5;
  int *piVar6;
  int extraout_ECX;
  uint extraout_EDX;
  int *piVar7;
  int *piVar8;
  int *piVar9;
  bool bVar10;
  undefined **local_5c [10];
  undefined1 local_34 [4];
  undefined1 local_30;
  undefined4 local_20;
  undefined4 local_1c;
  void *local_18;
  int *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  piVar4 = param_2;
  local_8 = 0xffffffff;
  uStack_c = 0x515e68;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  if (*(char *)((int)param_2 + 0xd1) != '\0') {
    local_1c = 0xf;
    local_20 = 0;
    local_30 = 0;
    pcVar2 = "invalid map/set<T> iterator";
    do {
      pcVar3 = pcVar2;
      pcVar2 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    ExceptionList = &pvStack_10;
    String_Assign(local_34,(_String_base *)"invalid map/set<T> iterator",(uint)(pcVar3 + -0x52a114))
    ;
    local_8 = 0;
    Level_InitializeFrigistan(local_5c,local_34);
    local_5c[0] = &PTR_Level_InitializePetrovakia_00531574;
    CRuntime_CxxThrowException(local_5c,&DAT_0054f69c);
  }
  local_14 = piVar4;
  Vector_Length((int *)&param_2);
  piVar7 = (int *)*piVar4;
  piVar6 = piVar4 + 2;
  piVar9 = piVar4;
  if (*(char *)((int)piVar7 + 0xd1) == '\0') {
    if (*(char *)(*piVar6 + 0xd1) != '\0') goto LAB_004a7c21;
    piVar6 = param_2 + 2;
    piVar9 = param_2;
  }
  piVar7 = (int *)*piVar6;
LAB_004a7c21:
  if (piVar9 == piVar4) {
    piVar8 = (int *)piVar4[1];
    if (*(char *)((int)piVar7 + 0xd1) == '\0') {
      piVar7[1] = (int)piVar8;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(int **)(*(int *)((int)local_18 + 4) + 4) = piVar7;
    }
    else if ((int *)*piVar8 == local_14) {
      *piVar8 = (int)piVar7;
    }
    else {
      piVar8[2] = (int)piVar7;
    }
    if ((int *)**(int **)((int)local_18 + 4) == local_14) {
      piVar4 = piVar8;
      if (*(char *)((int)piVar7 + 0xd1) == '\0') {
        piVar4 = (int *)Animation_StopSequence(piVar7);
      }
      **(int **)((int)local_18 + 4) = (int)piVar4;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 8) == local_14) {
      if (*(char *)((int)piVar7 + 0xd1) == '\0') {
        uVar5 = Collision_InitializeSystem((int)piVar7);
        *(undefined4 *)(*(int *)((int)local_18 + 4) + 8) = uVar5;
      }
      else {
        *(int **)(*(int *)((int)local_18 + 4) + 8) = piVar8;
      }
    }
  }
  else {
    *(int **)(*piVar4 + 4) = piVar9;
    *piVar9 = *piVar4;
    piVar8 = piVar9;
    if (piVar9 != (int *)piVar4[2]) {
      piVar8 = (int *)piVar9[1];
      if (*(char *)((int)piVar7 + 0xd1) == '\0') {
        piVar7[1] = (int)piVar8;
      }
      *piVar8 = (int)piVar7;
      *piVar6 = local_14[2];
      *(int **)(local_14[2] + 4) = piVar9;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(int **)(*(int *)((int)local_18 + 4) + 4) = piVar9;
    }
    else {
      piVar4 = (int *)local_14[1];
      if ((int *)*piVar4 == local_14) {
        *piVar4 = (int)piVar9;
      }
      else {
        piVar4[2] = (int)piVar9;
      }
    }
    piVar9[1] = local_14[1];
    iVar1 = piVar9[0x34];
    *(char *)(piVar9 + 0x34) = (char)local_14[0x34];
    *(char *)(local_14 + 0x34) = (char)iVar1;
  }
  if ((char)local_14[0x34] == '\x01') {
    if (piVar7 != *(int **)(*(int *)((int)local_18 + 4) + 4)) {
      do {
        if ((char)piVar7[0x34] != '\x01') break;
        piVar4 = (int *)*piVar8;
        if (piVar7 == piVar4) {
          piVar4 = (int *)piVar8[2];
          if ((char)piVar4[0x34] == '\0') {
            *(undefined1 *)(piVar4 + 0x34) = 1;
            *(undefined1 *)(piVar8 + 0x34) = 0;
            Vector_Rotate(local_18,(int)piVar8);
            piVar4 = (int *)piVar8[2];
          }
          if (*(char *)((int)piVar4 + 0xd1) == '\0') {
            if ((*(char *)(*piVar4 + 0xd0) != '\x01') || (*(char *)(piVar4[2] + 0xd0) != '\x01')) {
              if (*(char *)(piVar4[2] + 0xd0) == '\x01') {
                *(undefined1 *)(*piVar4 + 0xd0) = 1;
                *(undefined1 *)(piVar4 + 0x34) = 0;
                Vector_Transform(local_18,piVar4);
                piVar4 = (int *)piVar8[2];
              }
              *(char *)(piVar4 + 0x34) = (char)piVar8[0x34];
              *(undefined1 *)(piVar8 + 0x34) = 1;
              *(undefined1 *)(piVar4[2] + 0xd0) = 1;
              Vector_Rotate(local_18,(int)piVar8);
              break;
            }
LAB_004a7e3b:
            *(undefined1 *)(piVar4 + 0x34) = 0;
          }
        }
        else {
          if ((char)piVar4[0x34] == '\0') {
            *(undefined1 *)(piVar4 + 0x34) = 1;
            *(undefined1 *)(piVar8 + 0x34) = 0;
            Vector_Transform(local_18,piVar8);
            piVar4 = (int *)*piVar8;
          }
          if (*(char *)((int)piVar4 + 0xd1) == '\0') {
            if ((*(char *)(piVar4[2] + 0xd0) == '\x01') && (*(char *)(*piVar4 + 0xd0) == '\x01'))
            goto LAB_004a7e3b;
            if (*(char *)(*piVar4 + 0xd0) == '\x01') {
              *(undefined1 *)(piVar4[2] + 0xd0) = 1;
              *(undefined1 *)(piVar4 + 0x34) = 0;
              Vector_Rotate(local_18,(int)piVar4);
              piVar4 = (int *)*piVar8;
            }
            *(char *)(piVar4 + 0x34) = (char)piVar8[0x34];
            *(undefined1 *)(piVar8 + 0x34) = 1;
            *(undefined1 *)(*piVar4 + 0xd0) = 1;
            Vector_Transform(local_18,piVar8);
            break;
          }
        }
        bVar10 = piVar8 != *(int **)(*(int *)((int)local_18 + 4) + 4);
        piVar7 = piVar8;
        piVar8 = (int *)piVar8[1];
      } while (bVar10);
    }
    *(undefined1 *)(piVar7 + 0x34) = 1;
  }
  AnimationList_Clear((int)(local_14 + 3));
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX,extraout_EDX);
}


