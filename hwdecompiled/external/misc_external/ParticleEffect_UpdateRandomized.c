/*
 * Function: ParticleEffect_UpdateRandomized
 * Address: 00411c30
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall ParticleEffect_UpdateRandomized(int param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  double *pdVar4;
  
  *(undefined4 *)(param_1 + 0x2a8) = *(undefined4 *)(param_1 + 0x2a4);
  do {
    while( true ) {
      iVar3 = *(int *)(*(int *)(param_1 + 0x2a8) + 4);
      if (iVar3 == 0) {
        return;
      }
      *(int *)(param_1 + 0x2a8) = iVar3;
      if (*(int *)(param_1 + 0x2b0) == 0) {
        pdVar4 = (double *)0x0;
      }
      else {
        pdVar4 = (double *)**(undefined4 **)(param_1 + 0x2a8);
      }
      *pdVar4 = pdVar4[2] + *pdVar4;
      pdVar4[1] = pdVar4[3] + pdVar4[1];
      uVar2 = Collision_HandleEnemyHit();
      uVar2 = uVar2 & 0x8000001f;
      if ((int)uVar2 < 0) {
        uVar2 = (uVar2 - 1 | 0xffffffe0) + 1;
      }
      *(uint *)(pdVar4 + 4) = uVar2 + 0x20;
      iVar3 = Collision_HandleEnemyHit();
      *(int *)((int)pdVar4 + 0x24) = iVar3 % 5;
      if (*(int *)(pdVar4 + 5) == 0) break;
      *(int *)(pdVar4 + 5) = *(int *)(pdVar4 + 5) + -1;
    }
    iVar3 = *(int *)(param_1 + 0x2a8);
  } while (iVar3 == *(int *)(param_1 + 0x2a4));
  if (iVar3 == *(int *)(param_1 + 0x2ac)) {
    *(undefined4 *)(param_1 + 0x2ac) = *(undefined4 *)(iVar3 + 8);
  }
  uVar2 = *(uint *)(iVar3 + 4);
  *(uint *)(*(int *)(iVar3 + 8) + 4) = uVar2;
  iVar3 = *(int *)(*(int *)(param_1 + 0x2a8) + 4);
  if (iVar3 != 0) {
    *(undefined4 *)(iVar3 + 8) = *(undefined4 *)(*(int *)(param_1 + 0x2a8) + 8);
  }
  piVar1 = *(int **)(param_1 + 0x2a8);
  if (*piVar1 != 0) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)piVar1,uVar2);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler((int)piVar1,uVar2);
}


