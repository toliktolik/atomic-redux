/*
 * Function: GIF_SetLoopCount
 * Address: 004d30f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl GIF_SetLoopCount(byte *param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  char cVar3;
  uint uVar4;
  byte *pbVar5;
  int iVar6;
  undefined4 *puVar7;
  int iVar8;
  
  uVar1 = *(uint *)(&DAT_00568230 + param_2 * 4);
  iVar8 = *(int *)(param_1 + 8);
  iVar2 = *(int *)param_1;
  iVar6 = param_2 + iVar2;
  pbVar5 = *(byte **)(param_1 + 4);
  cVar3 = (char)iVar2;
  if (iVar6 < iVar8 * 8) {
    uVar4 = (uint)(*pbVar5 >> (*param_1 & 0x1f));
    if ((((8 < iVar6) && (uVar4 = uVar4 | (uint)pbVar5[1] << (8U - cVar3 & 0x1f), 0x10 < iVar6)) &&
        (uVar4 = uVar4 | (uint)pbVar5[2] << (0x10U - cVar3 & 0x1f), 0x18 < iVar6)) &&
       ((uVar4 = uVar4 | (uint)pbVar5[3] << (0x18U - cVar3 & 0x1f), 0x20 < iVar6 && (iVar2 != 0))))
    {
      return (uVar4 | (uint)pbVar5[4] << (0x20U - cVar3 & 0x1f)) & uVar1;
    }
  }
  else {
    puVar7 = *(undefined4 **)(param_1 + 0xc);
    if (iVar8 < 0) {
      return 0xffffffff;
    }
    if (iVar6 == 0) {
      uVar4 = 0;
    }
    else {
      while (iVar8 == 0) {
        puVar7 = (undefined4 *)puVar7[3];
        if (puVar7 == (undefined4 *)0x0) {
          return 0xffffffff;
        }
        pbVar5 = (byte *)(puVar7[1] + *(int *)*puVar7);
        iVar8 = puVar7[2];
      }
      uVar4 = (uint)(*pbVar5 >> (*param_1 & 0x1f));
      pbVar5 = pbVar5 + 1;
      if (8 < iVar6) {
        iVar8 = iVar8 + -1;
        while (iVar8 == 0) {
          puVar7 = (undefined4 *)puVar7[3];
          if (puVar7 == (undefined4 *)0x0) {
            return 0xffffffff;
          }
          pbVar5 = (byte *)(puVar7[1] + *(int *)*puVar7);
          iVar8 = puVar7[2];
        }
        uVar4 = uVar4 | (uint)*pbVar5 << (8U - cVar3 & 0x1f);
        pbVar5 = pbVar5 + 1;
        if (0x10 < iVar6) {
          iVar8 = iVar8 + -1;
          while (iVar8 == 0) {
            puVar7 = (undefined4 *)puVar7[3];
            if (puVar7 == (undefined4 *)0x0) {
              return 0xffffffff;
            }
            pbVar5 = (byte *)(puVar7[1] + *(int *)*puVar7);
            iVar8 = puVar7[2];
          }
          uVar4 = uVar4 | (uint)*pbVar5 << (0x10U - cVar3 & 0x1f);
          pbVar5 = pbVar5 + 1;
          if (0x18 < iVar6) {
            iVar8 = iVar8 + -1;
            while (iVar8 == 0) {
              puVar7 = (undefined4 *)puVar7[3];
              if (puVar7 == (undefined4 *)0x0) {
                return 0xffffffff;
              }
              pbVar5 = (byte *)(puVar7[1] + *(int *)*puVar7);
              iVar8 = puVar7[2];
            }
            uVar4 = uVar4 | (uint)*pbVar5 << (0x18U - cVar3 & 0x1f);
            pbVar5 = pbVar5 + 1;
            if ((0x20 < iVar6) && (iVar2 != 0)) {
              if (iVar8 == 1) {
                do {
                  puVar7 = (undefined4 *)puVar7[3];
                  if (puVar7 == (undefined4 *)0x0) {
                    return 0xffffffff;
                  }
                  pbVar5 = (byte *)(puVar7[1] + *(int *)*puVar7);
                } while (puVar7[2] == 0);
              }
              return (uVar4 | (uint)*pbVar5 << (0x20U - cVar3 & 0x1f)) & uVar1;
            }
          }
        }
      }
    }
  }
  return uVar4 & uVar1;
}


