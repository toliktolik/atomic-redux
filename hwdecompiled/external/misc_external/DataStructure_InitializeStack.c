/*
 * Function: DataStructure_InitializeStack
 * Address: 0041cae0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall DataStructure_InitializeStack(void *this,void *param_1)

{
  double dVar1;
  char cVar2;
  uint uVar3;
  char *pcVar4;
  undefined4 uVar5;
  undefined4 *puVar6;
  int *piVar7;
  char *pcVar8;
  undefined3 uVar10;
  uint uVar9;
  int iVar11;
  uint extraout_EDX;
  int iVar12;
  float10 fVar13;
  ulonglong uVar14;
  _String_base local_90 [4];
  uint local_8c;
  undefined4 local_7c;
  uint local_78;
  undefined1 local_74 [4];
  uint local_70;
  undefined4 local_60;
  uint local_5c;
  undefined1 local_58 [16];
  undefined4 local_48;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  int local_30;
  uint local_2c;
  double local_28;
  int local_20;
  undefined8 local_1c;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x510a83;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(int *)((int)this + 0x24) = -(*(int *)((int)this + 0x2c) / 2);
  SexyWidget_SetColorizeFlag2(param_1,1);
                    /* WARNING: Load size is inaccurate */
  uVar5 = Compression_GetCompressedSize(*(int *)(*this + 0x5c));
  Graphics_SwapBuffers(param_1,(char)uVar5 == '\0');
  local_14 = 0;
  if (*(int *)((int)this + 0x1c) != 0) {
    do {
      uVar9 = local_14;
      iVar12 = local_14 * 8;
      local_1c = (double)CONCAT44(iVar12,(undefined4)local_1c);
      dVar1 = *(double *)(iVar12 + *(int *)((int)this + 0x48));
      if (dVar1 < _DAT_0052c998 != (dVar1 == _DAT_0052c998)) {
        uVar14 = Math_FloatToUInt64();
        puVar6 = (undefined4 *)CreateColor(local_58,0xff,0xff,0xff,(int)uVar14);
        SexyWidget_SetRectangle(param_1,puVar6);
        local_28 = *(double *)(iVar12 + *(int *)((int)this + 0x48));
        if (local_28 < _DAT_0052a0f0 != (NAN(local_28) || NAN(_DAT_0052a0f0))) {
          local_28 = 1.0;
        }
        if (*(uint *)((int)this + 0x20) < 0x10) {
          iVar12 = (int)this + 0xc;
        }
        else {
          iVar12 = *(int *)((int)this + 0xc);
        }
        local_5c = 0xf;
        local_60 = 0;
        local_70 = local_70 & 0xffffff00;
        cVar2 = *(char *)(*(char *)(iVar12 + uVar9) + 0x14 +
                         *(int *)(*(int *)((int)this + 4) + 0x14));
        pcVar4 = "MAIN";
        do {
          pcVar8 = pcVar4;
          pcVar4 = pcVar8 + 1;
        } while (*pcVar8 != '\0');
        String_Assign(local_74,(_String_base *)&DAT_0052b900,(uint)(pcVar8 + -0x52b900));
        local_8 = 0;
        piVar7 = (int *)DataStructure_InitializeQueue
                                  ((void *)(*(int *)(*(int *)((int)this + 4) + 0x14) + 300),
                                   (uint)local_74,(_String_base *)local_74);
        local_8 = 0xffffffff;
        iVar11 = cVar2 * 0x120;
        iVar12 = iVar11 + 0x24 + *piVar7;
        local_38 = *(undefined4 *)(iVar11 + 0x24 + *piVar7);
        local_34 = *(undefined4 *)(iVar12 + 4);
        local_30 = *(int *)(iVar12 + 8);
        local_2c = *(uint *)(iVar12 + 0xc);
        if (0xf < local_5c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_30,local_2c);
        }
        local_60 = 0;
        local_5c = 0xf;
        local_78 = 0xf;
        local_70 = local_70 & 0xffffff00;
        local_7c = 0;
        local_8c = local_8c & 0xffffff00;
        pcVar4 = "MAIN";
        do {
          pcVar8 = pcVar4;
          pcVar4 = pcVar8 + 1;
        } while (*pcVar8 != '\0');
        String_Assign(local_90,(_String_base *)&DAT_0052b900,(uint)(pcVar8 + -0x52b900));
        local_8 = 1;
        piVar7 = (int *)DataStructure_InitializeQueue
                                  ((void *)(*(int *)(*(uint *)((int)this + 4) + 0x14) + 300),
                                   *(uint *)((int)this + 4),local_90);
        local_8 = 0xffffffff;
        uVar5 = *(undefined4 *)(*piVar7 + 0x12044);
        if (0xf < local_78) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_8c,extraout_EDX);
        }
        local_48 = 0;
        local_44 = 0;
        local_40 = 0;
        local_3c = 0;
        fVar13 = (float10)fcos((float10)*(double *)(*(int *)((int)this + 0x68) + local_1c._4_4_));
        local_7c = 0;
        local_78 = 0xf;
        local_8c = local_8c & 0xffffff00;
        local_1c = (double)(fVar13 * (float10)*(double *)
                                               (*(int *)((int)this + 0x58) + local_1c._4_4_));
        iVar12 = local_30 / 2;
        local_20 = iVar12;
        uVar14 = Math_FloatToUInt64();
        local_1c = (double)CONCAT44((int)uVar14 + iVar12,(undefined4)local_1c);
        uVar14 = Math_FloatToUInt64();
        local_48 = (undefined4)uVar14;
        local_20 = *(int *)((int)this + 0x28) + -0xf0;
        iVar12 = (int)local_2c / 2;
        local_1c = (double)CONCAT44(iVar12,(undefined4)local_1c);
        uVar14 = Math_FloatToUInt64();
        local_20 = (int)uVar14 + iVar12;
        uVar14 = Math_FloatToUInt64();
        local_44 = (undefined4)uVar14;
        uVar14 = Math_FloatToUInt64();
        local_40 = (undefined4)uVar14;
        uVar14 = Math_FloatToUInt64();
        local_3c = (undefined4)uVar14;
        Graphics_SetImageAlpha(param_1,uVar5,(int)&local_48,&local_38);
      }
      uVar3 = local_14;
      uVar9 = *(uint *)((int)this + 0x20);
      if (local_14 < *(int *)((int)this + 0x1c) - 1U) {
        if (uVar9 < 0x10) {
          iVar12 = (int)this + 0xc;
        }
        else {
          iVar12 = *(int *)((int)this + 0xc);
        }
        if (*(uint *)((int)this + 0x20) < 0x10) {
          iVar11 = (int)this + 0xc;
        }
        else {
          iVar11 = *(int *)((int)this + 0xc);
        }
        uVar10 = (undefined3)((uint)iVar12 >> 8);
        iVar12 = (**(code **)(**(int **)((int)this + 4) + 0x24))
                           (CONCAT31(uVar10,*(undefined1 *)(iVar11 + local_14)),
                            CONCAT31(uVar10,*(undefined1 *)(iVar12 + 1 + local_14)));
        if (iVar12 < 1) {
          uVar9 = *(uint *)((int)this + 0x20);
          goto LAB_0041ce62;
        }
      }
      else {
LAB_0041ce62:
        if (uVar9 < 0x10) {
          iVar12 = (int)this + 0xc;
        }
        else {
          iVar12 = *(int *)((int)this + 0xc);
        }
        iVar12 = (**(code **)(**(int **)((int)this + 4) + 0x20))
                           (CONCAT31((int3)(uVar9 >> 8),*(undefined1 *)(iVar12 + uVar3)));
      }
      local_14 = uVar3 + 1;
      *(int *)((int)this + 0x24) = *(int *)((int)this + 0x24) + iVar12;
    } while (local_14 < *(uint *)((int)this + 0x1c));
  }
  SexyWidget_SetColorizeFlag2(param_1,0);
  ExceptionList = local_10;
  return;
}


