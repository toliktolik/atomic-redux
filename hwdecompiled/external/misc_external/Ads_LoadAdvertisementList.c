/*
 * Function: Ads_LoadAdvertisementList
 * Address: 004ad460
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Ads_LoadAdvertisementList(undefined4 *param_1)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  undefined4 uVar4;
  int extraout_ECX;
  undefined2 extraout_DX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb0;
  undefined4 *in_stack_ffffffb4;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x516608;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  ObjectType2_Constructor((undefined4 *)&stack0xffffffb0);
  local_8 = 0;
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  pcVar1 = "adlist.txt";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_30,(_String_base *)"adlist.txt",(uint)(pcVar3 + -0x5363ac));
  local_8._0_1_ = 1;
  uVar4 = Math_MaxValue(DAT_0056da10,extraout_DX,local_30,&stack0xffffffb0,'\0');
  local_8 = (uint)local_8._1_3_ << 8;
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_2c);
  }
  if ((char)uVar4 == '\0') {
    Image_ScaleBilinear((undefined4 *)&stack0xffffffb0,extraout_EDX);
  }
  else {
    uVar4 = Level_InitializeDictastroika((int)&stack0xffffffb0);
    cVar2 = (char)uVar4;
    while (cVar2 == '\0') {
      Image_FlipVertical(&stack0xffffffb0,local_30);
      local_8._0_1_ = 2;
      (**(code **)*param_1)(local_30,0);
      local_8 = (uint)local_8._1_3_ << 8;
      if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_2c,extraout_EDX_00);
      }
      local_18 = 0xf;
      local_1c = 0;
      local_2c = local_2c & 0xffffff00;
      uVar4 = Level_InitializeDictastroika((int)&stack0xffffffb0);
      cVar2 = (char)uVar4;
    }
    Game_ProcessQueuedCommands((int)param_1);
    Image_ScaleBilinear((undefined4 *)&stack0xffffffb0,extraout_EDX_01);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb0,in_stack_ffffffb4);
  return;
}


