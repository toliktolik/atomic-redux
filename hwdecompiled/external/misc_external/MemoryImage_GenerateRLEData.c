/*
 * Function: MemoryImage_GenerateRLEData
 * Address: 00472320
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __thiscall MemoryImage_GenerateRLEData(void *this,byte *param_1)

{
  byte bVar1;
  uint uVar2;
  uint *puVar3;
  undefined1 *puVar4;
  int iVar5;
  byte *pbVar6;
  int iVar7;
  int iVar8;
  bool bVar9;
  bool bVar10;
  int local_10;
  int local_c;
  
  if (*(int *)((int)this + 0x3c) == 0) {
                    /* WARNING: Load size is inaccurate */
    if (*(int *)((int)this + 0x28) == 0) {
      puVar3 = (uint *)(**(code **)(*this + 0x34))();
      puVar4 = (undefined1 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4));
      *(undefined1 **)((int)this + 0x3c) = puVar4;
      local_c = 0;
      if (0 < *(int *)((int)this + 8)) {
        do {
          uVar2 = *puVar3;
          iVar7 = 1;
          puVar3 = puVar3 + 1;
          iVar5 = 1;
          param_1 = (byte *)(uint)((uVar2 & 0xffffff) != 0);
          if (1 < *(int *)((int)this + 4)) {
            do {
              uVar2 = *puVar3;
              puVar3 = puVar3 + 1;
              iVar7 = iVar7 + 1;
              pbVar6 = (byte *)(uint)((uVar2 & 0xffffff) != 0);
              if ((pbVar6 != param_1) || (iVar5 = iVar5 + 1, iVar7 == *(int *)((int)this + 4))) {
                for (; 0 < iVar5; iVar5 = iVar5 + -1) {
                  if (iVar5 < 0xff) {
                    *puVar4 = (char)iVar5;
                  }
                  else {
                    *puVar4 = 0xff;
                  }
                  puVar4 = puVar4 + 1;
                }
                if ((iVar7 == *(int *)((int)this + 4)) && (pbVar6 != param_1)) {
                  *puVar4 = 1;
                  puVar4 = puVar4 + 1;
                }
                iVar5 = 1;
                param_1 = pbVar6;
              }
            } while (iVar7 < *(int *)((int)this + 4));
          }
          local_c = local_c + 1;
        } while (local_c < *(int *)((int)this + 8));
        return *(int *)((int)this + 0x3c);
      }
    }
    else {
      iVar5 = (**(code **)(*this + 0x34))(param_1);
      puVar4 = (undefined1 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4));
      *(undefined1 **)((int)this + 0x3c) = puVar4;
      param_1 = *(byte **)((int)this + 0x2c);
      local_10 = 0;
      if (0 < *(int *)((int)this + 8)) {
        do {
          bVar1 = *param_1;
          iVar8 = 1;
          param_1 = param_1 + 1;
          bVar9 = (*(uint *)(iVar5 + (uint)bVar1 * 4) & 0xffffff) != 0;
          iVar7 = 1;
          if (1 < *(int *)((int)this + 4)) {
            do {
              bVar1 = *param_1;
              iVar8 = iVar8 + 1;
              param_1 = param_1 + 1;
              bVar10 = (*(uint *)(iVar5 + (uint)bVar1 * 4) & 0xffffff) != 0;
              if ((bVar10 != bVar9) || (iVar7 = iVar7 + 1, iVar8 == *(int *)((int)this + 4))) {
                for (; 0 < iVar7; iVar7 = iVar7 + -1) {
                  if (iVar7 < 0xff) {
                    *puVar4 = (char)iVar7;
                  }
                  else {
                    *puVar4 = 0xff;
                  }
                  puVar4 = puVar4 + 1;
                }
                if ((iVar8 == *(int *)((int)this + 4)) && (bVar10 != bVar9)) {
                  *puVar4 = 1;
                  puVar4 = puVar4 + 1;
                }
                iVar7 = 1;
                bVar9 = bVar10;
              }
            } while (iVar8 < *(int *)((int)this + 4));
          }
          local_10 = local_10 + 1;
        } while (local_10 < *(int *)((int)this + 8));
      }
    }
  }
  return *(int *)((int)this + 0x3c);
}


