/*
 * Function: Memory_SetBuffer
 * Address: 00480610
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Memory_SetBuffer(int *param_1,int param_2,int param_3,undefined4 param_4,undefined4 param_5,
                     void *param_6,uint *param_7,undefined4 *param_8)

{
  int iVar1;
  void *pvVar2;
  uint *puVar3;
  undefined4 *puVar4;
  locale *plVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  int *piVar8;
  uint unaff_retaddr;
  undefined4 *in_stack_0000d289;
  undefined4 *in_stack_0000d28d;
  char local_44 [36];
  undefined4 local_20;
  char *local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5148c8;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  puVar4 = (undefined4 *)System_GetSystemInfo();
  *puVar4 = 0;
  plVar5 = (locale *)SexyWidget_ProcessInput(param_6,(int *)&param_6);
  local_8 = 0;
  Graphics_SetProjection(local_44,&param_2,&param_4,0x800,plVar5);
  pvVar2 = param_6;
  local_8 = 0xffffffff;
  if (param_6 != (void *)0x0) {
    Threading_LockSectorByIndex(&local_18,0);
    iVar1 = *(int *)((int)pvVar2 + 4);
    if ((iVar1 != 0) && (iVar1 != -1)) {
      *(int *)((int)pvVar2 + 4) = iVar1 + -1;
    }
    puVar4 = (undefined4 *)((uint)pvVar2 & (*(int *)((int)pvVar2 + 4) != 0) - 1);
    Threading_UnlockSectorByIndex(&local_18);
    if (puVar4 != (undefined4 *)0x0) {
      (**(code **)*puVar4)(1);
    }
  }
  uVar6 = System_GetProcAddress();
  local_20 = 0;
  uVar7 = Graphics_LoadTexture(&param_2,&param_4);
  puVar3 = param_7;
  if ((char)uVar7 != '\0') {
    *param_7 = *param_7 | 1;
  }
  if (local_1c != local_44) {
    piVar8 = (int *)System_GetSystemInfo();
    if (*piVar8 == 0) {
      *param_8 = uVar6;
      goto LAB_00480709;
    }
  }
  *puVar3 = *puVar3 | 2;
LAB_00480709:
  param_1[1] = param_3;
  *param_1 = param_2;
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_0000d289,in_stack_0000d28d);
  return;
}


