/*
 * Function: CRuntime_HeapAlloc
 * Address: 004fc0dd
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* Library Function - Single Match
    __heap_alloc
   
   Library: Visual Studio 2003 Release */

void * __cdecl CRuntime_HeapAlloc(size_t _Size)

{
  undefined4 uVar1;
  void *pvVar2;
  undefined4 in_ECX;
  uint extraout_ECX;
  uint in_EDX;
  uint extraout_EDX;
  int unaff_EBP;
  uint dwBytes;
  int unaff_retaddr;
  undefined4 *in_stack_00000008;
  
  Runtime_CheckBounds(in_ECX,in_EDX,0x547110,(undefined4 *)0xc,unaff_retaddr,(undefined4 *)_Size,
                      in_stack_00000008);
  dwBytes = *(uint *)(unaff_EBP + 8);
  if ((DAT_005a5220 == 3) && (dwBytes <= DAT_005a520c)) {
    Assembly_FloatingPointCalculation(extraout_ECX,extraout_EDX);
    *(undefined4 *)(unaff_EBP + -4) = 0;
    uVar1 = IO_FlushBuffers();
    *(undefined4 *)(unaff_EBP + -0x1c) = uVar1;
    *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
    SystemCallback_Initialize();
    if (*(int *)(unaff_EBP + -0x1c) != 0) goto LAB_004fc146;
  }
  if (dwBytes == 0) {
    dwBytes = 1;
  }
  if (DAT_005a5220 != 1) {
    dwBytes = dwBytes + 0xf & 0xfffffff0;
  }
  HeapAlloc(DAT_005a521c,0,dwBytes);
LAB_004fc146:
  pvVar2 = (void *)func_0x00503463();
  return pvVar2;
}


