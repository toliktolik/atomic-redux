/*
 * Function: Memory_AllocateBlock
 * Address: 004fc3fd
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x004fc417) overlaps instruction at (ram,0x004fc416)
    */

void __fastcall Memory_AllocateBlock(int param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  byte bVar3;
  int in_EAX;
  int extraout_EDX;
  int extraout_EDX_00;
  undefined4 unaff_EBX;
  int unaff_EBP;
  int *unaff_ESI;
  int unaff_EDI;
  
  out(0xa6,in_EAX);
  bVar3 = (byte)((uint)unaff_EBX >> 8);
  *(int *)(in_EAX + -0x62cd2c13) =
       *(int *)(in_EAX + -0x62cd2c13) + param_1 + (uint)(bVar3 < (byte)param_1);
  puVar1 = (uint *)(CONCAT22((short)((uint)unaff_EBX >> 0x10),
                             CONCAT11(bVar3 - (byte)param_1,(char)unaff_EBX)) + -0x26);
  *puVar1 = *puVar1 << 0xf | *puVar1 >> 0x11;
  *(int *)(param_2 + -0x24) = *(int *)(param_2 + -0x24) + unaff_EDI + 4;
  if ((*(byte *)(in_EAX + -0x3e) & (byte)((uint)param_2 >> 8)) == 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  iVar2 = *(int *)(param_2 + 0x945b09d);
  DAT_4c1bb91f = (char)unaff_ESI[1];
  func_0x252c4117();
  out(*(undefined1 *)((int)unaff_ESI + 5),(short)extraout_EDX);
  if (-1 < extraout_EDX && extraout_EDX * 2 != 0) {
    LOCK();
    *(undefined1 *)(extraout_EDX * 2 + 0x48) = 0;
    UNLOCK();
    return;
  }
  func_0x68bbf9e5();
  puVar1 = (uint *)(CONCAT31((uint3)((uint)(unaff_EBP - iVar2) >> 8) & 0xffff00,0x10) + 0x48);
  *puVar1 = *puVar1 | *unaff_ESI + 0xd7c5f488U;
  puVar1 = (uint *)((int)unaff_ESI + extraout_EDX_00 * 8 + 0x29);
  *puVar1 = *puVar1 ^ 0xffffff83;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


