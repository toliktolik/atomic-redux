/*
 * Function: Audio_EncodeStreamData
 * Address: 004d8e60
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl
Audio_EncodeStreamData
          (int param_1,int param_2,uint *param_3,uint param_4,undefined4 param_5,uint *param_6,
          uint param_7)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  
  iVar1 = param_1;
  iVar5 = *(int *)(param_1 + 0x144);
  if (*param_3 < param_4) {
    while (*param_6 < param_7) {
      uVar2 = param_4 - *param_3;
      uVar6 = *(int *)(iVar1 + 0xdc) - *(int *)(iVar5 + 0x34);
      if (uVar2 <= uVar6) {
        uVar6 = uVar2;
      }
      (**(code **)(*(int *)(iVar1 + 0x150) + 4))
                (iVar1,param_2 + *param_3 * 4,iVar5 + 8,*(undefined4 *)(iVar5 + 0x34),uVar6);
      *param_3 = *param_3 + uVar6;
      iVar4 = *(int *)(iVar5 + 0x34) + uVar6;
      iVar3 = *(int *)(iVar5 + 0x30) - uVar6;
      *(int *)(iVar5 + 0x34) = iVar4;
      *(int *)(iVar5 + 0x30) = iVar3;
      if ((iVar3 == 0) && (iVar4 < *(int *)(iVar1 + 0xdc))) {
        param_1 = 0;
        if (0 < *(int *)(iVar1 + 0x3c)) {
          do {
            Audio_ProcessSampleBlock(*(uint *)(iVar1 + 0x1c));
            param_1 = param_1 + 1;
          } while (param_1 < *(int *)(iVar1 + 0x3c));
        }
        *(undefined4 *)(iVar5 + 0x34) = *(undefined4 *)(iVar1 + 0xdc);
      }
      if (*(int *)(iVar5 + 0x34) == *(int *)(iVar1 + 0xdc)) {
        (**(code **)(*(int *)(iVar1 + 0x154) + 4))(iVar1,iVar5 + 8,0,param_5,*param_6);
        *(undefined4 *)(iVar5 + 0x34) = 0;
        *param_6 = *param_6 + 1;
      }
      if ((*(int *)(iVar5 + 0x30) == 0) && (*param_6 < param_7)) {
        param_1 = 0;
        if (0 < *(int *)(iVar1 + 0x3c)) {
          iVar5 = *(int *)(iVar1 + 0x44) + 0xc;
          do {
            Audio_ProcessSampleBlock(*(int *)(iVar5 + 0x10) << 3);
            param_1 = param_1 + 1;
            iVar5 = iVar5 + 0x54;
          } while (param_1 < *(int *)(iVar1 + 0x3c));
        }
        *param_6 = param_7;
        return;
      }
      if (param_4 <= *param_3) {
        return;
      }
    }
  }
  return;
}


