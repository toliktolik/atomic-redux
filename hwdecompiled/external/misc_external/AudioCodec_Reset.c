/*
 * Function: AudioCodec_Reset
 * Address: 004b4780
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __thiscall AudioCodec_Reset(void *this,uint param_1,undefined4 *param_2)

{
  char cVar1;
  ushort uVar2;
  uint in_EAX;
  undefined4 *puVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  undefined4 uVar8;
  ushort uVar9;
  undefined4 *puVar10;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  undefined4 local_34;
  undefined2 *local_30;
  undefined2 local_2c;
  ushort uStack_2a;
  int local_28;
  int local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  int local_14;
  undefined4 local_10;
  undefined4 *local_c;
  undefined4 *local_8;
  
  if (*(char *)((int)this + 0x1498) == '\0') {
    return in_EAX & 0xffffff00;
  }
  if ((uint)param_2[6] < 0x10) {
    puVar3 = param_2 + 1;
  }
  else {
    puVar3 = (undefined4 *)param_2[1];
  }
  uVar4 = (**(code **)(DAT_005a4388 + 0x18))(0xffffffff,puVar3,0,0);
  if (uVar4 != 0) {
    uVar5 = (**(code **)(DAT_005a4388 + 0x38))(uVar4);
    (**(code **)(DAT_005a4388 + 0x34))(uVar4,&local_14,0,0,0);
    uVar9 = 2 - ((uVar5 & 0x20) != 0);
    local_28 = local_14;
    uVar2 = (-(ushort)((uVar5 & 8) != 0) & 0xfff8) + 0x10;
    iVar6 = (uint)uVar2 * (uint)uVar9;
    uVar5 = (int)(iVar6 + (iVar6 >> 0x1f & 7U)) >> 3;
    local_20 = CONCAT22(uVar2,(short)uVar5);
    local_24 = (uVar5 & 0xffff) * local_14;
    _local_2c = CONCAT22(uVar9,1);
    iVar6 = (**(code **)(DAT_005a4388 + 0x30))(uVar4);
    iVar6 = iVar6 * (local_20 & 0xffff);
    local_34 = 0;
    *(int *)((int)this + param_1 * 4 + 0x408) = iVar6;
    puVar3 = (undefined4 *)((int)this + param_1 * 4 + 4);
    local_30 = &local_2c;
    local_40 = 0x14;
    local_3c = 0x80ea;
    local_38 = iVar6;
    local_c = puVar3;
    iVar7 = (**(code **)(**(int **)((int)this + 0x1494) + 0xc))
                      (*(int **)((int)this + 0x1494),&local_40,puVar3,0);
    if (iVar7 == 0) {
      iVar7 = (**(code **)(*(int *)*puVar3 + 0x2c))((int *)*puVar3,0,iVar6,&param_2,&local_10,0,0,0)
      ;
      if (iVar7 == 0) {
        cVar1 = (**(code **)(DAT_005a4388 + 0x24))
                          (uVar4,0,iVar6,&local_8,&local_1c,&param_1,&local_18);
        if (cVar1 != '\0') {
          puVar3 = local_8;
          puVar10 = param_2;
          for (uVar5 = param_1 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
            *puVar10 = *puVar3;
            puVar3 = puVar3 + 1;
            puVar10 = puVar10 + 1;
          }
          for (uVar5 = param_1 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
            *(undefined1 *)puVar10 = *(undefined1 *)puVar3;
            puVar3 = (undefined4 *)((int)puVar3 + 1);
            puVar10 = (undefined4 *)((int)puVar10 + 1);
          }
          (**(code **)(*(int *)*local_c + 0x4c))((int *)*local_c,param_2,local_10,0,0);
          (**(code **)(DAT_005a4388 + 0x28))(uVar4,local_8,local_1c,param_1,local_18);
          puVar3 = local_c;
        }
      }
      (**(code **)(*(int *)*puVar3 + 0x4c))((int *)*puVar3,param_2,local_10,0,0);
      uVar8 = (**(code **)(DAT_005a4388 + 0x20))(uVar4);
      return CONCAT31((int3)((uint)uVar8 >> 8),1);
    }
    uVar4 = (**(code **)(DAT_005a4388 + 0x20))(uVar4);
  }
  return uVar4 & 0xffffff00;
}


