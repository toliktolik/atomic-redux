/*
 * Function: Vector_InsertWithReallocation
 * Address: 0041e430
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall
Vector_InsertWithReallocation
          (int param_1,uint param_2,_String_base *param_3,_String_base *param_4,
          _String_base *param_5)

{
  _String_base *p_Var1;
  _String_base *p_Var2;
  int iVar3;
  undefined4 uVar4;
  _String_base *extraout_ECX;
  int extraout_ECX_00;
  _String_base *p_Var5;
  _String_base *p_Var6;
  _String_base *extraout_ECX_01;
  int iVar7;
  uint extraout_EDX;
  _String_base *extraout_EDX_00;
  undefined4 *unaff_ESI;
  undefined4 *unaff_EDI;
  uint unaff_retaddr;
  _String_base local_40 [4];
  uint local_3c;
  undefined4 local_2c;
  uint local_28;
  undefined4 local_24;
  _String_base *local_20;
  int local_1c;
  uint local_18;
  undefined1 *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  p_Var5 = param_5;
  local_8 = 0xffffffff;
  uStack_c = 0x510be8;
  pvStack_10 = ExceptionList;
  local_18 = DAT_00569f5c ^ unaff_retaddr;
  local_14 = &stack0xffffffb4;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  ExceptionList = &pvStack_10;
  local_1c = param_1;
  PowerUp_ProcessThunderstrike(local_40,param_2,param_5,0,0xffffffff);
  p_Var6 = param_4;
  p_Var2 = param_3;
  local_24 = *(undefined4 *)(p_Var5 + 0x1c);
  p_Var5 = *(_String_base **)(param_1 + 4);
  local_8 = 0;
  if (p_Var5 == (_String_base *)0x0) {
    p_Var1 = (_String_base *)0x0;
  }
  else {
    p_Var1 = (_String_base *)(*(int *)(param_1 + 0xc) - (int)p_Var5 >> 5);
  }
  if (param_4 != (_String_base *)0x0) {
    if (p_Var5 == (_String_base *)0x0) {
      iVar7 = 0;
    }
    else {
      iVar7 = *(int *)(param_1 + 8) - (int)p_Var5 >> 5;
    }
    if ((_String_base *)(0x7ffffffU - iVar7) < param_4) {
      Campaign_ProcessMissionComplete();
      p_Var5 = extraout_ECX;
    }
    else {
      if (p_Var5 == (_String_base *)0x0) {
        iVar7 = 0;
      }
      else {
        iVar7 = *(int *)(param_1 + 8) - (int)p_Var5 >> 5;
      }
      if (p_Var1 < param_4 + iVar7) {
        if ((_String_base *)(0x7ffffff - ((uint)p_Var1 >> 1)) < p_Var1) {
          p_Var1 = (_String_base *)0x0;
        }
        else {
          p_Var1 = p_Var1 + ((uint)p_Var1 >> 1);
        }
        if (p_Var5 == (_String_base *)0x0) {
          iVar7 = 0;
        }
        else {
          iVar7 = *(int *)(param_1 + 8) - (int)p_Var5 >> 5;
        }
        if (p_Var1 < param_4 + iVar7) {
          if (p_Var5 == (_String_base *)0x0) {
            iVar7 = 0;
          }
          else {
            iVar7 = *(int *)(param_1 + 8) - (int)p_Var5 >> 5;
          }
          p_Var1 = param_4 + iVar7;
        }
        param_5 = (_String_base *)((int)p_Var1 << 5);
        p_Var2 = (_String_base *)operator_new((uint)param_5);
        local_8 = CONCAT31(local_8._1_3_,1);
        param_4 = p_Var2;
        local_20 = p_Var2;
        param_4 = Campaign_ProcessIntelBriefing
                            (&stack0xffffffa0,(uint)param_3,*(_String_base **)(param_1 + 4),param_3,
                             p_Var2);
        Campaign_ProcessGameOver(param_3,(uint)local_40,param_4,(int)p_Var6,local_40);
        param_4 = param_4 + (int)p_Var6 * 0x20;
        Campaign_ProcessIntelBriefing
                  (param_3,(uint)param_3,param_3,*(_String_base **)(param_1 + 8),param_4);
        iVar7 = *(int *)(param_1 + 4);
        if (iVar7 == 0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *(int *)(param_1 + 8) - iVar7 >> 5;
        }
        if (iVar7 != 0) {
          Vector_DestroyElements32Byte(param_1,*(uint *)(param_1 + 8),iVar7,*(uint *)(param_1 + 8));
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,extraout_EDX);
        }
        *(_String_base **)(param_1 + 4) = p_Var2;
        p_Var5 = param_5 + (int)p_Var2;
        *(_String_base **)(param_1 + 0xc) = p_Var5;
        *(_String_base **)(param_1 + 8) = p_Var2 + (int)(p_Var6 + iVar3) * 0x20;
      }
      else {
        local_20 = *(_String_base **)(param_1 + 8);
        if ((_String_base *)((int)local_20 - (int)param_3 >> 5) < param_4) {
          param_5 = (_String_base *)((int)param_4 * 0x20);
          p_Var5 = local_20;
          local_20 = (_String_base *)&stack0xffffffa8;
          Vector_MoveElements(param_3,(uint)p_Var5,param_5 + (int)param_3);
          local_8 = CONCAT31(local_8._1_3_,3);
          Vector_ConstructElements
                    (param_1,(uint)local_40,*(_String_base **)(param_1 + 8),
                     (int)p_Var6 - ((int)*(_String_base **)(param_1 + 8) - (int)p_Var2 >> 5),
                     local_40);
          iVar7 = *(int *)(param_1 + 8);
          local_8 = 0;
          *(_String_base **)(param_1 + 8) = param_5 + iVar7;
          p_Var5 = local_40;
          p_Var6 = param_5;
          p_Var1 = param_5 + iVar7 + -(int)param_5;
        }
        else {
          param_5 = (_String_base *)((int)param_4 * 0x20);
          param_3 = (_String_base *)&stack0xffffffa8;
          p_Var5 = local_20 + (int)param_4 * -0x20;
          uVar4 = Vector_MoveElements(p_Var5,(uint)local_20,local_20);
          *(undefined4 *)(param_1 + 8) = uVar4;
          param_3 = (_String_base *)&stack0xffffffa8;
          Campaign_ProcessLoseCondition((int *)&param_3,p_Var2,(uint)p_Var5,local_20);
          p_Var6 = param_5 + (int)p_Var2;
          p_Var5 = extraout_EDX_00;
          p_Var1 = p_Var6;
        }
        param_3 = (_String_base *)&stack0xffffffa8;
        Campaign_ProcessWinCondition(p_Var6,(uint)p_Var5,p_Var2,p_Var1,local_40);
        p_Var5 = extraout_ECX_01;
      }
    }
  }
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)p_Var5,local_3c);
  }
  ExceptionList = pvStack_10;
  Exception_SetMessage((void *)(local_18 ^ unaff_retaddr),unaff_EDI,unaff_ESI);
  return;
}


