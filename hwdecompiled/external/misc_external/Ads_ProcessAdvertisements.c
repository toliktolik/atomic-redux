/*
 * Function: Ads_ProcessAdvertisements
 * Address: 004ad5a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Ads_ProcessAdvertisements(int param_1)

{
  char *pcVar1;
  char *pcVar2;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int *piVar3;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffac;
  undefined4 *in_stack_ffffffb0;
  _String_base local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  undefined1 local_15;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x516638;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (*(int *)(param_1 + 0x51c) != 0) {
    ExceptionList = &local_10;
    ObjectType2_Constructor((undefined4 *)&stack0xffffffac);
    local_8._0_1_ = 0;
    local_8._1_3_ = 0;
    Game_ProcessQueuedCommands(param_1);
    if (*(undefined4 **)(param_1 + 0x518) == (undefined4 *)0x0) {
      piVar3 = (int *)0x0;
    }
    else {
      piVar3 = (int *)**(undefined4 **)(param_1 + 0x518);
    }
    if (piVar3 != *(int **)(param_1 + 0x518)) {
      do {
        local_1c = 0xf;
        local_20 = 0;
        local_30 = local_30 & 0xffffff00;
        local_8._0_1_ = 1;
        UI_BuildCommandString(piVar3 + 2,local_34);
        Game_DisplayIntelData(&stack0xffffffac,(uint)local_34,local_34);
        piVar3 = (int *)*piVar3;
        local_8._0_1_ = 0;
        if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX);
        }
        local_30 = local_30 & 0xffffff00;
      } while (piVar3 != (int *)*(int *)(param_1 + 0x518));
    }
    local_1c = 0xf;
    local_20 = 0;
    local_30 = local_30 & 0xffffff00;
    pcVar1 = "adlist.txt";
    do {
      pcVar2 = pcVar1;
      pcVar1 = pcVar2 + 1;
    } while (*pcVar2 != '\0');
    String_Assign(local_34,(_String_base *)"adlist.txt",(uint)(pcVar2 + -0x5363ac));
    local_8 = CONCAT31(local_8._1_3_,2);
    local_15 = Log_WriteMessage(DAT_0056da10,local_34,(int)&stack0xffffffac);
    if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
    }
    local_1c = 0xf;
    local_20 = 0;
    local_30 = local_30 & 0xffffff00;
    Image_ScaleBilinear((undefined4 *)&stack0xffffffac,extraout_EDX_00);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffac,in_stack_ffffffb0);
  return;
}


