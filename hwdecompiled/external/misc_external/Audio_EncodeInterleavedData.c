/*
 * Function: Audio_EncodeInterleavedData
 * Address: 004d9000
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl
Audio_EncodeInterleavedData
          (int param_1,int param_2,uint *param_3,uint param_4,undefined4 param_5,uint *param_6,
          uint param_7)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  int *local_8;
  
  iVar4 = param_1;
  uVar1 = *param_6;
  iVar3 = *(int *)(param_1 + 0xdc) * 3;
  iVar2 = *(int *)(param_1 + 0x144);
  do {
    if (param_7 <= uVar1) {
      return;
    }
    uVar1 = *param_3;
    if (uVar1 < param_4) {
      uVar6 = *(int *)(iVar2 + 0x3c) - *(int *)(iVar2 + 0x34);
      if (param_4 - uVar1 <= uVar6) {
        uVar6 = param_4 - uVar1;
      }
      (**(code **)(*(int *)(iVar4 + 0x150) + 4))
                (iVar4,param_2 + uVar1 * 4,iVar2 + 8,*(int *)(iVar2 + 0x34),uVar6);
      if ((*(int *)(iVar2 + 0x30) == *(int *)(iVar4 + 0x20)) &&
         (param_1 = 0, 0 < *(int *)(iVar4 + 0x3c))) {
        iVar5 = *(int *)(iVar4 + 0xdc);
        local_8 = (int *)(iVar2 + 8);
        do {
          iVar7 = 1;
          if (0 < iVar5) {
            iVar8 = -1;
            do {
              Math_RoundUpToPowerOf2(*local_8,0,*local_8,iVar8,1,*(uint *)(iVar4 + 0x1c));
              iVar5 = *(int *)(iVar4 + 0xdc);
              iVar7 = iVar7 + 1;
              iVar8 = iVar8 + -1;
            } while (iVar7 <= iVar5);
          }
          param_1 = param_1 + 1;
          local_8 = local_8 + 1;
        } while (param_1 < *(int *)(iVar4 + 0x3c));
      }
      *param_3 = *param_3 + uVar6;
      *(uint *)(iVar2 + 0x34) = *(int *)(iVar2 + 0x34) + uVar6;
      *(uint *)(iVar2 + 0x30) = *(int *)(iVar2 + 0x30) - uVar6;
    }
    else {
      if (*(int *)(iVar2 + 0x30) != 0) {
        return;
      }
      if (*(int *)(iVar2 + 0x34) < *(int *)(iVar2 + 0x3c)) {
        param_1 = 0;
        if (0 < *(int *)(iVar4 + 0x3c)) {
          do {
            Audio_ProcessSampleBlock(*(uint *)(iVar4 + 0x1c));
            param_1 = param_1 + 1;
          } while (param_1 < *(int *)(iVar4 + 0x3c));
        }
        *(undefined4 *)(iVar2 + 0x34) = *(undefined4 *)(iVar2 + 0x3c);
      }
    }
    if (*(int *)(iVar2 + 0x34) == *(int *)(iVar2 + 0x3c)) {
      (**(code **)(*(int *)(iVar4 + 0x154) + 4))
                (iVar4,iVar2 + 8,*(undefined4 *)(iVar2 + 0x38),param_5,*param_6);
      *param_6 = *param_6 + 1;
      iVar5 = *(int *)(iVar2 + 0x38) + *(int *)(iVar4 + 0xdc);
      *(int *)(iVar2 + 0x38) = iVar5;
      if (iVar3 <= iVar5) {
        *(undefined4 *)(iVar2 + 0x38) = 0;
      }
      if (iVar3 <= *(int *)(iVar2 + 0x34)) {
        *(undefined4 *)(iVar2 + 0x34) = 0;
      }
      *(int *)(iVar2 + 0x3c) = *(int *)(iVar4 + 0xdc) + *(int *)(iVar2 + 0x34);
    }
    uVar1 = *param_6;
  } while( true );
}


