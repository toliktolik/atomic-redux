/*
 * Function: GIF_ReadHeader
 * Address: 004d1290
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint GIF_ReadHeader(void)

{
  byte bVar1;
  byte bVar2;
  undefined4 *puVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  byte *pbVar8;
  byte *pbVar9;
  int *unaff_ESI;
  uint *puVar10;
  int local_18;
  int *local_10;
  int local_8;
  
  puVar3 = (undefined4 *)unaff_ESI[6];
  local_8 = puVar3[1];
  pbVar8 = (byte *)*puVar3;
  if (*(char *)(unaff_ESI[0x65] + 0xd) == '\0') {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0x3e;
    (**(code **)*unaff_ESI)();
  }
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d14ed;
    local_8 = puVar3[1];
    pbVar8 = (byte *)*puVar3;
  }
  bVar1 = *pbVar8;
  local_8 = local_8 + -1;
  pbVar8 = pbVar8 + 1;
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d14ed;
    local_8 = puVar3[1];
    pbVar8 = (byte *)*puVar3;
  }
  bVar2 = *pbVar8;
  local_8 = local_8 + -1;
  pbVar8 = pbVar8 + 1;
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d14ed;
    local_8 = puVar3[1];
    pbVar8 = (byte *)*puVar3;
  }
  local_8 = local_8 + -1;
  uVar5 = (uint)*pbVar8;
  *(undefined4 *)(*unaff_ESI + 0x14) = 0x67;
  *(uint *)(*unaff_ESI + 0x18) = uVar5;
  pbVar8 = pbVar8 + 1;
  (**(code **)(*unaff_ESI + 4))();
  if ((((uint)bVar1 * 0x100 + (uint)bVar2 != uVar5 * 2 + 6) || (uVar5 == 0)) || (4 < uVar5)) {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0xb;
    (**(code **)*unaff_ESI)();
  }
  unaff_ESI[0x49] = uVar5;
  local_18 = 0;
  if (uVar5 != 0) {
    local_10 = unaff_ESI + 0x4a;
    do {
      if (local_8 == 0) {
        uVar4 = (*(code *)puVar3[3])();
        if ((char)uVar4 == '\0') goto LAB_004d14ed;
        local_8 = puVar3[1];
        pbVar8 = (byte *)*puVar3;
      }
      uVar6 = (uint)*pbVar8;
      local_8 = local_8 + -1;
      pbVar8 = pbVar8 + 1;
      if (local_8 == 0) {
        uVar4 = (*(code *)puVar3[3])();
        if ((char)uVar4 == '\0') goto LAB_004d14ed;
        local_8 = puVar3[1];
        pbVar8 = (byte *)*puVar3;
      }
      puVar10 = (uint *)unaff_ESI[0x31];
      local_8 = local_8 + -1;
      bVar1 = *pbVar8;
      pbVar8 = pbVar8 + 1;
      iVar7 = 0;
      if (0 < unaff_ESI[9]) {
        do {
          if (uVar6 == *puVar10) goto LAB_004d1432;
          iVar7 = iVar7 + 1;
          puVar10 = puVar10 + 0x15;
        } while (iVar7 < unaff_ESI[9]);
      }
      *(undefined4 *)(*unaff_ESI + 0x14) = 5;
      *(uint *)(*unaff_ESI + 0x18) = uVar6;
      (**(code **)*unaff_ESI)();
LAB_004d1432:
      *local_10 = (int)puVar10;
      puVar10[6] = bVar1 & 0xf;
      puVar10[5] = (int)(uint)bVar1 >> 4;
      iVar7 = *unaff_ESI;
      *(uint *)(iVar7 + 0x18) = uVar6;
      *(uint *)(iVar7 + 0x1c) = puVar10[5];
      *(uint *)(iVar7 + 0x20) = puVar10[6];
      *(undefined4 *)(*unaff_ESI + 0x14) = 0x68;
      (**(code **)(*unaff_ESI + 4))();
      local_18 = local_18 + 1;
      local_10 = local_10 + 1;
    } while (local_18 < (int)uVar5);
  }
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d14ed;
    local_8 = puVar3[1];
    pbVar8 = (byte *)*puVar3;
  }
  local_8 = local_8 + -1;
  pbVar9 = pbVar8 + 1;
  unaff_ESI[0x5b] = (uint)*pbVar8;
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d14ed;
    local_8 = puVar3[1];
    pbVar9 = (byte *)*puVar3;
  }
  local_8 = local_8 + -1;
  pbVar8 = pbVar9 + 1;
  unaff_ESI[0x5c] = (uint)*pbVar9;
  if (local_8 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') {
LAB_004d14ed:
      return uVar4 & 0xffffff00;
    }
    local_8 = puVar3[1];
    pbVar8 = (byte *)*puVar3;
  }
  bVar1 = *pbVar8;
  unaff_ESI[0x5e] = bVar1 & 0xf;
  iVar7 = *unaff_ESI;
  unaff_ESI[0x5d] = (int)(uint)bVar1 >> 4;
  *(int *)(iVar7 + 0x18) = unaff_ESI[0x5b];
  *(int *)(iVar7 + 0x1c) = unaff_ESI[0x5c];
  *(int *)(iVar7 + 0x20) = unaff_ESI[0x5d];
  *(int *)(iVar7 + 0x24) = unaff_ESI[0x5e];
  *(undefined4 *)(*unaff_ESI + 0x14) = 0x69;
  (**(code **)(*unaff_ESI + 4))();
  *(undefined4 *)(unaff_ESI[0x65] + 0x10) = 0;
  iVar7 = unaff_ESI[0x1f];
  unaff_ESI[0x1f] = iVar7 + 1;
  *puVar3 = pbVar8 + 1;
  puVar3[1] = local_8 + -1;
  return CONCAT31((int3)((uint)(iVar7 + 1) >> 8),1);
}


