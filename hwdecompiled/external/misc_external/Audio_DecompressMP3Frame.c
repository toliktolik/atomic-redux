/*
 * Function: Audio_DecompressMP3Frame
 * Address: 004eab60
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Audio_DecompressMP3Frame(uint param_1,int *param_2,int *param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte bVar6;
  int *piVar7;
  undefined4 extraout_ECX;
  int *piVar8;
  int *piVar9;
  int iVar10;
  int *piVar11;
  int *piVar12;
  int iVar13;
  int iVar14;
  int extraout_EDX;
  int extraout_EDX_00;
  int extraout_EDX_01;
  int extraout_EDX_02;
  int extraout_EDX_03;
  int extraout_EDX_04;
  int extraout_EDX_05;
  int extraout_EDX_06;
  int extraout_EDX_07;
  int extraout_EDX_08;
  int extraout_EDX_09;
  int extraout_EDX_10;
  int extraout_EDX_11;
  int extraout_EDX_12;
  int extraout_EDX_13;
  int extraout_EDX_14;
  int iVar15;
  int extraout_EDX_15;
  int extraout_EDX_16;
  int extraout_EDX_17;
  int extraout_EDX_18;
  int extraout_EDX_19;
  int extraout_EDX_20;
  int extraout_EDX_21;
  int extraout_EDX_22;
  int extraout_EDX_23;
  int extraout_EDX_24;
  int extraout_EDX_25;
  int extraout_EDX_26;
  int extraout_EDX_27;
  int extraout_EDX_28;
  int extraout_EDX_29;
  int extraout_EDX_30;
  int iVar16;
  int *piVar17;
  int local_50;
  int local_48;
  int *local_44;
  int local_3c;
  int local_34;
  int local_30;
  int local_28;
  int local_20;
  int local_10;
  int local_8;
  
  iVar16 = (int)param_1 >> 1;
  iVar13 = (int)param_1 >> 2;
  iVar2 = 6;
  uVar1 = param_1 & 0x40;
  while (uVar1 == 0) {
    iVar2 = iVar2 + 1;
    uVar1 = param_1 & 1 << ((byte)iVar2 & 0x1f);
  }
  bVar6 = (byte)(0xd - iVar2);
  iVar3 = 2 << (bVar6 & 0x1f);
  piVar8 = param_2 + iVar16 + -7;
  piVar5 = param_3 + iVar13 + iVar16;
  piVar7 = &DAT_005448c0;
  piVar11 = piVar5;
  do {
    local_28 = (int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[4]) >> 0x20);
    piVar11[-2] = ((int)((ulonglong)((longlong)piVar8[6] * (longlong)piVar7[1]) >> 0x20) + local_28)
                  * 2;
    piVar9 = piVar11 + -4;
    local_20 = (int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[6]) >> 0x20);
    piVar11[-1] = local_20 * 2 +
                  (int)((ulonglong)((longlong)piVar7[1] * (longlong)piVar8[4]) >> 0x20) * -2;
    piVar12 = piVar7 + iVar3;
    local_10 = (int)((ulonglong)((longlong)piVar7[iVar3] * (longlong)*piVar8) >> 0x20);
    *piVar9 = ((int)((ulonglong)((longlong)piVar8[2] * (longlong)piVar12[1]) >> 0x20) + local_10) *
              2;
    local_8 = (int)((ulonglong)((longlong)piVar8[2] * (longlong)*piVar12) >> 0x20);
    piVar11[-3] = local_8 * 2 +
                  (int)((ulonglong)((longlong)piVar12[1] * (longlong)*piVar8) >> 0x20) * -2;
    piVar8 = piVar8 + -8;
    piVar7 = piVar12 + iVar3;
    piVar11 = piVar9;
  } while (param_2 + iVar13 <= piVar8);
  do {
    local_28 = (int)((ulonglong)((longlong)piVar7[1] * (longlong)piVar8[4]) >> 0x20);
    piVar9[-2] = ((int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[6]) >> 0x20) + local_28) *
                 2;
    local_20 = (int)((ulonglong)((longlong)piVar8[6] * (longlong)piVar7[1]) >> 0x20);
    piVar9[-1] = local_20 * 2 +
                 (int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[4]) >> 0x20) * -2;
    piVar7 = piVar7 + -iVar3;
    local_10 = (int)((ulonglong)((longlong)piVar7[1] * (longlong)*piVar8) >> 0x20);
    piVar9[-4] = ((int)((ulonglong)((longlong)piVar8[2] * (longlong)*piVar7) >> 0x20) + local_10) *
                 2;
    local_8 = (int)((ulonglong)((longlong)piVar8[2] * (longlong)piVar7[1]) >> 0x20);
    piVar9[-3] = local_8 * 2 +
                 (int)((ulonglong)((longlong)*piVar7 * (longlong)*piVar8) >> 0x20) * -2;
    piVar8 = piVar8 + -8;
    piVar7 = piVar7 + -iVar3;
    piVar9 = piVar9 + -4;
  } while (param_2 <= piVar8);
  piVar8 = param_2 + iVar16 + -8;
  piVar7 = &DAT_005448c0;
  piVar11 = piVar5;
  do {
    piVar9 = piVar7 + iVar3;
    local_28 = (int)((ulonglong)((longlong)piVar7[iVar3] * (longlong)piVar8[6]) >> 0x20);
    *piVar11 = local_28 * 2 +
               (int)((ulonglong)((longlong)piVar8[4] * (longlong)piVar9[1]) >> 0x20) * -2;
    local_20 = (int)((ulonglong)((longlong)*piVar9 * (longlong)piVar8[4]) >> 0x20);
    piVar11[1] = ((int)((ulonglong)((longlong)piVar9[1] * (longlong)piVar8[6]) >> 0x20) + local_20)
                 * 2;
    piVar7 = piVar9 + iVar3;
    local_10 = (int)((ulonglong)((longlong)piVar8[2] * (longlong)piVar9[iVar3]) >> 0x20);
    piVar11[2] = local_10 * 2 +
                 (int)((ulonglong)((longlong)piVar7[1] * (longlong)*piVar8) >> 0x20) * -2;
    local_8 = (int)((ulonglong)((longlong)*piVar7 * (longlong)*piVar8) >> 0x20);
    piVar11[3] = ((int)((ulonglong)((longlong)piVar8[2] * (longlong)piVar7[1]) >> 0x20) + local_8) *
                 2;
    piVar8 = piVar8 + -8;
    piVar11 = piVar11 + 4;
  } while (param_2 + iVar13 <= piVar8);
  do {
    piVar7 = piVar7 + -iVar3;
    local_28 = (int)((ulonglong)((longlong)piVar7[1] * (longlong)piVar8[6]) >> 0x20);
    *piVar11 = local_28 * 2 +
               (int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[4]) >> 0x20) * -2;
    local_20 = (int)((ulonglong)((longlong)piVar8[4] * (longlong)piVar7[1]) >> 0x20);
    piVar11[1] = ((int)((ulonglong)((longlong)*piVar7 * (longlong)piVar8[6]) >> 0x20) + local_20) *
                 2;
    piVar7 = piVar7 + -iVar3;
    local_10 = (int)((ulonglong)((longlong)piVar8[2] * (longlong)piVar7[1]) >> 0x20);
    piVar11[2] = local_10 * 2 +
                 (int)((ulonglong)((longlong)*piVar7 * (longlong)*piVar8) >> 0x20) * -2;
    local_8 = (int)((ulonglong)((longlong)piVar7[1] * (longlong)*piVar8) >> 0x20);
    piVar11[3] = ((int)((ulonglong)((longlong)piVar8[2] * (longlong)*piVar7) >> 0x20) + local_8) * 2
    ;
    piVar8 = piVar8 + -8;
    piVar11 = piVar11 + 4;
  } while (param_2 <= piVar8);
  FFT_HierarchicalTransform(param_3 + iVar16,iVar16,0xd - iVar2);
  FFT_InverseComplexTransform(extraout_ECX,iVar3,param_3,bVar6);
  iVar2 = iVar3 >> 2;
  if (iVar2 == 0) {
    iVar2 = 0;
    piVar9 = &DAT_005458c8;
    param_2 = (int *)0x7fffffff;
    local_44 = &DAT_005448c8;
    piVar8 = piVar5;
    piVar11 = param_3 + 3;
    piVar7 = piVar5;
    do {
      iVar3 = *piVar9;
      iVar14 = piVar9[1];
      iVar10 = iVar3 - iVar2 >> 2;
      iVar2 = iVar2 + iVar10;
      piVar9 = piVar9 + 2;
      iVar4 = iVar14 - (int)param_2 >> 2;
      iVar15 = (int)param_2 + iVar4;
      piVar17 = piVar7 + -4;
      System_GetProcessHandle(iVar2);
      System_GetProcessHandle(iVar15);
      piVar7[-1] = (extraout_EDX_16 + extraout_EDX_15) * 2;
      System_GetProcessHandle(iVar2);
      System_GetProcessHandle(iVar15);
      *piVar8 = extraout_EDX_17 * 2 + extraout_EDX_18 * -2;
      iVar10 = iVar3 - iVar10;
      iVar4 = iVar14 - iVar4;
      System_GetProcessHandle(iVar10);
      System_GetProcessHandle(iVar4);
      piVar7[-2] = (extraout_EDX_20 + extraout_EDX_19) * 2;
      System_GetProcessHandle(iVar10);
      System_GetProcessHandle(iVar4);
      piVar8[1] = extraout_EDX_21 * 2 + extraout_EDX_22 * -2;
      iVar2 = *local_44;
      param_2 = (int *)local_44[1];
      local_44 = local_44 + 2;
      iVar10 = iVar2 - iVar3 >> 2;
      iVar3 = iVar3 + iVar10;
      iVar4 = (int)param_2 - iVar14 >> 2;
      iVar14 = iVar14 + iVar4;
      System_GetProcessHandle(iVar3);
      System_GetProcessHandle(iVar14);
      piVar7[-3] = (extraout_EDX_24 + extraout_EDX_23) * 2;
      System_GetProcessHandle(iVar3);
      System_GetProcessHandle(iVar14);
      piVar8[2] = extraout_EDX_25 * 2 + extraout_EDX_26 * -2;
      iVar10 = iVar2 - iVar10;
      iVar4 = (int)param_2 - iVar4;
      System_GetProcessHandle(iVar10);
      System_GetProcessHandle(iVar4);
      *piVar17 = (extraout_EDX_28 + extraout_EDX_27) * 2;
      System_GetProcessHandle(iVar10);
      System_GetProcessHandle(iVar4);
      piVar8[3] = extraout_EDX_29 * 2 + extraout_EDX_30 * -2;
      piVar12 = piVar11 + 5;
      piVar8 = piVar8 + 4;
      piVar11 = piVar11 + 8;
      piVar7 = piVar17;
    } while (piVar12 < piVar17);
  }
  else if (iVar2 == 1) {
    piVar9 = &DAT_005458c8;
    local_30 = 0;
    param_2 = (int *)0x3fffffff;
    local_44 = &DAT_005448c8;
    piVar8 = piVar5;
    piVar11 = param_3 + 3;
    piVar7 = piVar5;
    do {
      iVar2 = *piVar9;
      local_30 = local_30 + (iVar2 >> 1);
      iVar3 = piVar9[1];
      iVar14 = (int)param_2 + (iVar3 >> 1);
      piVar17 = piVar7 + -4;
      System_GetProcessHandle(local_30);
      System_GetProcessHandle(iVar14);
      piVar7[-1] = (extraout_EDX_00 + extraout_EDX) * 2;
      System_GetProcessHandle(local_30);
      System_GetProcessHandle(iVar14);
      *piVar8 = extraout_EDX_01 * 2 + extraout_EDX_02 * -2;
      iVar14 = *local_44;
      iVar4 = (iVar2 >> 1) + (iVar14 >> 1);
      iVar10 = local_44[1];
      iVar2 = (iVar3 >> 1) + (iVar10 >> 1);
      System_GetProcessHandle(iVar4);
      System_GetProcessHandle(iVar2);
      piVar7[-2] = (extraout_EDX_04 + extraout_EDX_03) * 2;
      System_GetProcessHandle(iVar4);
      System_GetProcessHandle(iVar2);
      piVar8[1] = extraout_EDX_05 * 2 + extraout_EDX_06 * -2;
      iVar3 = piVar9[2];
      iVar4 = (iVar14 >> 1) + (iVar3 >> 1);
      iVar14 = piVar9[3];
      iVar2 = (iVar10 >> 1) + (iVar14 >> 1);
      piVar9 = piVar9 + 4;
      System_GetProcessHandle(iVar4);
      System_GetProcessHandle(iVar2);
      piVar7[-3] = (extraout_EDX_08 + extraout_EDX_07) * 2;
      System_GetProcessHandle(iVar4);
      System_GetProcessHandle(iVar2);
      piVar8[2] = extraout_EDX_09 * 2 + extraout_EDX_10 * -2;
      local_30 = local_44[2] >> 1;
      iVar3 = (iVar3 >> 1) + local_30;
      param_2 = (int *)(local_44[3] >> 1);
      iVar2 = (iVar14 >> 1) + (int)param_2;
      local_44 = local_44 + 4;
      System_GetProcessHandle(iVar3);
      System_GetProcessHandle(iVar2);
      *piVar17 = (extraout_EDX_12 + extraout_EDX_11) * 2;
      System_GetProcessHandle(iVar3);
      System_GetProcessHandle(iVar2);
      piVar8[3] = extraout_EDX_13 * 2 + extraout_EDX_14 * -2;
      piVar12 = piVar11 + 5;
      piVar8 = piVar8 + 4;
      piVar11 = piVar11 + 8;
      piVar7 = piVar17;
    } while (piVar12 < piVar17);
  }
  else {
    if (iVar2 < 4) {
      piVar8 = &DAT_005458c8;
    }
    else {
      piVar8 = &DAT_005448c0 + (iVar3 >> 3);
    }
    piVar11 = piVar5;
    piVar7 = param_3 + 3;
    piVar9 = piVar5;
    do {
      local_28 = (int)((ulonglong)((longlong)piVar7[-3] * (longlong)*piVar8) >> 0x20);
      piVar9[-1] = ((int)((ulonglong)((longlong)-piVar7[-2] * (longlong)piVar8[1]) >> 0x20) +
                   local_28) * 2;
      piVar17 = piVar9 + -4;
      local_20 = (int)((ulonglong)((longlong)-piVar7[-2] * (longlong)*piVar8) >> 0x20);
      *piVar11 = local_20 * 2 +
                 (int)((ulonglong)((longlong)piVar7[-3] * (longlong)piVar8[1]) >> 0x20) * -2;
      piVar8 = piVar8 + iVar2;
      local_10 = (int)((ulonglong)((longlong)piVar7[-1] * (longlong)*piVar8) >> 0x20);
      piVar9[-2] = ((int)((ulonglong)((longlong)-*piVar7 * (longlong)piVar8[1]) >> 0x20) + local_10)
                   * 2;
      local_8 = (int)((ulonglong)((longlong)-*piVar7 * (longlong)*piVar8) >> 0x20);
      piVar11[1] = local_8 * 2 +
                   (int)((ulonglong)((longlong)piVar7[-1] * (longlong)piVar8[1]) >> 0x20) * -2;
      piVar8 = piVar8 + iVar2;
      local_3c = (int)((ulonglong)((longlong)piVar7[1] * (longlong)*piVar8) >> 0x20);
      piVar9[-3] = ((int)((ulonglong)((longlong)-piVar7[2] * (longlong)piVar8[1]) >> 0x20) +
                   local_3c) * 2;
      local_34 = (int)((ulonglong)((longlong)-piVar7[2] * (longlong)*piVar8) >> 0x20);
      piVar11[2] = local_34 * 2 +
                   (int)((ulonglong)((longlong)piVar7[1] * (longlong)piVar8[1]) >> 0x20) * -2;
      piVar9 = piVar8 + iVar2;
      local_48 = (int)((ulonglong)((longlong)piVar7[3] * (longlong)*piVar9) >> 0x20);
      *piVar17 = ((int)((ulonglong)((longlong)-piVar7[4] * (longlong)piVar9[1]) >> 0x20) + local_48)
                 * 2;
      local_50 = (int)((ulonglong)((longlong)-piVar7[4] * (longlong)*piVar9) >> 0x20);
      piVar8 = piVar9 + iVar2;
      piVar11[3] = local_50 * 2 +
                   (int)((ulonglong)((longlong)piVar7[3] * (longlong)piVar9[1]) >> 0x20) * -2;
      piVar12 = piVar7 + 5;
      piVar11 = piVar11 + 4;
      piVar7 = piVar7 + 8;
      piVar9 = piVar17;
    } while (piVar12 < piVar17);
  }
  piVar8 = piVar5;
  piVar11 = param_3 + iVar13 + 2;
  piVar7 = piVar5 + (2 - iVar16);
  do {
    iVar2 = piVar8[-1];
    piVar7[-3] = iVar2;
    piVar17 = piVar8 + -4;
    piVar11[-2] = -iVar2;
    iVar2 = piVar8[-2];
    piVar7[-4] = iVar2;
    piVar11[-1] = -iVar2;
    iVar2 = piVar8[-3];
    piVar7[-5] = iVar2;
    *piVar11 = -iVar2;
    iVar2 = *piVar17;
    piVar7[-6] = iVar2;
    piVar11[1] = -iVar2;
    piVar9 = piVar11 + 2;
    piVar8 = piVar17;
    piVar12 = piVar5;
    piVar11 = piVar11 + 4;
    piVar7 = piVar7 + -4;
  } while (piVar9 < piVar17);
  do {
    piVar8 = piVar5 + -4;
    *piVar8 = piVar12[3];
    piVar5[-3] = piVar12[2];
    piVar5[-2] = piVar12[1];
    piVar5[-1] = *piVar12;
    piVar5 = piVar8;
    piVar12 = piVar12 + 4;
  } while (param_3 + iVar16 < piVar8);
  return;
}


