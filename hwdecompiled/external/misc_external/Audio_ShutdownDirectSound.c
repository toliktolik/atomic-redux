/*
 * Function: Audio_ShutdownDirectSound
 * Address: 004e5900
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl
Audio_ShutdownDirectSound
          (int *param_1,uint param_2,uint param_3,int param_4,int param_5,int *param_6,int param_7,
          uint *param_8,uint *param_9)

{
  uint *puVar1;
  undefined4 uVar2;
  uint *in_EAX;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined4 *puVar7;
  uint uVar8;
  int iVar9;
  byte bVar10;
  int iVar11;
  uint uVar12;
  int iVar13;
  int *piVar14;
  int local_104 [14];
  uint auStack_cc [17];
  uint local_88 [17];
  int local_44;
  int *local_40;
  int local_3c;
  uint local_38;
  int local_34;
  undefined4 local_30;
  uint local_2c;
  uint *local_28;
  int local_24;
  uint local_20;
  uint local_1c;
  uint *local_18;
  uint local_14;
  int local_10;
  uint local_c;
  uint local_8;
  
  local_88[0] = 0;
  local_88[1] = 0;
  local_88[2] = 0;
  local_88[3] = 0;
  local_88[4] = 0;
  local_88[5] = 0;
  local_88[6] = 0;
  local_88[7] = 0;
  local_88[8] = 0;
  local_88[9] = 0;
  local_88[10] = 0;
  local_88[0xb] = 0;
  local_88[0xc] = 0;
  local_88[0xd] = 0;
  local_88[0xe] = 0;
  local_88[0xf] = 0;
  piVar14 = param_1;
  uVar8 = param_2;
  do {
    local_88[*piVar14] = local_88[*piVar14] + 1;
    piVar14 = piVar14 + 1;
    uVar8 = uVar8 - 1;
  } while (uVar8 != 0);
  if (local_88[0] == param_2) {
    *param_6 = 0;
    *in_EAX = 0;
  }
  else {
    local_8 = *in_EAX;
    uVar8 = 1;
    do {
      if (local_88[uVar8] != 0) break;
      if (local_88[uVar8 + 1] != 0) {
        uVar8 = uVar8 + 1;
        break;
      }
      if (local_88[uVar8 + 2] != 0) {
        uVar8 = uVar8 + 2;
        break;
      }
      if (local_88[uVar8 + 3] != 0) {
        uVar8 = uVar8 + 3;
        break;
      }
      if (local_88[uVar8 + 4] != 0) {
        uVar8 = uVar8 + 4;
        break;
      }
      uVar8 = uVar8 + 5;
    } while (uVar8 < 0x10);
    local_c = uVar8;
    if (local_8 < uVar8) {
      local_8 = uVar8;
    }
    local_20 = 0xf;
    do {
      if (local_88[local_20] != 0) break;
      local_20 = local_20 - 1;
    } while (local_20 != 0);
    if (local_20 < local_8) {
      local_8 = local_20;
    }
    uVar6 = local_8;
    iVar9 = 1 << ((byte)uVar8 & 0x1f);
    *in_EAX = local_8;
    for (; uVar8 < local_20; uVar8 = uVar8 + 1) {
      if ((int)(iVar9 - local_88[uVar8]) < 0) {
        return 0xfffffffd;
      }
      iVar9 = (iVar9 - local_88[uVar8]) * 2;
    }
    local_24 = local_20 * 4;
    iVar9 = iVar9 - local_88[local_20];
    local_3c = iVar9;
    if (iVar9 < 0) {
      return 0xfffffffd;
    }
    local_88[local_20] = local_88[local_20] + iVar9;
    iVar5 = 0;
    iVar11 = local_20 - 1;
    auStack_cc[2] = 0;
    if (iVar11 != 0) {
      iVar13 = 0;
      do {
        iVar5 = iVar5 + *(int *)((int)local_88 + iVar13 + 4);
        iVar11 = iVar11 + -1;
        *(int *)((int)auStack_cc + iVar13 + 0xc) = iVar5;
        iVar13 = iVar13 + 4;
      } while (iVar11 != 0);
    }
    uVar8 = 0;
    do {
      iVar5 = *param_1;
      local_18 = (uint *)(param_1 + 1);
      if (iVar5 != 0) {
        uVar12 = auStack_cc[iVar5 + 1];
        param_9[uVar12] = uVar8;
        auStack_cc[iVar5 + 1] = uVar12 + 1;
      }
      uVar8 = uVar8 + 1;
      param_1 = (int *)local_18;
    } while (uVar8 < param_2);
    iVar5 = *(int *)((int)auStack_cc + local_24 + 4);
    local_18 = param_9;
    auStack_cc[1] = 0;
    local_104[0] = 0;
    local_10 = 0;
    local_38 = 0;
    uVar8 = 0;
    iVar11 = -uVar6;
    local_1c = 0;
    param_1 = (int *)0xffffffff;
    if ((int)local_c <= (int)local_20) {
      local_34 = local_c - 1;
      local_28 = local_88 + local_c;
      uVar12 = local_2c;
      do {
        local_88[0x10] = *local_28;
        iVar9 = local_3c;
        uVar2 = local_30;
        while (local_3c = iVar9, local_30 = uVar2, local_88[0x10] != 0) {
          local_30._2_2_ = (undefined2)((uint)uVar2 >> 0x10);
          local_14 = local_88[0x10] - 1;
          local_44 = iVar11 + uVar6;
          if (local_44 < (int)local_c) {
            local_24 = iVar11 - uVar6;
            do {
              iVar11 = iVar11 + uVar6;
              local_24 = local_24 + uVar6;
              piVar14 = (int *)((int)param_1 + 1);
              local_44 = local_44 + uVar6;
              uVar8 = local_20 - iVar11;
              if (uVar6 < local_20 - iVar11) {
                uVar8 = uVar6;
              }
              uVar6 = local_c - iVar11;
              uVar3 = 1 << ((byte)uVar6 & 0x1f);
              if ((local_88[0x10] < uVar3) &&
                 (iVar9 = uVar3 + (-1 - local_14), puVar1 = local_28, uVar6 < uVar8)) {
                while (uVar6 = uVar6 + 1, uVar6 < uVar8) {
                  uVar3 = puVar1[1];
                  uVar4 = iVar9 * 2;
                  if (uVar4 < uVar3 || uVar4 - uVar3 == 0) break;
                  iVar9 = uVar4 - uVar3;
                  puVar1 = puVar1 + 1;
                }
              }
              local_38 = 1 << ((byte)uVar6 & 0x1f);
              uVar3 = local_38 + *param_8;
              if (0x5a0 < uVar3) {
                return 0xfffffffc;
              }
              iVar9 = param_7 + *param_8 * 8;
              local_40 = local_104 + (int)piVar14;
              local_104[(int)piVar14] = iVar9;
              uVar8 = local_1c;
              *param_8 = uVar3;
              local_10 = iVar9;
              if (piVar14 == (int *)0x0) {
                *param_6 = iVar9;
              }
              else {
                local_30 = CONCAT31(local_30._1_3_,(byte)uVar6);
                uVar6 = local_1c >> ((byte)local_24 & 0x1f);
                iVar13 = local_40[-1];
                auStack_cc[(int)param_1 + 2] = local_1c;
                local_30._0_2_ = CONCAT11((undefined1)local_8,(byte)local_30);
                uVar12 = (iVar9 - iVar13 >> 3) - uVar6;
                *(undefined4 *)(iVar13 + uVar6 * 8) = local_30;
                *(uint *)(iVar13 + 4 + uVar6 * 8) = uVar12;
              }
              uVar6 = local_8;
              param_1 = piVar14;
            } while (local_44 < (int)local_c);
          }
          bVar10 = (byte)iVar11;
          if (local_18 < param_9 + iVar5) {
            uVar12 = *local_18;
            if (uVar12 < param_3) {
              local_30._0_1_ = (uVar12 < 0x100) - 1U & 0x60;
            }
            else {
              iVar9 = (uVar12 - param_3) * 4;
              local_30._0_1_ = *(char *)(iVar9 + param_5) + 0x50;
              uVar12 = *(uint *)(iVar9 + param_4);
            }
            local_18 = local_18 + 1;
          }
          else {
            local_30._0_1_ = 0xc0;
          }
          local_30 = CONCAT31(CONCAT21(local_30._2_2_,(char)local_c - bVar10),(byte)local_30);
          iVar9 = 1 << ((char)local_c - bVar10 & 0x1f);
          uVar6 = uVar8 >> (bVar10 & 0x1f);
          if (uVar6 < local_38) {
            puVar7 = (undefined4 *)(local_10 + uVar6 * 8);
            do {
              *puVar7 = local_30;
              puVar7[1] = uVar12;
              puVar7 = puVar7 + iVar9 * 2;
              uVar6 = uVar6 + iVar9;
              uVar8 = local_1c;
            } while (uVar6 < local_38);
          }
          uVar3 = 1 << ((byte)local_34 & 0x1f);
          uVar6 = uVar8 & uVar3;
          while (uVar6 != 0) {
            uVar8 = uVar8 ^ uVar3;
            uVar3 = uVar3 >> 1;
            uVar6 = uVar8 & uVar3;
          }
          uVar8 = uVar8 ^ uVar3;
          local_1c = uVar8;
          local_88[0x10] = local_14;
          uVar6 = local_8;
          iVar9 = local_3c;
          uVar2 = local_30;
          if (((1 << (bVar10 & 0x1f)) - 1U & uVar8) != auStack_cc[(int)param_1 + 1]) {
            do {
              iVar11 = iVar11 - local_8;
              puVar1 = auStack_cc + (int)param_1;
              param_1 = (int *)((int)param_1 + -1);
            } while (((1 << ((byte)iVar11 & 0x1f)) - 1U & uVar8) != *puVar1);
          }
        }
        local_28 = local_28 + 1;
        local_c = local_c + 1;
        local_34 = local_34 + 1;
      } while ((int)local_c <= (int)local_20);
    }
    if ((iVar9 != 0) && (local_20 != 1)) {
      return 0xfffffffb;
    }
  }
  return 0;
}


