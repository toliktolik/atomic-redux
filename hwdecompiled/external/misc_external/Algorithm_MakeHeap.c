/*
 * Function: Algorithm_MakeHeap
 * Address: 0045dbe0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Algorithm_MakeHeap(undefined4 param_1,int *param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  int *piVar4;
  uint *puVar5;
  int extraout_ECX;
  uint extraout_EDX;
  uint uVar6;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  int *piVar7;
  int *piVar8;
  int *piVar9;
  bool bVar10;
  undefined8 uVar11;
  undefined **local_5c [10];
  undefined1 local_34 [4];
  undefined1 local_30;
  undefined4 local_20;
  undefined4 local_1c;
  void *local_18;
  int *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  piVar4 = param_2;
  local_8 = 0xffffffff;
  uStack_c = 0x513128;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  if (*(char *)((int)param_2 + 0x39) != '\0') {
    local_1c = 0xf;
    local_20 = 0;
    local_30 = 0;
    pcVar2 = "invalid map/set<T> iterator";
    do {
      pcVar3 = pcVar2;
      pcVar2 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    ExceptionList = &pvStack_10;
    String_Assign(local_34,(_String_base *)"invalid map/set<T> iterator",(uint)(pcVar3 + -0x52a114))
    ;
    local_8 = 0;
    Level_InitializeFrigistan(local_5c,local_34);
    local_5c[0] = &PTR_Level_InitializePetrovakia_00531574;
    CRuntime_CxxThrowException(local_5c,&DAT_0054f69c);
  }
  local_14 = piVar4;
  Tree_FindMinimumNode((int *)&param_2);
  piVar7 = (int *)*piVar4;
  puVar5 = (uint *)(piVar4 + 2);
  uVar6 = extraout_EDX;
  piVar9 = piVar4;
  if (*(char *)((int)piVar7 + 0x39) == '\0') {
    uVar6 = *puVar5;
    if (*(char *)(uVar6 + 0x39) != '\0') goto LAB_0045dc88;
    puVar5 = (uint *)(param_2 + 2);
    piVar9 = param_2;
  }
  piVar7 = (int *)*puVar5;
LAB_0045dc88:
  if (piVar9 == piVar4) {
    piVar8 = (int *)piVar4[1];
    uVar11 = CONCAT44(uVar6,piVar8);
    if (*(char *)((int)piVar7 + 0x39) == '\0') {
      piVar7[1] = (int)piVar8;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(int **)(*(int *)((int)local_18 + 4) + 4) = piVar7;
    }
    else if ((int *)*piVar8 == local_14) {
      *piVar8 = (int)piVar7;
    }
    else {
      piVar8[2] = (int)piVar7;
    }
    if ((int *)**(int **)((int)local_18 + 4) == local_14) {
      if (*(char *)((int)piVar7 + 0x39) == '\0') {
        uVar11 = Tree_BalanceAfterInsertion(piVar7);
      }
      uVar6 = (uint)((ulonglong)uVar11 >> 0x20);
      **(undefined4 **)((int)local_18 + 4) = (int)uVar11;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 8) == local_14) {
      if (*(char *)((int)piVar7 + 0x39) == '\0') {
        uVar11 = LinkedList_FindNextActiveNode((int)piVar7);
        uVar6 = (uint)((ulonglong)uVar11 >> 0x20);
        *(int *)(*(int *)((int)local_18 + 4) + 8) = (int)uVar11;
      }
      else {
        *(int **)(*(int *)((int)local_18 + 4) + 8) = piVar8;
      }
    }
  }
  else {
    *(int **)(*piVar4 + 4) = piVar9;
    *piVar9 = *piVar4;
    piVar8 = piVar9;
    if (piVar9 != (int *)piVar4[2]) {
      piVar8 = (int *)piVar9[1];
      if (*(char *)((int)piVar7 + 0x39) == '\0') {
        piVar7[1] = (int)piVar8;
      }
      *piVar8 = (int)piVar7;
      *puVar5 = local_14[2];
      *(int **)(local_14[2] + 4) = piVar9;
    }
    if (*(int **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(int **)(*(int *)((int)local_18 + 4) + 4) = piVar9;
    }
    else {
      piVar4 = (int *)local_14[1];
      if ((int *)*piVar4 == local_14) {
        *piVar4 = (int)piVar9;
      }
      else {
        piVar4[2] = (int)piVar9;
      }
    }
    piVar9[1] = local_14[1];
    iVar1 = piVar9[0xe];
    uVar6 = CONCAT31((int3)((uint)local_18 >> 8),(char)local_14[0xe]);
    *(char *)(piVar9 + 0xe) = (char)local_14[0xe];
    *(char *)(local_14 + 0xe) = (char)iVar1;
  }
  if ((char)local_14[0xe] == '\x01') {
    if (piVar7 != *(int **)(*(int *)((int)local_18 + 4) + 4)) {
      do {
        if ((char)piVar7[0xe] != '\x01') break;
        piVar4 = (int *)*piVar8;
        if (piVar7 == piVar4) {
          piVar4 = (int *)piVar8[2];
          if ((char)piVar4[0xe] == '\0') {
            *(undefined1 *)(piVar4 + 0xe) = 1;
            *(undefined1 *)(piVar8 + 0xe) = 0;
            XML_LoadDocument(local_18,(int)piVar8);
            piVar4 = (int *)piVar8[2];
          }
          if (*(char *)((int)piVar4 + 0x39) == '\0') {
            if ((*(char *)(*piVar4 + 0x38) != '\x01') || (*(char *)(piVar4[2] + 0x38) != '\x01')) {
              if (*(char *)(piVar4[2] + 0x38) == '\x01') {
                *(undefined1 *)(*piVar4 + 0x38) = 1;
                *(undefined1 *)(piVar4 + 0xe) = 0;
                XML_ValidateDocument(local_18,piVar4);
                piVar4 = (int *)piVar8[2];
              }
              *(char *)(piVar4 + 0xe) = (char)piVar8[0xe];
              *(undefined1 *)(piVar8 + 0xe) = 1;
              *(undefined1 *)(piVar4[2] + 0x38) = 1;
              XML_LoadDocument(local_18,(int)piVar8);
              uVar6 = extraout_EDX_00;
              break;
            }
LAB_0045de3c:
            *(undefined1 *)(piVar4 + 0xe) = 0;
          }
        }
        else {
          if ((char)piVar4[0xe] == '\0') {
            *(undefined1 *)(piVar4 + 0xe) = 1;
            *(undefined1 *)(piVar8 + 0xe) = 0;
            XML_ValidateDocument(local_18,piVar8);
            piVar4 = (int *)*piVar8;
          }
          if (*(char *)((int)piVar4 + 0x39) == '\0') {
            if ((*(char *)(piVar4[2] + 0x38) == '\x01') && (*(char *)(*piVar4 + 0x38) == '\x01'))
            goto LAB_0045de3c;
            if (*(char *)(*piVar4 + 0x38) == '\x01') {
              *(undefined1 *)(piVar4[2] + 0x38) = 1;
              *(undefined1 *)(piVar4 + 0xe) = 0;
              XML_LoadDocument(local_18,(int)piVar4);
              piVar4 = (int *)*piVar8;
            }
            *(char *)(piVar4 + 0xe) = (char)piVar8[0xe];
            *(undefined1 *)(piVar8 + 0xe) = 1;
            *(undefined1 *)(*piVar4 + 0x38) = 1;
            XML_ValidateDocument(local_18,piVar8);
            uVar6 = extraout_EDX_01;
            break;
          }
        }
        uVar6 = *(uint *)((int)local_18 + 4);
        bVar10 = piVar8 != *(int **)(uVar6 + 4);
        piVar7 = piVar8;
        piVar8 = (int *)piVar8[1];
      } while (bVar10);
    }
    *(undefined1 *)(piVar7 + 0xe) = 1;
  }
  STL_Iterator_ReverseBegin((int)(local_14 + 3),uVar6);
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX,extraout_EDX_02);
}


