/*
 * Function: GIF_ScalePixelData
 * Address: 004d4880
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl
GIF_ScalePixelData(int *param_1,int param_2,int param_3,int param_4,uint *param_5,int param_6,
                  int param_7)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  byte bVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  
  piVar1 = param_1;
  iVar9 = 0;
  bVar6 = (byte)(param_7 - param_1[3]);
  if (param_7 - param_1[3] < 0) {
    param_1 = (int *)param_3;
    if (param_3 < param_3 + param_6) {
      do {
        uVar5 = GIF_FindImageIndex((int)piVar1,param_5);
        if (uVar5 == 0xffffffff) {
          return 0xffffffff;
        }
        iVar4 = *piVar1;
        iVar3 = piVar1[4];
        iVar8 = 0;
        if (0 < iVar4) {
          do {
            piVar2 = (int *)(*(int *)(param_2 + iVar9 * 4) + (int)param_1 * 4);
            *piVar2 = *piVar2 + (*(int *)(iVar3 + iVar4 * uVar5 * 4 + iVar8 * 4) << (-bVar6 & 0x1f))
            ;
            iVar9 = iVar9 + 1;
            if (iVar9 == param_4) {
              iVar9 = 0;
              param_1 = (int *)((int)param_1 + 1);
            }
            iVar8 = iVar8 + 1;
          } while (iVar8 < *piVar1);
        }
      } while ((int)param_1 < param_3 + param_6);
      return 0;
    }
  }
  else {
    iVar4 = param_6 + param_3;
    if (param_3 < iVar4) {
      do {
        uVar5 = GIF_FindImageIndex((int)param_1,param_5);
        if (uVar5 == 0xffffffff) {
          return 0xffffffff;
        }
        iVar3 = *param_1;
        iVar8 = param_1[4];
        iVar7 = 0;
        if (0 < iVar3) {
          do {
            piVar1 = (int *)(*(int *)(param_2 + iVar9 * 4) + param_3 * 4);
            *piVar1 = *piVar1 + (*(int *)(iVar8 + iVar3 * uVar5 * 4 + iVar7 * 4) >> (bVar6 & 0x1f));
            iVar9 = iVar9 + 1;
            if (iVar9 == param_4) {
              iVar9 = 0;
              param_3 = param_3 + 1;
            }
            iVar7 = iVar7 + 1;
          } while (iVar7 < *param_1);
        }
      } while (param_3 < iVar4);
    }
  }
  return 0;
}


