/*
 * Function: GIF_SetTransparentIndex
 * Address: 004d33a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl GIF_SetTransparentIndex(uint *param_1,int param_2)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  char cVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  
  uVar6 = param_1[2];
  uVar2 = *(uint *)(&DAT_00568230 + param_2 * 4);
  uVar3 = *param_1;
  uVar8 = param_2 + uVar3;
  if ((int)uVar8 < (int)(uVar6 * 8)) {
    uVar7 = (uint)(*(byte *)param_1[1] >> ((byte)*param_1 & 0x1f));
    if (8 < (int)uVar8) {
      cVar4 = (char)uVar3;
      uVar7 = uVar7 | (uint)((byte *)param_1[1])[1] << (8U - cVar4 & 0x1f);
      if ((((0x10 < (int)uVar8) &&
           (uVar7 = uVar7 | (uint)*(byte *)(param_1[1] + 2) << (0x10U - cVar4 & 0x1f),
           0x18 < (int)uVar8)) &&
          (uVar7 = uVar7 | (uint)*(byte *)(param_1[1] + 3) << (0x18U - cVar4 & 0x1f),
          0x20 < (int)uVar8)) && (uVar3 != 0)) {
        uVar7 = uVar7 | (uint)*(byte *)(param_1[1] + 4) << (0x20U - cVar4 & 0x1f);
      }
    }
    iVar5 = (int)(uVar8 + ((int)uVar8 >> 0x1f & 7U)) >> 3;
    param_1[1] = param_1[1] + iVar5;
    *param_1 = uVar8 & 7;
    param_1[2] = uVar6 - iVar5;
    return uVar7 & uVar2;
  }
  if ((int)uVar6 < 0) {
    return 0xffffffff;
  }
  if (uVar8 != 0) {
    iVar5 = GIF_GetTransparentIndex();
    if (iVar5 != 0) {
      return 0xffffffff;
    }
    uVar6 = (uint)(*(byte *)param_1[1] >> ((byte)*param_1 & 0x1f));
    if (7 < (int)uVar8) {
      param_1[1] = (uint)((byte *)param_1[1] + 1);
      param_1[2] = param_1[2] - 1;
      GIF_HasTransparency();
      if (8 < (int)uVar8) {
        iVar5 = GIF_GetTransparentIndex();
        if (iVar5 != 0) {
          return 0xffffffff;
        }
        uVar6 = uVar6 | (uint)*(byte *)param_1[1] << (8U - (char)*param_1 & 0x1f);
        if (0xf < (int)uVar8) {
          param_1[1] = (uint)((byte *)param_1[1] + 1);
          param_1[2] = param_1[2] - 1;
          GIF_HasTransparency();
          if (0x10 < (int)uVar8) {
            iVar5 = GIF_GetTransparentIndex();
            if (iVar5 != 0) {
              return 0xffffffff;
            }
            uVar6 = uVar6 | (uint)*(byte *)param_1[1] << (0x10U - (char)*param_1 & 0x1f);
            if (0x17 < (int)uVar8) {
              param_1[1] = (uint)((byte *)param_1[1] + 1);
              param_1[2] = param_1[2] - 1;
              GIF_HasTransparency();
              if (0x18 < (int)uVar8) {
                iVar5 = GIF_GetTransparentIndex();
                if (iVar5 != 0) {
                  return 0xffffffff;
                }
                uVar6 = uVar6 | (uint)*(byte *)param_1[1] << (0x18U - (char)*param_1 & 0x1f);
                if (0x1f < (int)uVar8) {
                  param_1[1] = (uint)((byte *)param_1[1] + 1);
                  param_1[2] = param_1[2] - 1;
                  GIF_HasTransparency();
                  if (0x20 < (int)uVar8) {
                    iVar5 = GIF_GetTransparentIndex();
                    if (iVar5 != 0) {
                      return 0xffffffff;
                    }
                    uVar3 = *param_1;
                    if (uVar3 != 0) {
                      bVar1 = *(byte *)param_1[1];
                      *param_1 = uVar8 & 7;
                      return (uVar6 | (uint)bVar1 << (0x20U - (char)uVar3 & 0x1f)) & uVar2;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  *param_1 = uVar8 & 7;
  return uVar6 & uVar2;
}


