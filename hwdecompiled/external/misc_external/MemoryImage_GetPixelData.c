/*
 * Function: MemoryImage_GetPixelData
 * Address: 00472670
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __fastcall MemoryImage_GetPixelData(int param_1)

{
  undefined4 *puVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  
  if (*(int *)(param_1 + 0x18) == 0) {
    uVar5 = *(int *)(param_1 + 8) * *(int *)(param_1 + 4);
    iVar4 = uVar5 * 4;
    puVar1 = (undefined4 *)operator_new(iVar4 + 4);
    *(undefined4 **)(param_1 + 0x18) = puVar1;
    for (uVar2 = uVar5 & 0x3fffffff; uVar2 != 0; uVar2 = uVar2 - 1) {
      *puVar1 = 0;
      puVar1 = puVar1 + 1;
    }
    for (iVar3 = 0; iVar3 != 0; iVar3 = iVar3 + -1) {
      *(undefined1 *)puVar1 = 0;
      puVar1 = (undefined4 *)((int)puVar1 + 1);
    }
    *(undefined4 *)(iVar4 + *(int *)(param_1 + 0x18)) = 0x4beefade;
    if (*(int *)(param_1 + 0x28) != 0) {
      iVar3 = 0;
      if (0 < (int)uVar5) {
        do {
          iVar4 = *(int *)(*(int *)(param_1 + 0x28) +
                          (uint)*(byte *)(iVar3 + *(int *)(param_1 + 0x2c)) * 4);
          *(int *)(*(int *)(param_1 + 0x18) + iVar3 * 4) = iVar4;
          iVar3 = iVar3 + 1;
        } while (iVar3 < (int)uVar5);
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar4,*(uint *)(param_1 + 0x2c));
    }
  }
  return *(undefined4 *)(param_1 + 0x18);
}


