/*
 * Function: AudioCodec_SeparateChannels
 * Address: 004b7850
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __thiscall
AudioCodec_SeparateChannels
          (void *this,int param_1,uint param_2,undefined4 *param_3,undefined1 param_4)

{
  _String_base _Var1;
  char cVar2;
  _String_base *p_Var3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined4 uVar7;
  _String_base *p_Var8;
  int extraout_ECX;
  uint extraout_EDX;
  int iVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined8 uVar12;
  int local_a8 [2];
  undefined4 local_a0 [10];
  undefined4 local_78;
  void *local_74;
  undefined4 local_70 [3];
  _String_base local_64 [4];
  uint local_60;
  undefined4 local_50;
  uint local_4c;
  int local_48;
  undefined4 local_44;
  int local_40;
  undefined4 local_3c;
  undefined4 local_38;
  int local_34;
  int local_30;
  undefined4 local_2c;
  uint local_28;
  int local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 *local_18;
  int local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5170d0;
  local_10 = ExceptionList;
  if (*(uint *)(param_2 + 0x18) < 0x10) {
    p_Var8 = (_String_base *)(param_2 + 4);
  }
  else {
    p_Var8 = *(_String_base **)(param_2 + 4);
  }
  local_4c = 0xf;
  local_50 = 0;
  local_60 = local_60 & 0xffffff00;
  p_Var3 = p_Var8;
  do {
    _Var1 = *p_Var3;
    p_Var3 = p_Var3 + 1;
  } while (_Var1 != (_String_base)0x0);
  ExceptionList = &local_10;
  local_74 = this;
  String_Assign(local_64,p_Var8,(int)p_Var3 - (int)(p_Var8 + 1));
  local_8 = 0;
  uVar12 = AudioCodec_DecompressData(this,extraout_EDX,local_64);
  iVar6 = (int)uVar12;
  local_8 = 0xffffffff;
  local_14 = iVar6;
  if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_60,(uint)((ulonglong)uVar12 >> 0x20));
  }
  if ((uint)param_3[6] < 0x10) {
    p_Var8 = (_String_base *)(param_3 + 1);
  }
  else {
    p_Var8 = (_String_base *)param_3[1];
  }
  local_50 = 0;
  local_4c = 0xf;
  local_60 = local_60 & 0xffffff00;
  p_Var3 = p_Var8;
  do {
    _Var1 = *p_Var3;
    p_Var3 = p_Var3 + 1;
  } while (_Var1 != (_String_base)0x0);
  String_Assign(local_64,p_Var8,(int)p_Var3 - (int)(p_Var8 + 1));
  local_8 = 1;
  uVar12 = AudioCodec_DecompressData(this,(uint)local_64,local_64);
  uVar4 = (uint)uVar12;
  local_8 = 0xffffffff;
  if (local_4c < 0x10) {
    local_28 = uVar4;
    if ((iVar6 != 0) && (uVar4 != 0)) {
      (**(code **)(DAT_005a4388 + 0x34))(iVar6,&local_34,0,0,0);
      uVar5 = (**(code **)(DAT_005a4388 + 0x38))(iVar6);
      iVar6 = (**(code **)(DAT_005a4388 + 0x30))(iVar6);
      local_30 = iVar6;
      (**(code **)(DAT_005a4388 + 0x34))(uVar4,&local_48,0,0,0);
      param_2 = (**(code **)(DAT_005a4388 + 0x38))(uVar4);
      local_28 = (**(code **)(DAT_005a4388 + 0x30))(uVar4);
      if ((local_34 == local_48) && (uVar5 == param_2)) {
        iVar6 = iVar6 + local_28;
        local_2c = (**(code **)(DAT_005a4388 + 0x1c))
                             (0xffffffff,iVar6,uVar5 | 2,local_34,0xff,0x80,0);
        iVar9 = (2 - (uint)((uVar5 & 0x20) != 0)) * (2 - (uint)((uVar5 & 8) != 0));
        local_40 = iVar9;
        cVar2 = (**(code **)(DAT_005a4388 + 0x24))
                          (local_2c,0,iVar6 * iVar9,&local_18,&local_3c,&local_38,&local_44);
        uVar7 = local_2c;
        if (cVar2 != '\0') {
          iVar6 = iVar9 * local_30;
          local_24 = iVar6;
          cVar2 = (**(code **)(DAT_005a4388 + 0x24))
                            (local_14,0,iVar6,&param_3,&local_1c,&param_2,&local_20);
          if (cVar2 != '\0') {
            puVar10 = param_3;
            puVar11 = local_18;
            for (uVar5 = param_2 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
              *puVar11 = *puVar10;
              puVar10 = puVar10 + 1;
              puVar11 = puVar11 + 1;
            }
            for (uVar5 = param_2 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
              *(undefined1 *)puVar11 = *(undefined1 *)puVar10;
              puVar10 = (undefined4 *)((int)puVar10 + 1);
              puVar11 = (undefined4 *)((int)puVar11 + 1);
            }
            (**(code **)(DAT_005a4388 + 0x28))(local_14,param_3,local_1c,param_2,local_20);
            iVar6 = local_24;
            iVar9 = local_40;
          }
          cVar2 = (**(code **)(DAT_005a4388 + 0x24))
                            (uVar4,iVar6,iVar9 * local_28,&param_3,&local_1c,&param_2,&local_20);
          if (cVar2 != '\0') {
            puVar10 = param_3;
            puVar11 = (undefined4 *)(local_24 + (int)local_18);
            for (uVar5 = param_2 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
              *puVar11 = *puVar10;
              puVar10 = puVar10 + 1;
              puVar11 = puVar11 + 1;
            }
            for (uVar5 = param_2 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
              *(undefined1 *)puVar11 = *(undefined1 *)puVar10;
              puVar10 = (undefined4 *)((int)puVar10 + 1);
              puVar11 = (undefined4 *)((int)puVar11 + 1);
            }
            (**(code **)(DAT_005a4388 + 0x28))(uVar4,param_3,local_1c,param_2,local_20);
          }
          uVar7 = local_2c;
          (**(code **)(DAT_005a4388 + 0x28))(local_2c,local_18,local_3c,local_38,local_44);
        }
        (**(code **)(DAT_005a4388 + 0x20))(local_14);
        (**(code **)(DAT_005a4388 + 0x20))(uVar4);
        (**(code **)(DAT_005a4388 + 0x2c))(uVar7,local_30,local_28);
        Dialog_AddButton(local_70);
        local_70[0] = uVar7;
        local_50._0_2_ = CONCAT11(param_4,(undefined1)local_50);
        local_a8[0] = param_1;
        puVar10 = local_70;
        puVar11 = local_a0;
        for (iVar6 = 10; iVar6 != 0; iVar6 = iVar6 + -1) {
          *puVar11 = *puVar10;
          puVar10 = puVar10 + 1;
          puVar11 = puVar11 + 1;
        }
        uVar7 = AudioCodec_EncodeFrame((void *)((int)local_74 + 4),&local_78,local_a8);
        ExceptionList = local_10;
        return CONCAT31((int3)((uint)uVar7 >> 8),1);
      }
    }
    ExceptionList = local_10;
    return local_28 & 0xffffff00;
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX,(uint)((ulonglong)uVar12 >> 0x20));
}


