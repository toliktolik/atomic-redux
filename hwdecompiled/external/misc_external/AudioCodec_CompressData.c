/*
 * Function: AudioCodec_CompressData
 * Address: 004b6aa0
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall AudioCodec_CompressData(void *this,_String_base *param_1,_String_base *param_2)

{
  _String_base *p_Var1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  _String_base *p_Var5;
  undefined4 uVar6;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  undefined4 extraout_ECX_01;
  undefined4 extraout_ECX_02;
  undefined4 uVar7;
  undefined2 extraout_DX;
  undefined2 extraout_DX_00;
  undefined2 extraout_DX_01;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  uint extraout_EDX_07;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  uint extraout_EDX_10;
  uint extraout_EDX_11;
  uint extraout_EDX_12;
  uint extraout_EDX_13;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff28;
  undefined4 *in_stack_ffffff2c;
  uint local_c0;
  _String_base local_bc [4];
  uint local_b8;
  undefined4 local_a8;
  uint local_a4;
  _String_base local_a0 [4];
  uint local_9c;
  undefined4 local_8c;
  uint local_88;
  undefined1 local_84 [4];
  uint local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [28];
  _String_base local_4c [28];
  _String_base local_30 [4];
  undefined1 local_2c;
  int local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  p_Var1 = param_1;
  local_8._0_1_ = 0xff;
  local_8._1_3_ = 0xffffff;
  uStack_c = 0x517001;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
                    /* WARNING: Load size is inaccurate */
  if (((_String_base *)0xff < param_1) ||
     (ExceptionList = &local_10, (**(code **)(*this + 0xc))(param_1),
     *(int *)((int)this + 0x1494) == 0)) goto LAB_004b6e1b;
  local_18 = 0xf;
  local_1c = 0;
  local_2c = 0;
  PowerUp_ProcessThunderstrike(local_30,extraout_EDX,param_2,0,0xffffffff);
  local_8 = 0;
  param_2 = (_String_base *)CONCAT13(0x5c,param_2._0_3_);
  param_1 = (_String_base *)CONCAT13(0x2f,param_1._0_3_);
  uVar3 = XML_GetElementValue(local_30,(char *)((int)&param_1 + 3),0xffffffff,1);
  uVar4 = XML_GetElementValue(local_30,(char *)((int)&param_2 + 3),0xffffffff,1);
  if ((int)uVar3 < (int)uVar4) {
    param_1 = (_String_base *)CONCAT13(0x5c,param_1._0_3_);
  }
  else {
    param_1 = (_String_base *)CONCAT13(0x2f,param_1._0_3_);
  }
  uVar3 = XML_GetElementValue(local_30,(char *)((int)&param_1 + 3),0xffffffff,1);
  if ((int)uVar3 < 0) {
    uVar3 = 0;
  }
  param_1 = GameMenu_ProcessRegistrationScreen(local_30,local_a0,uVar3 + 1,local_1c - uVar3);
  local_8._0_1_ = 1;
  p_Var5 = GameMenu_ProcessRegistrationScreen(local_30,local_bc,0,uVar3 + 1);
  local_8._0_1_ = 2;
  p_Var5 = Intel_DisplayPopulationData
                     (local_84,extraout_EDX_00,(_String_base *)local_84,p_Var5,
                      (_String_base *)"cached_");
  local_8._0_1_ = 3;
  p_Var5 = Background_ProcessBackgroundLayer
                     (extraout_ECX,(uint)param_1,(_String_base *)&stack0xffffff28,p_Var5,
                      (int)param_1);
  local_8._0_1_ = 4;
  Intel_DisplayPopulationData
            (local_68,extraout_EDX_01,(_String_base *)local_68,p_Var5,(_String_base *)&DAT_00537918)
  ;
  if (0xf < local_c0) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,(uint)in_stack_ffffff2c);
  }
  in_stack_ffffff2c = (undefined4 *)((uint)in_stack_ffffff2c & 0xffffff00);
  if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,extraout_EDX_02);
  }
  local_6c = 0xf;
  local_70 = 0;
  local_80 = local_80 & 0xffffff00;
  if (0xf < local_a4) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_b8,extraout_EDX_02);
  }
  local_a4 = 0xf;
  local_a8 = 0;
  local_b8 = local_b8 & 0xffffff00;
  local_8._0_1_ = 6;
  if (0xf < local_88) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_9c);
  }
  local_88 = 0xf;
  local_8c = 0;
  local_9c = local_9c & 0xffffff00;
  cVar2 = AudioCodec_ProcessDSP((int)this,(short)extraout_EDX_02,(int)p_Var1,local_68);
  uVar3 = extraout_EDX_03;
  if (cVar2 == '\0') {
    p_Var5 = Intel_DisplayPopulationData
                       (local_30,(uint)local_4c,local_4c,local_30,(_String_base *)&DAT_00537918);
    local_8._0_1_ = 10;
    cVar2 = AudioCodec_ProcessDSP((int)this,extraout_DX,(int)p_Var1,p_Var5);
    local_8._0_1_ = 6;
    String_Destructor((int)local_4c,extraout_EDX_04);
    uVar3 = extraout_EDX_05;
    if (cVar2 == '\0') {
      uVar7 = extraout_ECX_01;
      if (*(char *)((int)this + 0x1498) == '\0') {
LAB_004b6d45:
        p_Var5 = Intel_DisplayPopulationData
                           (uVar7,(uint)local_30,local_4c,local_30,(_String_base *)&DAT_00537908);
        local_8._0_1_ = 0xd;
        uVar3 = AudioCodec_DecodeBuffer((int)this,extraout_DX_00,(int)p_Var1,(int)p_Var5);
        local_8._0_1_ = 6;
        String_Destructor((int)local_4c,extraout_EDX_07);
        if ((char)uVar3 == '\0') {
          Intel_DisplayPopulationData
                    (local_30,(uint)local_4c,local_4c,local_30,(_String_base *)&DAT_00537904);
          local_8._0_1_ = 0xf;
          cVar2 = AudioCodec_GetFormat((int)this,extraout_DX_01,(int)p_Var1);
          local_8._0_1_ = 6;
          String_Destructor((int)local_4c,extraout_EDX_08);
          if (cVar2 == '\0') {
            String_Destructor((int)local_68,extraout_EDX_09);
            String_Destructor((int)local_30,extraout_EDX_13);
            goto LAB_004b6e1b;
          }
          Intel_DisplayPopulationData
                    (local_4c,extraout_EDX_09,local_4c,local_30,(_String_base *)&DAT_00537904);
          local_8._0_1_ = 0x10;
        }
        else {
          Intel_DisplayPopulationData
                    (local_30,(uint)local_4c,local_4c,local_30,(_String_base *)&DAT_00537908);
          local_8._0_1_ = 0xe;
        }
      }
      else {
        p_Var5 = Intel_DisplayPopulationData
                           (local_4c,extraout_EDX_05,local_4c,local_30,(_String_base *)&DAT_00537910
                           );
        local_8._0_1_ = 0xb;
        uVar6 = AudioCodec_Reset(this,(uint)p_Var1,(undefined4 *)p_Var5);
        local_8._0_1_ = 6;
        String_Destructor((int)local_4c,extraout_EDX_06);
        uVar7 = extraout_ECX_02;
        if ((char)uVar6 == '\0') goto LAB_004b6d45;
        Intel_DisplayPopulationData
                  (extraout_ECX_02,(uint)local_30,local_4c,local_30,(_String_base *)&DAT_00537910);
        local_8._0_1_ = 0xc;
      }
      AudioCodec_ValidateHeader(this,(uint)p_Var1);
      String_Destructor((int)local_4c,extraout_EDX_10);
      uVar3 = extraout_EDX_11;
    }
  }
  String_Destructor((int)local_68,uVar3);
  String_Destructor((int)local_30,extraout_EDX_12);
LAB_004b6e1b:
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff28,in_stack_ffffff2c);
  return;
}


