/*
 * Function: ImageDecoder_AllocateBuffers
 * Address: 004cd0a0
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl ImageDecoder_AllocateBuffers(int param_1)

{
  undefined1 *puVar1;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  
  uVar4 = ((uint)*(byte *)(param_1 + 299) * (uint)*(byte *)(param_1 + 0x128) *
           *(int *)(param_1 + 200) + 7 >> 3) + 1;
  puVar1 = (undefined1 *)CPU_Instruction12(param_1,uVar4);
  *(undefined1 **)(param_1 + 0xec) = puVar1;
  *puVar1 = 0;
  if ((*(byte *)(param_1 + 0x125) & 0x10) != 0) {
    puVar1 = (undefined1 *)CPU_Instruction12(param_1,*(int *)(param_1 + 0xd8) + 1);
    *(undefined1 **)(param_1 + 0xf0) = puVar1;
    *puVar1 = 1;
  }
  if ((*(byte *)(param_1 + 0x125) & 0xe0) != 0) {
    puVar2 = (undefined4 *)CPU_Instruction12(param_1,uVar4);
    *(undefined4 **)(param_1 + 0xe8) = puVar2;
    for (uVar3 = uVar4 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
      *puVar2 = 0;
      puVar2 = puVar2 + 1;
    }
    for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
      *(undefined1 *)puVar2 = 0;
      puVar2 = (undefined4 *)((int)puVar2 + 1);
    }
    if ((*(byte *)(param_1 + 0x125) & 0x20) != 0) {
      puVar1 = (undefined1 *)CPU_Instruction12(param_1,*(int *)(param_1 + 0xd8) + 1);
      *(undefined1 **)(param_1 + 0xf4) = puVar1;
      *puVar1 = 2;
    }
    if ((*(byte *)(param_1 + 0x125) & 0x40) != 0) {
      puVar1 = (undefined1 *)CPU_Instruction12(param_1,*(int *)(param_1 + 0xd8) + 1);
      *(undefined1 **)(param_1 + 0xf8) = puVar1;
      *puVar1 = 3;
    }
    if (*(char *)(param_1 + 0x125) < '\0') {
      puVar1 = (undefined1 *)CPU_Instruction12(param_1,*(int *)(param_1 + 0xd8) + 1);
      *(undefined1 **)(param_1 + 0xfc) = puVar1;
      *puVar1 = 4;
    }
  }
  if (*(char *)(param_1 + 0x123) == '\0') {
    uVar4 = *(uint *)(param_1 + 200);
    *(undefined4 *)(param_1 + 0xd0) = *(undefined4 *)(param_1 + 0xcc);
  }
  else {
    if ((*(byte *)(param_1 + 0x70) & 2) != 0) {
      *(int *)(param_1 + 0xd0) = *(int *)(param_1 + 0xcc);
      *(undefined4 *)(param_1 + 0xd4) = *(undefined4 *)(param_1 + 200);
      goto LAB_004cd215;
    }
    *(uint *)(param_1 + 0xd0) =
         ((*(int *)(param_1 + 0xcc) - DAT_00567d9c) + -1 + DAT_00567db8) / DAT_00567db8;
    uVar4 = ((*(int *)(param_1 + 200) - DAT_00567d64) + -1 + DAT_00567d80) / DAT_00567d80;
  }
  *(uint *)(param_1 + 0xd4) = uVar4;
LAB_004cd215:
  *(undefined4 *)(param_1 + 0x84) = *(undefined4 *)(param_1 + 0xb0);
  *(undefined4 *)(param_1 + 0x80) = *(undefined4 *)(param_1 + 0xac);
  return;
}


