/*
 * Function: MemoryImage_GenerateRLEAlphaData
 * Address: 00472120
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __fastcall MemoryImage_GenerateRLEAlphaData(int *param_1)

{
  char *pcVar1;
  char cVar2;
  undefined4 *puVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  char cVar7;
  byte *pbVar8;
  int iVar9;
  int iVar10;
  int local_14;
  int local_10;
  int local_8;
  
  (**(code **)(*param_1 + 0x50))();
  if (param_1[0xe] == 0) {
    puVar3 = (undefined4 *)operator_new(param_1[2] * param_1[1]);
    iVar4 = param_1[10];
    param_1[0xe] = (int)puVar3;
    if (iVar4 == 0) {
      local_8 = (**(code **)(*param_1 + 100))();
      puVar3 = (undefined4 *)param_1[0xe];
      if (param_1[1] == 1) {
LAB_0047223d:
        uVar6 = param_1[2];
        for (uVar5 = uVar6 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
          *puVar3 = 0x1010101;
          puVar3 = puVar3 + 1;
        }
        for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
          *(undefined1 *)puVar3 = 1;
          puVar3 = (undefined4 *)((int)puVar3 + 1);
        }
        return param_1[0xe];
      }
      local_10 = 0;
      if (0 < param_1[2]) {
        do {
          pcVar1 = (char *)(local_8 + 3);
          local_8 = local_8 + 4;
          iVar9 = 1;
          iVar4 = 1;
          if (*pcVar1 == '\0') {
            cVar2 = '\0';
          }
          else {
            cVar2 = (*pcVar1 != -1) + '\x01';
          }
          if (1 < param_1[1]) {
            do {
              cVar7 = *(char *)(local_8 + 3);
              local_8 = local_8 + 4;
              iVar9 = iVar9 + 1;
              if (cVar7 != '\0') {
                cVar7 = (cVar7 != -1) + '\x01';
              }
              if ((cVar7 != cVar2) || (iVar4 = iVar4 + 1, iVar9 == param_1[1])) {
                for (; 0 < iVar4; iVar4 = iVar4 + -1) {
                  if (iVar4 < 0xff) {
                    *(char *)puVar3 = (char)iVar4;
                  }
                  else {
                    *(undefined1 *)puVar3 = 0xff;
                  }
                  puVar3 = (undefined4 *)((int)puVar3 + 1);
                }
                if ((iVar9 == param_1[1]) && (cVar7 != cVar2)) {
                  *(undefined1 *)puVar3 = 1;
                  puVar3 = (undefined4 *)((int)puVar3 + 1);
                }
                iVar4 = 1;
                cVar2 = cVar7;
              }
            } while (iVar9 < param_1[1]);
          }
          local_10 = local_10 + 1;
        } while (local_10 < param_1[2]);
        return param_1[0xe];
      }
    }
    else {
      pbVar8 = (byte *)param_1[0xb];
      if (param_1[1] == 1) goto LAB_0047223d;
      local_14 = 0;
      if (0 < param_1[2]) {
        do {
          cVar2 = *(char *)(iVar4 + 3 + (uint)*pbVar8 * 4);
          iVar10 = 1;
          pbVar8 = pbVar8 + 1;
          iVar9 = 1;
          if (cVar2 == '\0') {
            cVar2 = '\0';
          }
          else {
            cVar2 = (cVar2 != -1) + '\x01';
          }
          if (1 < param_1[1]) {
            do {
              cVar7 = *(char *)(iVar4 + 3 + (uint)*pbVar8 * 4);
              iVar10 = iVar10 + 1;
              pbVar8 = pbVar8 + 1;
              if (cVar7 != '\0') {
                cVar7 = (cVar7 != -1) + '\x01';
              }
              if ((cVar7 != cVar2) || (iVar9 = iVar9 + 1, iVar10 == param_1[1])) {
                for (; 0 < iVar9; iVar9 = iVar9 + -1) {
                  if (iVar9 < 0xff) {
                    *(char *)puVar3 = (char)iVar9;
                  }
                  else {
                    *(undefined1 *)puVar3 = 0xff;
                  }
                  puVar3 = (undefined4 *)((int)puVar3 + 1);
                }
                if ((iVar10 == param_1[1]) && (cVar7 != cVar2)) {
                  *(undefined1 *)puVar3 = 1;
                  puVar3 = (undefined4 *)((int)puVar3 + 1);
                }
                iVar9 = 1;
                cVar2 = cVar7;
              }
            } while (iVar10 < param_1[1]);
          }
          local_14 = local_14 + 1;
        } while (local_14 < param_1[2]);
      }
    }
  }
  return param_1[0xe];
}


