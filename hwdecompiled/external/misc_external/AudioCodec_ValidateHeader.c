/*
 * Function: AudioCodec_ValidateHeader
 * Address: 004b4fc0
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall AudioCodec_ValidateHeader(void *this,uint param_1)

{
  int *piVar1;
  int iVar2;
  undefined4 *puVar3;
  char extraout_CL;
  char extraout_CL_00;
  undefined4 extraout_ECX;
  undefined6 uVar4;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffc0;
  undefined4 *in_stack_ffffffc4;
  undefined4 local_20 [2];
  uint local_18;
  undefined4 local_14;
  int local_10;
  int local_c;
  uint local_8;
  
  local_8 = DAT_00569f5c ^ unaff_retaddr;
  if (param_1 < 0x100) {
    local_10 = *(int *)((int)this + param_1 * 4 + 0x408);
    piVar1 = *(int **)((int)this + param_1 * 4 + 4);
    uVar4 = (**(code **)(*piVar1 + 0x2c))(piVar1,0,local_10,&local_14,local_20,0,0,0);
    if ((int)uVar4 == 0) {
      iVar2 = String_AllocateBuffer(extraout_ECX,(short)((uint6)uVar4 >> 0x20));
      if (iVar2 != 0) {
        local_c = local_10 + 0x24;
        String_CopyData(extraout_CL);
        String_CopyData((char)&local_c);
        String_CopyData(extraout_CL_00);
        piVar1 = *(int **)((int)this + param_1 * 4 + 4);
        (**(code **)(*piVar1 + 0x14))(piVar1,0,0,&local_18);
        puVar3 = (undefined4 *)operator_new(local_18);
        *puVar3 = 0;
        puVar3[1] = 0;
        puVar3[2] = 0;
        puVar3[3] = 0;
        *(undefined2 *)(puVar3 + 4) = 0;
        piVar1 = *(int **)((int)this + param_1 * 4 + 4);
        (**(code **)(*piVar1 + 0x14))(piVar1,puVar3,local_18,0);
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler
                  (puVar3[1],
                   (int)((uint)*(ushort *)((int)puVar3 + 0xe) * (uint)*(ushort *)((int)puVar3 + 2))
                   >> 0x1f & 7);
      }
      piVar1 = *(int **)((int)this + param_1 * 4 + 4);
      (**(code **)(*piVar1 + 0x4c))(piVar1,local_14,local_20[0],0,0);
    }
  }
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_ffffffc0,in_stack_ffffffc4);
  return;
}


