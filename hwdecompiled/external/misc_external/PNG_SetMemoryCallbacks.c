/*
 * Function: PNG_SetMemoryCallbacks
 * Address: 004c5290
 * Category: memory
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __fastcall PNG_SetMemoryCallbacks(int param_1,int *param_2)

{
  int *piVar1;
  int in_EAX;
  int *piVar2;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  int *local_c;
  int *local_8;
  
  local_c = (int *)0x0;
  local_8 = (int *)0x0;
  if (param_2 != (int *)0x0) {
    while (piVar1 = param_2 + 2, *piVar1 <= param_1) {
      param_2 = (int *)param_2[3];
      param_1 = param_1 - *piVar1;
      if (param_2 == (int *)0x0) {
        PNG_GetMemPtr(0);
        return extraout_EDX;
      }
    }
    do {
      if (in_EAX == 0) break;
      piVar2 = (int *)PNG_GetErrorPtr(*(int *)(*param_2 + 0xc));
      piVar1 = piVar2;
      if (local_8 != (int *)0x0) {
        local_8[3] = (int)piVar2;
        piVar1 = local_c;
      }
      local_c = piVar1;
      *piVar2 = *param_2;
      piVar2[1] = param_2[1] + param_1;
      piVar2[2] = in_EAX;
      if (param_2[2] - param_1 < in_EAX) {
        piVar2[2] = param_2[2] - param_1;
      }
      param_2 = (int *)param_2[3];
      param_1 = 0;
      in_EAX = in_EAX - piVar2[2];
      local_8 = piVar2;
    } while (param_2 != (int *)0x0);
  }
  PNG_GetMemPtr((int)local_c);
  return extraout_EDX_00;
}


