/*
 * Function: Enemy_ProcessAtomicBomb
 * Address: 0042f690
 * Category: enemies
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Enemy_ProcessAtomicBomb(int *param_1)

{
  char cVar1;
  int iVar2;
  _String_base *p_Var3;
  _String_base *p_Var4;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint uVar5;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  byte bVar6;
  undefined4 *puVar7;
  undefined4 uVar8;
  _String_base local_fc [28];
  _String_base local_e0 [28];
  undefined1 local_c4 [28];
  undefined1 local_a8 [28];
  undefined1 local_8c [24];
  uint local_74;
  _String_base local_70 [4];
  uint local_6c;
  undefined4 local_5c;
  uint local_58;
  _String_base local_54 [4];
  uint local_50;
  undefined4 local_40;
  uint local_3c;
  undefined1 local_38 [4];
  uint local_34;
  undefined4 local_24;
  uint local_20;
  void *local_1c;
  undefined4 local_18;
  char local_11;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00511def;
  local_10 = ExceptionList;
  bVar6 = 0;
  puVar7 = (undefined4 *)0x0;
  local_18 = 0;
  ExceptionList = &local_10;
  Algorithm_CopyN((int)param_1);
  if (((char)param_1[0x47] == '\0') && (param_1[0x13] % 3 == 0)) {
    (**(code **)(*param_1 + 0xbc))();
  }
  iVar2 = Game_GetState(*(int *)((int)DAT_005a437c + 0x598));
  local_11 = iVar2 == 3;
  iVar2 = Game_GetState(*(int *)((int)DAT_005a437c + 0x598));
  if ((char)param_1[0x47] != '\0') {
    ExceptionList = local_10;
    return;
  }
  if ((local_11 == '\0') && (iVar2 != 2)) {
    ExceptionList = local_10;
    return;
  }
  *(undefined1 *)(param_1 + 0x47) = 1;
  if (iVar2 == 2) {
    Network_CleanupExpiredConnections(*(undefined4 **)((int)DAT_005a437c + 0x598));
  }
  if ((local_11 == '\0') &&
     (cVar1 = Network_IsClientMessageValid(*(undefined4 **)((int)DAT_005a437c + 0x598)),
     cVar1 == '\0')) {
    local_1c = operator_new(0x124);
    local_8 = 9;
    uVar5 = extraout_EDX;
    if (local_1c != (void *)0x0) {
      Level_InitializeDictastroika(local_c4,"NEW_VERSION_BODY");
      local_8 = CONCAT31(local_8._1_3_,10);
      local_18 = 0x10;
      Level_InitializeDictastroika(local_a8,"NEW_VERSION_TITLE");
      local_8 = 0xb;
      local_18 = 0x30;
      p_Var3 = STL_String_Erase(DAT_005a437c,local_fc,local_c4);
      local_8 = 0xc;
      local_18 = 0x70;
      p_Var4 = STL_String_Erase(DAT_005a437c,local_e0,local_a8);
      bVar6 = 0xf0;
      local_8 = 0xd;
      local_18 = 0xf0;
      puVar7 = Dialog_YesNoConstructor
                         (local_1c,param_1[0x45],param_1[0x45],p_Var4,(uint)p_Var3,0x168,0xf0,0x38,
                          0x39);
      uVar5 = extraout_EDX_00;
    }
    if ((char)bVar6 < '\0') {
      bVar6 = bVar6 & 0x7f;
      String_Destructor((int)local_e0,uVar5);
      uVar5 = extraout_EDX_01;
    }
    if ((bVar6 & 0x40) != 0) {
      bVar6 = bVar6 & 0xbf;
      String_Destructor((int)local_fc,uVar5);
      uVar5 = extraout_EDX_02;
    }
    if ((bVar6 & 0x20) != 0) {
      bVar6 = bVar6 & 0xdf;
      String_Destructor((int)local_a8,uVar5);
      uVar5 = extraout_EDX_03;
    }
    local_8 = 0xffffffff;
    if ((bVar6 & 0x10) != 0) {
      String_Destructor((int)local_c4,uVar5);
    }
    uVar8 = 0x20;
  }
  else {
    local_1c = operator_new(0x11c);
    local_8 = 0;
    iVar2 = extraout_ECX;
    uVar5 = extraout_EDX_04;
    if (local_1c != (void *)0x0) {
      Level_InitializeDictastroika(local_8c,"UP_TO_DATE_BODY");
      local_8 = CONCAT31(local_8._1_3_,1);
      local_18 = 1;
      Level_InitializeDictastroika(local_38,"UP_TO_DATE_TITLE");
      local_8 = 2;
      local_18 = 3;
      p_Var3 = STL_String_Erase(DAT_005a437c,local_54,local_8c);
      local_8 = 3;
      local_18 = 7;
      p_Var4 = STL_String_Erase(DAT_005a437c,local_70,local_38);
      bVar6 = 0xf;
      local_8 = 4;
      local_18 = 0xf;
      puVar7 = ParticleSystem_Constructor(local_1c,param_1[0x45],0x140,0xd2,p_Var4,(uint)p_Var3);
      iVar2 = extraout_ECX_00;
      uVar5 = extraout_EDX_05;
    }
    if ((bVar6 & 8) != 0) {
      bVar6 = bVar6 & 0xf7;
      if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar2,uVar5);
      }
      local_58 = 0xf;
      local_5c = 0;
      local_6c = local_6c & 0xffffff00;
    }
    if ((bVar6 & 4) != 0) {
      bVar6 = bVar6 & 0xfb;
      if (0xf < local_3c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_50,uVar5);
      }
      local_3c = 0xf;
      local_40 = 0;
      local_50 = local_50 & 0xffffff00;
    }
    if ((bVar6 & 2) != 0) {
      bVar6 = bVar6 & 0xfd;
      if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar2,local_34);
      }
      local_20 = 0xf;
      local_24 = 0;
      local_34 = local_34 & 0xffffff00;
    }
    local_8 = 0xffffffff;
    if (((bVar6 & 1) != 0) && (0xf < local_74)) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar2,uVar5);
    }
    uVar8 = 0x1f;
  }
  (**(code **)(*(int *)param_1[0x45] + 0x100))(uVar8,puVar7);
  (**(code **)(*(int *)param_1[0x45] + 0x108))(0x3a);
  ExceptionList = local_10;
  return;
}


