/*
 * Function: UI_RenderWidgetContainer
 * Address: 00462810
 * Category: enemies
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined1 __fastcall UI_RenderWidgetContainer(int param_1)

{
  char cVar1;
  int *piVar2;
  undefined4 unaff_EBX;
  int iVar3;
  int *piVar4;
  int unaff_ESI;
  uint unaff_EDI;
  ulonglong uVar5;
  byte *in_stack_fffffed8;
  undefined4 local_d0 [22];
  undefined4 local_78 [22];
  void *local_20;
  int *local_1c;
  int local_18;
  char local_14;
  undefined1 local_13;
  char local_12;
  char local_11;
  void *local_10;
  undefined4 uStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x513f31;
  local_10 = ExceptionList;
  piVar2 = *(int **)(param_1 + 0x34);
  iVar3 = 0;
  local_13 = 0;
  local_11 = '\0';
  local_12 = '\0';
  if (piVar2 != (int *)0x0) {
    piVar2 = (int *)*piVar2;
  }
  for (; piVar2 != *(undefined4 **)(param_1 + 0x34); piVar2 = (int *)*piVar2) {
    cVar1 = *(char *)(piVar2[2] + 0x18);
    if (cVar1 != '\0') {
      iVar3 = iVar3 + 1;
    }
    if ((*(char *)(piVar2[2] + 0x1c) != '\0') && (local_11 = '\x01', cVar1 != '\0')) {
      local_12 = '\x01';
    }
  }
  ExceptionList = &local_10;
  local_18 = iVar3;
  Graphics_InitializeSurface(&stack0xfffffed8,*(undefined4 *)(param_1 + 0x10));
  local_8 = 0;
  uVar5 = Memory_ValidateHeap(*(void **)(param_1 + 0x10),(undefined1 *)*(void **)(param_1 + 0x10),0,
                              0x5661a0,&Sexy::DDImage::RTTI_Type_Descriptor,0,unaff_EDI,unaff_ESI,
                              unaff_EBX,in_stack_fffffed8);
  piVar2 = (int *)uVar5;
  local_14 = '\0';
  local_1c = piVar2;
  if (piVar2 != (int *)0x0) {
    local_14 = (**(code **)(*piVar2 + 0x9c))();
  }
  if ((0 < iVar3) || (*(char *)(param_1 + 0x18) != local_11)) {
    Graphics_InitializeSurface(local_d0,0);
    local_8._0_1_ = 1;
    if (local_11 == '\0') {
      Algorithm_FindIf(local_d0,(int)&stack0xfffffed8);
    }
    else {
      if (*(int *)(param_1 + 0x14) == 0) {
        local_20 = operator_new(200);
        local_8._0_1_ = 2;
        if (local_20 == (void *)0x0) {
          piVar2 = (int *)0x0;
        }
        else {
          piVar2 = Game_UpdateParticles(local_20,*(int *)(*(int *)(param_1 + 0xc) + 0x328));
        }
        local_8._0_1_ = 1;
        (**(code **)(*piVar2 + 0x60))
                  (*(undefined4 *)(param_1 + 0x1c),*(undefined4 *)(param_1 + 0x20));
        (**(code **)(*piVar2 + 0x68))(0,0);
        *(int **)(param_1 + 0x14) = piVar2;
      }
      Graphics_InitializeSurface(local_78,*(undefined4 *)(param_1 + 0x14));
      Algorithm_FindIf(local_d0,(int)local_78);
      Graphics_ClearClipRect(local_78);
    }
    if (*(undefined4 **)(param_1 + 0x34) == (undefined4 *)0x0) {
      piVar2 = (int *)0x0;
    }
    else {
      piVar2 = (int *)**(undefined4 **)(param_1 + 0x34);
    }
    if (piVar2 != *(int **)(param_1 + 0x34)) {
      do {
        piVar4 = (int *)piVar2[2];
        if ((char)piVar4[7] != '\0') break;
        if ((((char)piVar4[6] != '\0') || (*(char *)(param_1 + 0x18) != local_11)) &&
           (*(char *)((int)piVar4 + 0x19) != '\0')) {
          Graphics_SetRenderTarget(local_78,(int)local_d0);
          local_8._0_1_ = 3;
          if (*(char *)((int)piVar4 + 0x1b) != '\0') {
            Graphics_SetClipRect(local_78,piVar4[2],piVar4[3],piVar4[4],piVar4[5]);
          }
          SexyWidget_Translate(local_78,piVar4[2],piVar4[3]);
          (**(code **)(*piVar4 + 0x40))(local_78);
          SexyWidget_Translate(local_78,-piVar4[2],-piVar4[3]);
          local_18 = local_18 + 1;
          local_13 = 1;
          *(undefined1 *)(piVar4 + 6) = 0;
          local_8._0_1_ = 1;
          Graphics_ClearClipRect(local_78);
        }
        piVar2 = (int *)*piVar2;
      } while (piVar2 != (int *)*(int *)(param_1 + 0x34));
    }
    local_8 = (uint)local_8._1_3_ << 8;
    Graphics_ClearClipRect(local_d0);
    iVar3 = local_18;
    piVar2 = local_1c;
  }
  if ((local_11 != '\0') &&
     (((0 < iVar3 || (local_12 != '\0')) || (*(char *)(param_1 + 0x18) == '\0')))) {
    Graphics_DrawImage(&stack0xfffffed8,*(int *)(param_1 + 0x14));
    local_12 = '\0';
    if (*(undefined4 **)(param_1 + 0x34) == (undefined4 *)0x0) {
      piVar4 = (int *)0x0;
    }
    else {
      piVar4 = (int *)**(undefined4 **)(param_1 + 0x34);
    }
    piVar2 = local_1c;
    if (piVar4 != *(int **)(param_1 + 0x34)) {
      do {
        piVar2 = (int *)piVar4[2];
        if ((*(char *)((int)piVar2 + 0x19) == '\0') || ((char)piVar2[7] == '\0')) {
          if (local_12 != '\0') goto LAB_00462aca;
        }
        else {
          local_12 = '\x01';
LAB_00462aca:
          Graphics_SetRenderTarget(local_78,(int)&stack0xfffffed8);
          local_8._0_1_ = 4;
          if (*(char *)((int)piVar2 + 0x1b) != '\0') {
            Graphics_SetClipRect(local_78,piVar2[2],piVar2[3],piVar2[4],piVar2[5]);
          }
          SexyWidget_Translate(local_78,piVar2[2],piVar2[3]);
          (**(code **)(*piVar2 + 0x40))(local_78);
          SexyWidget_Translate(local_78,-piVar2[2],-piVar2[3]);
          local_13 = 1;
          *(undefined1 *)(piVar2 + 6) = 0;
          local_8 = (uint)local_8._1_3_ << 8;
          Graphics_ClearClipRect(local_78);
        }
        piVar4 = (int *)*piVar4;
        piVar2 = local_1c;
      } while (piVar4 != (int *)*(int *)(param_1 + 0x34));
    }
  }
  if ((piVar2 != (int *)0x0) && (local_14 != '\0')) {
    (**(code **)(*piVar2 + 0xa0))();
  }
  *(char *)(param_1 + 0x18) = local_11;
  local_8 = 0xffffffff;
  Graphics_ClearClipRect((undefined4 *)&stack0xfffffed8);
  ExceptionList = local_10;
  return local_13;
}


