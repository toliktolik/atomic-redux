/*
 * Function: AI_TrackPlayerPosition
 * Address: 004116b0
 * Category: enemies
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall AI_TrackPlayerPosition(int param_1)

{
  int iVar1;
  undefined4 uVar2;
  bool bVar3;
  bool bVar4;
  double dVar5;
  bool bVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  double *pdVar9;
  
  bVar6 = false;
  *(undefined4 *)(param_1 + 600) = *(undefined4 *)(param_1 + 0x254);
  while (iVar1 = *(int *)(*(int *)(param_1 + 600) + 4), iVar1 != 0) {
    *(int *)(param_1 + 600) = iVar1;
    if (*(int *)(param_1 + 0x260) == 0) {
      pdVar9 = (double *)0x0;
    }
    else {
      pdVar9 = (double *)**(undefined4 **)(param_1 + 600);
    }
    dVar5 = *pdVar9 - *(double *)(param_1 + 0x188);
    bVar3 = NAN(_DAT_0052c5b8);
    bVar4 = dVar5 < _DAT_0052c5b8;
    *pdVar9 = dVar5;
    if (bVar4 != (NAN(dVar5) || bVar3)) {
      *pdVar9 = dVar5 + _DAT_0052c550;
    }
    if (*(char *)(pdVar9 + 2) == '\0') {
      dVar5 = pdVar9[1] - *(double *)(param_1 + 0x188);
      pdVar9[1] = dVar5;
      if (dVar5 < _DAT_0052c5b0 != (NAN(dVar5) || NAN(_DAT_0052c5b0))) {
        LinkedList_PopNode((int *)(param_1 + 0x254));
      }
    }
    else {
      dVar5 = *(double *)(param_1 + 0x90) - _DAT_0052c5a8;
      if (dVar5 < *pdVar9 != (NAN(dVar5) || NAN(*pdVar9))) {
        *pdVar9 = dVar5;
      }
      dVar5 = *(double *)(param_1 + 0x90) + _DAT_0052c5a8;
      if (dVar5 <= pdVar9[1]) {
        dVar5 = pdVar9[1] - *(double *)(param_1 + 0x188);
      }
      pdVar9[1] = dVar5;
      bVar6 = true;
    }
  }
  if ((!bVar6) && (*(int *)(param_1 + 0x80) == 0)) {
    puVar7 = (undefined4 *)operator_new(0x18);
    puVar8 = (undefined4 *)operator_new(0xc);
    uVar2 = *(undefined4 *)(param_1 + 0x25c);
    puVar8[1] = 0;
    puVar8[2] = uVar2;
    *(undefined4 **)(*(int *)(param_1 + 0x25c) + 4) = puVar8;
    *puVar8 = puVar7;
    *(undefined4 **)(param_1 + 0x25c) = puVar8;
    *(int *)(param_1 + 0x260) = *(int *)(param_1 + 0x260) + 1;
    *puVar7 = *(undefined4 *)(param_1 + 0x90);
    puVar7[1] = *(undefined4 *)(param_1 + 0x94);
    *(undefined1 *)(puVar7 + 4) = 1;
    puVar7[2] = *(undefined4 *)(param_1 + 0x90);
    puVar7[3] = *(undefined4 *)(param_1 + 0x94);
  }
  return;
}


