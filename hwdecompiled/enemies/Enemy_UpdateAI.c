/*
 * Function: Enemy_UpdateAI
 * Address: 00402c30
 * Category: enemies
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


_String_base * __thiscall Enemy_UpdateAI(void *this,int param_1,uint param_2,uint param_3)

{
  uint uVar1;
  undefined4 *puVar2;
  uint uVar3;
  undefined4 *puVar4;
  int iVar5;
  undefined4 *puVar6;
  
  if (*(uint *)(param_1 + 0x14) < param_2) {
    std::_String_base::_Xran((_String_base *)this);
  }
  uVar1 = *(int *)(param_1 + 0x14) - param_2;
  if (uVar1 < param_3) {
    param_3 = uVar1;
  }
  if (-*(int *)((int)this + 0x14) - 1U <= param_3) {
    std::_String_base::_Xlen((_String_base *)this);
  }
  if (param_3 != 0) {
    uVar1 = *(int *)((int)this + 0x14) + param_3;
    if (uVar1 == 0xffffffff) {
      std::_String_base::_Xlen((_String_base *)this);
    }
    if (*(uint *)((int)this + 0x18) < uVar1) {
      String_AllocateMemory(uVar1);
    }
    else if (uVar1 == 0) {
      *(undefined4 *)((int)this + 0x14) = 0;
      if (*(uint *)((int)this + 0x18) < 0x10) {
        *(undefined1 *)((int)this + 4) = 0;
        return (_String_base *)this;
      }
      **(undefined1 **)((int)this + 4) = 0;
      return (_String_base *)this;
    }
    if (uVar1 != 0) {
      if (*(uint *)(param_1 + 0x18) < 0x10) {
        iVar5 = param_1 + 4;
      }
      else {
        iVar5 = *(int *)(param_1 + 4);
      }
      puVar4 = (undefined4 *)((int)this + 4);
      puVar2 = puVar4;
      if (0xf < *(uint *)((int)this + 0x18)) {
        puVar2 = (undefined4 *)*puVar4;
      }
      puVar6 = (undefined4 *)(iVar5 + param_2);
      puVar2 = (undefined4 *)(*(int *)((int)this + 0x14) + (int)puVar2);
      for (uVar3 = param_3 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
      for (uVar3 = param_3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
        puVar6 = (undefined4 *)((int)puVar6 + 1);
        puVar2 = (undefined4 *)((int)puVar2 + 1);
      }
      *(uint *)((int)this + 0x14) = uVar1;
      if (0xf < *(uint *)((int)this + 0x18)) {
        puVar4 = (undefined4 *)*puVar4;
      }
      *(undefined1 *)((int)puVar4 + uVar1) = 0;
    }
  }
  return (_String_base *)this;
}


