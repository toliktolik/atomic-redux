/*
 * Function: Process_WaitForExit
 * Address: 004e3170
 * Category: enemies
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint * __cdecl Process_WaitForExit(int param_1,uint *param_2)

{
  int iVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  int local_8;
  
  puVar2 = (uint *)Assembly_DecompilationFailed(1,0xc90);
  iVar1 = *(int *)(param_1 + 0x1c);
  puVar6 = puVar2;
  for (iVar5 = 0x324; iVar5 != 0; iVar5 = iVar5 + -1) {
    *puVar6 = 0;
    puVar6 = puVar6 + 1;
  }
  uVar3 = GIF_SetTransparentIndex(param_2,1);
  if (uVar3 == 0) {
    *puVar2 = 1;
  }
  else {
    uVar3 = GIF_SetTransparentIndex(param_2,4);
    *puVar2 = uVar3 + 1;
  }
  uVar3 = GIF_SetTransparentIndex(param_2,1);
  if (uVar3 != 0) {
    uVar3 = GIF_SetTransparentIndex(param_2,8);
    puVar2[0x123] = uVar3 + 1;
    local_8 = 0;
    if (0 < (int)(uVar3 + 1)) {
      puVar6 = puVar2 + 0x224;
      do {
        iVar5 = Process_TerminateProcess(*(int *)(param_1 + 4));
        uVar3 = GIF_SetTransparentIndex(param_2,iVar5);
        puVar6[-0x100] = uVar3;
        iVar5 = Process_TerminateProcess(*(int *)(param_1 + 4));
        uVar4 = GIF_SetTransparentIndex(param_2,iVar5);
        *puVar6 = uVar4;
        if (((((int)uVar3 < 0) || ((int)uVar4 < 0)) || (uVar3 == uVar4)) ||
           ((*(int *)(param_1 + 4) <= (int)uVar3 || (*(int *)(param_1 + 4) <= (int)uVar4))))
        goto LAB_004e3341;
        local_8 = local_8 + 1;
        puVar6 = puVar6 + 1;
      } while (local_8 < (int)puVar2[0x123]);
    }
  }
  uVar3 = GIF_SetTransparentIndex(param_2,2);
  if (0 < (int)uVar3) {
LAB_004e3341:
    Registry_DeleteKey(puVar2);
    return (uint *)0x0;
  }
  if ((1 < (int)*puVar2) && (local_8 = 0, puVar6 = puVar2, 0 < *(int *)(param_1 + 4))) {
    do {
      uVar3 = GIF_SetTransparentIndex(param_2,4);
      puVar6[1] = uVar3;
      if ((int)*puVar2 <= (int)uVar3) goto LAB_004e3341;
      local_8 = local_8 + 1;
      puVar6 = puVar6 + 1;
    } while (local_8 < *(int *)(param_1 + 4));
  }
  local_8 = 0;
  if (0 < (int)*puVar2) {
    puVar6 = puVar2 + 0x111;
    do {
      uVar3 = GIF_SetTransparentIndex(param_2,8);
      if (*(int *)(iVar1 + 0x10) <= (int)uVar3) goto LAB_004e3341;
      uVar3 = GIF_SetTransparentIndex(param_2,8);
      puVar6[-0x10] = uVar3;
      if (*(int *)(iVar1 + 0x14) <= (int)uVar3) goto LAB_004e3341;
      uVar3 = GIF_SetTransparentIndex(param_2,8);
      *puVar6 = uVar3;
      if (*(int *)(iVar1 + 0x18) <= (int)uVar3) goto LAB_004e3341;
      local_8 = local_8 + 1;
      puVar6 = puVar6 + 1;
    } while (local_8 < (int)*puVar2);
  }
  return puVar2;
}


