/*
 * Function: Unwind@005173c1
 * Address: 005173c1
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005173c6) overlaps instruction at (ram,0x005173c5)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005173c1(uint *param_1)

{
  char *pcVar1;
  undefined1 uVar2;
  char cVar3;
  byte bVar4;
  undefined4 in_EAX;
  int iVar5;
  int extraout_ECX;
  uint *puVar6;
  byte bVar7;
  undefined2 extraout_DX;
  uint *unaff_EBX;
  undefined4 *puVar8;
  undefined4 *puVar9;
  undefined4 *unaff_EBP;
  uint *unaff_ESI;
  undefined1 *unaff_EDI;
  byte in_CF;
  byte in_AF;
  char in_ZF;
  bool in_OF;
  undefined2 in_FPUControlWord;
  
  bVar7 = 9 < ((byte)in_EAX & 0xf) | in_AF;
  bVar4 = (byte)in_EAX + bVar7 * -6;
  iVar5 = CONCAT31((int3)((uint)in_EAX >> 8),
                   bVar4 + (0x9f < bVar4 | in_CF | bVar7 * (bVar4 < 6)) * -0x60);
  if (in_OF) {
    *unaff_EBX = *unaff_EBX | (uint)param_1;
    *unaff_EDI = (char)*unaff_ESI;
    _DAT_e1e9905b = in_FPUControlWord;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  bVar7 = 0x1e;
  while( true ) {
    puVar6 = (uint *)((int)param_1 + -1);
    if (puVar6 == (uint *)0x0 || in_ZF == '\0') {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    if (in_OF) break;
    puVar8 = (undefined4 *)&stack0x0000bc3c;
    cVar3 = '\x06';
    do {
      unaff_EBP = unaff_EBP + -1;
      puVar8 = puVar8 + -1;
      *puVar8 = *unaff_EBP;
      cVar3 = cVar3 + -1;
    } while ('\0' < cVar3);
    unaff_EBP = (undefined4 *)((uint)&stack0x0000bc3c | *puVar6);
    if ((int)unaff_EBP < 0) {
      bVar4 = (byte)((uint)unaff_EBX >> 8);
      unaff_EBX = (uint *)CONCAT22((short)((uint)unaff_EBX >> 0x10),
                                   CONCAT11(bVar4 >> 2,(char)unaff_EBX));
      puVar8 = (undefined4 *)&stack0x00009e5b;
      cVar3 = '\x03';
      do {
        unaff_EBP = unaff_EBP + -1;
        puVar8 = puVar8 + -1;
        *puVar8 = *unaff_EBP;
        cVar3 = cVar3 + -1;
      } while ('\0' < cVar3);
      param_1 = *(uint **)((int)param_1 + 0xf);
      if (iVar5 + 0x4c15014eU == (uint)((bVar4 >> 1 & 1) != 0)) {
        func_0xce005445();
        out(*unaff_ESI,extraout_DX);
        pcVar1 = (char *)(extraout_ECX * 4 + -0x248b92c5);
        *pcVar1 = *pcVar1 << ((byte)extraout_ECX & 0x1f);
        return;
      }
      unaff_ESI = unaff_ESI + 1;
      *unaff_ESI = *unaff_ESI - (int)unaff_EBX;
      in_OF = false;
      *unaff_ESI = *unaff_ESI & 0xba19702f;
      in_ZF = *unaff_ESI == 0;
      uVar2 = in(CONCAT11(0x75,bVar7));
      *unaff_EDI = uVar2;
      iVar5 = in(CONCAT11(0x75,bVar7));
      unaff_EBP = (undefined4 *)&stack0x00009e5b;
      unaff_EDI = unaff_EDI + 1;
    }
    else {
      bVar7 = 0x81;
      in_OF = SBORROW4(iRam9f1c929f,(int)unaff_EDI);
      iRam9f1c929f = iRam9f1c929f - (int)unaff_EDI;
      in_ZF = iRam9f1c929f == 0;
      param_1 = puVar6;
    }
  }
  puVar9 = (undefined4 *)((uint)&stack0x0000bc48 >> ((byte)puVar6 & 0x1f));
  *(byte *)(iVar5 + -0x53) = *(byte *)(iVar5 + -0x53) ^ bVar7;
  out(0x26,(char)iVar5);
  *puVar9 = *puVar9;
  puVar9[-1] = 0x6c;
  in(0xbb);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


