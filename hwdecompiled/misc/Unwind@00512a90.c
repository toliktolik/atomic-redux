/*
 * Function: Unwind@00512a90
 * Address: 00512a90
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: This function may have set the stack pointer */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00512a90(char *param_1,int param_2)

{
  int *piVar1;
  byte bVar2;
  char cVar3;
  code *pcVar4;
  int iVar5;
  byte bVar6;
  undefined4 *puVar7;
  undefined4 *unaff_EBP;
  undefined1 *unaff_ESI;
  undefined1 *unaff_EDI;
  char in_AF;
  bool in_SF;
  uint auStack_17c07 [10928];
  undefined1 auStack_d144 [12];
  undefined4 auStack_d138 [13388];
  undefined4 uStack_8;
  undefined4 *puVar8;
  
  if (in_SF) {
    if ((char)param_2 != *(char *)(param_2 + -0x2d)) {
      *param_1 = *param_1 - (char)param_1;
      pcVar4 = (code *)swi(3);
      (*pcVar4)();
      return;
    }
    bVar6 = in_AF * '\x06' + 0x81;
    bVar2 = 0x90 < (bVar6 & 0xf0) | in_AF * (0xf9 < bVar6);
    piVar1 = (int *)(CONCAT31(0xaf6151,bVar6 + bVar2 * '`') + -0x12);
    *piVar1 = (*piVar1 - (int)unaff_ESI) - (uint)bVar2;
    return;
  }
  puVar7 = (undefined4 *)&stack0xfffffffc;
  puVar8 = (undefined4 *)&stack0xfffffffc;
  cVar3 = '\n';
  do {
    unaff_EBP = unaff_EBP + -1;
    puVar7 = puVar7 + -1;
    *puVar7 = *unaff_EBP;
    cVar3 = cVar3 + -1;
  } while ('\0' < cVar3);
  *unaff_EDI = *unaff_ESI;
  iVar5 = -*(int *)(unaff_EDI + 1);
  puVar7 = (undefined4 *)((int)auStack_d138 + iVar5);
  *(undefined1 **)((int)auStack_d138 + iVar5) = &stack0xfffffffc;
  cVar3 = '\x02';
  do {
    puVar8 = puVar8 + -1;
    puVar7 = puVar7 + -1;
    *puVar7 = *puVar8;
    cVar3 = cVar3 + -1;
  } while ('\0' < cVar3);
  *(int *)(auStack_d144 + iVar5) = (int)auStack_d138 + iVar5;
  if (((*(uint *)((int)auStack_17c07 + iVar5) & 0x800) != 0) ==
      ((*(uint *)((int)auStack_17c07 + iVar5) & 0x80) != 0)) {
    return;
  }
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


