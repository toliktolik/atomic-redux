/*
 * Function: Database_Connect
 * Address: 004e23c0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __cdecl Database_Connect(int *param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int *piVar8;
  int local_c;
  int iVar7;
  
  iVar1 = param_1[0x19];
  iVar2 = param_1[0x15];
  iVar6 = 1;
  do {
    iVar7 = iVar6;
    iVar6 = iVar7 + 1;
    iVar4 = iVar6;
    if (1 < iVar1) {
      iVar5 = iVar1 + -1;
      do {
        iVar4 = iVar4 * iVar6;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
    }
  } while (iVar4 <= iVar2);
  if (iVar7 < 2) {
    *(undefined4 *)(*param_1 + 0x14) = 0x38;
    *(int *)(*param_1 + 0x18) = iVar4;
    (**(code **)*param_1)(param_1);
  }
  local_c = 1;
  iVar6 = iVar1;
  piVar8 = param_2;
  if (0 < iVar1) {
    for (; iVar4 = iVar1, iVar6 != 0; iVar6 = iVar6 + -1) {
      *piVar8 = iVar7;
      piVar8 = piVar8 + 1;
    }
    do {
      local_c = local_c * iVar7;
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
  }
  do {
    iVar6 = 0;
    bVar3 = false;
    if (iVar1 < 1) {
      return local_c;
    }
    do {
      iVar4 = iVar6;
      if (param_1[0xb] == 2) {
        iVar4 = (&DAT_00543b30)[iVar6];
      }
      iVar7 = param_2[iVar4] + 1;
      iVar5 = (local_c / param_2[iVar4]) * iVar7;
      if (iVar5 - iVar2 != 0 && iVar2 <= iVar5) {
        if (!bVar3) {
          return local_c;
        }
        break;
      }
      iVar6 = iVar6 + 1;
      param_2[iVar4] = iVar7;
      bVar3 = true;
      local_c = iVar5;
    } while (iVar6 < iVar1);
  } while( true );
}


