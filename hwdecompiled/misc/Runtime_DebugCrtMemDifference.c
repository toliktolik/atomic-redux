/*
 * Function: Runtime_DebugCrtMemDifference
 * Address: 004fa94d
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __cdecl
Runtime_DebugCrtMemDifference(ushort *param_1,int param_2,ushort *param_3,int param_4,int *param_5)

{
  LONG *pLVar1;
  undefined4 *puVar2;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  uint extraout_ECX_01;
  int extraout_ECX_02;
  undefined4 extraout_ECX_03;
  undefined2 extraout_DX;
  uint extraout_EDX;
  int *extraout_EDX_00;
  int *piVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  bool bVar7;
  undefined8 uVar8;
  ulonglong uVar9;
  int iVar10;
  
  iVar5 = param_2 - (int)param_1 >> 1;
  iVar6 = param_4 - (int)param_3 >> 1;
  pLVar1 = (LONG *)Assembly_StackCopyLoop();
  InterlockedIncrement(pLVar1);
  uVar8 = Assembly_StackCopyOperation(extraout_ECX,extraout_DX);
  piVar3 = (int *)((ulonglong)uVar8 >> 0x20);
  bVar7 = (int)uVar8 == 0;
  iVar10 = extraout_ECX_00;
  if (!bVar7) {
    pLVar1 = (LONG *)Assembly_StackCopyLoop();
    InterlockedDecrement(pLVar1);
    iVar10 = 0xc;
    Assembly_FloatingPointCalculation(extraout_ECX_01,extraout_EDX);
    piVar3 = extraout_EDX_00;
  }
  if (param_5 == (int *)0x0) {
    uVar8 = func_0x00500cca();
    piVar3 = (int *)((ulonglong)uVar8 >> 0x20);
    iVar4 = *(int *)((int)uVar8 + 4);
    iVar10 = extraout_ECX_02;
  }
  else {
    iVar4 = *param_5;
  }
  if (iVar4 == 0) {
    if (bVar7) {
      pLVar1 = (LONG *)Assembly_StackCopyLoop();
      InterlockedDecrement(pLVar1);
    }
    else {
      Assembly_MemoryPatch();
    }
    iVar10 = iVar5;
    if (iVar6 <= iVar5) {
      iVar10 = iVar6;
    }
    for (; 0 < iVar10; iVar10 = iVar10 + -1) {
      if (*param_1 != *param_3) {
        iVar10 = (-(uint)(*param_1 < *param_3) & 0xfffffffe) + 1;
        goto LAB_004fa9ee;
      }
      param_1 = param_1 + 1;
      param_3 = param_3 + 1;
    }
    iVar10 = 0;
LAB_004fa9ee:
    if ((iVar10 == 0) && (iVar5 != iVar6)) {
      iVar10 = (uint)(iVar6 <= iVar5) * 2 + -1;
    }
  }
  else {
    uVar9 = Assembly_ParameterProcessing(iVar10,piVar3);
    iVar10 = Assembly_StackSegmentManipulation(extraout_ECX_03,(uint)(uVar9 >> 0x20));
    if (iVar10 == 0) {
      if (bVar7) {
        pLVar1 = (LONG *)Assembly_StackCopyLoop();
        InterlockedDecrement(pLVar1);
      }
      else {
        Assembly_MemoryPatch();
      }
      puVar2 = (undefined4 *)System_GetSystemInfo();
      *puVar2 = 0x16;
      iVar10 = 0x7fffffff;
    }
    else {
      if (bVar7) {
        pLVar1 = (LONG *)Assembly_StackCopyLoop();
        InterlockedDecrement(pLVar1);
      }
      else {
        Assembly_MemoryPatch();
      }
      iVar10 = iVar10 + -2;
    }
  }
  return iVar10;
}


