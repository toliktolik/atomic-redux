/*
 * Function: Unwind@005107c4
 * Address: 005107c4
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005107c4(int param_1,int *param_2)

{
  uint *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  int iVar4;
  short sVar5;
  undefined4 unaff_EBX;
  uint uVar7;
  uint unaff_EBP;
  int unaff_ESI;
  undefined4 *unaff_EDI;
  undefined2 in_ES;
  undefined2 in_DS;
  bool bVar8;
  int iVar6;
  
  do {
    uVar3 = _DAT_ff488477;
    in(0x6c);
    puVar2 = unaff_EDI + 1;
    *unaff_EDI = unaff_EBX;
    iVar4 = *param_2;
    param_2 = (int *)CONCAT31((int3)((uint)param_2 >> 8),
                              (byte)param_2 | *(byte *)(unaff_EDI + -0xedb2b9f));
    sVar5 = (ushort)(byte)unaff_EBX * (ushort)*(byte *)(param_1 + -0x7fc02239);
    iVar6 = CONCAT22((short)((uint)unaff_EBX >> 0x10),sVar5);
    bVar8 = (char)((ushort)sVar5 >> 8) != '\0';
    if (param_1 != 1) {
code_r0x005107f6:
      do {
                    /* WARNING: Do nothing block with infinite loop */
      } while( true );
    }
    if (!bVar8) {
      out((short)param_2,(char)sVar5);
      *(undefined2 *)(&DAT_ff488477 + iVar4) = in_ES;
      goto code_r0x005107f6;
    }
    if (bVar8) {
      *(uint *)(unaff_ESI + -0x22208819) = *(uint *)(unaff_ESI + -0x22208819) | unaff_EBP;
      *(char *)((int)param_2 + -0x4e) = *(char *)((int)param_2 + -0x4e) + '\x01';
      *(int *)(&DAT_ff488477 + iVar4) = iVar6;
      *(undefined4 *)(iVar4 + -0xb77b8d) = 0;
      *(int **)(iVar4 + -0xb77b91) = param_2;
      *(undefined4 *)(iVar4 + -0xb77b95) = uVar3;
      *(int *)(iVar4 + -0xb77b99) = iVar4 + -0xb77b85;
      *(uint *)(iVar4 + -0xb77b9d) = unaff_EBP;
      *(int *)(iVar4 + -0xb77ba1) = unaff_ESI;
      *(undefined4 **)(iVar4 + -0xb77ba5) = puVar2;
      puVar1 = (uint *)((int)param_2 + unaff_ESI * 8 + 0x49);
      *puVar1 = *puVar1 ^ 0xe937fb58;
      *(undefined2 *)(param_2 + -1) = in_ES;
      out(0xca,-((iVar6 + 1U >> 8 & 1) != 0));
      *(undefined2 *)(param_2 + -2) = in_DS;
      uVar3 = in((short)param_2);
      *puVar2 = uVar3;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    uVar7 = iVar4 - 0xb77b85U & *(uint *)(unaff_ESI + 0x62880072);
    *(int *)(uVar7 - 4) = iVar6;
    *(undefined4 *)(uVar7 - 8) = 0;
    *(int **)(uVar7 - 0xc) = param_2;
    *(undefined4 *)(uVar7 - 0x10) = uVar3;
    *(uint *)(uVar7 - 0x14) = uVar7;
    *(uint *)(uVar7 - 0x18) = unaff_EBP;
    *(int *)(uVar7 - 0x1c) = unaff_ESI;
    *(undefined4 **)(uVar7 - 0x20) = puVar2;
    *(undefined4 *)(uVar7 - 0x24) = 10;
    in(0x28);
    *(uint *)(uVar7 - 0x28) = uVar7 - 0x24;
    unaff_EBP = unaff_EBP + 1;
    *(undefined2 *)(uVar7 - 0x2c) = in_ES;
    param_1 = 0;
    unaff_EBX = uVar3;
    unaff_EDI = puVar2;
  } while( true );
}


