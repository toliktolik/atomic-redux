/*
 * Function: Runtime_DebugCrtMemDumpStatistics
 * Address: 004faa87
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl
Runtime_DebugCrtMemDumpStatistics
          (undefined4 *param_1,int param_2,int param_3,int param_4,int *param_5)

{
  LONG *pLVar1;
  int iVar2;
  void *pvVar3;
  int iVar4;
  undefined4 extraout_ECX;
  uint extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  undefined2 extraout_DX;
  uint extraout_EDX;
  int *extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint uVar5;
  uint _Size;
  bool bVar6;
  undefined8 uVar7;
  
  uVar5 = param_4 - param_3 >> 1;
  _Size = param_2 - (int)param_1 >> 1;
  pLVar1 = (LONG *)Assembly_StackCopyLoop();
  InterlockedIncrement(pLVar1);
  iVar2 = Assembly_StackCopyOperation(extraout_ECX,extraout_DX);
  bVar6 = iVar2 == 0;
  if (!bVar6) {
    pLVar1 = (LONG *)Assembly_StackCopyLoop();
    InterlockedDecrement(pLVar1);
    Assembly_FloatingPointCalculation(extraout_ECX_00,extraout_EDX);
  }
  if (param_5 == (int *)0x0) {
    iVar2 = func_0x00500cca();
    iVar2 = *(int *)(iVar2 + 4);
  }
  else {
    iVar2 = *param_5;
  }
  if (iVar2 != 0) {
    pvVar3 = _malloc(_Size);
    if (pvVar3 != (void *)0x0) {
      Assembly_ParameterProcessing(_Size,extraout_EDX_00);
      uVar7 = Assembly_HaltBadInstruction();
      iVar2 = (int)uVar7;
      if (iVar2 == 0) {
        Assembly_ParameterProcessing(extraout_ECX_01,(int *)((ulonglong)uVar7 >> 0x20));
        Assembly_HaltBadInstruction();
      }
      else {
        iVar4 = 0;
        if (0 < iVar2) {
          do {
            *(ushort *)((int)param_1 + iVar4 * 2) = (ushort)*(byte *)(iVar4 + (int)pvVar3);
            iVar4 = iVar4 + 1;
          } while (iVar4 < iVar2);
        }
      }
    }
    if (bVar6) {
      pLVar1 = (LONG *)Assembly_StackCopyLoop();
      InterlockedDecrement(pLVar1);
      iVar2 = extraout_ECX_02;
      uVar5 = extraout_EDX_02;
    }
    else {
      iVar2 = 0xc;
      Assembly_MemoryPatch();
      uVar5 = extraout_EDX_01;
    }
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar2,uVar5);
  }
  if (bVar6) {
    pLVar1 = (LONG *)Assembly_StackCopyLoop();
    InterlockedDecrement(pLVar1);
  }
  else {
    Assembly_MemoryPatch();
  }
  if (uVar5 <= _Size) {
    Assembly_MemoryCopy(param_1,param_3);
  }
  return uVar5;
}


