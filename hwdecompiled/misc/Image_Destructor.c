/*
 * Function: Image_Destructor
 * Address: 0049d980
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Image_Destructor(void *this,_String_base *param_1)

{
  _String_base *this_00;
  char *pcVar1;
  int iVar2;
  char *pcVar3;
  _String_base *p_Var4;
  int extraout_ECX;
  undefined4 extraout_ECX_00;
  int extraout_ECX_01;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint uVar5;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff50;
  undefined4 *in_stack_ffffff54;
  uint local_98;
  undefined1 local_94 [16];
  _String_base local_84 [4];
  uint local_80;
  undefined4 local_70;
  uint local_6c;
  undefined1 local_68 [4];
  uint local_64;
  undefined4 local_54;
  uint local_50;
  _String_base local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5156eb;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (*(char *)((int)this + 0x28) == '\0') {
    ExceptionList = &local_10;
    *(undefined1 *)((int)this + 0x28) = 1;
    iVar2 = Font_GetLineHeight(*(int *)((int)this + 8));
    Exception_Release(local_94,&DAT_00533e84);
    this_00 = (_String_base *)((int)this + 0xc);
    PowerUp_ProcessThunderstrike(this_00,extraout_EDX,param_1,0,0xffffffff);
    uVar5 = extraout_EDX_00;
    if (0 < iVar2) {
      local_34 = 0xf;
      local_38 = 0;
      local_48 = local_48 & 0xffffff00;
      pcVar1 = " on Line ";
      do {
        pcVar3 = pcVar1;
        pcVar1 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      String_Assign(local_4c,(_String_base *)" on Line ",(uint)(pcVar3 + -0x534464));
      local_8 = 0;
      p_Var4 = Intel_DisplayPopulationData
                         (local_30,(uint)local_94,local_30,local_4c,(_String_base *)local_94);
      local_8 = CONCAT31(local_8._1_3_,1);
      Enemy_UpdateAI(this_00,(int)p_Var4,0,0xffffffff);
      if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,local_2c);
      }
      local_18 = 0xf;
      local_1c = 0;
      local_2c = local_2c & 0xffffff00;
      local_8 = 0xffffffff;
      uVar5 = extraout_EDX_01;
      if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
      }
    }
    p_Var4 = Config_GetSetting(*(int *)((int)this + 8),uVar5,local_30);
    if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(*(int *)(p_Var4 + 0x14),local_2c);
    }
    if (*(int *)(p_Var4 + 0x14) != 0) {
      p_Var4 = Config_GetSetting(*(int *)((int)this + 8),extraout_EDX_02,
                                 (_String_base *)&stack0xffffff50);
      local_8 = 2;
      p_Var4 = Survival_LoadConfiguration(local_84,(_String_base *)" in File \'",(int)p_Var4);
      local_8._0_1_ = 3;
      p_Var4 = Intel_DisplayPopulationData
                         (extraout_ECX_00,(uint)local_68,(_String_base *)local_68,p_Var4,
                          (_String_base *)&DAT_00531760);
      local_8 = CONCAT31(local_8._1_3_,4);
      Enemy_UpdateAI(this_00,(int)p_Var4,0,0xffffffff);
      if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,extraout_EDX_03);
      }
      local_50 = 0xf;
      local_54 = 0;
      local_64 = local_64 & 0xffffff00;
      if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_80,extraout_EDX_03);
      }
      local_6c = 0xf;
      local_70 = 0;
      local_80 = local_80 & 0xffffff00;
      if (0xf < local_98) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,(uint)in_stack_ffffff54);
      }
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff50,in_stack_ffffff54);
  return;
}


