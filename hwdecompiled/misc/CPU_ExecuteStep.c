/*
 * Function: CPU_ExecuteStep
 * Address: 004c5aa0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void CPU_ExecuteStep(void)

{
  byte bVar1;
  undefined4 *in_EAX;
  undefined4 uVar2;
  int iVar3;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  undefined3 extraout_var_01;
  undefined8 uVar4;
  undefined4 local_2c [5];
  int local_18;
  int local_8;
  
  if (-1 < (int)in_EAX[0xd]) {
    while (in_EAX[1] != 0) {
      if (-1 < (int)in_EAX[0xc]) {
        uVar2 = PNG_ProcessData(in_EAX[0xc] + 0x1b);
        in_EAX[1] = uVar2;
      }
      local_18 = in_EAX[1];
      in_EAX[0xc] = 0;
      in_EAX[0x11] = 0;
      in_EAX[0x10] = 0;
      if (local_18 == 0) {
        *in_EAX = 0;
        return;
      }
      iVar3 = CPU_ExecuteInstruction18();
      local_8 = iVar3;
      PNG_GetBitDepth(local_2c);
      bVar1 = PNG_GetFilterMethod(0x1a);
      in_EAX[0xc] = (uint)bVar1;
      if (iVar3 != in_EAX[7]) {
        in_EAX[0xe] = (in_EAX[7] != -1) + 1;
        iVar3 = PNG_ProcessData(in_EAX[0xd]);
        in_EAX[3] = iVar3;
        if (iVar3 == 0) {
          in_EAX[2] = 0;
        }
        in_EAX[0xd] = 0;
      }
      bVar1 = CPU_GetCarryFlag();
      if (CONCAT31(extraout_var,bVar1) == 0) {
        if (in_EAX[0xd] != 0) {
          iVar3 = PNG_ProcessData(in_EAX[0xd]);
          in_EAX[3] = iVar3;
          if (iVar3 == 0) {
            in_EAX[2] = 0;
          }
          in_EAX[0xd] = 0;
          goto LAB_004c5ba4;
        }
      }
      else if (in_EAX[0xd] == 0) {
        CPU_ReadInstructionBytes();
        iVar3 = PNG_ProcessData(in_EAX[0x12] & 0x7fffffff);
        in_EAX[3] = iVar3;
        if (iVar3 == 0) {
          in_EAX[2] = 0;
        }
LAB_004c5ba4:
        if ((in_EAX[0xf] == 0) && (in_EAX[0xe] == 0)) {
          in_EAX[0xf] = 2;
        }
      }
      if ((int)in_EAX[0x11] < (int)in_EAX[0xc]) {
        uVar4 = CPU_ExecuteInstruction6();
        *(undefined8 *)(in_EAX + 10) = uVar4;
        CPU_ReadInstructionBytes();
        in_EAX[0xd] = in_EAX[0xd] + in_EAX[0x12];
        CPU_ReadInstructionBytes();
      }
      in_EAX[7] = local_8 + 1;
      bVar1 = CPU_GetAuxCarryFlag();
      in_EAX[4] = CONCAT31(extraout_var_00,bVar1);
      bVar1 = CPU_GetParityFlag();
      in_EAX[5] = CONCAT31(extraout_var_01,bVar1);
      if ((int)in_EAX[0xd] < 0) {
        return;
      }
    }
  }
  return;
}


