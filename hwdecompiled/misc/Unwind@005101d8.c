/*
 * Function: Unwind@005101d8
 * Address: 005101d8
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005101b2) overlaps instruction at (ram,0x005101b0)
    */
/* WARNING: Removing unreachable block (ram,0x0051019d) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* WARNING: Restarted to delay deadcode elimination for space: stack */

void __thiscall
Unwind_005101d8(void *this,undefined4 *param_1,undefined4 param_2,undefined4 param_3,
               undefined4 param_4,int param_5,undefined4 *param_6)

{
  undefined4 *puVar1;
  char cVar2;
  undefined4 uVar3;
  byte bVar4;
  undefined1 uVar5;
  uint in_EAX;
  uint extraout_ECX;
  uint uVar6;
  undefined1 *puVar7;
  undefined4 **unaff_EBP;
  undefined1 *puVar8;
  bool bVar9;
  byte in_AF;
  undefined4 **ppuVar10;
  undefined4 **unaff_retaddr;
  undefined4 uStack0000001c;
  char in_stack_00000066;
  uint uStack_2b;
  
  do {
    ppuVar10 = &param_1;
    *(byte *)((int)unaff_EBP + (int)this + 0x4e) =
         *(byte *)((int)unaff_EBP + (int)this + 0x4e) & (byte)(in_EAX >> 8);
    bVar9 = unaff_retaddr < *(undefined1 **)((int)this + -0x32f4142f);
    puVar8 = (undefined1 *)((int)unaff_retaddr + -*(uint *)((int)this + -0x32f4142f));
    while( true ) {
      this = (void *)param_5;
      uVar3 = param_3;
      *puVar8 = (char)in_EAX;
      in(0xd2);
      in_AF = 9 < ((byte)param_6 & 0xf) | in_AF;
      uVar6 = CONCAT31((int3)((uint)param_6 >> 8),(byte)param_6 + in_AF * -6) & 0xffffff0f;
      uVar5 = (undefined1)uVar6;
      _DAT_defb0afe =
           CONCAT22((short)(uVar6 >> 0x10),CONCAT11((char)((uint)param_6 >> 8) - in_AF,uVar5));
      out(0xf9,uVar5);
      if (SCARRY4((int)(puVar8 + 1),*(int *)(puVar8 + 0x9048e4e)) ==
          SCARRY4((int)(puVar8 + 1 + *(int *)(puVar8 + 0x9048e4e)),(uint)bVar9)) break;
      out(0x4f,_DAT_defb0afe);
      _DAT_55197d09 = param_4;
      uStack0000001c = 0x51017a;
      bVar4 = func_0xf854cea7();
      cVar2 = in_stack_00000066;
      in_stack_00000066 = in_stack_00000066 - (char)uVar3;
      in_AF = 9 < (bVar4 & 0xf) | in_AF;
      uVar6 = extraout_ECX;
      puVar7 = (undefined1 *)register0x00000010;
      if ((char)uVar3 <= cVar2) goto code_r0x00510195;
      uVar6 = uStack_2b ^ 0x76b699cf;
      if (-1 < (int)uVar6) {
        do {
                    /* WARNING: Do nothing block with infinite loop */
        } while( true );
      }
      swi(4);
      while( true ) {
        in((short)puVar7);
        bVar4 = in((short)puVar7);
        in_EAX = (uint)bVar4;
        uVar6 = uVar6 - 1;
        bVar4 = (byte)ppuVar10;
        bVar9 = 0x14 < bVar4;
        ppuVar10 = (undefined4 **)(uint)(byte)(bVar4 - 0x15);
        puVar8 = (undefined1 *)register0x00000010;
        if (SCARRY1(bVar4,-0x15) == SCARRY1(bVar4 - 0x15,'\0')) break;
        puVar7[-0x51a95b73] = puVar7[-0x51a95b73] << ((byte)uVar6 & 0x1f);
code_r0x00510195:
        puVar7 = (undefined1 *)CONCAT31((int3)((uint)puVar7 >> 8),0xba);
      }
    }
    ppuVar10 = &param_6;
    unaff_EBP = &param_6;
    param_6 = param_1;
    cVar2 = '\x11';
    puVar1 = param_1;
    do {
      puVar1 = puVar1 + -1;
      ppuVar10 = ppuVar10 + -1;
      *ppuVar10 = (undefined4 *)*puVar1;
      cVar2 = cVar2 + -1;
    } while ('\0' < cVar2);
    in_EAX = CONCAT31((int3)((uint)_DAT_defb0afe >> 8),DAT_f2ea105e);
    unaff_retaddr = &param_1;
  } while( true );
}


