/*
 * Function: Unwind@00511fe0
 * Address: 00511fe0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00511fe4) overlaps instruction at (ram,0x00511fe3)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00512049) */
/* WARNING: Removing unreachable block (ram,0x0051204c) */
/* WARNING: Removing unreachable block (ram,0x00512051) */
/* WARNING: Removing unreachable block (ram,0x00512052) */
/* WARNING: Removing unreachable block (ram,0x00512053) */

float10 __fastcall Unwind_00511fe0(int param_1,int param_2)

{
  char *pcVar1;
  int *piVar2;
  undefined1 uVar3;
  code *pcVar4;
  byte bVar5;
  byte bVar6;
  undefined2 uVar7;
  byte *extraout_ECX;
  undefined2 uVar8;
  undefined4 extraout_EDX;
  int unaff_EBX;
  int unaff_EBP;
  int unaff_ESI;
  undefined1 *puVar9;
  undefined1 *unaff_EDI;
  undefined1 *puVar10;
  byte *pbVar11;
  bool bVar12;
  bool bVar13;
  float10 in_ST0;
  float10 fVar14;
  
  bVar13 = false;
  bVar5 = *(byte *)(unaff_EBX + 0x52);
  bVar6 = bVar5 ^ 0x5e;
  bVar12 = (char)(bVar5 ^ 0x5e) < '\0';
  if (bVar12) {
    if (!bVar12) {
      piVar2 = (int *)(unaff_ESI * 5 + -0xcb536bb);
      *piVar2 = *piVar2 - (int)unaff_EDI;
      return (float10)*(short *)(param_2 + -0x47bb3de6) - in_ST0;
    }
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  if (param_1 == 1) {
    bVar13 = (*(uint *)(unaff_EBP + 4) & 0x400) != 0;
    unaff_ESI = unaff_ESI + 1;
    if ((char)((uint)param_2 >> 8) == '\0') {
      pcVar4 = (code *)swi(3);
      fVar14 = (float10)(*pcVar4)();
      return fVar14;
    }
    if (CONCAT22(0x652c,CONCAT11((char)param_2,bVar5)) != 0x5b26c5c9) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    bVar6 = 0;
    puVar10 = unaff_EDI;
  }
  else {
    puVar10 = unaff_EDI + 1;
    uVar3 = in((short)param_2);
    *unaff_EDI = uVar3;
  }
  puVar9 = (undefined1 *)(unaff_ESI + 1 + (uint)bVar13 * -2);
  pbVar11 = puVar10 + (uint)bVar13 * -2 + 1 + (uint)bVar13 * -2 + 1;
  puVar10[(uint)bVar13 * -2 + 1] = bVar6;
  pcVar4 = (code *)swi(0xe4);
  uVar7 = (*pcVar4)();
  pbVar11[0x7666b2d8] = pbVar11[0x7666b2d8] | 0xf9;
  uVar8 = CONCAT11(0x84,(char)extraout_EDX);
  pcVar1 = puVar9 + 0x29;
  *pcVar1 = *pcVar1 + (char)((ushort)uVar7 >> 8);
  *(uint *)(pbVar11 + -0x3ccf5a7d) = CONCAT22((short)((uint)extraout_EDX >> 0x10),uVar8);
  *puVar9 = (char)uVar7;
  *extraout_ECX = *extraout_ECX << 6 | *extraout_ECX >> 2;
  bVar6 = in(uVar8);
  *pbVar11 = bVar6;
  pcVar4 = (code *)swi(3);
  fVar14 = (float10)(*pcVar4)();
  return fVar14;
}


