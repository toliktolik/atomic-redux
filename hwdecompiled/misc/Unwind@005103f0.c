/*
 * Function: Unwind@005103f0
 * Address: 005103f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */

void Unwind_005103f0(void)

{
  undefined4 uVar1;
  char cVar2;
  code *pcVar3;
  undefined4 *puVar4;
  uint extraout_ECX;
  short sVar5;
  byte *unaff_EBX;
  undefined4 *unaff_EBP;
  undefined4 *unaff_ESI;
  int unaff_EDI;
  char in_OF;
  undefined8 uVar6;
  undefined1 auStack_3e3c [4];
  undefined1 auStack_3e38 [15844];
  undefined1 *puStack_54;
  undefined4 uStack_8;
  
  pcVar3 = (code *)swi(4);
  if (in_OF == '\x01') {
    (*pcVar3)();
  }
  puStack_54 = &stack0xfffffffc;
  puVar4 = (undefined4 *)&stack0xfffffffc;
  cVar2 = '\x13';
  do {
    unaff_EBP = unaff_EBP + -1;
    puVar4 = puVar4 + -1;
    *puVar4 = *unaff_EBP;
    cVar2 = cVar2 + -1;
  } while ('\0' < cVar2);
  in(0x60);
  auStack_3e3c = (undefined1  [4])0x510401;
  uVar6 = func_0xa8c76030();
  puVar4 = (undefined4 *)uVar6;
  out(0x42,puVar4);
  out(*unaff_ESI,(short)((ulonglong)uVar6 >> 0x20));
  if ((POPCOUNT((uint)(auStack_3e38 + extraout_ECX) & 0xff) & 1U) == 0) {
    sVar5 = (short)((ulonglong)uVar6 >> 0x10) >> 0xf;
    out(sVar5,(char)uVar6);
    out(sVar5,puVar4);
    if (!CARRY4((uint)auStack_3e38,extraout_ECX)) {
      *(byte *)(unaff_EDI + -2) = *(byte *)(unaff_EDI + -2) | 0xf2;
      DAT_b7e6b0f3 = (char)uVar6;
      *(uint *)(auStack_3e38 + (extraout_ECX - 3)) =
           CONCAT22(sVar5,CONCAT11(0xf,(char)((ulonglong)uVar6 >> 0x18) >> 7));
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  LOCK();
  uVar1 = *puVar4;
  *puVar4 = (int)((ulonglong)uVar6 >> 0x20);
  UNLOCK();
  *(uint *)(unaff_EDI + -0xd) = *(uint *)(unaff_EDI + -0xd) & (uint)(auStack_3e38 + extraout_ECX);
  *unaff_EBX = *unaff_EBX | (byte)uVar1;
  do {
                    /* WARNING: Do nothing block with infinite loop */
  } while( true );
}


