/*
 * Function: JPEG_InitializeQuantizationTables
 * Address: 004df740
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl JPEG_InitializeQuantizationTables(int *param_1)

{
  ushort *puVar1;
  ushort *puVar2;
  int iVar3;
  float *pfVar4;
  int *piVar5;
  double *pdVar6;
  double *pdVar7;
  int iVar8;
  undefined4 *puVar9;
  short *psVar10;
  int *piVar11;
  int local_14;
  code *local_c;
  int local_8;
  
  local_8 = 0;
  local_c = (code *)0x0;
  local_14 = 0;
  if (0 < param_1[9]) {
    puVar9 = (undefined4 *)(param_1[0x31] + 0x24);
    piVar11 = (int *)(param_1[0x67] + 0x2c);
    do {
      switch(*puVar9) {
      case 1:
        local_c = Image_QuantizationLookup;
        local_8 = 0;
        break;
      case 2:
        local_c = Input_ProcessJoystick;
        local_8 = 0;
        break;
      default:
        *(undefined4 *)(*param_1 + 0x14) = 7;
        *(undefined4 *)(*param_1 + 0x18) = *puVar9;
        (**(code **)*param_1)(param_1);
        break;
      case 4:
        local_c = Input_ProcessMouse;
        local_8 = 0;
        break;
      case 8:
        iVar8 = param_1[0x11];
        if (iVar8 == 0) {
          local_c = Audio_ReleaseBuffer;
          local_8 = 0;
        }
        else if (iVar8 == 1) {
          local_c = Input_InitializeDirectInput;
          local_8 = 1;
        }
        else if (iVar8 == 2) {
          local_c = Input_ProcessKeyboard;
          local_8 = 2;
        }
        else {
          *(undefined4 *)(*param_1 + 0x14) = 0x30;
          (**(code **)*param_1)(param_1);
        }
      }
      piVar11[-10] = (int)local_c;
      if (((*(char *)(puVar9 + 3) != '\0') && (*piVar11 != local_8)) &&
         (puVar1 = (ushort *)puVar9[10], puVar1 != (ushort *)0x0)) {
        *piVar11 = local_8;
        if (local_8 == 0) {
          iVar8 = puVar9[0xb];
          iVar3 = 0;
          do {
            *(uint *)(iVar8 + iVar3 * 4) = (uint)puVar1[iVar3];
            iVar3 = iVar3 + 1;
          } while (iVar3 < 0x40);
        }
        else if (local_8 == 1) {
          piVar5 = (int *)(puVar9[0xb] + 8);
          psVar10 = &DAT_00543972;
          puVar2 = puVar1 + 2;
          iVar8 = -(int)puVar1;
          do {
            piVar5[-2] = (int)((uint)puVar2[-2] * (int)psVar10[-1] + 0x800) >> 0xc;
            piVar5[-1] = (int)((uint)puVar2[-1] * (int)*psVar10 + 0x800) >> 0xc;
            *piVar5 = (int)((int)*(short *)((int)&DAT_00543970 + iVar8 + (int)puVar2) *
                            (uint)*puVar2 + 0x800) >> 0xc;
            piVar5[1] = (int)((int)*(short *)((int)&DAT_00543972 + iVar8 + (int)puVar2) *
                              (uint)puVar2[1] + 0x800) >> 0xc;
            piVar5[2] = (int)((int)*(short *)((int)&DAT_00543974 + iVar8 + (int)puVar2) *
                              (uint)puVar2[2] + 0x800) >> 0xc;
            piVar5[3] = (int)((int)*(short *)((int)&DAT_00543976 + iVar8 + (int)puVar2) *
                              (uint)puVar2[3] + 0x800) >> 0xc;
            piVar5[4] = (int)((int)*(short *)((int)&DAT_00543978 + iVar8 + (int)puVar2) *
                              (uint)puVar2[4] + 0x800) >> 0xc;
            piVar5[5] = (int)((int)*(short *)((int)&DAT_0054397a + iVar8 + (int)puVar2) *
                              (uint)puVar2[5] + 0x800) >> 0xc;
            psVar10 = psVar10 + 8;
            piVar5 = piVar5 + 8;
            puVar2 = puVar2 + 8;
          } while ((int)psVar10 < 0x5439f2);
        }
        else if (local_8 == 2) {
          pfVar4 = (float *)puVar9[0xb];
          pdVar6 = &DAT_005439f0;
          do {
            *pfVar4 = (float)*puVar1 * (float)DAT_005439f0 * (float)*pdVar6;
            pdVar7 = pdVar6 + 1;
            pfVar4[1] = (float)puVar1[1] * (float)_DAT_005439f8 * (float)*pdVar6;
            pfVar4[2] = (float)puVar1[2] * (float)_DAT_00543a00 * (float)*pdVar6;
            pfVar4[3] = (float)puVar1[3] * (float)_DAT_00543a08 * (float)*pdVar6;
            pfVar4[4] = (float)puVar1[4] * (float)_DAT_00543a10 * (float)*pdVar6;
            pfVar4[5] = (float)puVar1[5] * (float)_DAT_00543a18 * (float)*pdVar6;
            pfVar4[6] = (float)puVar1[6] * (float)_DAT_00543a20 * (float)*pdVar6;
            pfVar4[7] = (float)puVar1[7] * (float)_DAT_00543a28 * (float)*pdVar6;
            puVar1 = puVar1 + 8;
            pfVar4 = pfVar4 + 8;
            pdVar6 = pdVar7;
          } while ((int)pdVar7 < 0x543a30);
        }
        else {
          *(undefined4 *)(*param_1 + 0x14) = 0x30;
          (**(code **)*param_1)(param_1);
        }
      }
      local_14 = local_14 + 1;
      piVar11 = piVar11 + 1;
      puVar9 = puVar9 + 0x15;
    } while (local_14 < param_1[9]);
  }
  return;
}


