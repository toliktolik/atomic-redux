/*
 * Function: Unwind@00511160
 * Address: 00511160
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0051126f) overlaps instruction at (ram,0x0051126e)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x005112ea) */

void __fastcall Unwind_00511160(uint param_1,undefined2 param_2)

{
  uint uVar1;
  undefined1 *puVar2;
  bool bVar3;
  code *pcVar4;
  char cVar8;
  int in_EAX;
  undefined4 uVar5;
  short sVar10;
  uint uVar6;
  uint uVar7;
  uint extraout_ECX;
  uint *puVar11;
  undefined2 uVar12;
  int iVar13;
  int extraout_EDX;
  int unaff_EBX;
  byte *pbVar14;
  undefined4 **ppuVar15;
  int unaff_EBP;
  undefined4 *unaff_ESI;
  undefined4 *unaff_EDI;
  uint *puVar16;
  undefined4 *puVar17;
  undefined2 in_CS;
  undefined2 in_SS;
  byte bVar18;
  uint auStack_34 [7];
  undefined1 auStack_18 [4];
  int aiStack_14 [3];
  undefined4 *puStack_8;
  byte bVar9;
  
  *(char *)(in_EAX + -2) = (char)in_EAX;
  uVar5 = GlobalDescriptorTableRegister();
  *(undefined4 *)(unaff_EBX + -3) = uVar5;
  puVar16 = unaff_EDI + 1;
  uVar5 = in(param_2);
  *unaff_EDI = uVar5;
  puStack_8 = (undefined4 *)CONCAT22(puStack_8._2_2_,in_SS);
  bVar18 = (byte)unaff_EBX;
  pbVar14 = (byte *)CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(0xd3,bVar18));
  uVar5 = in(0xc2d8);
  *(char *)(param_1 + 0x7dfaf8df) = *(char *)(param_1 + 0x7dfaf8df) - bVar18;
  pbVar14[unaff_EBP * 2 + 0x55] = pbVar14[unaff_EBP * 2 + 0x55] + 0xae;
  bVar9 = (byte)((uint)uVar5 >> 8);
  sVar10 = (short)((uint)uVar5 >> 0x10);
  cVar8 = bVar9 - *pbVar14;
  if (cVar8 < '\0') {
    pcVar4 = (code *)swi(3);
    (*pcVar4)();
    return;
  }
  iVar13 = (int)sVar10 >> 0xf;
  if (cVar8 == '\0' || (char)bVar9 < (char)*pbVar14) {
    uVar6 = CONCAT22(sVar10,CONCAT11(cVar8,(char)uVar5)) + *(int *)(pbVar14 + -0x29) +
            (uint)(bVar9 < *pbVar14);
    *puVar16 = *puVar16 | 0xffffffe7;
    if (-1 < (int)*puVar16) {
      pbVar14 = (byte *)CONCAT31((int3)((uint)pbVar14 >> 8),bVar18 | (&stack0x2a617254)[param_1]);
      unaff_ESI = (undefined4 *)CONCAT22((short)((uint)unaff_EBP >> 0x10),in_CS);
      puStack_8 = (undefined4 *)((int)unaff_EDI + 5);
      *(char *)puVar16 = (char)uVar6;
      if (param_1 != 1 && (uVar6 & 0xdc) != 0) {
        pbVar14 = pbVar14 + 1;
      }
      puVar16 = (uint *)(uVar6 + 0x71d0f4cb);
      ppuVar15 = &puStack_8;
      cVar8 = '\x13';
      puVar17 = puStack_8;
      do {
        puVar17 = puVar17 + -1;
        ppuVar15 = ppuVar15 + -1;
        *ppuVar15 = (undefined4 *)*puVar17;
        cVar8 = cVar8 + -1;
      } while ('\0' < cVar8);
      bVar18 = (longlong)(int)((longlong)iVar13 * 0x44) != (longlong)iVar13 * 0x44;
      func_0x76848269();
      in(0xbd);
      bVar9 = (byte)extraout_ECX & 0x1f;
      cVar8 = *(char *)puVar16;
      *(char *)puVar16 = *(char *)puVar16 << bVar9;
      bVar3 = (extraout_ECX & 0x1f) != 0;
      *(byte **)pbVar14 =
           pbVar14 + (uint)(byte)(!bVar3 & bVar18 | (bVar3 && (char)(cVar8 << bVar9 - 1) < '\0')) +
                     *(int *)pbVar14;
      param_1 = extraout_ECX;
      iVar13 = extraout_EDX;
    }
    uVar12 = (undefined2)iVar13;
    uVar7 = in(uVar12);
    puVar11 = (uint *)CONCAT31((int3)(param_1 >> 8),0x60);
    uVar5 = in(uVar12);
    uVar1 = (uint)((uVar7 & 0x100) != 0);
    uVar6 = *puVar11;
    puVar2 = &stack0x00000000 + *puVar11;
    *(undefined4 *)(puVar2 + (uVar1 - 4)) = uVar5;
    *(undefined4 *)(puVar2 + (uVar1 - 8)) = uVar5;
    *(uint **)(puVar2 + (uVar1 - 0xc)) = puVar11;
    *(int *)(puVar2 + (uVar1 - 0x10)) = iVar13;
    *(byte **)(puVar2 + (uVar1 - 0x14)) = pbVar14;
    *(undefined1 **)(puVar2 + (uVar1 - 0x18)) = puVar2 + (uVar1 - 4);
    *(uint *)(puVar2 + (uVar1 - 0x1c)) = uVar7;
    *(undefined4 **)(puVar2 + (uVar1 - 0x20)) = unaff_ESI;
    *(uint **)(puVar2 + (uVar1 - 0x24)) = puVar16;
    puVar17 = (undefined4 *)((uint)puVar16 ^ *(uint *)((int)puVar16 + 1));
    *(uint *)(puVar2 + (uVar1 - 0x28)) =
         CONCAT22((short)((uint)uVar5 >> 0x10),
                  CONCAT11(((int)(puVar2 + uVar1) < 0) << 7 |
                           (puVar2 + uVar1 == (undefined1 *)0x0) << 6 | ((uVar7 & 0x1000) != 0) << 4
                           | ((POPCOUNT((uint)(puVar2 + uVar1) & 0xff) & 1U) == 0) << 2 | 2U |
                           (CARRY4((uint)&stack0x00000000,uVar6) || CARRY4((uint)puVar2,uVar1)),
                           (char)uVar5));
    pbVar14[-0x3c] = pbVar14[-0x3c] - (char)((uint)iVar13 >> 8);
    *(undefined4 *)(puVar2 + (uVar1 - 0x2c)) = 0xffffffaf;
    uVar5 = in(0xa6);
    *(char *)(iVar13 + -0x66) = *(char *)(iVar13 + -0x66) - (char)((uint)uVar5 >> 8);
    out(uVar12,(char)uVar5);
    DAT_af3c70c7 = DAT_af3c70c7 | (byte)iVar13;
    uVar5 = in((short)(iVar13 + 1));
    DAT_10984e34 = DAT_10984e34 + '\x01';
    DAT_09247a77 = (undefined1)uVar5;
    iVar13 = -*(int *)(((iVar13 + 1) - (int)puVar17) + -0x5d914a3a);
    *(undefined4 *)(puVar2 + iVar13 + uVar1 + -0x30) = 0xb5d7fe81;
    *(undefined4 **)(puVar2 + iVar13 + uVar1 + -0x34) = unaff_ESI;
    *puVar17 = *unaff_ESI;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  *(char *)((int)unaff_ESI + 0x56) = *(char *)((int)unaff_ESI + 0x56) >> 1;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


