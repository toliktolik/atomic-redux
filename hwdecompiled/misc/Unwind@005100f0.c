/*
 * Function: Unwind@005100f0
 * Address: 005100f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00510130) overlaps instruction at (ram,0x0051012e)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005100f0(uint *param_1,uint param_2)

{
  undefined4 uVar1;
  code *pcVar2;
  undefined1 uVar3;
  int in_EAX;
  uint uVar4;
  undefined2 uVar6;
  undefined4 *unaff_ESI;
  undefined4 *unaff_EDI;
  bool in_ZF;
  char in_SF;
  char in_OF;
  float10 in_ST0;
  byte bVar5;
  
  uVar1 = in((short)param_2);
  *unaff_EDI = uVar1;
  if (!in_ZF && in_OF == in_SF) {
    LOCK();
    *param_1 = param_2;
    UNLOCK();
    do {
                    /* WARNING: Do nothing block with infinite loop */
    } while( true );
  }
  *(char *)((int)param_1 + -0x2e) = *(char *)((int)param_1 + -0x2e) - (char)((uint)in_EAX >> 8);
  bVar5 = (byte)((uint)param_1 >> 8) | (byte)in_EAX;
  uVar4 = CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(bVar5,(char)param_1));
  out(0xc0,(byte)in_EAX);
  if ((POPCOUNT(bVar5) & 1U) == 0) {
    param_2 = (uint)CONCAT11((char)(param_2 >> 8) + -1,(char)param_2);
    *(uint *)((int)unaff_ESI + -0x4b) = uVar4;
    *(char *)((int)unaff_EDI + 0x25) = *(char *)((int)unaff_EDI + 0x25) << 1;
  }
  else {
    *(uint *)(in_EAX + 0x1b) = *(uint *)(in_EAX + 0x1b) & uVar4;
  }
  _DAT_1c14f324 = (double)in_ST0;
  uVar6 = (undefined2)param_2;
  uVar3 = in(uVar6);
  out(uVar6,uVar3);
  out(*unaff_ESI,uVar6);
  pcVar2 = (code *)swi(0xd5);
  bVar5 = (*pcVar2)();
  *(byte *)(unaff_EDI + 1) = *(byte *)(unaff_EDI + 1) & bVar5;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


