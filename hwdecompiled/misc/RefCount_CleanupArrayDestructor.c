/*
 * Function: RefCount_CleanupArrayDestructor
 * Address: 004ebbed
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void RefCount_CleanupArrayDestructor(void)

{
  undefined4 *puVar1;
  undefined4 *extraout_ECX;
  uint extraout_ECX_00;
  uint extraout_ECX_01;
  uint extraout_ECX_02;
  uint uVar2;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint uVar3;
  int unaff_EBP;
  int iVar4;
  
  Assembly_BitShiftLocking();
  *(undefined4 **)(unaff_EBP + -0x14) = extraout_ECX;
  *extraout_ECX = &PTR_RefCount_ConditionalDestructor_005468f4;
  *(undefined4 *)(unaff_EBP + -4) = 1;
  Threading_LockSectorByIndex((void *)(unaff_EBP + -0x10),0);
  iVar4 = extraout_ECX[3];
  *(undefined1 *)(unaff_EBP + -4) = 2;
  uVar2 = extraout_ECX_00;
  uVar3 = extraout_EDX;
  while (iVar4 != 0) {
    iVar4 = iVar4 + -1;
    uVar2 = *(uint *)(extraout_ECX[2] + iVar4 * 4);
    if (uVar2 != 0) {
      puVar1 = (undefined4 *)RefCount_Decrement(uVar2);
      uVar2 = extraout_ECX_01;
      uVar3 = extraout_EDX_00;
      if (puVar1 != (undefined4 *)0x0) {
        (**(code **)*puVar1)(1);
        uVar2 = extraout_ECX_02;
        uVar3 = extraout_EDX_01;
      }
    }
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(uVar2,uVar3);
}


