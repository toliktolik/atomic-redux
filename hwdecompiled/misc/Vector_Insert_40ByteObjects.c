/*
 * Function: Vector_Insert_40ByteObjects
 * Address: 004090f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
Vector_Insert_40ByteObjects(void *this,undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  undefined4 *extraout_ECX;
  uint uVar5;
  int extraout_ECX_00;
  undefined4 *extraout_ECX_01;
  undefined4 *extraout_EDX;
  int iVar6;
  undefined4 *extraout_EDX_00;
  int iVar7;
  uint extraout_EDX_01;
  undefined4 *extraout_EDX_02;
  undefined4 *puVar8;
  undefined4 local_44 [3];
  int iStack_38;
  int iStack_28;
  undefined4 uStack_24;
  undefined4 uStack_20;
  undefined1 *local_1c;
  void *local_18;
  undefined1 *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x50fa38;
  pvStack_10 = ExceptionList;
  local_14 = &stack0xffffffb0;
  ExceptionList = &pvStack_10;
  local_18 = this;
  Craft_ProcessBigBomber(local_44,param_3);
  puVar2 = param_2;
  puVar1 = param_1;
  iVar7 = *(int *)((int)this + 4);
  puVar4 = (undefined4 *)0x0;
  local_8 = 0;
  puVar8 = extraout_EDX;
  if (iVar7 != 0) {
    puVar4 = (undefined4 *)((*(int *)((int)this + 0xc) - iVar7) / 0x28);
    puVar8 = puVar4;
  }
  if (param_2 != (undefined4 *)0x0) {
    if (iVar7 == 0) {
      iVar6 = 0;
    }
    else {
      iVar6 = (*(int *)((int)this + 8) - iVar7) / 0x28;
    }
    if ((undefined4 *)(0x6666666U - iVar6) < param_2) {
      Level_InitializeVodkavania();
      puVar4 = extraout_ECX;
      puVar8 = extraout_EDX_00;
    }
    else {
      if (iVar7 == 0) {
        iVar6 = 0;
      }
      else {
        iVar6 = (*(int *)((int)this + 8) - iVar7) / 0x28;
      }
      if (puVar4 < (undefined4 *)(iVar6 + (int)param_2)) {
        if ((undefined4 *)(0x6666666 - ((uint)puVar4 >> 1)) < puVar4) {
          uVar5 = 0;
        }
        else {
          uVar5 = (int)puVar4 + ((uint)puVar4 >> 1);
        }
        if (iVar7 == 0) {
          iVar7 = 0;
        }
        else {
          iVar7 = (*(int *)((int)this + 8) - iVar7) / 0x28;
        }
        if (uVar5 < (uint)(iVar7 + (int)param_2)) {
          iVar7 = Vector_Size_40ByteObjects((int)this);
          uVar5 = iVar7 + (int)puVar2;
        }
        param_2 = (undefined4 *)operator_new(uVar5 * 0x28);
        local_8 = CONCAT31(local_8._1_3_,1);
        param_3 = param_2;
        param_2 = ArrayCopyConstruct_40ByteObjects(*(undefined4 **)((int)this + 4),param_1,param_2);
        ArrayCopyConstruct_40ByteObjects_FromSource(param_2,(int)puVar2,local_44);
        param_2 = param_2 + (int)puVar2 * 10;
        ArrayCopyConstruct_40ByteObjects(param_1,*(undefined4 **)((int)this + 8),param_2);
        iVar7 = *(int *)((int)this + 4);
        if (iVar7 == 0) {
          iVar6 = 0;
        }
        else {
          iVar6 = (*(int *)((int)this + 8) - iVar7) / 0x28;
        }
        if (iVar7 != 0) {
          ArrayDestroy_40ByteObjects(this,*(uint *)((int)this + 8),iVar7,*(uint *)((int)this + 8));
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,extraout_EDX_01);
        }
        puVar4 = (undefined4 *)(((int)puVar2 + iVar6) * 5);
        *(undefined4 **)((int)this + 4) = param_3;
        puVar8 = param_3 + ((int)puVar2 + iVar6) * 10;
        *(undefined4 **)((int)this + 0xc) = param_3 + uVar5 * 10;
        *(undefined4 **)((int)this + 8) = puVar8;
      }
      else {
        param_3 = *(undefined4 **)((int)this + 8);
        if ((undefined4 *)(((int)param_3 - (int)param_1) / 0x28) < param_2) {
          local_1c = &stack0xffffffa4;
          puVar8 = param_3;
          param_3 = (undefined4 *)((int)param_2 * 0x28);
          WeaponBomb_ProcessLaserGuidedBomb
                    (param_1,puVar8,(undefined4 *)((int)param_2 * 0x28 + (int)param_1));
          local_8 = CONCAT31(local_8._1_3_,3);
          ArrayCopyConstruct_40ByteObjects_WithEndPointer
                    (*(undefined4 **)((int)this + 8),
                     (int)puVar2 - ((int)*(undefined4 **)((int)this + 8) - (int)puVar1) / 0x28,
                     local_44);
          iVar7 = *(int *)((int)this + 8) + (int)param_3;
          local_8 = 0;
          *(int *)((int)this + 8) = iVar7;
          puVar8 = (undefined4 *)(iVar7 - (int)param_3);
        }
        else {
          param_1 = param_3 + (int)param_2 * -10;
          uVar3 = WeaponBomb_ProcessLaserGuidedBomb(param_1,param_3,param_3);
          puVar8 = param_1;
          *(undefined4 *)((int)this + 8) = uVar3;
          param_2 = (undefined4 *)&stack0xffffffa8;
          param_1 = (undefined4 *)&stack0xffffffa4;
          Craft_ProcessStrafer(&param_1,(int)puVar1,(int)puVar8,param_3);
          puVar8 = puVar1 + (int)puVar2 * 10;
        }
        param_1 = (undefined4 *)&stack0xffffffa4;
        Craft_ProcessSatellite(puVar1,puVar8,local_44);
        puVar4 = extraout_ECX_01;
        puVar8 = extraout_EDX_02;
      }
    }
  }
  if (iStack_28 != 0) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)puVar4,(uint)puVar8);
  }
  iStack_28 = 0;
  uStack_24 = 0;
  uStack_20 = 0;
  if (iStack_38 != 0) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(0,(uint)puVar8);
  }
  ExceptionList = pvStack_10;
  return;
}


