/*
 * Function: Image_Constructor
 * Address: 0049d4d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Image_Constructor(_String_base *param_1)

{
  _String_base _Var1;
  char cVar2;
  char *pcVar3;
  CHAR *pCVar4;
  HMODULE hModule;
  char *pcVar5;
  int iVar6;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint uVar7;
  uint unaff_retaddr;
  _String_base *p_Var8;
  undefined4 *in_stack_fffffdb4;
  undefined4 *in_stack_fffffdb8;
  _OSVERSIONINFOA local_14c;
  _String_base local_b8 [20];
  _String_base local_a4 [4];
  uint local_a0;
  undefined4 local_90;
  uint local_8c;
  undefined1 local_88 [4];
  uint local_84;
  undefined4 local_74;
  uint local_70;
  undefined1 local_6c [4];
  uint local_68;
  undefined4 local_58;
  uint local_54;
  undefined1 local_50 [4];
  uint local_4c;
  undefined4 local_3c;
  uint local_38;
  _String_base local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  HMODULE local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  int local_8;
  
  puStack_c = &DAT_005156b4;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = (HMODULE)0x0;
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  local_8 = 0;
  local_14c.dwOSVersionInfoSize = 0x94;
  ExceptionList = &local_10;
  GetVersionExA(&local_14c);
  pcVar5 = "Windows Ver: ";
  do {
    pcVar3 = pcVar5;
    pcVar5 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(local_34,(_String_base *)"Windows Ver: ",(uint)(pcVar3 + -0x534448));
  if (local_14c.dwPlatformId == 2) {
    pcVar5 = "NT ";
    do {
      pcVar3 = pcVar5;
      pcVar5 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    pcVar3 = pcVar3 + -0x534444;
    p_Var8 = (_String_base *)&DAT_00534444;
  }
  else {
    pcVar5 = "9x ";
    do {
      pcVar3 = pcVar5;
      pcVar5 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    pcVar3 = pcVar3 + -0x534440;
    p_Var8 = (_String_base *)&DAT_00534440;
  }
  Enemy_ProcessSatelliteLogic(local_34,p_Var8,(uint)pcVar3);
  Exception_Release(local_b8,"%d.%d");
  p_Var8 = local_b8;
  do {
    _Var1 = *p_Var8;
    p_Var8 = p_Var8 + 1;
  } while (_Var1 != (_String_base)0x0);
  Enemy_ProcessSatelliteLogic(local_34,local_b8,(int)p_Var8 - (int)(local_b8 + 1));
  pcVar5 = " ";
  do {
    pcVar3 = pcVar5;
    pcVar5 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(local_34,(_String_base *)&DAT_00531ca0,(uint)(pcVar3 + -0x531ca0));
  pCVar4 = local_14c.szCSDVersion;
  do {
    cVar2 = *pCVar4;
    pCVar4 = pCVar4 + 1;
  } while (cVar2 != '\0');
  Enemy_ProcessSatelliteLogic
            (local_34,(_String_base *)local_14c.szCSDVersion,
             (int)pCVar4 - (int)(local_14c.szCSDVersion + 1));
  pcVar5 = " ";
  do {
    pcVar3 = pcVar5;
    pcVar5 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(local_34,(_String_base *)&DAT_00531ca0,(uint)(pcVar3 + -0x531ca0));
  Exception_Release(local_b8,&DAT_00533e84);
  pcVar5 = "Build ";
  do {
    pcVar3 = pcVar5;
    pcVar5 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(local_34,(_String_base *)"Build ",(uint)(pcVar3 + -0x534430));
  p_Var8 = local_b8;
  do {
    _Var1 = *p_Var8;
    p_Var8 = p_Var8 + 1;
  } while (_Var1 != (_String_base)0x0);
  Enemy_ProcessSatelliteLogic(local_34,local_b8,(int)p_Var8 - (int)(local_b8 + 1));
  pcVar5 = "\r\n";
  do {
    pcVar3 = pcVar5;
    pcVar5 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(local_34,(_String_base *)&DAT_00531704,(uint)(pcVar3 + -0x531704));
  uVar7 = extraout_EDX;
  if (DAT_005a37d8 != (int *)0x0) {
    hModule = LoadLibraryA("ddraw.dll");
    if (hModule != (HMODULE)0x0) {
      GetModuleFileNameA(hModule,&stack0xfffffdb4,0x100);
      pcVar5 = &stack0xfffffdb4;
      local_38 = 0xf;
      local_3c = 0;
      local_4c = local_4c & 0xffffff00;
      do {
        cVar2 = *pcVar5;
        pcVar5 = pcVar5 + 1;
      } while (cVar2 != '\0');
      String_Assign(local_50,(_String_base *)&stack0xfffffdb4,(int)pcVar5 - (int)&stack0xfffffdb5);
      local_8._0_1_ = 1;
      iVar6 = (**(code **)(*DAT_005a37d8 + 0x88))(local_88,local_50);
      local_8._0_1_ = 2;
      p_Var8 = Survival_LoadConfiguration(local_a4,(_String_base *)"DDraw Ver: ",iVar6);
      local_8._0_1_ = 3;
      p_Var8 = Intel_DisplayPopulationData
                         (extraout_ECX,(uint)local_6c,(_String_base *)local_6c,p_Var8,
                          (_String_base *)&DAT_00531704);
      local_8._0_1_ = 4;
      Enemy_UpdateAI(local_34,(int)p_Var8,0,0xffffffff);
      if (0xf < local_54) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
      }
      local_54 = 0xf;
      local_58 = 0;
      local_68 = local_68 & 0xffffff00;
      if (0xf < local_8c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_a0,extraout_EDX_00);
      }
      local_8c = 0xf;
      local_90 = 0;
      local_a0 = local_a0 & 0xffffff00;
      if (0xf < local_70) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,local_84);
      }
      local_70 = 0xf;
      local_74 = 0;
      local_84 = local_84 & 0xffffff00;
      local_8 = (uint)local_8._1_3_ << 8;
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
      }
      FreeLibrary(hModule);
    }
    local_18 = LoadLibraryA("dsound.dll");
    uVar7 = extraout_EDX_01;
    if (local_18 != (HMODULE)0x0) {
      GetModuleFileNameA(local_18,&stack0xfffffdb4,0x100);
      pcVar5 = &stack0xfffffdb4;
      local_38 = 0xf;
      local_3c = 0;
      local_4c = local_4c & 0xffffff00;
      do {
        cVar2 = *pcVar5;
        pcVar5 = pcVar5 + 1;
      } while (cVar2 != '\0');
      String_Assign(local_50,(_String_base *)&stack0xfffffdb4,(int)pcVar5 - (int)&stack0xfffffdb5);
      local_8._0_1_ = 5;
      iVar6 = (**(code **)(*DAT_005a37d8 + 0x88))(local_6c,local_50);
      local_8._0_1_ = 6;
      p_Var8 = Survival_LoadConfiguration(local_a4,(_String_base *)"DSound Ver: ",iVar6);
      local_8._0_1_ = 7;
      p_Var8 = Intel_DisplayPopulationData
                         (local_88,extraout_EDX_02,(_String_base *)local_88,p_Var8,
                          (_String_base *)&DAT_00531704);
      local_8._0_1_ = 8;
      Enemy_UpdateAI(local_34,(int)p_Var8,0,0xffffffff);
      if (0xf < local_70) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,local_84);
      }
      local_70 = 0xf;
      local_74 = 0;
      local_84 = local_84 & 0xffffff00;
      if (0xf < local_8c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,extraout_EDX_03);
      }
      local_8c = 0xf;
      local_90 = 0;
      local_a0 = local_a0 & 0xffffff00;
      if (0xf < local_54) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_68,extraout_EDX_03);
      }
      local_54 = 0xf;
      local_58 = 0;
      local_68 = local_68 & 0xffffff00;
      local_8 = (uint)local_8._1_3_ << 8;
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_01,local_4c);
      }
      FreeLibrary(local_18);
      uVar7 = extraout_EDX_04;
    }
  }
  *(undefined4 *)(param_1 + 0x18) = 0xf;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike(param_1,uVar7,local_34,0,0xffffffff);
  if (local_1c < 0x10) {
    ExceptionList = local_10;
    Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_fffffdb4,in_stack_fffffdb8);
    return;
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX_02,local_30);
}


