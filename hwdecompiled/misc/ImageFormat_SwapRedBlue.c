/*
 * Function: ImageFormat_SwapRedBlue
 * Address: 004bcde0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __thiscall
ImageFormat_SwapRedBlue
          (void *this,undefined4 *param_1,uint param_2,int param_3,undefined *param_4,int param_5,
          int param_6)

{
  int *in_EAX;
  undefined4 *puVar1;
  int iVar2;
  undefined4 extraout_ECX;
  uint uVar3;
  int extraout_ECX_00;
  double *extraout_EDX;
  uint extraout_EDX_00;
  int *piVar4;
  int local_8;
  
  if (this == (void *)0x0) {
    local_8 = -1;
  }
  else {
    local_8 = (*(code *)param_4)(this,0,0,1);
  }
  piVar4 = in_EAX;
  for (iVar2 = 0x4a; iVar2 != 0; iVar2 = iVar2 + -1) {
    *piVar4 = 0;
    piVar4 = piVar4 + 1;
  }
  in_EAX[0x46] = param_3;
  in_EAX[0x47] = (int)param_4;
  in_EAX[0x48] = param_5;
  *in_EAX = (int)this;
  in_EAX[0x49] = param_6;
  puVar1 = CPU_AllocateState();
  in_EAX[6] = (int)puVar1;
  if (param_1 != (undefined4 *)0x0) {
    puVar1 = (undefined4 *)CPU_AllocateMemoryBuffer(extraout_ECX,extraout_EDX,(int)puVar1,param_2);
    for (uVar3 = param_2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
      *puVar1 = *param_1;
      param_1 = param_1 + 1;
      puVar1 = puVar1 + 1;
    }
    for (uVar3 = param_2 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
      *(undefined1 *)puVar1 = *(undefined1 *)param_1;
      param_1 = (undefined4 *)((int)param_1 + 1);
      puVar1 = (undefined4 *)((int)puVar1 + 1);
    }
    CPU_AdvanceMemoryBuffer(in_EAX[6],param_2);
  }
  if (local_8 != -1) {
    in_EAX[1] = 1;
  }
  in_EAX[7] = 1;
  iVar2 = Assembly_DecompilationFailed(1,0x20);
  in_EAX[0xc] = iVar2;
  iVar2 = Assembly_DecompilationFailed(in_EAX[7],0x10);
  in_EAX[0xd] = iVar2;
  iVar2 = CPU_AllocateContext(0xffffffff);
  in_EAX[0x18] = iVar2;
  iVar2 = ImageFormat_LoadDDS((undefined4 *)in_EAX[0xc],(undefined4 *)in_EAX[0xd],(int *)0x0);
  if (iVar2 < 0) {
    *in_EAX = 0;
    ImageFormat_ConvertRGBToRGBA(extraout_ECX_00,extraout_EDX_00,in_EAX);
    return iVar2;
  }
  if (in_EAX[0x10] < 1) {
    in_EAX[0x10] = 1;
  }
  return iVar2;
}


