/*
 * Function: Unwind@00514900
 * Address: 00514900
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005149f7) overlaps instruction at (ram,0x005149f6)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int __fastcall Unwind_00514900(int param_1,ushort *param_2,byte *param_3)

{
  int *piVar1;
  char cVar2;
  code *pcVar3;
  ulonglong uVar4;
  uint5 uVar5;
  byte bVar6;
  byte bVar7;
  uint in_EAX;
  int iVar8;
  uint *puVar9;
  uint uVar10;
  byte bVar11;
  byte *pbVar12;
  uint *extraout_ECX;
  int *unaff_EBX;
  int unaff_EBP;
  byte *pbVar13;
  byte *unaff_ESI;
  byte *unaff_EDI;
  undefined2 in_ES;
  bool in_CF;
  bool bVar14;
  byte in_AF;
  char in_ZF;
  byte in_TF;
  byte in_IF;
  byte in_NT;
  byte in_AC;
  byte in_VIF;
  byte in_VIP;
  byte in_ID;
  uint uStack_8;
  uint uStack_4;
  
  pbVar12 = (byte *)(param_1 + -1);
  if (pbVar12 == (byte *)0x0 || in_ZF == '\0') {
    pcVar3 = (code *)swi(1);
    iVar8 = (*pcVar3)();
    return iVar8;
  }
  pbVar13 = unaff_ESI;
  if (in_CF) {
    *(uint *)((int)unaff_EBX + 0x4c6b7e66) = *(uint *)((int)unaff_EBX + 0x4c6b7e66) | (uint)pbVar12;
    pbVar13 = unaff_ESI + 1;
    bVar11 = *unaff_EDI;
    bVar7 = *unaff_ESI;
    in_EAX = CONCAT31((int3)(in_EAX >> 8),*(undefined1 *)((int)unaff_EBX + (in_EAX & 0xff)));
    pbVar12 = (byte *)CONCAT22((short)((uint)pbVar12 >> 0x10),CONCAT11(0xc0,(char)pbVar12));
    *param_2 = *param_2 + (ushort)(bVar7 < bVar11) * (((ushort)unaff_EBP & 3) - (*param_2 & 3));
    piVar1 = (int *)(CONCAT31((int3)((int)param_2 + (bVar7 < bVar11) + 0x954b4818 >> 8),0x53) +
                    0x72856d62);
    *piVar1 = *piVar1 + -0x24;
    unaff_EDI = param_3;
  }
  uStack_4 = CONCAT22(uStack_4._2_2_,in_ES);
  bVar7 = *pbVar12;
  bVar11 = (byte)pbVar12;
  bVar14 = bVar7 < bVar11;
  cVar2 = bVar7 - bVar11;
  uStack_8 = (uint)(in_NT & 1) * 0x4000 | (uint)SBORROW1(bVar7,bVar11) * 0x800 |
             (uint)(in_IF & 1) * 0x200 | (uint)(in_TF & 1) * 0x100 | (uint)(cVar2 < '\0') * 0x80 |
             (uint)(cVar2 == '\0') * 0x40 | (uint)(in_AF & 1) * 0x10 |
             (uint)((POPCOUNT(cVar2) & 1U) == 0) * 4 | (uint)bVar14 | (uint)(in_ID & 1) * 0x200000 |
             (uint)(in_VIP & 1) * 0x100000 | (uint)(in_VIF & 1) * 0x80000 |
             (uint)(in_AC & 1) * 0x40000;
  bVar7 = (byte)in_EAX;
  iVar8 = CONCAT31((int3)(CONCAT22((short)(in_EAX >> 0x10),CONCAT11(bVar7 / 0x59,bVar7)) >> 8),
                   bVar7 % 0x59);
  puVar9 = (uint *)(iVar8 + 1);
  if (puVar9 != (uint *)0x0) {
    while ((POPCOUNT((uint)puVar9 & 0xff) & 1U) != 0) {
      *(byte *)((int)pbVar12 * 9 + 0x2f) = (byte)pbVar12;
      pbVar13 = pbVar13 + 1;
      pbVar12 = (byte *)CONCAT31((int3)((uint)pbVar12 >> 8),0xad);
      puVar9 = &uStack_8;
    }
    pbVar13[0x19] = (byte)pbVar12;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  puVar9 = (uint *)CONCAT31((int3)((uint)pbVar12 >> 8),0xbd);
  uVar10 = (uint)DAT_c3e0e84b;
  if (bVar14) {
    LOCK();
    *(int **)(uVar10 + bVar14 + 0x6f0c3d47) = unaff_EBX;
    UNLOCK();
    return -0x1cdf8875;
  }
  pcVar3 = (code *)swi(4);
  if (SCARRY4(iVar8,1)) {
    uVar10 = (*pcVar3)();
    puVar9 = extraout_ECX;
  }
  uVar10 = uVar10 & 0xffffff8c;
  if (puVar9 != &uStack_8) {
    bVar6 = (byte)unaff_EDI | 0xa9;
    pbVar12 = (byte *)(unaff_EBP + -0x1e73953b);
    bVar7 = *pbVar12;
    DAT_c8c8a6aa = bVar6;
    *pbVar12 = *pbVar12 + 0x59;
    bVar11 = 9 < (bVar6 & 0xf) | in_AF;
    bVar6 = bVar6 + bVar11 * '\x06';
    *(uint *)(uVar10 + *unaff_EBX) =
         CONCAT31((int3)((uint)unaff_EDI >> 8),
                  bVar6 + (0x90 < (bVar6 & 0xf0) | bVar7 < 0xa7 | bVar11 * (0xf9 < bVar6)) * '`');
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  uVar5 = CONCAT14(puVar9 < &uStack_8,*(uint *)(unaff_EDI + -0x5cd6b492));
  uVar4 = (ulonglong)uVar5 << 0x12;
  *(uint *)(unaff_EDI + -0x5cd6b492) = (uint)(uVar5 >> 0xf) | (uint)uVar4;
  bVar7 = ((uVar4 & 0x100000000) != 0) + 0x67;
  *puVar9 = *puVar9 | 0xb0e9451d;
  if (puVar9 != (uint *)0x1) {
    return CONCAT31((int3)(uVar10 >> 8),bVar7);
  }
  if (0x37649066 < uStack_4) {
    return CONCAT31((int3)(CONCAT22((short)(uVar10 >> 0x10),CONCAT11(bVar7 / 100,bVar7)) >> 8),
                    bVar7 % 100) + 0x1dd6fcf;
  }
  pcVar3 = (code *)swi(0xb5);
  _DAT_feff68ec = (*pcVar3)();
  return _DAT_feff68ec;
}


