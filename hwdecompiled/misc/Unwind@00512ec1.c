/*
 * Function: Unwind@00512ec1
 * Address: 00512ec1
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00512eee) overlaps instruction at (ram,0x00512eec)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00512fe9) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1 * __fastcall Unwind_00512ec1(uint param_1,int param_2)

{
  ushort *puVar1;
  uint *puVar2;
  int *piVar3;
  char *pcVar4;
  longlong lVar5;
  code *pcVar6;
  byte bVar7;
  undefined1 uVar8;
  char cVar9;
  undefined2 uVar10;
  char *in_EAX;
  undefined1 *puVar11;
  uint uVar12;
  uint uVar13;
  undefined4 uVar14;
  int iVar16;
  undefined4 extraout_ECX;
  int iVar17;
  int extraout_EDX;
  undefined2 *puVar18;
  int *unaff_EBX;
  int unaff_EBP;
  undefined1 *unaff_ESI;
  undefined1 *puVar19;
  undefined4 *unaff_EDI;
  undefined2 in_CS;
  char cVar20;
  bool bVar21;
  bool bVar22;
  bool bVar23;
  undefined2 in_FPUControlWord;
  undefined2 in_FPUStatusWord;
  undefined2 in_FPUTagWord;
  undefined2 in_FPULastInstructionOpcode;
  undefined4 in_FPUDataPointer;
  undefined4 in_FPUInstructionPointer;
  unkbyte10 in_ST0;
  float10 extraout_ST0;
  unkbyte10 extraout_ST0_00;
  unkbyte10 in_ST1;
  unkbyte10 extraout_ST1;
  unkbyte10 in_ST2;
  unkbyte10 in_ST3;
  unkbyte10 in_ST4;
  unkbyte10 in_ST5;
  unkbyte10 in_ST6;
  unkbyte10 in_ST7;
  undefined8 uVar24;
  undefined1 *puVar25;
  undefined1 uStack_5;
  byte bStack_4;
  char cStack_3;
  undefined1 uStack_2;
  undefined1 uStack_1;
  undefined3 uVar15;
  
  do {
    _DAT_b47af302 = in_EAX;
    *in_EAX = *in_EAX - (char)unaff_EBX;
    puVar19 = (undefined1 *)((uint)unaff_ESI | 0x45241cd7);
    cVar20 = ((uint)in_EAX & 0x1000) != 0;
    bVar7 = (byte)in_EAX;
    cVar9 = (char)((uint)in_EAX >> 8);
    if ((in_EAX[0x7b161771] & bVar7) == 0) {
      iVar16 = param_1 + 1;
      lVar5 = (longlong)*unaff_EBX * 0x5d;
      iVar17 = (int)lVar5;
      if ((iVar17 != lVar5) == iVar16 < 0) {
        *(byte *)(unaff_EBP + 0x2b9b0b67) = *(byte *)(unaff_EBP + 0x2b9b0b67) & (byte)iVar16;
      }
      else {
        uVar15 = (undefined3)((uint)in_EAX >> 8);
        puVar11 = (undefined1 *)CONCAT31(uVar15,0xdd);
        puVar19 = (undefined1 *)(unaff_EBP + 0x5c + iVar17);
        *puVar19 = 0;
        if ((POPCOUNT(*puVar19) & 1U) == 0) {
          if (iVar16 != 0) {
            if ((iVar16 != 1) && (bVar21 = puVar11 < &DAT_14091534, (int)puVar11 < 0x14091534)) {
              uVar8 = in(0xf8);
              puVar11 = (undefined1 *)CONCAT31(uVar15,uVar8);
              unaff_EDI = (undefined4 *)((int)unaff_EDI + (-(uint)bVar21 - (int)puVar25));
            }
            puVar19 = puVar11 + -0x8e6071c;
            piVar3 = (int *)(puVar25 + 0x65e6be2a);
            iVar16 = *piVar3;
            iVar17 = *piVar3;
            *piVar3 = (iVar17 + 0x7b5733fa) - (uint)((undefined1 *)0x8e6071b < puVar11);
            if ((SBORROW4(iVar16,-0x7b5733fa) !=
                SBORROW4(iVar17 + 0x7b5733fa,(uint)((undefined1 *)0x8e6071b < puVar11))) !=
                *piVar3 < 0) {
              LOCK();
              iVar16 = unaff_EDI[-0xc091316];
              unaff_EDI[-0xc091316] = unaff_EDI;
              UNLOCK();
              pcVar4 = (char *)(iVar16 + 0x470434e3);
              *pcVar4 = (*pcVar4 + -0x5c) -
                        (0xb5767d37 <
                        (CONCAT31((int3)((uint)puVar19 >> 8),(char)puVar19 + '\'') ^ 0x13));
              do {
                    /* WARNING: Do nothing block with infinite loop */
              } while( true );
            }
            return puVar19;
          }
          bVar23 = false;
          uVar12 = CONCAT31(uVar15,0x4f);
          bVar22 = false;
          bVar21 = false;
          while (uVar24 = CONCAT44(iVar17,uVar12), bVar21 || bVar23 != bVar22) {
            while( true ) {
              *(byte *)((int)unaff_EBX + -0x4ecbc027) =
                   *(byte *)((int)unaff_EBX + -0x4ecbc027) | (byte)lVar5;
              bVar23 = SCARRY4((int)unaff_EDI,1);
              unaff_EDI = (undefined4 *)((int)unaff_EDI + 1);
              bVar22 = (int)unaff_EDI < 0;
              bVar21 = unaff_EDI == (undefined4 *)0x0;
              out(0xeb,uVar12);
              if (!bVar22) break;
              if (bVar23) {
                *(undefined1 *)unaff_EDI = *puVar25;
                out((short)lVar5,uVar12);
                swi(4);
                *(undefined4 *)(puVar25 + 0x49) = 0;
                return *(undefined1 **)(puVar25 + 1);
              }
              cVar20 = 9 < ((byte)uVar12 & 0xf) | cVar20;
              uVar13 = CONCAT31((int3)(uVar12 >> 8),(byte)uVar12 + cVar20 * -6) & 0xffffff0f;
              uVar8 = (undefined1)uVar13;
              uVar12 = CONCAT31((int3)(CONCAT22((short)(uVar13 >> 0x10),
                                                CONCAT11((char)(uVar12 >> 8) - cVar20,uVar8)) >> 8),
                                uVar8) ^ 0xb1;
            }
          }
          pcVar6 = (code *)swi(4);
          if (SBORROW4((int)unaff_EDI,1)) {
            uVar24 = (*pcVar6)();
            in_ST0 = extraout_ST0_00;
            in_ST1 = extraout_ST1;
          }
          puVar18 = (undefined2 *)((ulonglong)uVar24 >> 0x20);
          *puVar18 = in_FPUControlWord;
          puVar18[2] = in_FPUStatusWord;
          puVar18[4] = in_FPUTagWord;
          *(undefined4 *)(puVar18 + 10) = in_FPUDataPointer;
          *(undefined4 *)(puVar18 + 6) = in_FPUInstructionPointer;
          puVar18[9] = in_FPULastInstructionOpcode;
          *(unkbyte10 *)(puVar18 + 0xe) = in_ST0;
          *(unkbyte10 *)(puVar18 + 0x13) = in_ST1;
          *(unkbyte10 *)(puVar18 + 0x18) = in_ST2;
          *(unkbyte10 *)(puVar18 + 0x1d) = in_ST3;
          *(unkbyte10 *)(puVar18 + 0x22) = in_ST4;
          *(unkbyte10 *)(puVar18 + 0x27) = in_ST5;
          *(unkbyte10 *)(puVar18 + 0x2c) = in_ST6;
          *(unkbyte10 *)(puVar18 + 0x31) = in_ST7;
          piVar3 = (int *)(unaff_EBP + -0x350cc55c);
          iVar16 = *piVar3;
          *piVar3 = -*piVar3;
          bVar7 = (byte)unaff_EBP;
          bVar22 = bVar7 < *(byte *)(unaff_EDI + -0x12);
          bVar7 = bVar7 - *(byte *)(unaff_EDI + -0x12);
          bVar21 = bVar7 < (iVar16 != 0);
          cVar9 = bVar7 - (iVar16 != 0);
          if ((!bVar22 && !bVar21) && cVar9 != '\0') {
            cStack_3 = (char)in_CS;
            uStack_2 = (undefined1)((ushort)in_CS >> 8);
            DAT_35434cac = cVar9 + ((cVar9 == '\0') << 6 | cVar20 << 4 |
                                    ((POPCOUNT(cVar9) & 1U) == 0) << 2 | 2U | (bVar22 || bVar21)) *
                                   '.';
            puVar25[0x65] = puVar25[0x65] ^ (byte)*(undefined4 *)((int)uVar24 + 0x50);
            uVar10 = (undefined2)((ulonglong)uVar24 >> 0x20);
            out(uVar10,DAT_35434cac);
            uVar14 = in(uVar10);
            _DAT_55f22b5b = CONCAT31((int3)((uint)uVar14 >> 8),(byte)uVar14 - 0x38);
            puVar1 = (ushort *)(puVar25 + 0x95);
            _DAT_dc3b0d8e = _DAT_55f22b5b;
            *puVar1 = *puVar1 + (ushort)((byte)uVar14 < 0x38) *
                                (((ushort)(undefined1 *)((int)unaff_EDI + -2) & 3) - (*puVar1 & 3));
            *(undefined1 *)((int)unaff_EDI + -2) = puVar25[4];
            pcVar6 = (code *)swi(3);
            puVar19 = (undefined1 *)(*pcVar6)();
            return puVar19;
          }
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        uVar14 = in((short)lVar5);
        *unaff_EDI = uVar14;
        puVar2 = (uint *)((int)unaff_EBX + 0x644b7643);
        bVar7 = (byte)iVar16 - cVar9 & 0x1f;
        *puVar2 = *puVar2 >> bVar7 | *puVar2 << 0x20 - bVar7;
code_r0x00512f08:
        pcVar6 = (code *)swi(0xe2);
        (*pcVar6)();
      }
      do {
        uStack_5 = (undefined1)in_CS;
        bStack_4 = (byte)((ushort)in_CS >> 8);
        in_CS = 0xf2fd;
        uVar10 = func_0x55551f31();
        bVar7 = *(byte *)(extraout_EDX + -0x2725cacd);
        *(int *)(unaff_EBP + 3) = *(int *)(unaff_EBP + 3) - unaff_EBP;
        *(longlong *)(unaff_EBP + -0x53) = (longlong)extraout_ST0;
        *(byte *)(unaff_EBP + 0x2b9b0b67) = *(byte *)(unaff_EBP + 0x2b9b0b67) & (byte)extraout_ECX;
        uVar13 = CONCAT22((short)((uint)extraout_ECX >> 0x10),CONCAT11(0x66,(byte)extraout_ECX));
        puVar2 = (uint *)(uVar13 + 0x53);
        *puVar2 = *puVar2 ^ (uint)&bStack_4;
        uVar12 = CONCAT31((int3)(char)((byte)((ushort)uVar10 >> 8) | bVar7),(char)uVar10) |
                 0x7ff17bae;
        bVar21 = -1 < (int)(uVar13 & *(uint *)(CONCAT13(uStack_5,0x512f) + 0xd));
        if (bVar21) {
          if (bVar21) {
            bStack_4 = (byte)in_CS;
            cStack_3 = (char)((ushort)in_CS >> 8);
            puVar19 = (undefined1 *)func_0xbaa29bee();
            out(0x68,(char)puVar19);
            return puVar19;
          }
          pcVar6 = (code *)swi(1);
          puVar19 = (undefined1 *)(*pcVar6)();
          return puVar19;
        }
        iVar16 = uVar12 + 0x7a5ed65c;
      } while ((SCARRY4(uVar12,0x7a5ed65c) != SCARRY4(iVar16,0)) != iVar16 < 0);
      pcVar6 = (code *)swi(3);
      puVar19 = (undefined1 *)(*pcVar6)();
      return puVar19;
    }
    uStack_2 = (undefined1)((uint)in_EAX >> 0x10);
    uStack_1 = (undefined1)((uint)in_EAX >> 0x18);
    *(uint *)(puVar19 + -0x4f76d0b8) = *(uint *)(puVar19 + -0x4f76d0b8) >> 1;
    bVar21 = CARRY4(param_1,*(uint *)((int)unaff_EDI + 0x7b69d3b5));
    bStack_4 = bVar7;
    cStack_3 = cVar9;
    if (SCARRY4(param_1,*(uint *)((int)unaff_EDI + 0x7b69d3b5))) {
      uRamcca4f6e7 = (undefined1)(CONCAT11(bVar21,uRamcca4f6e7) >> 1);
      goto code_r0x00512f08;
    }
    in_EAX = (char *)CONCAT22((short)((uint)in_EAX >> 0x10),CONCAT11(0xfd,bVar7));
    param_2 = CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 + -3 + bVar21);
    *(char *)(param_2 + -0x1b95e7a) = *(char *)(param_2 + -0x1b95e7a) + -0x45;
    param_1 = 0x9d2f8a20;
    unaff_EDI = unaff_EDI + 1;
    unaff_ESI = puVar19 + 4;
    puVar25 = puVar19;
  } while( true );
}


