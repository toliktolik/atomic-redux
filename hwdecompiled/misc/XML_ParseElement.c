/*
 * Function: XML_ParseElement
 * Address: 004a7040
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall XML_ParseElement(void *this,_String_base *param_1)

{
  uint uVar1;
  char *pcVar2;
  char cVar3;
  char *pcVar4;
  _String_base *p_Var5;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff44;
  undefined4 *in_stack_ffffff48;
  _String_base local_9c [80];
  undefined1 local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x515dab;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  pcVar2 = "";
  do {
    pcVar4 = pcVar2;
    pcVar2 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  ExceptionList = &local_10;
  String_Assign(param_1,(_String_base *)&DAT_0052c7cf,(uint)(pcVar4 + -0x52c7cf));
  WeaponBomb_ProcessBurstingRocket((int)&stack0xffffff44);
  local_8 = 0;
  cVar3 = XML_ParseDocument(*(int *)((int)this + 8),extraout_EDX,(int *)&stack0xffffff44);
  uVar1 = extraout_EDX_00;
  do {
    if (cVar3 == '\0') {
LAB_004a7111:
      local_8 = 0xffffffff;
      PowerUp_ProcessNuke((int)&stack0xffffff44);
LAB_004a71ba:
      ExceptionList = local_10;
      Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff44,in_stack_ffffff48);
      return;
    }
    if (in_stack_ffffff44 == (undefined4 *)0x1) {
      p_Var5 = Survival_LoadConfiguration
                         (local_30,(_String_base *)"Unexpected Section: \'",(int)local_9c);
      local_8._0_1_ = 1;
      p_Var5 = Intel_DisplayPopulationData
                         (extraout_ECX,(uint)local_4c,(_String_base *)local_4c,p_Var5,
                          (_String_base *)&DAT_00531760);
      local_8 = CONCAT31(local_8._1_3_,2);
      Image_Destructor(this,p_Var5);
      if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,extraout_EDX_02);
      }
      local_34 = 0xf;
      local_38 = 0;
      local_48 = local_48 & 0xffffff00;
      if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_2c,extraout_EDX_02);
      }
      local_18 = 0xf;
      local_1c = 0;
      local_2c = local_2c & 0xffffff00;
      goto LAB_004a7111;
    }
    if (in_stack_ffffff44 == (undefined4 *)0x3) {
      PowerUp_ProcessThunderstrike(param_1,uVar1,local_9c,0,0xffffffff);
    }
    else if (in_stack_ffffff44 == (undefined4 *)0x2) {
      local_8 = 0xffffffff;
      PowerUp_ProcessNuke((int)&stack0xffffff44);
      goto LAB_004a71ba;
    }
    local_8 = 0xffffffff;
    PowerUp_ProcessNuke((int)&stack0xffffff44);
    WeaponBomb_ProcessBurstingRocket((int)&stack0xffffff44);
    local_8 = 0;
    cVar3 = XML_ParseDocument(*(int *)((int)this + 8),(uint)&stack0xffffff44,(int *)&stack0xffffff44
                             );
    uVar1 = extraout_EDX_01;
  } while( true );
}


