/*
 * Function: TreeSet_RemoveNode
 * Address: 004a50d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void TreeSet_RemoveNode(undefined4 param_1,int *param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  int *piVar4;
  undefined1 *puVar5;
  uint *puVar6;
  int extraout_ECX;
  uint extraout_EDX;
  uint uVar7;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  int *piVar8;
  int *piVar9;
  int *piVar10;
  bool bVar11;
  undefined8 uVar12;
  undefined1 *puVar13;
  undefined **local_60 [10];
  undefined1 local_38 [4];
  undefined1 local_34;
  undefined4 local_24;
  undefined4 local_20;
  void *local_1c;
  int *local_18;
  undefined1 local_11;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  piVar4 = param_2;
  local_8 = 0xffffffff;
  uStack_c = 0x516848;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  if (*(char *)((int)param_2 + 0x49) != '\0') {
    local_20 = 0xf;
    local_24 = 0;
    local_34 = 0;
    pcVar2 = "invalid map/set<T> iterator";
    do {
      pcVar3 = pcVar2;
      pcVar2 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    ExceptionList = &pvStack_10;
    String_Assign(local_38,(_String_base *)"invalid map/set<T> iterator",(uint)(pcVar3 + -0x52a114))
    ;
    local_8 = 0;
    Level_InitializeFrigistan(local_60,local_38);
    local_60[0] = &PTR_Level_InitializePetrovakia_00531574;
    CRuntime_CxxThrowException(local_60,&DAT_0054f69c);
  }
  local_18 = piVar4;
  Vector_DotProduct((int *)&param_2);
  piVar8 = (int *)*piVar4;
  puVar6 = (uint *)(piVar4 + 2);
  uVar7 = extraout_EDX;
  piVar10 = piVar4;
  if (*(char *)((int)piVar8 + 0x49) == '\0') {
    uVar7 = *puVar6;
    if (*(char *)(uVar7 + 0x49) != '\0') goto LAB_004a5178;
    puVar6 = (uint *)(param_2 + 2);
    piVar10 = param_2;
  }
  piVar8 = (int *)*puVar6;
LAB_004a5178:
  if (piVar10 == piVar4) {
    piVar9 = (int *)piVar4[1];
    uVar12 = CONCAT44(uVar7,piVar9);
    if (*(char *)((int)piVar8 + 0x49) == '\0') {
      piVar8[1] = (int)piVar9;
    }
    if (*(int **)(*(int *)((int)local_1c + 4) + 4) == local_18) {
      *(int **)(*(int *)((int)local_1c + 4) + 4) = piVar8;
    }
    else if ((int *)*piVar9 == local_18) {
      *piVar9 = (int)piVar8;
    }
    else {
      piVar9[2] = (int)piVar8;
    }
    if ((int *)**(int **)((int)local_1c + 4) == local_18) {
      if (*(char *)((int)piVar8 + 0x49) == '\0') {
        uVar12 = Animation_LoadFrame(piVar8);
      }
      uVar7 = (uint)((ulonglong)uVar12 >> 0x20);
      **(undefined4 **)((int)local_1c + 4) = (int)uVar12;
    }
    if (*(int **)(*(int *)((int)local_1c + 4) + 8) == local_18) {
      if (*(char *)((int)piVar8 + 0x49) == '\0') {
        uVar12 = Animation_CheckRare((int)piVar8);
        uVar7 = (uint)((ulonglong)uVar12 >> 0x20);
        *(int *)(*(int *)((int)local_1c + 4) + 8) = (int)uVar12;
      }
      else {
        *(int **)(*(int *)((int)local_1c + 4) + 8) = piVar9;
      }
    }
  }
  else {
    *(int **)(*piVar4 + 4) = piVar10;
    *piVar10 = *piVar4;
    piVar9 = piVar10;
    if (piVar10 != (int *)piVar4[2]) {
      piVar9 = (int *)piVar10[1];
      if (*(char *)((int)piVar8 + 0x49) == '\0') {
        piVar8[1] = (int)piVar9;
      }
      *piVar9 = (int)piVar8;
      *puVar6 = local_18[2];
      *(int **)(local_18[2] + 4) = piVar10;
    }
    if (*(int **)(*(int *)((int)local_1c + 4) + 4) == local_18) {
      *(int **)(*(int *)((int)local_1c + 4) + 4) = piVar10;
    }
    else {
      piVar4 = (int *)local_18[1];
      if ((int *)*piVar4 == local_18) {
        *piVar4 = (int)piVar10;
      }
      else {
        piVar4[2] = (int)piVar10;
      }
    }
    piVar10[1] = local_18[1];
    iVar1 = piVar10[0x12];
    uVar7 = CONCAT31((int3)((uint)local_1c >> 8),(char)local_18[0x12]);
    *(char *)(piVar10 + 0x12) = (char)local_18[0x12];
    *(char *)(local_18 + 0x12) = (char)iVar1;
  }
  if ((char)local_18[0x12] == '\x01') {
    if (piVar8 != *(int **)(*(int *)((int)local_1c + 4) + 4)) {
      do {
        if ((char)piVar8[0x12] != '\x01') break;
        piVar4 = (int *)*piVar9;
        if (piVar8 == piVar4) {
          piVar4 = (int *)piVar9[2];
          if ((char)piVar4[0x12] == '\0') {
            *(undefined1 *)(piVar4 + 0x12) = 1;
            *(undefined1 *)(piVar9 + 0x12) = 0;
            Vector_Project(local_1c,(int)piVar9);
            piVar4 = (int *)piVar9[2];
          }
          if (*(char *)((int)piVar4 + 0x49) == '\0') {
            if ((*(char *)(*piVar4 + 0x48) != '\x01') || (*(char *)(piVar4[2] + 0x48) != '\x01')) {
              if (*(char *)(piVar4[2] + 0x48) == '\x01') {
                *(undefined1 *)(*piVar4 + 0x48) = 1;
                *(undefined1 *)(piVar4 + 0x12) = 0;
                Vector_Angle(local_1c,piVar4);
                piVar4 = (int *)piVar9[2];
              }
              *(char *)(piVar4 + 0x12) = (char)piVar9[0x12];
              *(undefined1 *)(piVar9 + 0x12) = 1;
              *(undefined1 *)(piVar4[2] + 0x48) = 1;
              Vector_Project(local_1c,(int)piVar9);
              uVar7 = extraout_EDX_00;
              break;
            }
LAB_004a532c:
            *(undefined1 *)(piVar4 + 0x12) = 0;
          }
        }
        else {
          if ((char)piVar4[0x12] == '\0') {
            *(undefined1 *)(piVar4 + 0x12) = 1;
            *(undefined1 *)(piVar9 + 0x12) = 0;
            Vector_Angle(local_1c,piVar9);
            piVar4 = (int *)*piVar9;
          }
          if (*(char *)((int)piVar4 + 0x49) == '\0') {
            if ((*(char *)(piVar4[2] + 0x48) == '\x01') && (*(char *)(*piVar4 + 0x48) == '\x01'))
            goto LAB_004a532c;
            if (*(char *)(*piVar4 + 0x48) == '\x01') {
              *(undefined1 *)(piVar4[2] + 0x48) = 1;
              *(undefined1 *)(piVar4 + 0x12) = 0;
              Vector_Project(local_1c,(int)piVar4);
              piVar4 = (int *)*piVar9;
            }
            *(char *)(piVar4 + 0x12) = (char)piVar9[0x12];
            *(undefined1 *)(piVar9 + 0x12) = 1;
            *(undefined1 *)(*piVar4 + 0x48) = 1;
            Vector_Angle(local_1c,piVar9);
            uVar7 = extraout_EDX_01;
            break;
          }
        }
        uVar7 = *(uint *)((int)local_1c + 4);
        bVar11 = piVar9 != *(int **)(uVar7 + 4);
        piVar8 = piVar9;
        piVar9 = (int *)piVar9[1];
      } while (bVar11);
    }
    *(undefined1 *)(piVar8 + 0x12) = 1;
  }
  piVar4 = local_18;
  piVar8 = local_18 + 3;
  Image_ScaleBilinear(local_18 + 10,uVar7);
  if ((uint)piVar4[9] < 0x10) {
    puVar13 = &local_11;
    piVar4[9] = 0xf;
    local_11 = 0;
    piVar4[8] = 0;
    puVar5 = (undefined1 *)String_GetDataPointer((int)piVar8);
    Utility_CopyByte(puVar5,puVar13);
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)local_18,extraout_EDX_03);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX,extraout_EDX_02);
}


