/*
 * Function: String_FindSubstring
 * Address: 004994d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __thiscall String_FindSubstring(void *this,int param_1,char param_2)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  bool bVar4;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  
  if (*(int *)((int)this + 8) == 0) {
    local_10 = 0;
  }
  else {
    local_10 = *(int *)((int)this + 0xc) - *(int *)((int)this + 8);
  }
  bVar4 = false;
  local_8 = 0;
  local_c = 0;
  if (0 < param_1) {
    do {
      uVar1 = *(uint *)((int)this + 0x18);
      iVar2 = (int)(uVar1 + ((int)uVar1 >> 0x1f & 7U)) >> 3;
      if (local_10 <= iVar2) break;
      uVar3 = uVar1 & 0x80000007;
      if ((int)uVar3 < 0) {
        uVar3 = (uVar3 - 1 | 0xfffffff8) + 1;
      }
      bVar4 = (*(byte *)(iVar2 + *(int *)((int)this + 8)) & (byte)(1 << ((byte)uVar3 & 0x1f))) != 0;
      if (bVar4) {
        local_8 = local_8 | 1 << ((byte)local_c & 0x1f);
      }
      local_c = local_c + 1;
      *(uint *)((int)this + 0x18) = uVar1 + 1;
    } while (local_c < param_1);
  }
  if (((param_2 != '\0') && (bVar4)) && (param_1 < 0x20)) {
    do {
      local_8 = local_8 | 1 << ((byte)param_1 & 0x1f);
      param_1 = param_1 + 1;
    } while (param_1 < 0x20);
  }
  return local_8;
}


