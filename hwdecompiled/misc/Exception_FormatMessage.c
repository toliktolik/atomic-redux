/*
 * Function: Exception_FormatMessage
 * Address: 004c31d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Exception_FormatMessage(int *param_1,undefined1 *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  char *pcVar5;
  
  iVar2 = *param_1;
  iVar3 = *(int *)(iVar2 + 0x14);
  if ((iVar3 < 1) || (*(int *)(iVar2 + 0x74) < iVar3)) {
    if ((*(int *)(iVar2 + 0x78) != 0) &&
       ((*(int *)(iVar2 + 0x7c) <= iVar3 && (iVar3 <= *(int *)(iVar2 + 0x80))))) {
      pcVar4 = *(char **)(*(int *)(iVar2 + 0x78) + (iVar3 - *(int *)(iVar2 + 0x7c)) * 4);
      goto LAB_004c320b;
    }
  }
  else {
    pcVar4 = *(char **)(*(int *)(iVar2 + 0x70) + iVar3 * 4);
LAB_004c320b:
    if (pcVar4 != (char *)0x0) goto LAB_004c3217;
  }
  *(int *)(iVar2 + 0x18) = iVar3;
  pcVar4 = (char *)**(undefined4 **)(iVar2 + 0x70);
LAB_004c3217:
  cVar1 = *pcVar4;
  pcVar5 = pcVar4;
  do {
    if (cVar1 == '\0') {
LAB_004c322c:
      Exception_Release(param_2,pcVar4);
      return;
    }
    pcVar5 = pcVar5 + 1;
    if (cVar1 == '%') {
      if (*pcVar5 == 's') {
        Exception_Release(param_2,pcVar4);
        return;
      }
      goto LAB_004c322c;
    }
    cVar1 = *pcVar5;
  } while( true );
}


