/*
 * Function: Math_MaxValue
 * Address: 0044e6e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __fastcall
Math_MaxValue(int param_1,undefined2 param_2,int param_3,void *param_4,char param_5)

{
  undefined4 in_EAX;
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  undefined1 *puVar5;
  char extraout_CL;
  char extraout_CL_00;
  int extraout_ECX;
  undefined4 extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  undefined2 extraout_DX;
  uint extraout_EDX;
  undefined4 extraout_EDX_00;
  int extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  void *pvVar6;
  undefined8 uVar7;
  
  if ((*(char *)(param_1 + 0x491) == '\0') || (param_5 != '\0')) {
    uVar7 = String_AllocateBuffer(param_1,param_2);
    if ((int)uVar7 != 0) {
      Memory_DefragmentHeap(extraout_CL,(int)((ulonglong)uVar7 >> 0x20));
      uVar7 = Memory_CompactHeap(extraout_ECX,extraout_EDX_00);
      uVar4 = (uint)uVar7;
      Memory_DefragmentHeap(extraout_CL_00,(int)((ulonglong)uVar7 >> 0x20));
      puVar5 = (undefined1 *)operator_new(uVar4);
      Memory_GetHeapInfo(extraout_ECX_00,extraout_DX);
      Memory_AllocateBlock(extraout_ECX_01,extraout_EDX_01);
      Image_Rotate((int)param_4,extraout_EDX_02);
      Buffer_InitializeRange((int)param_4,extraout_EDX_03,puVar5,uVar4);
      iVar3 = extraout_ECX_02;
      uVar1 = extraout_EDX_04;
      if ((*(char *)(param_1 + 0x490) != '\0') && (param_5 == '\0')) {
        Threading_TerminateThread(param_1);
        pvVar6 = (void *)(param_1 + 0x4cc);
        BitStream_WriteBits(pvVar6,0,1);
        BitStream_WriteBits(pvVar6,0xf,5);
        BitStream_WriteBits(pvVar6,1,1);
        BitStream_WriteLong(pvVar6,uVar4);
        BitStream_WriteBuffer(pvVar6,(int)puVar5,uVar4);
        iVar3 = extraout_ECX_03;
        uVar1 = extraout_EDX_05;
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar3,uVar1);
    }
    uVar1 = 0;
    if ((*(char *)(param_1 + 0x490) != '\0') && (uVar1 = 0, param_5 == '\0')) {
      Threading_TerminateThread(param_1);
      pvVar6 = (void *)(param_1 + 0x4cc);
      BitStream_WriteBits(pvVar6,0,1);
      BitStream_WriteBits(pvVar6,0xf,5);
      uVar1 = BitStream_WriteBits(pvVar6,0,1);
    }
  }
  else {
    uVar1 = CONCAT31((int3)((uint)in_EAX >> 8),*(char *)(param_1 + 0x492));
    if (*(char *)(param_1 + 0x492) == '\0') {
      Threading_WaitForThread(param_1);
      *(undefined1 *)(param_1 + 0x4fc) = 1;
      pvVar6 = (void *)(param_1 + 0x4cc);
      uVar1 = String_FindSubstring(pvVar6,1,'\0');
      if (uVar1 != 0) {
        uVar1 = Array_Initialize((int)pvVar6);
        uVar2 = Image_Rotate((int)param_4,extraout_EDX);
        if (0 < (int)uVar1) {
          do {
            iVar3 = String_ToLowerCase((int)pvVar6);
            uVar2 = BitStream_WriteByte(param_4,(byte)iVar3);
            uVar1 = uVar1 - 1;
          } while (uVar1 != 0);
          return CONCAT31((int3)((uint)uVar2 >> 8),1);
        }
        return CONCAT31((int3)((uint)uVar2 >> 8),1);
      }
    }
  }
  return uVar1 & 0xffffff00;
}


