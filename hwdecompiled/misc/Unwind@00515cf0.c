/*
 * Function: Unwind@00515cf0
 * Address: 00515cf0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00515cfb) overlaps instruction at (ram,0x00515cf5)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00515c53) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00515cf0(int param_1,int param_2)

{
  int iVar1;
  byte *pbVar2;
  byte bVar3;
  byte bVar4;
  int iVar5;
  undefined4 in_EAX;
  uint uVar6;
  byte *pbVar7;
  uint *unaff_EBX;
  int iVar8;
  byte *unaff_EBP;
  byte *unaff_ESI;
  byte *pbVar9;
  byte *unaff_EDI;
  undefined2 in_SS;
  bool bVar10;
  bool bVar11;
  byte in_AF;
  char in_SF;
  char in_OF;
  float10 in_ST0;
  byte *pbStack_24;
  
  if (in_OF == in_SF) {
    do {
      pbVar9 = unaff_EDI;
      pbVar7 = unaff_ESI;
      *pbVar9 = *pbVar7;
      pbVar2 = (byte *)((int)*(undefined6 *)(pbVar7 + 1) * 5);
      *pbVar2 = *pbVar2 & (byte)((uint)param_2 >> 8);
      unaff_EBP = unaff_EBP + 1;
      unaff_ESI = pbVar7 + 1;
      unaff_EDI = pbVar9 + 1;
    } while (-1 < (int)unaff_EBP);
    in_ST0 = in_ST0 / (float10)*(int *)(pbVar7 + 0x43);
    LOCK();
    iVar1 = *(int *)(pbVar7 + -0x1f);
    *(uint **)(pbVar7 + -0x1f) = unaff_EBX;
    UNLOCK();
    unaff_EBX = (uint *)(iVar1 + 1);
    out(0x94,_DAT_19d79ec2);
    iVar5 = in(0x6e);
    bVar10 = 0xd4 < *(byte *)(iVar1 + -0x65);
    pbVar7 = (byte *)CONCAT31(0x130b3a,-0x2c - *(byte *)(iVar1 + -0x65));
    bVar3 = *pbVar7 - (byte)unaff_EBX;
    bVar11 = *pbVar7 < (byte)unaff_EBX || bVar3 < bVar10;
    *pbVar7 = bVar3 - bVar10;
    bVar3 = (byte)iVar5;
    pbVar9[1] = bVar3;
    iVar8 = (int)*(undefined6 *)(pbVar7 + iVar5 + 0x69a78de5);
    unaff_ESI = (byte *)0xf791dbd6;
    out(DAT_f791dbd5,(short)param_2);
    out(0x5c,CONCAT31((int3)((uint)iVar5 >> 8),(bVar3 - 2) - bVar11));
    pbVar2 = pbVar9 + 2;
    if (SBORROW1(bVar3,'\x02') == SBORROW1(bVar3 - 2,bVar11)) goto Unwind_00515d50_3;
    iVar8 = *(int *)(param_1 + -0x6af50d1a) * 0x435a549a;
    iRamb460ad7d = iRamb460ad7d - (int)(pbVar9 + 2);
    unaff_EBP = (byte *)*(undefined6 *)(iVar1 + -0x77f7e550);
    param_2 = param_1;
    goto Unwind_00515cfb;
  }
  iVar8 = CONCAT22((short)((uint)in_EAX >> 0x10),CONCAT11(0xc4,(char)in_EAX));
  *(int *)(unaff_EDI + 0x5f88081a) = *(int *)(unaff_EDI + 0x5f88081a) + 0x4b;
  while( true ) {
    *unaff_EBX = *unaff_EBX ^ (uint)unaff_EBX;
    if (-1 < (int)*unaff_EBX) break;
    *(int *)unaff_EDI = *(int *)unaff_EDI << 1;
    *(double *)(unaff_EBP + 0x62) = (double)in_ST0;
    unaff_EDI[0x71c55f10] = unaff_EDI[0x71c55f10] + 1;
    in_ST0 = (float10)*(short *)((int)unaff_EBX + -0x5d);
    pbVar7 = (byte *)(param_1 + -1);
    in((short)param_2);
    param_1 = param_2;
    pbVar2 = unaff_EBP;
Unwind_00515d50_3:
    pbStack_24 = pbVar2;
    *(uint *)(unaff_ESI + -0x1f) = *(uint *)(unaff_ESI + -0x1f) | (uint)unaff_ESI;
    uVar6 = in((short)param_1);
    unaff_EBP = (byte *)(uVar6 ^ 0x54);
    pbVar7 = pbVar7 + -1;
    param_2 = param_1 + 1;
    if (pbVar7 == (byte *)0x0) {
      iVar1 = *(int *)unaff_EBP;
      out(0x58,(char)unaff_EBP);
      bVar3 = in((short)(param_1 + 1));
      *pbStack_24 = bVar3;
      *(undefined4 *)(pbStack_24 + 1) =
           *(undefined4 *)CONCAT22((short)((uint)unaff_ESI >> 0x10),(short)unaff_EBP);
      *(char *)(iVar8 + -0x7c) = *(char *)(iVar8 + -0x7c) + (char)unaff_EBX + (iVar1 != 0);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
Unwind_00515cfb:
    param_1 = CONCAT22((short)((uint)pbVar7 >> 0x10),CONCAT11(0x95,(char)pbVar7));
    unaff_EDI = pbStack_24;
  }
  bVar3 = 9 < ((byte)unaff_EBP & 0xf) | in_AF;
  bVar4 = (byte)unaff_EBP + bVar3 * -6;
  *unaff_EDI = *unaff_EDI & (byte)param_1;
  uVar6 = CONCAT31((int3)((uint)unaff_EBP >> 8),bVar4 + (0x9f < bVar4 | bVar3 * (bVar4 < 6)) * -0x60
                  ) ^ 0x162a6309;
  if (uVar6 != 0) {
    uVar6 = uVar6 - 1;
    *unaff_EDI = (byte)uVar6;
    if ((POPCOUNT(uVar6 & 0xff) & 1U) != 0) {
      bVar3 = *(byte *)((int)unaff_EBX + (uVar6 & 0xff));
      unaff_ESI[0x5301ddb7] = unaff_ESI[0x5301ddb7] & bVar3;
      out(1,bVar3);
      do {
                    /* WARNING: Do nothing block with infinite loop */
      } while( true );
    }
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  if (param_1 != 1 && ((uint)unaff_EBX & (uint)(unaff_ESI + -1)) == 0) {
    *(undefined2 *)(unaff_EBX + -1) = in_SS;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  out(unaff_ESI[-1],(short)param_2);
  *(int *)(param_1 + 0x79) = iVar8;
  return;
}


