/*
 * Function: Database_ProcessTransaction
 * Address: 0047e349
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Database_ProcessTransaction(void)

{
  int iVar1;
  uint uVar2;
  ios_base *this;
  int unaff_EBP;
  int *unaff_ESI;
  
  uVar2 = *(uint *)(unaff_EBP + -0x14);
  *(undefined4 *)(unaff_EBP + -4) = 0;
  if (((uVar2 & 2) == 0) && (0x7fffffff < *(int *)(unaff_EBP + -0x1c))) {
    **(int **)(unaff_EBP + 8) = *(int *)(unaff_EBP + -0x1c);
  }
  else {
    uVar2 = uVar2 | 2;
    *(uint *)(unaff_EBP + -0x14) = uVar2;
  }
  this = (ios_base *)(*(int *)(*unaff_ESI + 4) + (int)unaff_ESI);
  if (uVar2 != 0) {
    uVar2 = *(uint *)(this + 4) | uVar2;
    if (*(int *)(this + 0x28) == 0) {
      uVar2 = uVar2 | 4;
    }
    std::ios_base::clear(this,uVar2,false);
  }
  iVar1 = *(int *)(*(int *)(**(int **)(unaff_EBP + -0x34) + 4) + 0x28 +
                  (int)*(int **)(unaff_EBP + -0x34));
  *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
  if (iVar1 != 0) {
    Threading_LeaveCriticalSectionFromPointer((undefined4 *)(iVar1 + 4));
  }
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  return;
}


