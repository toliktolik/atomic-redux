/*
 * Function: Stream_ErrorHandlerCleanup
 * Address: 00414875
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Stream_ErrorHandlerCleanup(void)

{
  int iVar1;
  uint uVar2;
  ios_base *this;
  undefined4 *extraout_EDX;
  undefined4 *puVar3;
  int unaff_EBP;
  int *unaff_EDI;
  
  iVar1 = *unaff_EDI;
  puVar3 = *(undefined4 **)(unaff_EBP + -0x18);
  *(undefined4 *)(unaff_EBP + -4) = 0;
  this = (ios_base *)(*(int *)(iVar1 + 4) + (int)unaff_EDI);
  if (puVar3 != (undefined4 *)0x0) {
    uVar2 = *(uint *)(this + 4) | (uint)puVar3;
    if (*(int *)(this + 0x28) == 0) {
      uVar2 = uVar2 | 4;
    }
    std::ios_base::clear(this,uVar2,false);
    puVar3 = extraout_EDX;
  }
  *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
  Memory_AllocateParticleSystem((int *)(unaff_EBP + -0x2c),puVar3);
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  return;
}


