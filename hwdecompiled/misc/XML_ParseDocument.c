/*
 * Function: XML_ParseDocument
 * Address: 004a71e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall XML_ParseDocument(void *this,void *param_1)

{
  uint uVar1;
  char cVar2;
  char *pcVar3;
  _String_base *p_Var4;
  int extraout_ECX;
  char *pcVar5;
  int extraout_ECX_00;
  int extraout_ECX_01;
  undefined4 extraout_ECX_02;
  int extraout_ECX_03;
  int extraout_ECX_04;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int iVar6;
  uint uVar7;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  byte *****pppppbVar8;
  byte *pbVar9;
  bool bVar10;
  bool bVar11;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff24;
  undefined4 *in_stack_ffffff28;
  undefined1 local_bc [4];
  byte ****local_b8 [4];
  char *local_a8;
  uint local_a4;
  undefined1 local_6c [4];
  uint local_68;
  undefined4 local_58;
  uint local_54;
  _String_base local_50 [4];
  uint local_4c;
  undefined4 local_3c;
  uint local_38;
  void *local_34;
  _String_base local_30 [4];
  uint local_2c;
  uint local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x515df3;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_34 = this;
  if (*(int *)((int)param_1 + 4) != 0) {
    ExceptionList = &local_10;
    Background_ProcessGroundLayer
              (*(int *)((int)param_1 + 8),(uint)param_1,*(int *)((int)param_1 + 4),
               *(int *)((int)param_1 + 8));
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX);
  }
  ExceptionList = &local_10;
  *(undefined4 *)((int)param_1 + 4) = 0;
  *(undefined4 *)((int)param_1 + 8) = 0;
  *(undefined4 *)((int)param_1 + 0xc) = 0;
  WeaponBomb_ProcessBurstingRocket((int)&stack0xffffff24);
  local_8 = 0;
  cVar2 = XML_ParseDocument(*(int *)((int)this + 8),extraout_EDX_00,(int *)&stack0xffffff24);
  do {
    if (cVar2 == '\0') {
LAB_004a738f:
      local_8 = 0xffffffff;
      PowerUp_ProcessNuke((int)&stack0xffffff24);
LAB_004a74db:
      ExceptionList = local_10;
      Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff24,in_stack_ffffff28);
      return;
    }
    if (in_stack_ffffff24 == (undefined4 *)0x1) {
      pcVar5 = "String";
      do {
        pcVar3 = pcVar5;
        pcVar5 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      pcVar3 = pcVar3 + -0x535a90;
      if (local_a8 == (char *)0x0) {
LAB_004a72da:
        if (pcVar3 <= local_a8) {
          uVar7 = (uint)(local_a8 != pcVar3);
          if (uVar7 == 0) {
            local_18 = 0xf;
            uVar1 = local_2c >> 8;
            local_2c = CONCAT31((int3)uVar1,local_a8 != pcVar3);
            local_8._1_3_ = (undefined3)((uint)local_8 >> 8);
            local_8 = CONCAT31(local_8._1_3_,1);
            local_1c = uVar7;
            cVar2 = XML_ParseElement(this,local_30);
            if (cVar2 != '\0') {
              Craft_ProcessCruise(param_1,(uint)local_30);
              if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
                System_ShutdownHandler(extraout_ECX_01,extraout_EDX_01);
              }
              local_18 = 0xf;
              local_1c = 0;
              local_2c = local_2c & 0xffffff00;
              goto LAB_004a7358;
            }
            if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
              System_ShutdownHandler(extraout_ECX_00,local_2c);
            }
            local_18 = 0xf;
            local_1c = 0;
            local_2c = local_2c & 0xffffff00;
            goto LAB_004a738f;
          }
        }
      }
      else {
        pcVar5 = local_a8;
        if (pcVar3 <= local_a8) {
          pcVar5 = pcVar3;
        }
        pppppbVar8 = (byte *****)local_b8[0];
        if (local_a4 < 0x10) {
          pppppbVar8 = local_b8;
        }
        bVar10 = false;
        iVar6 = 0;
        bVar11 = true;
        pbVar9 = (byte *)"String";
        do {
          if (pcVar5 == (char *)0x0) break;
          pcVar5 = pcVar5 + -1;
          bVar10 = *(byte *)pppppbVar8 < *pbVar9;
          bVar11 = *(byte *)pppppbVar8 == *pbVar9;
          pppppbVar8 = (byte *****)((int)pppppbVar8 + 1);
          pbVar9 = pbVar9 + 1;
        } while (bVar11);
        if (!bVar11) {
          iVar6 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
        }
        this = local_34;
        if (iVar6 == 0) goto LAB_004a72da;
      }
      p_Var4 = Survival_LoadConfiguration
                         (local_50,(_String_base *)"Invalid Section \'",(int)local_bc);
      local_8._0_1_ = 2;
      p_Var4 = Intel_DisplayPopulationData
                         (extraout_ECX_02,(uint)local_30,local_30,p_Var4,
                          (_String_base *)&DAT_00531760);
      local_8 = CONCAT31(local_8._1_3_,3);
      Image_Destructor(this,p_Var4);
      if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_03,extraout_EDX_03);
      }
      local_18 = 0xf;
      local_1c = 0;
      local_2c = local_2c & 0xffffff00;
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_4c,extraout_EDX_03);
      }
      goto LAB_004a738f;
    }
    if (in_stack_ffffff24 == (undefined4 *)0x3) {
      p_Var4 = Survival_LoadConfiguration
                         (local_50,(_String_base *)"Element Not Expected \'",(int)local_bc);
      local_8._0_1_ = 4;
      p_Var4 = Intel_DisplayPopulationData
                         (local_6c,extraout_EDX_04,(_String_base *)local_6c,p_Var4,
                          (_String_base *)&DAT_00531760);
      local_8 = CONCAT31(local_8._1_3_,5);
      Image_Destructor(this,p_Var4);
      if (0xf < local_54) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_04,local_68);
      }
      local_54 = 0xf;
      local_58 = 0;
      local_68 = local_68 & 0xffffff00;
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_04,extraout_EDX_05);
      }
      local_38 = 0xf;
      local_3c = 0;
      local_4c = local_4c & 0xffffff00;
      goto LAB_004a738f;
    }
    if (in_stack_ffffff24 == (undefined4 *)0x2) {
      local_8 = 0xffffffff;
      PowerUp_ProcessNuke((int)&stack0xffffff24);
      goto LAB_004a74db;
    }
LAB_004a7358:
    local_8 = 0xffffffff;
    PowerUp_ProcessNuke((int)&stack0xffffff24);
    WeaponBomb_ProcessBurstingRocket((int)&stack0xffffff24);
    local_8 = 0;
    cVar2 = XML_ParseDocument(*(int *)((int)this + 8),extraout_EDX_02,(int *)&stack0xffffff24);
  } while( true );
}


