/*
 * Function: PNG_CompressImageData
 * Address: 004c3880
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl PNG_CompressImageData(uint param_1)

{
  uint uVar1;
  uint extraout_ECX;
  byte *extraout_EDX;
  char *pcVar2;
  
  if (*(uint *)(param_1 + 0xe4) < *(uint *)(param_1 + 0xd0)) {
    while( true ) {
      uVar1 = PNG_WriteIEND((int *)(param_1 + 0x74),2);
      if (uVar1 != 0) {
        pcVar2 = *(char **)(param_1 + 0x8c);
        if (pcVar2 == (char *)0x0) {
          pcVar2 = "zlib error";
        }
        CPU_Instruction20(extraout_ECX,extraout_EDX,param_1,pcVar2);
      }
      if (*(int *)(param_1 + 0x84) != 0) break;
      ImageDecoder_ReadScanline(param_1,*(byte **)(param_1 + 0xac),*(uint *)(param_1 + 0xb0));
      *(undefined4 *)(param_1 + 0x80) = *(undefined4 *)(param_1 + 0xac);
      *(undefined4 *)(param_1 + 0x84) = *(undefined4 *)(param_1 + 0xb0);
    }
    if (*(int *)(param_1 + 0xb0) != *(int *)(param_1 + 0x84)) {
      ImageDecoder_ReadScanline
                (param_1,*(byte **)(param_1 + 0xac),
                 *(int *)(param_1 + 0xb0) - *(int *)(param_1 + 0x84));
      *(undefined4 *)(param_1 + 0x80) = *(undefined4 *)(param_1 + 0xac);
      *(undefined4 *)(param_1 + 0x84) = *(undefined4 *)(param_1 + 0xb0);
    }
    *(undefined4 *)(param_1 + 0x154) = 0;
    PNG_ReadPLTE(param_1);
  }
  return;
}


