/*
 * Function: PixelFormat_GetPixelSize
 * Address: 004c0550
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl PixelFormat_GetPixelSize(uint *param_1,int param_2,int param_3,int param_4,int param_5)

{
  byte bVar1;
  int iVar2;
  undefined1 *puVar3;
  uint uVar4;
  uint uVar5;
  byte *pbVar6;
  byte *pbVar7;
  
  uVar5 = *param_1;
  if ((char)param_1[2] == '\x03') {
    bVar1 = *(byte *)((int)param_1 + 9);
    if (bVar1 < 8) {
      if (bVar1 == 1) {
        pbVar6 = (byte *)((uVar5 - 1) + param_2);
        pbVar7 = (byte *)((uVar5 - 1 >> 3) + param_2);
        iVar2 = 7 - (uVar5 - 1 & 7);
        for (uVar4 = uVar5; uVar4 != 0; uVar4 = uVar4 - 1) {
          *pbVar6 = *pbVar7 >> ((byte)iVar2 & 0x1f) & 1;
          if (iVar2 == 7) {
            iVar2 = 0;
            pbVar7 = pbVar7 + -1;
          }
          else {
            iVar2 = iVar2 + 1;
          }
          pbVar6 = pbVar6 + -1;
        }
      }
      else if (bVar1 == 2) {
        pbVar6 = (byte *)((uVar5 - 1) + param_2);
        pbVar7 = (byte *)((uVar5 - 1 >> 2) + param_2);
        iVar2 = (3 - (uVar5 - 1 & 3)) * 2;
        for (uVar4 = uVar5; uVar4 != 0; uVar4 = uVar4 - 1) {
          *pbVar6 = *pbVar7 >> ((byte)iVar2 & 0x1f) & 3;
          if (iVar2 == 6) {
            iVar2 = 0;
            pbVar7 = pbVar7 + -1;
          }
          else {
            iVar2 = iVar2 + 2;
          }
          pbVar6 = pbVar6 + -1;
        }
      }
      else if (bVar1 == 4) {
        pbVar6 = (byte *)((uVar5 - 1) + param_2);
        pbVar7 = (byte *)((uVar5 - 1 >> 1) + param_2);
        iVar2 = (uVar5 & 1) << 2;
        for (uVar4 = uVar5; uVar4 != 0; uVar4 = uVar4 - 1) {
          *pbVar6 = *pbVar7 >> ((byte)iVar2 & 0x1f) & 0xf;
          if (iVar2 == 4) {
            iVar2 = 0;
            pbVar7 = pbVar7 + -1;
          }
          else {
            iVar2 = iVar2 + 4;
          }
          pbVar6 = pbVar6 + -1;
        }
      }
      *(undefined1 *)((int)param_1 + 9) = 8;
      *(undefined1 *)((int)param_1 + 0xb) = 8;
      param_1[1] = uVar5;
    }
    if (*(char *)((int)param_1 + 9) == '\b') {
      pbVar6 = (byte *)((uVar5 - 1) + param_2);
      if (param_4 != 0) {
        uVar4 = uVar5 * 4;
        puVar3 = (undefined1 *)((uVar4 - 1) + param_2);
        for (; uVar5 != 0; uVar5 = uVar5 - 1) {
          if ((int)(uint)*pbVar6 < param_5) {
            *puVar3 = *(undefined1 *)((uint)*pbVar6 + param_4);
          }
          else {
            *puVar3 = 0xff;
          }
          puVar3[-1] = *(undefined1 *)((uint)*pbVar6 * 3 + 2 + param_3);
          puVar3[-2] = *(undefined1 *)((uint)*pbVar6 * 3 + 1 + param_3);
          puVar3[-3] = *(undefined1 *)(param_3 + (uint)*pbVar6 * 3);
          puVar3 = puVar3 + -4;
          pbVar6 = pbVar6 + -1;
        }
        param_1[1] = uVar4;
        *(undefined1 *)((int)param_1 + 0xb) = 0x20;
        *(undefined1 *)(param_1 + 2) = 6;
        *(undefined1 *)((int)param_1 + 10) = 4;
        *(undefined1 *)((int)param_1 + 9) = 8;
        return;
      }
      uVar4 = uVar5 * 3;
      puVar3 = (undefined1 *)((uVar4 - 1) + param_2);
      for (; uVar5 != 0; uVar5 = uVar5 - 1) {
        *puVar3 = *(undefined1 *)((uint)*pbVar6 * 3 + 2 + param_3);
        puVar3[-1] = *(undefined1 *)((uint)*pbVar6 * 3 + 1 + param_3);
        puVar3[-2] = *(undefined1 *)(param_3 + (uint)*pbVar6 * 3);
        puVar3 = puVar3 + -3;
        pbVar6 = pbVar6 + -1;
      }
      *(undefined1 *)((int)param_1 + 0xb) = 0x18;
      *(undefined1 *)(param_1 + 2) = 2;
      *(undefined1 *)((int)param_1 + 10) = 3;
      *(undefined1 *)((int)param_1 + 9) = 8;
      param_1[1] = uVar4;
    }
  }
  return;
}


