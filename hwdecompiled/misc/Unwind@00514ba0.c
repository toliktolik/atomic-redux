/*
 * Function: Unwind@00514ba0
 * Address: 00514ba0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dd2) overlaps instruction at (ram,0x00514dce)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00514d0a) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514ba0(char *param_1,char *param_2)

{
  byte *pbVar1;
  char cVar2;
  undefined1 uVar3;
  undefined1 *puVar4;
  uint uVar5;
  bool bVar6;
  code *pcVar7;
  undefined6 uVar8;
  byte bVar9;
  ushort uVar10;
  undefined4 in_EAX;
  char *pcVar11;
  uint uVar12;
  uint uVar13;
  undefined1 *puVar15;
  uint *extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar17;
  undefined2 uVar18;
  char *extraout_EDX;
  undefined2 *puVar19;
  char *pcVar20;
  undefined4 *puVar21;
  undefined4 *puVar22;
  undefined1 *puVar23;
  byte *unaff_EBP;
  undefined4 uVar24;
  char *unaff_ESI;
  char *pcVar25;
  int *piVar27;
  byte *pbVar28;
  char *unaff_EDI;
  char *pcVar29;
  char *pcVar30;
  char *pcVar31;
  byte *pbVar32;
  uint *puVar33;
  uint *puVar34;
  undefined2 uVar35;
  undefined2 in_SS;
  byte bVar36;
  bool bVar37;
  byte in_AF;
  bool bVar38;
  bool bVar39;
  byte bVar40;
  bool bVar41;
  unkbyte10 in_ST7;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar42;
  char *pcVar43;
  undefined1 auStack_5efb [17498];
  char *pcStack_1aa1;
  char acStack_4d [21];
  undefined1 *puStack_38;
  char *pcStack_24;
  char *pcStack_20;
  undefined4 *puStack_1c;
  undefined1 *puStack_18;
  char *pcStack_14;
  char *pcStack_10;
  char *pcStack_c;
  char *pcStack_8;
  byte bStack_4;
  byte bStack_3;
  undefined2 uStack_2;
  char *pcVar14;
  undefined3 uVar16;
  char *pcVar26;
  
  bVar40 = 0;
  do {
    puVar33 = (uint *)(param_2 + -0x15);
    uVar13 = *puVar33;
    *puVar33 = (int)*puVar33 >> 1;
    uVar5 = *puVar33;
    bStack_4 = (byte)param_2;
    uStack_2 = (undefined2)((uint)param_2 >> 0x10);
    pcVar31 = (char *)CONCAT22(uStack_2,CONCAT11(0x6d,bStack_4));
    uVar12 = (uint)bVar40;
    *unaff_EDI = *unaff_ESI;
    bVar40 = 1;
    if ((POPCOUNT(uVar5 & 0xff) & 1U) != 0) {
      DAT_28bdda20 = DAT_28bdda20 & bStack_4;
      pcRamf775c62f = param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    LOCK();
    cVar2 = *param_2;
    *param_2 = (char)((uint)param_1 >> 8);
    param_1 = (char *)CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(cVar2,(char)param_1));
    UNLOCK();
    pcVar20 = param_2 + -1;
    pcVar11 = (char *)((CONCAT22((short)((uint)in_EAX >> 0x10),
                                 (ushort)(byte)((char)in_EAX + (char)((uint)in_EAX >> 8) * -0x5c)) +
                       0x762820d6) - (uint)((uVar13 & 1) != 0));
    *(int *)(param_1 + 0x4108dc58) = *(int *)(param_1 + 0x4108dc58) + 0x5f;
    pcVar26 = (char *)0x9cea6bd8;
    pcVar30 = unaff_EDI + uVar12 * -2 + 1;
    while( true ) {
      pcVar29 = pcVar30;
      pcVar25 = pcVar26 + -1;
      bVar9 = (byte)pcVar11;
      uStack_2 = (undefined2)((uint)pcVar11 >> 0x10);
      uVar16 = (undefined3)(CONCAT22(uStack_2,CONCAT11(bVar9 / 0x66,bVar9)) >> 8);
      uVar10 = (ushort)CONCAT31(uVar16,bVar9 % 0x66);
      if (uVar10 != 0) break;
      bStack_4 = 0x26;
      bStack_3 = bVar9 / 0x66;
      pcVar30 = pcVar29 + -4;
      *(uint *)pcVar29 = CONCAT31(uVar16,0x26);
      pcVar11 = (char *)(CONCAT31((int3)(CONCAT22(uStack_2,0x9026) >> 8),0x26) | 0x25);
      *(uint *)(pcVar20 + -0xf) = *(uint *)(pcVar20 + -0xf) | (uint)pcVar11;
      pcStack_8 = pcVar11;
      pcStack_c = param_1;
      pcStack_10 = pcVar31;
      pcStack_14 = pcVar20;
      puStack_18 = &bStack_4;
      puStack_1c = (undefined4 *)unaff_EBP;
      pcStack_20 = pcVar25;
      pcStack_24 = pcVar30;
      uVar12 = (int)pcVar30 - (int)pcVar20;
      bVar37 = (POPCOUNT(uVar12 & 0xff) & 1U) == 0;
      if (bVar37) {
        pcVar7 = (code *)swi(0x53);
        (*pcVar7)();
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      pcVar31 = (char *)((int)unaff_EBP + 0x7bc92438);
      bVar9 = (byte)param_1 & 0x1f;
      cVar2 = *pcVar31;
      *pcVar31 = *pcVar31 << bVar9;
      bVar6 = ((uint)param_1 & 0x1f) != 0;
      bVar36 = !bVar6 && pcVar30 < pcVar20 || bVar6 && (char)(cVar2 << bVar9 - 1) < '\0';
      bVar41 = bVar9 != 1 && SBORROW4((int)pcVar30,(int)pcVar20) ||
               bVar9 == 1 && (bool)bVar36 != *pcVar31 < '\0';
      bVar6 = ((uint)param_1 & 0x1f) != 0;
      bVar39 = !bVar6 && (int)uVar12 < 0 || bVar6 && *pcVar31 < '\0';
      bVar38 = !bVar6 && uVar12 == 0 || bVar6 && *pcVar31 == '\0';
      bVar37 = !bVar6 && bVar37 || bVar6 && (POPCOUNT(*pcVar31) & 1U) == 0;
      pcVar31 = pcVar30;
code_r0x00514c19:
      pcVar26 = pcVar25;
      if (!bVar38 && bVar41 == bVar39) {
        pbVar28 = unaff_EBP;
        if (bVar41) {
          piVar27 = (int *)CONCAT22((short)((uint)pcVar11 >> 0x10),CONCAT11(0xa3,(char)pcVar11));
          if (!bVar38 && bVar41 == bVar39) {
            *piVar27 = *piVar27 >> 1;
            return;
          }
          *(int *)(pcVar29 + -0x2e) = *(int *)(pcVar29 + -0x2e) - (int)param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        do {
          pcVar14 = param_1;
          pcVar26 = pcVar11;
          if (!bVar37) {
            pcVar25 = (char *)*(undefined6 *)(pcVar31 + 0x7b);
            goto code_r0x00514c8f;
          }
          puVar33 = (uint *)(pcVar26 + 0x5b25e658);
          uVar12 = *puVar33;
          uVar13 = *puVar33;
          *puVar33 = (uint)(&stack0x00000000 + uVar13 + bVar36);
          *pcVar26 = *pcVar26 + -0x42 +
                     (CARRY4(uVar12,(uint)&stack0x00000000) ||
                     CARRY4((uint)(&stack0x00000000 + uVar13),(uint)bVar36));
          pcVar31 = (char *)(*(int *)(pcVar14 + 0x12) * -0x32);
          pbVar32 = &bStack_4;
          unaff_EBP = &bStack_4;
          bStack_4 = (byte)pbVar28;
          bStack_3 = (byte)((uint)pbVar28 >> 8);
          uStack_2 = (undefined2)((uint)pbVar28 >> 0x10);
          cVar2 = '\f';
          do {
            pbVar28 = (byte *)((int)pbVar28 + -4);
            pbVar32 = (byte *)((int)pbVar32 + -4);
            *(undefined4 *)pbVar32 = *(undefined4 *)pbVar28;
            cVar2 = cVar2 + -1;
          } while ('\0' < cVar2);
          puStack_38 = &bStack_4;
          pcVar20 = (char *)CONCAT31((int3)((uint)pcVar20 >> 8),
                                     (char)pcVar20 - acStack_4d[(int)pcVar31]);
          param_1 = (char *)CONCAT22((short)((uint)pcVar14 >> 0x10),CONCAT11(0x38,(char)pcVar14));
          bVar36 = false;
          bVar41 = false;
          pcVar11 = (char *)((uint)pcVar26 & 0xffffffc9);
          bVar39 = false;
          bVar38 = ((uint)pcVar26 & 0xc9) == 0;
          bVar37 = (POPCOUNT((byte)pcVar26 & 0xc9) & 1U) == 0;
          do {
            pcStack_1aa1 = pcVar26;
            if (bVar37) goto code_r0x00514c19;
            param_1 = param_1 + -1;
            pcVar14 = pcVar25;
            if (param_1 == (char *)0x0) {
              out(*(undefined4 *)pcVar25,(short)pcVar31);
              pcVar14 = pcVar43;
            }
            pcVar25 = pcVar14 + -1;
            out(*pcVar14,(short)pcVar31);
          } while (!bVar38);
          uVar12 = (uint)pcVar26 & 0x27f02f00;
          bVar37 = true;
          uVar13 = CONCAT31((int3)(uVar12 >> 8),in_AF * '\x06') & 0xffffff0f;
          pcVar14 = (char *)CONCAT22((short)(uVar13 >> 0x10),
                                     CONCAT11((char)(uVar12 >> 8) + in_AF,(char)uVar13));
          pcVar11 = pcVar14;
          pbVar28 = &bStack_4;
          bVar36 = in_AF;
          pcVar43 = pcVar30;
        } while (uVar12 == 0);
        pbVar28 = (byte *)((uint)&bStack_4 | (uint)pcVar14);
code_r0x00514c8f:
        uVar8 = *(undefined6 *)(pcVar14 + 0x1b5c9807);
        uVar35 = (undefined2)((uint6)uVar8 >> 0x20);
        out(0xec,pcVar14);
        pcVar11 = pcVar25 + 0x325f871d;
        cVar2 = *pcVar11;
        *pcVar11 = *pcVar11 - (char)pcVar31;
        piVar27 = (int *)(pcVar25 + -1);
        out(*pcVar25,(short)pcVar31);
        pcVar7 = (code *)swi(4);
        if (SBORROW1(cVar2,(char)pcVar31)) {
          (*pcVar7)();
          pcVar31 = extraout_EDX;
        }
        uVar24 = *(undefined4 *)pbVar28;
        bStack_4 = 0x1b;
        bStack_3 = 0x4d;
        uStack_2 = 0x51;
        uVar42 = (*(code *)(pcVar31 + 0x1d))();
        pcVar31 = pcVar29 + -5;
        bVar9 = (byte)uVar42;
        if (SBORROW1(bVar9,*pcVar30)) {
          uVar12 = CONCAT22((short)((uint6)uVar8 >> 0x10),
                            CONCAT11((char)((uint6)uVar8 >> 8) +
                                     *(char *)((ulonglong)uVar42 >> 0x20),(char)uVar8));
          pbVar32 = (byte *)(pcVar29 + -10);
          *(int *)(pcVar29 + -6) = *piVar27;
          pbVar28 = (byte *)(uVar12 - 0x2e);
          *pbVar28 = *pbVar28 << 1 | *pbVar28 >> 7;
          bVar40 = *pbVar28;
          cVar2 = *(char *)((int)uVar42 + -0x2a0e4518);
          *extraout_ECX = *extraout_ECX ^ uVar12;
          bStack_4 = (byte)in_SS;
          bStack_3 = (byte)((ushort)in_SS >> 8);
          bVar40 = 0xf < (byte)(bVar9 + cVar2 + ((bVar40 & 1) != 0));
          *pbVar32 = *pbVar32 - 1;
          ffree(in_ST7);
          pcStack_8 = (char *)0x514d44;
          uVar42 = func_0x11b54bd3();
          puVar19 = (undefined2 *)((ulonglong)uVar42 >> 0x20);
          uVar12 = (uint)bVar40;
          pcVar31 = pcVar25 + 0x29f53f8d;
          pbVar28 = (byte *)(pcVar31 + uVar12);
          uVar18 = (undefined2)((ulonglong)uVar42 >> 0x20);
          if ((SCARRY4((int)(pcVar25 + -6),0x29f53f93) != SCARRY4((int)pcVar31,uVar12)) !=
              (int)pbVar28 < 0) {
            bVar40 = 9 < ((byte)uVar42 & 0xf) | in_AF;
            bVar9 = (byte)uVar42 + bVar40 * -6;
            *(uint *)(puVar19 + -0x3fbcdc63) =
                 *(uint *)(puVar19 + -0x3fbcdc63) ^
                 CONCAT31((int3)((ulonglong)uVar42 >> 8),
                          bVar9 + (0x9f < bVar9 |
                                  ((char *)0xd60ac06c < pcVar25 + -6 || CARRY4((uint)pcVar31,uVar12)
                                  ) | bVar40 * (bVar9 < 6)) * -0x60 +
                          (char)((ulonglong)uVar42 >> 8) * '~' + 'P') & 0xffff00ff;
            _DAT_a21d64f1 = in(uVar18);
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          pbVar1 = (byte *)((int)puVar19 + 0x1b);
          bVar40 = (byte)extraout_ECX_00 & 7;
          *pbVar1 = *pbVar1 << bVar40 | *pbVar1 >> 8 - bVar40;
          out(0xfe,(int)uVar42);
          if (*pbVar28 >= *pbVar32) {
            out(uVar18,(char)*(undefined4 *)pbVar28);
            *(uint *)(pbVar28 + (int)&pcStack_8 + (*pbVar28 < *pbVar32)) =
                 *(uint *)(pbVar28 + (int)&pcStack_8 + (*pbVar28 < *pbVar32)) ^ (uint)&bStack_4;
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          if (extraout_ECX_00 == 0) {
            cVar2 = in(uVar18);
            pcVar29[-0xb] = cVar2;
            halt_baddata();
          }
        }
        else {
          bVar9 = 9 < (bVar9 & 0xf) | in_AF;
          pbVar28 = &bStack_4;
          bStack_4 = (byte)uVar24;
          bStack_3 = (byte)((uint)uVar24 >> 8);
          uStack_2 = (undefined2)((uint)uVar24 >> 0x10);
          pcVar7 = (code *)swi(0x43);
          uVar42 = (*pcVar7)();
          puVar19 = (undefined2 *)((ulonglong)uVar42 >> 0x20);
          puVar33 = (uint *)((int)pcVar31 * 0x200000);
          puVar21 = (undefined4 *)
                    *(undefined6 *)(extraout_ECX_01 + 0x14d442a4 + (int)pcVar31 * 0x800000);
          uVar12 = (uint)((int)pcVar31 * 0x100000 < 0);
          puVar15 = &stack0xa5aa28f2 + uVar12;
          iVar17 = *(int *)uVar42;
          puVar23 = (undefined1 *)(iVar17 + -4);
          *(undefined2 *)(iVar17 + -4) = uVar35;
          if (auStack_5efb < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28f2,uVar12)) {
            if ((int)((uint)puVar21 & (uint)puVar33) < 1) {
              bVar40 = 0;
              iVar17 = extraout_ECX_01;
              puVar22 = puVar21;
            }
            else {
              bVar37 = *(uint *)(extraout_ECX_01 + 0x19) < 0x6383ea3e;
              puVar23 = (undefined1 *)(iVar17 + -8);
              *(undefined4 *)(iVar17 + -8) = 0x514db1;
              uVar42 = func_0x8f4910b7();
              puVar19 = (undefined2 *)((ulonglong)uVar42 >> 0x20);
              if (bVar37) {
                puVar22 = (undefined4 *)(puVar23 + -4);
                *(undefined4 **)(puVar23 + -4) = puVar21;
                cVar2 = '\x1d';
                do {
                  puVar21 = puVar21 + -1;
                  puVar22 = puVar22 + -1;
                  *puVar22 = *puVar21;
                  cVar2 = cVar2 + -1;
                } while ('\0' < cVar2);
                *(undefined1 **)(puVar23 + -0x7c) = puVar23 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
                halt_baddata();
              }
              *piVar27 = (*piVar27 - (int)piVar27) - (uint)bVar37;
              bVar9 = 9 < ((byte)uVar42 & 0xf) | bVar9;
              uVar16 = (undefined3)((ulonglong)uVar42 >> 8);
              bVar36 = (byte)uVar42 + bVar9 * '\x06';
              puVar22 = (undefined4 *)
                        (puVar15 +
                        (-(uint)(CONCAT31(uVar16,bVar36 + (0x90 < (bVar36 & 0xf0) |
                                                          puVar21 < *(undefined4 **)
                                                                     (puVar19 + (int)puVar15 * 4) |
                                                          bVar9 * (0xf9 < bVar36)) * '`') <
                                0xb79e35cb) - *(int *)(pcVar25 + 0xe)));
              puVar15 = (undefined1 *)CONCAT31(uVar16,uRamf0a18cd1);
              puVar34 = puVar33 + -1;
              puVar4 = (undefined1 *)*puVar33;
              iVar17 = extraout_ECX_02;
              do {
                iVar17 = iVar17 + -1;
                pbVar28 = (byte *)puVar21;
                puVar33 = puVar34;
              } while (iVar17 != 0 && puVar15 == puVar4);
            }
            *(undefined4 *)((int)pbVar28 + -0x3f3251b) = in_XMM1_Da;
            *(undefined4 *)((int)pbVar28 + -0x3f32517) = in_XMM1_Db;
            *(undefined4 *)((int)pbVar28 + -0x3f32513) = in_XMM1_Dc;
            *(undefined4 *)((int)pbVar28 + -0x3f3250f) = in_XMM1_Dd;
            *(uint *)(puVar23 + -4) = (uint)puVar15 | 0xee99e10d;
            *(int *)(puVar23 + -8) = iVar17;
            *(undefined2 **)(puVar23 + -0xc) = puVar19;
            *(undefined4 **)(puVar23 + -0x10) = puVar22;
            *(undefined1 **)(puVar23 + -0x14) = puVar23;
            *(int *)(puVar23 + -0x18) = (int)pbVar28 + 1;
            *(int **)(puVar23 + -0x1c) = piVar27;
            *(uint **)(puVar23 + -0x20) = puVar33;
            while (iVar17 != 0) {
              iVar17 = iVar17 + -1;
              uVar3 = in((short)puVar19);
              *(undefined1 *)puVar33 = uVar3;
              puVar33 = (uint *)((int)puVar33 + (uint)bVar40 * -2 + 1);
            }
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
        }
        *puVar19 = uVar35;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
    }
    in_EAX = in(0x5a);
    if ((POPCOUNT(uVar10 & 0xff) & 1U) != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    unaff_EDI = pcVar29 + -1;
    unaff_ESI = pcVar26 + -2;
    *pcVar29 = *pcVar25;
    param_2 = pcVar31;
  } while( true );
}


