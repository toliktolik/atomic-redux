/*
 * Function: Unwind@00514d1b
 * Address: 00514d1b
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dd2) overlaps instruction at (ram,0x00514dce)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514d1b(uint *param_1,char *param_2)

{
  byte *pbVar1;
  char *pcVar2;
  undefined1 uVar3;
  byte *pbVar4;
  uint *puVar5;
  undefined1 *puVar6;
  char cVar7;
  uint uVar8;
  code *pcVar9;
  int iVar10;
  byte bVar11;
  int in_EAX;
  undefined1 *puVar12;
  undefined3 uVar13;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int iVar14;
  undefined2 uVar15;
  undefined2 *puVar16;
  undefined4 unaff_EBX;
  uint uVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  undefined1 *puVar20;
  undefined4 *puVar21;
  int *unaff_ESI;
  byte *pbVar22;
  char *unaff_EDI;
  uint *puVar23;
  undefined2 in_ES;
  byte bVar24;
  bool bVar25;
  byte in_AF;
  unkbyte10 in_ST7;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar26;
  undefined1 auStack_5efb [24287];
  
  pcVar2 = unaff_EDI + 1;
  bVar24 = (byte)in_EAX;
  if (SBORROW1(bVar24,*unaff_EDI)) {
    uVar17 = CONCAT22((short)((uint)unaff_EBX >> 0x10),
                      CONCAT11((char)((uint)unaff_EBX >> 8) + *param_2,(char)unaff_EBX));
    pbVar4 = (byte *)(unaff_EDI + 6);
    *(int *)(unaff_EDI + 2) = *unaff_ESI;
    pbVar22 = (byte *)(uVar17 - 0x2e);
    *pbVar22 = *pbVar22 << 1 | *pbVar22 >> 7;
    bVar11 = *pbVar22;
    cVar7 = *(char *)(in_EAX + -0x2a0e4518);
    *param_1 = *param_1 ^ uVar17;
    bVar24 = 0xf < (byte)(bVar24 + cVar7 + ((bVar11 & 1) != 0));
    *pbVar4 = *pbVar4 - 1;
    ffree(in_ST7);
    uVar26 = func_0x11b54bd3();
    puVar16 = (undefined2 *)((ulonglong)uVar26 >> 0x20);
    uVar17 = (uint)bVar24;
    uVar8 = (int)unaff_ESI + 0x29f53f96;
    pbVar22 = (byte *)(uVar8 + uVar17);
    uVar15 = (undefined2)((ulonglong)uVar26 >> 0x20);
    if ((SCARRY4((int)unaff_ESI + 3U,0x29f53f93) != SCARRY4(uVar8,uVar17)) != (int)pbVar22 < 0) {
      bVar24 = 9 < ((byte)uVar26 & 0xf) | in_AF;
      bVar11 = (byte)uVar26 + bVar24 * -6;
      *(uint *)(puVar16 + -0x3fbcdc63) =
           *(uint *)(puVar16 + -0x3fbcdc63) ^
           CONCAT31((int3)((ulonglong)uVar26 >> 8),
                    bVar11 + (0x9f < bVar11 |
                             (0xd60ac06c < (int)unaff_ESI + 3U || CARRY4(uVar8,uVar17)) |
                             bVar24 * (bVar11 < 6)) * -0x60 + (char)((ulonglong)uVar26 >> 8) * '~' +
                    'P') & 0xffff00ff;
      _DAT_a21d64f1 = in(uVar15);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    pbVar1 = (byte *)((int)puVar16 + 0x1b);
    bVar24 = (byte)extraout_ECX & 7;
    *pbVar1 = *pbVar1 << bVar24 | *pbVar1 >> 8 - bVar24;
    out(0xfe,(int)uVar26);
    if (*pbVar22 >= *pbVar4) {
      out(uVar15,(char)*(undefined4 *)(pbVar22 + 2));
      *(uint *)(pbVar22 + (int)&stack0x00000002 + (*pbVar22 < *pbVar4)) =
           *(uint *)(pbVar22 + (int)&stack0x00000002 + (*pbVar22 < *pbVar4)) ^
           (uint)&stack0xfffffffc;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    if (extraout_ECX == 0) {
      cVar7 = in(uVar15);
      unaff_EDI[7] = cVar7;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
  }
  else {
    bVar24 = 9 < (bVar24 & 0xf) | in_AF;
    puVar21 = (undefined4 *)&stack0xfffffffc;
    pcVar9 = (code *)swi(0x43);
    uVar26 = (*pcVar9)();
    puVar16 = (undefined2 *)((ulonglong)uVar26 >> 0x20);
    puVar23 = (uint *)((int)pcVar2 * 0x200000);
    puVar18 = (undefined4 *)*(undefined6 *)(extraout_ECX_00 + 0x14d442a4 + (int)pcVar2 * 0x800000);
    uVar17 = (uint)((int)pcVar2 * 0x100000 < 0);
    puVar12 = &stack0xa5aa28f2 + uVar17;
    iVar10 = *(int *)uVar26;
    puVar20 = (undefined1 *)(iVar10 + -4);
    *(undefined2 *)(iVar10 + -4) = in_ES;
    if (auStack_5efb < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28f2,uVar17)) {
      iVar14 = extraout_ECX_00;
      puVar19 = puVar18;
      if (0 < (int)((uint)puVar18 & (uint)puVar23)) {
        bVar25 = *(uint *)(extraout_ECX_00 + 0x19) < 0x6383ea3e;
        puVar20 = (undefined1 *)(iVar10 + -8);
        *(undefined4 *)(iVar10 + -8) = 0x514db1;
        uVar26 = func_0x8f4910b7();
        puVar16 = (undefined2 *)((ulonglong)uVar26 >> 0x20);
        if (bVar25) {
          puVar21 = (undefined4 *)(puVar20 + -4);
          *(undefined4 **)(puVar20 + -4) = puVar18;
          cVar7 = '\x1d';
          do {
            puVar18 = puVar18 + -1;
            puVar21 = puVar21 + -1;
            *puVar21 = *puVar18;
            cVar7 = cVar7 + -1;
          } while ('\0' < cVar7);
          *(undefined1 **)(puVar20 + -0x7c) = puVar20 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        *unaff_ESI = (*unaff_ESI - (int)unaff_ESI) - (uint)bVar25;
        bVar24 = 9 < ((byte)uVar26 & 0xf) | bVar24;
        uVar13 = (undefined3)((ulonglong)uVar26 >> 8);
        bVar11 = (byte)uVar26 + bVar24 * '\x06';
        puVar19 = (undefined4 *)
                  (puVar12 +
                  (-(uint)(CONCAT31(uVar13,bVar11 + (0x90 < (bVar11 & 0xf0) |
                                                    puVar18 < *(undefined4 **)
                                                               (puVar16 + (int)puVar12 * 4) |
                                                    bVar24 * (0xf9 < bVar11)) * '`') < 0xb79e35cb) -
                  *(int *)((int)unaff_ESI + 0xf)));
        puVar12 = (undefined1 *)CONCAT31(uVar13,uRamf0a18cd1);
        puVar5 = puVar23 + 1;
        puVar6 = (undefined1 *)*puVar23;
        iVar14 = extraout_ECX_01;
        do {
          iVar14 = iVar14 + -1;
          puVar21 = puVar18;
          puVar23 = puVar5;
        } while (iVar14 != 0 && puVar12 == puVar6);
      }
      *(undefined4 *)((int)puVar21 + -0x3f3251b) = in_XMM1_Da;
      *(undefined4 *)((int)puVar21 + -0x3f32517) = in_XMM1_Db;
      *(undefined4 *)((int)puVar21 + -0x3f32513) = in_XMM1_Dc;
      *(undefined4 *)((int)puVar21 + -0x3f3250f) = in_XMM1_Dd;
      *(uint *)(puVar20 + -4) = (uint)puVar12 | 0xee99e10d;
      *(int *)(puVar20 + -8) = iVar14;
      *(undefined2 **)(puVar20 + -0xc) = puVar16;
      *(undefined4 **)(puVar20 + -0x10) = puVar19;
      *(undefined1 **)(puVar20 + -0x14) = puVar20;
      *(int *)(puVar20 + -0x18) = (int)puVar21 + 1;
      *(int **)(puVar20 + -0x1c) = unaff_ESI;
      *(uint **)(puVar20 + -0x20) = puVar23;
      while (iVar14 != 0) {
        iVar14 = iVar14 + -1;
        uVar3 = in((short)puVar16);
        *(undefined1 *)puVar23 = uVar3;
        puVar23 = (uint *)((int)puVar23 + 1);
      }
      halt_baddata();
    }
  }
  *puVar16 = in_ES;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


