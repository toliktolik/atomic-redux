/*
 * Function: Unwind@00515deb
 * Address: 00515deb
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00515e7b) overlaps instruction at (ram,0x00515e7a)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00515e69) */
/* WARNING: Removing unreachable block (ram,0x00515e7c) */
/* WARNING: Removing unreachable block (ram,0x00515e7b) */
/* WARNING: Removing unreachable block (ram,0x00515e7e) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined8 __fastcall Unwind_00515deb(undefined *param_1)

{
  char *pcVar1;
  uint *puVar2;
  byte *pbVar3;
  undefined1 uVar4;
  undefined4 in_EAX;
  int iVar5;
  uint uVar6;
  undefined *extraout_ECX;
  char cVar8;
  undefined1 *puVar7;
  undefined1 *extraout_EDX;
  byte bVar9;
  int unaff_EBP;
  int unaff_ESI;
  byte *pbVar10;
  byte *pbVar11;
  undefined2 in_FS;
  bool bVar12;
  
  pbVar11 = param_1 + 4;
  pbVar10 = (byte *)(unaff_ESI + 4);
  in(0xf3);
  puVar7 = &DAT_3f82a1e2;
  bVar9 = (byte)((uint)in_EAX >> 8);
  bVar12 = SCARRY1(DAT_b6d0933c,bVar9);
  DAT_b6d0933c = DAT_b6d0933c + bVar9;
  if ((bVar12 != SCARRY1(DAT_b6d0933c,'\0')) == DAT_b6d0933c < '\0') {
    (*(code *)param_1)();
    *(undefined2 *)(param_1 + 0x17) = in_FS;
    param_1 = extraout_ECX;
    puVar7 = extraout_EDX;
  }
  else {
    puVar2 = (uint *)(param_1 + -0x4bd0e0e9);
    *puVar2 = *puVar2 >> 1 | (uint)((*puVar2 & 1) != 0) << 0x1f;
    *pbVar10 = *pbVar10 ^ 0x43;
    pbVar11 = param_1 + 7;
    pbVar10 = (byte *)(unaff_ESI + 8);
  }
  while( true ) {
    iVar5 = in((short)puVar7);
    uVar6 = iVar5 + 0x7241d100;
    *(uint *)(unaff_EBP + 0x208e88fa) = *(uint *)(unaff_EBP + 0x208e88fa) ^ (uint)param_1;
    param_1[0x79] = param_1[0x79] - bVar9;
    unaff_EBP = 0x4490d72b;
    pbVar3 = pbVar10 + 1;
    pbVar11[-1] = *pbVar10;
    uVar4 = in((short)(puVar7 + 1));
    uVar6 = CONCAT22((short)(uVar6 >> 0x10),
                     CONCAT11(((char)(uVar6 >> 8) - DAT_4490d762) - (uVar6 < 0xf420135f),uVar4)) ^
            0x4ef3d5d5;
    if ((POPCOUNT(uVar6 & 0xff) & 1U) != 0) break;
    puVar7 = puVar7 + 2;
    pbVar10 = pbVar3;
  }
  param_1[0x247226f1] = param_1[0x247226f1] & (byte)(uVar6 >> 8);
  if (param_1 == (undefined *)0x1 || (uVar6 | 0x9d70de1c) == 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  iRam4490d712 = iRam4490d712 - (int)pbVar3;
  cVar8 = (char)((uint)(puVar7 + 1) >> 8);
  *(char *)((uVar6 | 0x9d70de1c) + 0xe69145b6) = cVar8;
  pcVar1 = (char *)((int)pbVar3 * 8 + 0x3f245b2);
  *pcVar1 = *pcVar1 - cVar8;
  *pbVar11 = *pbVar11 ^ bVar9;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


