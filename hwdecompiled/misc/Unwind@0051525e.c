/*
 * Function: Unwind@0051525e
 * Address: 0051525e
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */

ulonglong __fastcall
Unwind_0051525e(uint param_1,int param_2,undefined4 param_3,int *param_4,undefined4 param_5,
               undefined4 param_6,int param_7)

{
  int *piVar1;
  int iVar2;
  byte bVar3;
  char cVar4;
  bool bVar5;
  byte bVar6;
  uint *puVar7;
  undefined1 uVar8;
  byte bVar9;
  byte bVar10;
  ushort uVar11;
  uint uVar12;
  int in_EAX;
  char *pcVar13;
  byte bVar14;
  undefined2 uVar16;
  undefined3 uVar17;
  byte bVar19;
  int unaff_EBX;
  int iVar18;
  int *unaff_EBP;
  int iVar20;
  uint *unaff_ESI;
  uint *puVar21;
  uint *puVar22;
  uint *unaff_EDI;
  uint *puVar23;
  undefined2 in_ES;
  byte in_AF;
  unkbyte10 in_ST6;
  int iVar15;
  
  do {
    iVar18 = unaff_EBX + in_EAX;
    ffree(in_ST6);
    bVar9 = (byte)in_EAX;
    if (param_1 == 0) {
      uVar12 = CONCAT31((int3)((uint)in_EAX >> 8),bVar9 ^ bRam560d8960);
      out(0xbe,uVar12);
      bVar10 = (bVar9 ^ bRam560d8960) + 0x2a;
      uRam6313a706 = (undefined1)iVar18;
      bVar9 = 9 < (bVar10 & 0xf) | in_AF;
      bVar10 = bVar10 + bVar9 * '\x06';
      puVar22 = (uint *)((int)unaff_ESI + 1);
      if ((char)(byte)*unaff_EDI < (char)(byte)*unaff_ESI) {
        if ((char)(byte)*unaff_EDI <= (char)(byte)*unaff_ESI) {
          *(byte *)((int)unaff_ESI + -0x1d2a9bde) =
               *(byte *)((int)unaff_ESI + -0x1d2a9bde) ^ (byte)((uint)param_2 >> 8);
          param_2 = param_7;
          unaff_EBP = param_4;
        }
        DAT_f90d9182 = (char)unaff_EBP;
        out(0x6b,(char)unaff_EBP);
        DAT_e68987fb = DAT_e68987fb << 1;
        return CONCAT44(param_2 + 1,unaff_EBP) & 0xffffffffdfbeb05c;
      }
      DAT_c7db89d1 = DAT_c7db89d1 |
                     bVar10 + (0x90 < (bVar10 & 0xf0) |
                              0x789dc3d5 < uVar12 | bVar9 * (0xf9 < bVar10)) * 'a' + 0xb8;
      uVar11 = 0x4ce5;
LAB_005152d5:
      DAT_fe699a47 = (char)uVar11;
      out((byte)*puVar22,(short)param_2);
      return CONCAT44(param_2,(int)(short)uVar11);
    }
    iVar20 = *unaff_EBP;
    *(undefined2 *)unaff_EBP = in_ES;
    cVar4 = *(char *)(iVar18 + 0x2bd0eaeb);
    uVar17 = (undefined3)((uint)param_2 >> 8);
    *unaff_EDI = *unaff_ESI;
    puVar22 = unaff_ESI + 1;
    puVar7 = unaff_EDI + 1;
    do {
      puVar23 = puVar7;
      puVar21 = puVar22;
      puVar22 = (uint *)((int)puVar21 + 1);
      bVar3 = (byte)*puVar23;
      bVar10 = (byte)*puVar21;
      puVar7 = (uint *)((int)puVar23 + 1);
    } while ((char)bVar3 <= (char)bVar10);
    if (SBORROW1(bVar10,bVar3)) {
      param_2 = CONCAT31(uVar17,cVar4) + -1;
      uVar11 = (ushort)in_EAX ^ 0x14;
      if (param_1 != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      goto LAB_005152d5;
    }
    bVar6 = 9 < (bVar9 & 0xf) | in_AF;
    bVar9 = bVar9 + bVar6 * '\x06';
    uVar16 = (undefined2)(param_1 >> 0x10);
    bVar14 = (byte)param_1;
    bVar19 = (byte)((uint)iVar18 >> 8);
    iVar15 = CONCAT22(uVar16,CONCAT11((byte)(param_1 >> 8) | bVar19,bVar14));
    bVar9 = bVar9 + (0x90 < (bVar9 & 0xf0) | bVar6 * (0xf9 < bVar9)) * '`' +
            (char)((uint)in_EAX >> 8) * '\t';
    pcVar13 = (char *)CONCAT22((short)((uint)in_EAX >> 0x10),(ushort)bVar9);
    in_ES = *(undefined2 *)(in_EAX + 0x422f6733 + (uint)(bVar10 < bVar3));
    if (pcVar13 < *(char **)((int)puVar23 + 2) || pcVar13 == *(char **)((int)puVar23 + 2)) {
      *pcVar13 = *pcVar13 + '\x01';
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    piVar1 = (int *)(iVar15 + 0x36);
    *piVar1 = *piVar1 - iVar20;
    iVar2 = *piVar1;
    puVar7 = puVar21 + 0x15;
    *puVar7 = (int)*puVar7 >> (bVar14 & 0x1f);
    bVar5 = (param_1 & 0x1f) != 0;
    if (!bVar5 && iVar2 == 0 || bVar5 && *puVar7 == 0) {
      *(byte **)(in_EAX + 0x422f6733 + (uint)(bVar10 < bVar3) + -1) = (byte *)((int)puVar23 + 6);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    in_AF = 9 < (bVar9 & 0xf) | bVar6;
    unaff_EDI = (uint *)((int)puVar23 + 10);
    unaff_ESI = (uint *)((int)puVar21 + 6);
    unaff_EBP = (int *)(iVar20 - 1U ^ *unaff_ESI);
    uVar12 = CONCAT11(in_AF,*(byte *)puVar22) ^ 0xb3e2a5d9;
    piVar1 = (int *)(uVar12 + 0xc50b6b97);
    *piVar1 = *piVar1 + iVar15;
    *(byte *)unaff_EDI = *(byte *)unaff_EDI & bVar19;
    uVar8 = in(0x1e);
    in_EAX = CONCAT31((int3)(uVar12 >> 8),uVar8);
    *(uint *)(in_EAX + -0x25c9712b) = *(uint *)(in_EAX + -0x25c9712b) >> 1;
    unaff_EBX = iVar18 + -1;
    param_1 = CONCAT22(uVar16,CONCAT11(0xbc,bVar14));
    param_2 = (CONCAT31(uVar17,cVar4 + -0x6f) - *(int *)((int)unaff_EBP + 10)) + -1;
    out(0x3c,uVar8);
    puRam27a589d1 = unaff_EDI;
  } while( true );
}


