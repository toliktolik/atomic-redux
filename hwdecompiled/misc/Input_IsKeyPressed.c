/*
 * Function: Input_IsKeyPressed
 * Address: 004a1850
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
Input_IsKeyPressed(void *this,undefined1 *param_1,undefined1 *param_2,undefined1 *param_3)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  uint extraout_EDX;
  undefined1 *puVar6;
  undefined1 *local_18;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puVar1 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &DAT_00515950;
  local_10 = ExceptionList;
  iVar5 = *(int *)((int)this + 4);
  param_3 = (undefined1 *)CONCAT13(*param_3,param_3._0_3_);
  if (iVar5 == 0) {
    local_18 = (undefined1 *)0x0;
  }
  else {
    local_18 = (undefined1 *)(*(int *)((int)this + 0xc) - iVar5);
  }
  if (param_2 != (undefined1 *)0x0) {
    if (iVar5 == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = *(int *)((int)this + 8) - iVar5;
    }
    if ((undefined1 *)(-iVar4 - 1U) < param_2) {
      ExceptionList = &local_10;
      Image_DrawPolygon();
      ExceptionList = local_10;
      return;
    }
    if (iVar5 == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = *(int *)((int)this + 8) - iVar5;
    }
    if (local_18 < param_2 + iVar4) {
      if ((undefined1 *)(-((uint)local_18 >> 1) - 1) < local_18) {
        local_18 = (undefined1 *)0x0;
      }
      else {
        local_18 = local_18 + ((uint)local_18 >> 1);
      }
      if (iVar5 == 0) {
        iVar4 = 0;
      }
      else {
        iVar4 = *(int *)((int)this + 8) - iVar5;
      }
      if (local_18 < param_2 + iVar4) {
        if (iVar5 == 0) {
          iVar5 = 0;
        }
        else {
          iVar5 = *(int *)((int)this + 8) - iVar5;
        }
        local_18 = param_2 + iVar5;
      }
      ExceptionList = &local_10;
      puVar1 = (undefined1 *)operator_new((uint)local_18);
      local_8 = 0;
      puVar2 = (undefined1 *)Vector_IsNormalized(*(undefined1 **)((int)this + 4),param_1,puVar1);
      Collision_ResolveResponse(puVar2,(int)param_2,(undefined1 *)((int)&param_3 + 3));
      Vector_IsNormalized(param_1,*(undefined1 **)((int)this + 8),puVar2 + (int)param_2);
      iVar5 = *(int *)((int)this + 4);
      if (iVar5 == 0) {
        iVar4 = 0;
      }
      else {
        iVar4 = *(int *)((int)this + 8) - iVar5;
      }
      if (iVar5 != 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar5,extraout_EDX);
      }
      *(undefined1 **)((int)this + 0xc) = puVar1 + (int)local_18;
      *(undefined1 **)((int)this + 8) = puVar1 + (int)(param_2 + iVar4);
      *(undefined1 **)((int)this + 4) = puVar1;
      ExceptionList = local_10;
      return;
    }
    puVar2 = *(undefined1 **)((int)this + 8);
    if (puVar2 + -(int)param_1 < param_2) {
      puVar6 = param_2 + (int)param_1;
      param_1 = &stack0xffffffcc;
      ExceptionList = &local_10;
      List_FindNode(puVar1,puVar2,puVar6);
      puVar6 = param_2;
      local_8 = 2;
      UI_ShowScoreDisplay(*(undefined1 **)((int)this + 8),
                          (int)(param_2 + ((int)puVar1 - (int)*(undefined1 **)((int)this + 8))),
                          (undefined1 *)((int)&param_3 + 3));
      puVar2 = puVar6 + *(int *)((int)this + 8);
      *(undefined1 **)((int)this + 8) = puVar2;
      puVar2 = puVar2 + -(int)puVar6;
    }
    else {
      param_1 = puVar2 + -(int)param_2;
      ExceptionList = &local_10;
      uVar3 = List_FindNode(param_1,puVar2,puVar2);
      puVar6 = param_1;
      *(undefined4 *)((int)this + 8) = uVar3;
      param_1 = &stack0xffffffcc;
      Collision_CheckOverlap(&param_1,(int)puVar1,(int)puVar6,puVar2);
      param_1 = &stack0xffffffd0;
      puVar2 = puVar1 + (int)param_2;
    }
    param_2 = &stack0xffffffcc;
    Vector_IsZero(puVar1,puVar2,(undefined1 *)((int)&param_3 + 3));
  }
  ExceptionList = local_10;
  return;
}


