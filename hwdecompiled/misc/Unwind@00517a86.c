/*
 * Function: Unwind@00517a86
 * Address: 00517a86
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00517a36) overlaps instruction at (ram,0x00517a35)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint __fastcall Unwind_00517a86(uint *param_1,undefined4 param_2)

{
  byte *pbVar1;
  longlong lVar2;
  uint uVar3;
  code *pcVar4;
  undefined6 uVar5;
  undefined1 *puVar6;
  byte bVar7;
  char cVar8;
  byte bVar13;
  uint uVar9;
  undefined4 in_EAX;
  uint uVar10;
  undefined4 uVar11;
  uint *puVar12;
  undefined1 uVar14;
  char *pcVar15;
  int extraout_ECX;
  undefined1 *puVar16;
  int extraout_ECX_00;
  int extraout_ECX_01;
  undefined2 uVar17;
  int extraout_EDX;
  int iVar18;
  char *unaff_EBX;
  int iVar19;
  int *piVar20;
  int iVar21;
  undefined4 *unaff_ESI;
  undefined4 *puVar22;
  undefined1 *puVar23;
  undefined4 *unaff_EDI;
  longlong *plVar24;
  ushort in_CS;
  undefined2 in_SS;
  int in_GS_OFFSET;
  bool bVar25;
  byte in_CF;
  bool in_PF;
  undefined1 in_ZF;
  undefined1 in_SF;
  undefined2 in_FPUControlWord;
  undefined2 in_FPUStatusWord;
  undefined2 in_FPUTagWord;
  undefined2 in_FPULastInstructionOpcode;
  undefined4 in_FPUDataPointer;
  undefined4 in_FPUInstructionPointer;
  undefined8 uVar26;
  longlong *plVar27;
  int *in_stack_00000010;
  undefined2 in_stack_00000014;
  
  if (in_PF) {
    bVar7 = (byte)param_2;
    uVar26 = CONCAT44(CONCAT31((int3)((uint)in_EAX >> 8),(char)in_EAX + -0x7c),
                      CONCAT31((int3)(CONCAT22((short)((uint)param_2 >> 0x10),
                                               CONCAT11(bVar7 / 0x50,bVar7)) >> 8),bVar7 % 0x50));
    *(char *)param_1 = (char)*param_1 << ((byte)param_1 & 0x1f);
    unaff_ESI = (undefined4 *)((int)unaff_ESI + -0x27);
    *(undefined2 *)unaff_EDI = in_SS;
  }
  else {
    in_CS = 0xa131;
    uVar26 = func_0x89a25181();
    uVar10 = (uint)uVar26;
    if (extraout_ECX != 0) {
      if (!(bool)in_CF && !(bool)in_ZF) {
code_r0x00517a98:
        unaff_EDI[0x939ed5c] = (unaff_EDI[0x939ed5c] - (int)unaff_ESI) - (uint)in_CF;
        return uVar10;
      }
      pcVar15 = (char *)(CONCAT22((short)((uint)extraout_ECX >> 0x10),
                                  CONCAT11(0x2f,(char)extraout_ECX)) + -1);
      if (pcVar15 == (char *)0x0 || (bool)in_ZF != false) {
        bVar25 = unaff_EBX < pcVar15;
        while (uVar10 = (uint)((ulonglong)uVar26 >> 0x20),
              (POPCOUNT(((char)uVar26 + '\x14') - bVar25) & 1U) == 0) {
          uVar9 = in((short)((ulonglong)uVar26 >> 0x20));
          puVar22 = (undefined4 *)(uVar10 + 0x48086a55);
          *puVar22 = *puVar22;
          plVar27 = (longlong *)(uint)in_CS;
          *(undefined2 *)unaff_EDI = *(undefined2 *)unaff_EDI;
          uVar14 = SUB41(pcVar15,0);
          pcVar15 = (char *)((uVar10 >> 8 & 0xff) - 1);
          uVar26 = CONCAT44(CONCAT22((short)((ulonglong)uVar26 >> 0x30),
                                     CONCAT11(uVar14,(char)((ulonglong)uVar26 >> 0x20))),
                            (uVar9 ^ 0xb3) + 0x6994f592);
          bVar25 = (uVar9 ^ 0xb3) + 0x42d04a72 < 0xd93b54e0;
        }
        *unaff_EDI = *unaff_ESI;
        *in_stack_00000010 = (int)(&stack0x00000020 + *in_stack_00000010);
        puVar12 = (uint *)((int)plVar27 + 0x52);
        *puVar12 = *puVar12 << 1 | (uint)((int)*puVar12 < 0);
        in(in_stack_00000014);
      }
      else {
        uRame3a13189 = (undefined1)uVar26;
        uVar9 = (uint)in_CF;
        bVar25 = SBORROW4(uVar10,-0x48e6648a);
        uVar3 = uVar10 + 0x48e6648a;
        in_CF = uVar10 < 0xb7199b76 || uVar3 < uVar9;
        uVar10 = uVar3 - uVar9;
        if (bVar25 == SBORROW4(uVar3,uVar9)) {
          out(0x24,uVar10);
          goto code_r0x00517a98;
        }
      }
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    param_1 = (uint *)0x0;
    if ((bool)in_SF) {
      uVar17 = (undefined2)((ulonglong)uVar26 >> 0x20);
      if (((byte)plVar27._0_1_ & 1) != 0 || ((byte)plVar27._0_1_ & 0x40) != 0) {
        out(uVar17,CONCAT31((int3)((ulonglong)uVar26 >> 8),DAT_3af3ad2e));
        pcVar4 = (code *)swi(3);
        uVar10 = (*pcVar4)();
        return uVar10;
      }
      bVar7 = (byte)unaff_EBX;
      unaff_EBX = (char *)CONCAT31((int3)((uint)unaff_EBX >> 8),bVar7 - DAT_5f00eaa6);
      puVar16 = (undefined1 *)((int)unaff_ESI + (uint)(bVar7 < DAT_5f00eaa6));
      param_1 = (uint *)CONCAT22((short)((uint)puVar16 >> 0x10),CONCAT11(0x28,(char)puVar16));
      uVar11 = in(uVar17);
      _DAT_85854a5d = uVar10;
      *unaff_EDI = uVar11;
      unaff_EDI = unaff_EDI + 1;
      goto code_r0x00517b0a;
    }
  }
  puVar12 = (uint *)(unaff_EBX + 0x178cd8c6);
  *puVar12 = *puVar12 & (uint)uVar26;
  if (*puVar12 == 0) {
    cVar8 = unaff_EBX[(uint)uVar26 & 0xff];
    iVar18 = CONCAT22((short)((ulonglong)uVar26 >> 0x30),
                      CONCAT11((char)((ulonglong)uVar26 >> 0x28) + (char)*param_1,
                               (char)((ulonglong)uVar26 >> 0x20)));
    puVar12 = (uint *)((char)plVar27._0_1_ + 0x56d84f3a);
    iVar19 = (int)param_1 + -1;
    if (iVar19 != 0 && *puVar12 == 0xa0ff1544) {
      piVar20 = (int *)(*puVar12 + 0xef21f3d8);
      *piVar20 = (*piVar20 - (int)unaff_EBX) - (uint)(0xa0ff1543 < *puVar12);
      pbVar1 = (byte *)((char)plVar27._0_1_ +
                       in_GS_OFFSET + CONCAT31((int3)((ulonglong)uVar26 >> 8),cVar8) * 2 + 0x21);
      bVar7 = *pbVar1;
      bVar13 = (byte)((ulonglong)uVar26 >> 8);
      bVar25 = bVar13 != *pbVar1;
      plVar24 = plVar27._0_1_;
      if (param_1 != (uint *)0x2 && bVar25) {
        iVar18 = iVar18 + -1;
        plVar24 = (longlong *)((char)plVar27._0_1_ + 1);
        *(char *)plVar27._0_1_ = cVar8;
      }
      puVar23 = (undefined1 *)
                ((int)unaff_ESI +
                (-(uint)((param_1 == (uint *)0x2 || !bVar25) && bVar13 < bVar7) -
                *(int *)((int)plVar24 + 0x35)));
      lVar2 = *plVar24;
      *(undefined1 *)plVar24 = *puVar23;
      uVar5 = *(undefined6 *)((int)param_1 + -0x33);
      *(short *)((int)param_1 + -0x11df3e1e) = (short)ROUND((float10)lVar2);
      unaff_EBX[0x28683a] = unaff_EBX[0x28683a] ^ 0xb7;
      lVar2 = (longlong)*(int *)(iVar18 + -0x646f7ab6) * -0x55b4edba;
      piVar20 = (int *)lVar2;
      out(0xd2,(char)uVar5);
      *(char *)(piVar20 + 0xd) = (char)iVar18;
      iVar21 = *piVar20;
      puVar16 = puVar23 + 2;
      *(undefined1 *)((int)plVar24 + 1) = puVar23[1];
      uVar11 = in((short)iVar18);
      *(undefined4 *)((int)plVar24 + 2) = uVar11;
      puVar12 = (uint *)(((int)uVar5 + -0x7c228393 + (uint)((int)piVar20 != lVar2) | 0x10) +
                        0x7ae9d67b);
      *(undefined1 **)((int)piVar20 + 1) = puVar16;
      *puVar12 = *puVar12 ^ (uint)puVar16;
      puVar6 = *(undefined1 **)((int)piVar20 + 1);
      iVar19 = CONCAT31((int3)((uint)(puVar23 + -0x65984e4c + (((uint)puVar12 & 0x100) != 0)) >> 8),
                        puVar6[0x33f143ac]);
      *(undefined2 *)(iVar19 + 0x5b5463ef) = in_FPUControlWord;
      *(undefined2 *)(iVar19 + 0x5b5463f3) = in_FPUStatusWord;
      *(undefined2 *)(iVar19 + 0x5b5463f7) = in_FPUTagWord;
      *(undefined4 *)(iVar19 + 0x5b546403) = in_FPUDataPointer;
      *(undefined4 *)(iVar19 + 0x5b5463fb) = in_FPUInstructionPointer;
      *(undefined2 *)(iVar19 + 0x5b546401) = in_FPULastInstructionOpcode;
      LOCK();
      *(char *)(iVar21 + -0x431fbbb0) = (char)puVar12;
      UNLOCK();
      *(ushort *)((int)piVar20 + 1) = in_CS;
      *(undefined1 *)(iVar19 + 0x1b7cacfa) =
           (char)(CONCAT11(puVar16 < puVar6,*(undefined1 *)(iVar19 + 0x1b7cacfa)) >> 1);
      *(undefined2 *)(*(int *)((int)piVar20 + 1) + -4) = in_SS;
      do {
                    /* WARNING: Do nothing block with infinite loop */
      } while( true );
    }
    *(undefined1 *)plVar27._0_1_ = *(undefined1 *)unaff_ESI;
    pcVar4 = (code *)swi(4);
    if (SCARRY4(*puVar12,0x5f00eabc)) {
      (*pcVar4)();
      iVar19 = extraout_ECX_01;
      iVar18 = extraout_EDX;
    }
    *(byte *)(iVar19 + 0x48f117dc) = *(byte *)(iVar19 + 0x48f117dc) & (byte)((uint)iVar18 >> 8);
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  param_1[-0xb] = param_1[-0xb] - (int)&stack0x00000000;
  unaff_ESI = (undefined4 *)((int)unaff_ESI + 1);
  if ((POPCOUNT((uint)unaff_ESI & 0xff) & 1U) == 0) {
    for (; param_1 != (uint *)0x0; param_1 = (uint *)((int)param_1 + -1)) {
      unaff_ESI = unaff_ESI + 1;
    }
    param_1 = (uint *)0x0;
  }
  else {
    in((short)((ulonglong)uVar26 >> 0x20));
  }
code_r0x00517b0a:
  iVar19 = CONCAT22((short)((uint)unaff_EBX >> 0x10),
                    CONCAT11((char)((uint)unaff_EBX >> 8) + *unaff_EBX,(char)unaff_EBX));
  puVar22 = unaff_ESI + 1;
  uVar11 = *unaff_ESI;
  do {
    unaff_EDI[0x14a3b2d7] = unaff_EDI[0x14a3b2d7] + -0x3f35c19d;
    *(byte *)(iVar19 + -0x4b) = *(byte *)(iVar19 + -0x4b) & (byte)param_1;
    uVar10 = *param_1;
    *param_1 = *param_1 - 0x4c;
    uVar10 = CONCAT22((short)((uint)uVar11 >> 0x10),CONCAT11(-(0x4b < uVar10),(char)uVar11));
    _DAT_bfdef9e7 = _DAT_bfdef9e7 - uVar10;
    iVar19 = 0;
    out(0x4b,(char)uVar11);
    *(undefined1 *)unaff_EDI = *(undefined1 *)puVar22;
    puVar22 = (undefined4 *)((int)puVar22 + 2);
    if (param_1 != (uint *)0x2 && puVar22 != (undefined4 *)0x0) {
      return uVar10;
    }
    uVar11 = func_0x8598657c();
    unaff_EDI = (undefined4 *)((int)unaff_EDI + 5);
    param_1 = (uint *)(extraout_ECX_00 + -2);
  } while (param_1 != (uint *)0x0 && extraout_ECX_00 == 1);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


