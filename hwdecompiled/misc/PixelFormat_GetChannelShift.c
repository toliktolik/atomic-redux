/*
 * Function: PixelFormat_GetChannelShift
 * Address: 004c0b30
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl PixelFormat_GetChannelShift(int *param_1,byte *param_2,int param_3,int param_4)

{
  byte *pbVar1;
  byte *pbVar2;
  char cVar3;
  byte bVar4;
  int iVar5;
  int iVar6;
  byte *pbVar7;
  int local_8;
  
  cVar3 = (char)param_1[2];
  iVar6 = *param_1;
  if (((cVar3 == '\x02') && (param_3 != 0)) &&
     (iVar5 = iVar6, pbVar7 = param_2, *(char *)((int)param_1 + 9) == '\b')) {
    for (; iVar5 != 0; iVar5 = iVar5 + -1) {
      *pbVar7 = *(byte *)((((*param_2 & 0xf8) << 5 | param_2[1] & 0xf8) << 2 |
                          (int)(uint)param_2[2] >> 3) + param_3);
      param_2 = param_2 + 3;
      pbVar7 = pbVar7 + 1;
    }
  }
  else {
    if (((cVar3 != '\x06') || (param_3 == 0)) || (*(char *)((int)param_1 + 9) != '\b')) {
      if (((cVar3 == '\x03') && (param_4 != 0)) && (*(char *)((int)param_1 + 9) == '\b')) {
        for (; iVar6 != 0; iVar6 = iVar6 + -1) {
          *param_2 = *(byte *)((uint)*param_2 + param_4);
          param_2 = param_2 + 1;
        }
      }
      return;
    }
    pbVar7 = param_2;
    local_8 = iVar6;
    if (iVar6 != 0) {
      do {
        bVar4 = *param_2;
        pbVar1 = param_2 + 1;
        pbVar2 = param_2 + 2;
        param_2 = param_2 + 4;
        *pbVar7 = *(byte *)((((bVar4 & 0xf8) << 5 | *pbVar1 & 0xf8) << 2 | (int)(uint)*pbVar2 >> 3)
                           + param_3);
        local_8 = local_8 + -1;
        pbVar7 = pbVar7 + 1;
      } while (local_8 != 0);
      *(byte *)((int)param_1 + 0xb) = *(byte *)((int)param_1 + 9);
      *(undefined1 *)(param_1 + 2) = 3;
      *(undefined1 *)((int)param_1 + 10) = 1;
      param_1[1] = (uint)*(byte *)((int)param_1 + 9) * iVar6 + 7 >> 3;
      return;
    }
  }
  *(byte *)((int)param_1 + 0xb) = *(byte *)((int)param_1 + 9);
  *(undefined1 *)(param_1 + 2) = 3;
  *(undefined1 *)((int)param_1 + 10) = 1;
  param_1[1] = (uint)*(byte *)((int)param_1 + 9) * iVar6 + 7 >> 3;
  return;
}


