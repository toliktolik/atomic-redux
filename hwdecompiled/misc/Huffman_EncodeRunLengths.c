/*
 * Function: Huffman_EncodeRunLengths
 * Address: 004db3a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Huffman_EncodeRunLengths(int param_1,int param_2)

{
  ushort uVar1;
  int in_EAX;
  byte bVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  int local_18;
  uint local_14;
  ushort *local_10;
  uint local_c;
  
  local_14 = 0xffffffff;
  iVar3 = 7;
  iVar7 = 4;
  if (*(ushort *)(param_2 + 2) == 0) {
    iVar3 = 0x8a;
    iVar7 = 3;
  }
  if (-1 < param_1) {
    local_10 = (ushort *)(param_2 + 6);
    local_18 = param_1 + 1;
    iVar4 = 0;
    local_c = (uint)*(ushort *)(param_2 + 2);
    do {
      uVar6 = (uint)*local_10;
      iVar5 = iVar4 + 1;
      if ((iVar3 <= iVar5) || (local_c != uVar6)) {
        if (iVar5 < iVar7) {
          do {
            uVar8 = (uint)*(ushort *)(in_EAX + 0xa76 + local_c * 4);
            iVar3 = *(int *)(in_EAX + 0x16b4);
            if ((int)(0x10 - uVar8) < iVar3) {
              uVar1 = *(ushort *)(in_EAX + 0xa74 + local_c * 4);
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | uVar1 << ((byte)iVar3 & 0x1f);
              *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                   *(undefined1 *)(in_EAX + 0x16b0);
              iVar3 = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x14) = iVar3;
              *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
              *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
              iVar3 = *(int *)(in_EAX + 0x16b4) + -0x10;
              *(ushort *)(in_EAX + 0x16b0) =
                   uVar1 >> (0x10U - (char)*(int *)(in_EAX + 0x16b4) & 0x1f);
            }
            else {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) |
                   *(short *)(in_EAX + 0xa74 + local_c * 4) << ((byte)iVar3 & 0x1f);
            }
            iVar5 = iVar5 + -1;
            *(uint *)(in_EAX + 0x16b4) = iVar3 + uVar8;
          } while (iVar5 != 0);
        }
        else if (local_c == 0) {
          iVar3 = *(int *)(in_EAX + 0x16b4);
          bVar2 = (byte)iVar3;
          if (iVar5 < 0xb) {
            uVar8 = (uint)*(ushort *)(in_EAX + 0xaba);
            if ((int)(0x10 - uVar8) < iVar3) {
              uVar1 = *(ushort *)(in_EAX + 0xab8);
              *(ushort *)(in_EAX + 0x16b0) = *(ushort *)(in_EAX + 0x16b0) | uVar1 << (bVar2 & 0x1f);
              *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                   *(undefined1 *)(in_EAX + 0x16b0);
              iVar3 = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x14) = iVar3;
              *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
              iVar3 = *(int *)(in_EAX + 0x16b4);
              *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
              *(uint *)(in_EAX + 0x16b4) = iVar3 + -0x10 + uVar8;
              *(ushort *)(in_EAX + 0x16b0) = uVar1 >> (0x10U - (char)iVar3 & 0x1f);
            }
            else {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | *(short *)(in_EAX + 0xab8) << (bVar2 & 0x1f);
              *(uint *)(in_EAX + 0x16b4) = iVar3 + uVar8;
            }
            iVar3 = *(int *)(in_EAX + 0x16b4);
            if (iVar3 < 0xe) {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar4 + -2 << ((byte)iVar3 & 0x1f));
              iVar3 = iVar3 + 3;
LAB_004db8a4:
              *(int *)(in_EAX + 0x16b4) = iVar3;
            }
            else {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar4 + -2 << ((byte)iVar3 & 0x1f));
              *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                   *(undefined1 *)(in_EAX + 0x16b0);
              iVar3 = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x14) = iVar3;
              *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
              iVar3 = *(int *)(in_EAX + 0x16b4);
              *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x16b4) = iVar3 + -0xd;
              *(ushort *)(in_EAX + 0x16b0) = (ushort)(iVar4 + -2) >> (0x10U - (char)iVar3 & 0x1f);
            }
          }
          else {
            uVar8 = (uint)*(ushort *)(in_EAX + 0xabe);
            if ((int)(0x10 - uVar8) < iVar3) {
              uVar1 = *(ushort *)(in_EAX + 0xabc);
              *(ushort *)(in_EAX + 0x16b0) = *(ushort *)(in_EAX + 0x16b0) | uVar1 << (bVar2 & 0x1f);
              *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                   *(undefined1 *)(in_EAX + 0x16b0);
              iVar3 = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x14) = iVar3;
              *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
              iVar3 = *(int *)(in_EAX + 0x16b4);
              *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
              *(uint *)(in_EAX + 0x16b4) = iVar3 + -0x10 + uVar8;
              *(ushort *)(in_EAX + 0x16b0) = uVar1 >> (0x10U - (char)iVar3 & 0x1f);
            }
            else {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | *(short *)(in_EAX + 0xabc) << (bVar2 & 0x1f);
              *(uint *)(in_EAX + 0x16b4) = iVar3 + uVar8;
            }
            iVar3 = *(int *)(in_EAX + 0x16b4);
            if (iVar3 < 10) {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar4 + -10 << ((byte)iVar3 & 0x1f));
              iVar3 = iVar3 + 7;
              goto LAB_004db8a4;
            }
            *(ushort *)(in_EAX + 0x16b0) =
                 *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar4 + -10 << ((byte)iVar3 & 0x1f));
            *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                 *(undefined1 *)(in_EAX + 0x16b0);
            iVar3 = *(int *)(in_EAX + 0x14) + 1;
            *(int *)(in_EAX + 0x14) = iVar3;
            *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
            iVar3 = *(int *)(in_EAX + 0x16b4);
            *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
            *(int *)(in_EAX + 0x16b4) = iVar3 + -9;
            *(ushort *)(in_EAX + 0x16b0) = (ushort)(iVar4 + -10) >> (0x10U - (char)iVar3 & 0x1f);
          }
        }
        else {
          if (local_c != local_14) {
            uVar8 = (uint)*(ushort *)(in_EAX + 0xa76 + local_c * 4);
            iVar3 = *(int *)(in_EAX + 0x16b4);
            iVar5 = iVar4;
            if ((int)(0x10 - uVar8) < iVar3) {
              uVar1 = *(ushort *)(in_EAX + 0xa74 + local_c * 4);
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) | uVar1 << ((byte)iVar3 & 0x1f);
              *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                   *(undefined1 *)(in_EAX + 0x16b0);
              iVar3 = *(int *)(in_EAX + 0x14) + 1;
              *(int *)(in_EAX + 0x14) = iVar3;
              *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
              iVar3 = *(int *)(in_EAX + 0x16b4);
              *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
              *(uint *)(in_EAX + 0x16b4) = iVar3 + -0x10 + uVar8;
              *(ushort *)(in_EAX + 0x16b0) = uVar1 >> (0x10U - (char)iVar3 & 0x1f);
            }
            else {
              *(ushort *)(in_EAX + 0x16b0) =
                   *(ushort *)(in_EAX + 0x16b0) |
                   *(short *)(in_EAX + 0xa74 + local_c * 4) << ((byte)iVar3 & 0x1f);
              *(uint *)(in_EAX + 0x16b4) = iVar3 + uVar8;
            }
          }
          uVar8 = (uint)*(ushort *)(in_EAX + 0xab6);
          iVar3 = *(int *)(in_EAX + 0x16b4);
          if ((int)(0x10 - uVar8) < iVar3) {
            uVar1 = *(ushort *)(in_EAX + 0xab4);
            *(ushort *)(in_EAX + 0x16b0) =
                 *(ushort *)(in_EAX + 0x16b0) | uVar1 << ((byte)iVar3 & 0x1f);
            *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
                 *(undefined1 *)(in_EAX + 0x16b0);
            iVar3 = *(int *)(in_EAX + 0x14) + 1;
            *(int *)(in_EAX + 0x14) = iVar3;
            *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
            iVar3 = *(int *)(in_EAX + 0x16b4);
            *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
            *(uint *)(in_EAX + 0x16b4) = iVar3 + -0x10 + uVar8;
            *(ushort *)(in_EAX + 0x16b0) = uVar1 >> (0x10U - (char)iVar3 & 0x1f);
          }
          else {
            *(ushort *)(in_EAX + 0x16b0) =
                 *(ushort *)(in_EAX + 0x16b0) | *(short *)(in_EAX + 0xab4) << ((byte)iVar3 & 0x1f);
            *(uint *)(in_EAX + 0x16b4) = iVar3 + uVar8;
          }
          iVar3 = *(int *)(in_EAX + 0x16b4);
          if (iVar3 < 0xf) {
            *(ushort *)(in_EAX + 0x16b0) =
                 *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar5 + -3 << ((byte)iVar3 & 0x1f));
            iVar3 = iVar3 + 2;
            goto LAB_004db8a4;
          }
          *(ushort *)(in_EAX + 0x16b0) =
               *(ushort *)(in_EAX + 0x16b0) | (ushort)(iVar5 + -3 << ((byte)iVar3 & 0x1f));
          *(undefined1 *)(*(int *)(in_EAX + 8) + *(int *)(in_EAX + 0x14)) =
               *(undefined1 *)(in_EAX + 0x16b0);
          iVar3 = *(int *)(in_EAX + 0x14) + 1;
          *(int *)(in_EAX + 0x14) = iVar3;
          *(undefined1 *)(iVar3 + *(int *)(in_EAX + 8)) = *(undefined1 *)(in_EAX + 0x16b1);
          iVar3 = *(int *)(in_EAX + 0x16b4);
          *(int *)(in_EAX + 0x14) = *(int *)(in_EAX + 0x14) + 1;
          *(int *)(in_EAX + 0x16b4) = iVar3 + -0xe;
          *(ushort *)(in_EAX + 0x16b0) = (ushort)(iVar5 + -3) >> (0x10U - (char)iVar3 & 0x1f);
        }
        iVar5 = 0;
        local_14 = local_c;
        if (uVar6 == 0) {
          iVar3 = 0x8a;
          iVar7 = 3;
        }
        else if (local_c == uVar6) {
          iVar3 = 6;
          iVar7 = 3;
        }
        else {
          iVar3 = 7;
          iVar7 = 4;
        }
      }
      local_10 = local_10 + 2;
      local_18 = local_18 + -1;
      iVar4 = iVar5;
      local_c = uVar6;
    } while (local_18 != 0);
  }
  return;
}


