/*
 * Function: Unwind@0051018b
 * Address: 0051018b
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005101ad) overlaps instruction at (ram,0x005101ac)
    */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */
/* WARNING: Removing unreachable block (ram,0x0051019d) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_0051018b(uint param_1,int param_2)

{
  char *pcVar1;
  uint *puVar2;
  byte *pbVar3;
  char cVar4;
  undefined1 *puVar6;
  uint uVar7;
  undefined1 uVar8;
  byte bVar10;
  undefined4 uVar9;
  uint extraout_ECX;
  uint uVar11;
  int iVar12;
  undefined4 uVar13;
  int *piVar14;
  int *piVar15;
  int *piVar16;
  undefined1 *puVar17;
  undefined1 *puVar18;
  undefined4 *unaff_EBP;
  int unaff_ESI;
  int iVar19;
  char *unaff_EDI;
  byte in_AF;
  bool bVar20;
  char cVar5;
  
code_r0x0051018c:
  uVar11 = param_1 ^ *(uint *)(unaff_ESI + -0x2e);
  piVar15 = (int *)(unaff_ESI + 0x2dbab2ae + param_2 * 2);
  if (-1 < (int)uVar11) {
    do {
                    /* WARNING: Do nothing block with infinite loop */
    } while( true );
  }
  swi(4);
  do {
    in((short)param_2);
    in((short)param_2);
    uVar11 = uVar11 - 1;
    cVar4 = *unaff_EDI;
    cVar5 = *unaff_EDI;
    *unaff_EDI = cVar5 + -0x15;
    if (SCARRY1(cVar4,-0x15) == SCARRY1(cVar5 + -0x15,'\0')) {
      bVar20 = SBORROW4((int)unaff_EBP,1);
      while( true ) {
        piVar15[-1] = (int)piVar15;
        unaff_EDI = (char *)piVar15[-1];
        iVar19 = *piVar15;
        unaff_EBP = (undefined4 *)piVar15[1];
        uVar13 = piVar15[3];
        _DAT_55197d09 = piVar15[4];
        iVar12 = piVar15[5];
        uVar9 = piVar15[6];
        in_AF = 9 < ((byte)uVar9 & 0xf) | in_AF;
        uVar11 = CONCAT31((int3)((uint)uVar9 >> 8),(byte)uVar9 + in_AF * -6) & 0xffffff0f;
        uVar8 = (undefined1)uVar11;
        bVar10 = (char)((uint)uVar9 >> 8) - in_AF;
        _DAT_defb0afe = CONCAT22((short)(uVar11 >> 0x10),CONCAT11(bVar10,uVar8));
        out(0xf9,uVar8);
        if (bVar20) break;
        piVar16 = piVar15 + 6;
        piVar15[6] = (int)unaff_EBP;
        cVar4 = '\x11';
        do {
          unaff_EBP = unaff_EBP + -1;
          piVar16 = piVar16 + -1;
          *piVar16 = *unaff_EBP;
          cVar4 = cVar4 + -1;
        } while ('\0' < cVar4);
        piVar15[-0xc] = (int)(piVar15 + 6);
        uVar8 = DAT_f2ea105e;
        uVar7 = *(uint *)((int)piVar15 + -0x5513);
        puVar17 = (undefined1 *)((int)piVar15 + -0x550f);
        pbVar3 = (byte *)((int)piVar15 + iVar12 + 0x66);
        *pbVar3 = *pbVar3 & bVar10;
        puVar2 = (uint *)(iVar12 + -0x32f4142f);
        uVar11 = *puVar2;
        puVar6 = (undefined1 *)(uVar7 - *puVar2);
        puVar18 = (undefined1 *)((int)piVar15 + -0x5513);
        piVar15 = (int *)((int)piVar15 + -0x5513);
        *(undefined1 **)puVar18 = puVar17;
        *puVar6 = uVar8;
        in(0xd2);
        bVar20 = SCARRY4((int)(puVar6 + 1),*(int *)(puVar6 + 0x9048e4e)) !=
                 SCARRY4((int)(puVar6 + 1 + *(int *)(puVar6 + 0x9048e4e)),(uint)(uVar7 < uVar11));
      }
      out(0x4f,_DAT_defb0afe);
      unaff_ESI = iVar19 + -1;
      piVar14 = piVar15 + 7;
      piVar15[7] = 0x51017a;
      bVar10 = func_0xf854cea7();
      pcVar1 = (char *)(iVar19 + 0x62);
      cVar4 = *pcVar1;
      *pcVar1 = *pcVar1 - (char)uVar13;
      param_2 = *piVar14;
      piVar15 = piVar14 + 1;
      in_AF = 9 < (bVar10 & 0xf) | in_AF;
      uVar11 = extraout_ECX;
      if (SBORROW1(cVar4,(char)uVar13) != *pcVar1 < '\0') break;
    }
    else {
      *(char *)(param_2 + -0x51a95b73) = *(char *)(param_2 + -0x51a95b73) << ((byte)uVar11 & 0x1f);
    }
    param_2 = CONCAT31((int3)((uint)param_2 >> 8),0xba);
  } while( true );
  param_1 = 0x76b699cf;
  goto code_r0x0051018c;
}


