/*
 * Function: Assembly_ParameterProcessing
 * Address: 00500cb1
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00500d15) overlaps instruction at (ram,0x00500d14)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

ulonglong __fastcall Assembly_ParameterProcessing(int param_1,int *param_2)

{
  char *pcVar1;
  byte *pbVar2;
  undefined1 *puVar3;
  byte bVar4;
  uint uVar5;
  code *pcVar6;
  int iVar7;
  undefined1 uVar8;
  char cVar9;
  byte bVar10;
  char cVar11;
  int iVar12;
  uint in_EAX;
  uint uVar13;
  undefined4 uVar14;
  undefined4 *puVar16;
  int iVar17;
  int iVar19;
  undefined4 uVar20;
  uint uVar21;
  int iVar22;
  uint *puVar23;
  int *piVar24;
  int *unaff_EBX;
  int iVar25;
  undefined4 *unaff_EBP;
  undefined4 *unaff_ESI;
  undefined4 *unaff_EDI;
  bool bVar26;
  char in_AF;
  ulonglong uVar27;
  undefined4 uStack_8;
  int *piStack_4;
  uint uVar15;
  undefined2 uVar18;
  
  while( true ) {
    *unaff_EDI = *unaff_ESI;
    unaff_EDI = (undefined4 *)0x4a799d9d;
    if ((char)in_EAX < '\0') break;
    param_1 = param_1 + unaff_ESI[1];
    puVar23 = (uint *)((uint)unaff_EBX ^ in_EAX & 0xffffffb1);
    piVar24 = (int *)((uint)puVar23 | *puVar23);
    uVar8 = in(0xdf);
    in_EAX = CONCAT22((short)((uint)_DAT_52b9402e >> 0x10),
                      CONCAT11(((int)piVar24 < 0) << 7 | (piVar24 == (int *)0x0) << 6 | in_AF << 4 |
                               ((POPCOUNT((uint)piVar24 & 0xff) & 1U) == 0) << 2,uVar8)) | 0x200;
    unaff_ESI = *(undefined4 **)(param_1 + 0x548df168 + (int)piVar24 * 4);
    param_2 = unaff_EBX;
    unaff_EBX = piVar24;
  }
  uStack_8 = 0x4a799d9d;
  _DAT_4a799e12 = _DAT_4a799e12 + 0x2b232e28;
  puVar23 = (uint *)((int)unaff_EBX + 0x2f);
  puVar3 = (undefined1 *)*puVar23;
  *puVar23 = *puVar23 - (int)&uStack_8;
  uVar13 = (in_EAX & 0xffffffb1) - 1;
  puVar23 = (uint *)CONCAT22((short)(uVar13 >> 0x10),
                             CONCAT11(((int)uVar13 < 0) << 7 | (uVar13 == 0) << 6 | in_AF << 4 |
                                      ((POPCOUNT(uVar13 & 0xff) & 1U) == 0) << 2 | 2U |
                                      puVar3 < &uStack_8,(char)uVar13));
  bVar10 = (byte)param_2;
  cVar11 = bVar10 * '\x02';
  iVar19 = CONCAT31((int3)((uint)param_2 >> 8),cVar11);
  piStack_4 = unaff_EBX;
  if (cVar11 == '\0' || SCARRY1(bVar10,bVar10) != cVar11 < '\0') {
    uVar8 = in((short)iVar19);
    uVar13 = (CONCAT31((int3)((uint)puVar23 >> 8),uVar8) + -0x66e3fc35) -
             (uint)CARRY1(bVar10,bVar10);
    if (param_1 + -2 != 0 && uVar13 != 0) {
      return CONCAT44(iVar19,uVar13);
    }
    piVar24 = (int *)CONCAT31((int3)((uint)(param_1 + -2) >> 8),0x12);
    *unaff_EBP = 0x604407c3;
    bVar10 = (byte)uVar13;
    uVar15 = (uint)((uVar13 & 0x100) != 0);
    iVar25 = (int)&uStack_8 + (int)unaff_EBP + uVar15;
    iVar12 = CONCAT31((int3)(CONCAT22((short)uVar13 >> 0xf,CONCAT11(bVar10 / 0x83,bVar10)) >> 8),
                      bVar10 % 0x83) + -1;
    unaff_EBP[-1] = iVar12;
    iVar22 = (int)unaff_EBX +
             (uint)(CARRY4((uint)&uStack_8,(uint)unaff_EBP) ||
                   CARRY4((int)&uStack_8 + (int)unaff_EBP,uVar15)) + iRama12bd31f;
    *piVar24 = *piVar24 + -0x4a799d9d;
    iVar19 = iVar12 >> 0x1f;
    cVar11 = (byte)iVar22 + 0x17;
    piVar24 = (int *)CONCAT31((int3)((uint)iVar22 >> 8),cVar11);
    uVar18 = (undefined2)((uint)unaff_EBP[-1] >> 0x10);
    uVar8 = (undefined1)unaff_EBP[-1];
    puVar16 = (undefined4 *)CONCAT22(uVar18,CONCAT11(0x1f,uVar8));
    uVar15 = (uint)(0xe8 < (byte)iVar22);
    uVar5 = (int)unaff_EBP - (int)puVar16;
    bVar26 = unaff_EBP < puVar16 || uVar5 < uVar15;
    iVar7 = -uVar15;
    if (SBORROW4((int)unaff_EBP,(int)puVar16) == SBORROW4(uVar5,uVar15)) {
      cVar9 = -bVar26;
      uVar15 = CONCAT31((int3)((uint)iVar12 >> 8),cVar9);
      iVar17 = CONCAT22(uVar18,CONCAT11(('\x1f' - cRam8aaf6ace) - bVar26,uVar8));
      *(uint *)(uVar5 + iVar7 + -4) = uVar15;
      out(0xe9,cVar9);
      pbVar2 = (byte *)(iVar19 + 0xc23d133);
      *pbVar2 = *pbVar2 >> 1 | *pbVar2 << 7;
      iVar19 = *(int *)(uVar5 + iVar7 + -4);
      uVar21 = CONCAT22((short)(iVar12 >> 0x1f),CONCAT11((char)*piVar24,(char)(iVar12 >> 0x1f)));
      *piVar24 = *piVar24 << 1;
      iVar12 = CONCAT22((short)((uint)iVar22 >> 0x10),CONCAT11(0xde,cVar11));
      uVar15 = (uVar15 | 0x5f) & 0xffffffe9;
      *(uint *)(uVar5 + iVar7 + -4) = uVar15;
      *(int *)(uVar5 + iVar7 + -8) = iVar17;
      *(uint *)(uVar5 + iVar7 + -0xc) = uVar21;
      *(int *)(uVar5 + iVar7 + -0x10) = iVar12;
      *(uint *)(uVar5 + iVar7 + -0x14) = uVar5 + iVar7;
      *(int *)(uVar5 + iVar7 + -0x18) = iVar25;
      *(undefined4 *)(uVar5 + iVar7 + -0x1c) = 0xa12bd2c3;
      *(int *)(uVar5 + iVar7 + -0x20) = iVar19 + 1;
      bVar26 = uVar21 < *(uint *)(iVar12 * 9 + 0x1b);
      bVar10 = (byte)uVar15 % 0x4a;
      if (iVar17 != 1) {
        in(0xfc);
        *(int *)(uVar5 + iVar7 + -0x24) = iVar25 - *(int *)((uVar15 - 0x68) + iVar17);
        *(undefined4 *)(uVar5 + iVar7 + -0x28) = 0x500da1;
        func_0xa84243b1();
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      bVar4 = bVar10 + 0x85;
      cVar11 = bVar4 + bVar26;
      return CONCAT44(uVar21,CONCAT22((short)(uVar15 >> 0x10),
                                      CONCAT11((cVar11 < '\0') << 7 | (cVar11 == '\0') << 6 |
                                               ((uVar13 & 0x1000) != 0) << 4 |
                                               ((POPCOUNT(cVar11) & 1U) == 0) << 2 | 2U |
                                               (0x7a < bVar10 || CARRY1(bVar4,bVar26)),cVar11)));
    }
  }
  else {
    *puVar23 = *puVar23 ^ 0x4a799d9d;
    _DAT_37893f10 = _DAT_37893f10 - iVar19;
    if (_DAT_37893f10 == 0) {
      unaff_EBP[-1] = iVar19;
      uVar20 = unaff_EBP[5];
      uVar14 = unaff_EBP[7];
      if (1 < (int)(unaff_ESI + 2)) {
        pcVar6 = (code *)swi(1);
        uVar27 = (*pcVar6)();
        return uVar27;
      }
      *(undefined4 *)*unaff_EBP = uVar14;
      return CONCAT44(uVar20,uVar14) & 0xffffffffffffff00;
    }
  }
  pcVar1 = (char *)(iVar19 + -0x61);
  cVar11 = *pcVar1;
  cVar9 = (char)((uint)iVar19 >> 8);
  *pcVar1 = *pcVar1 + cVar9;
  pcVar6 = (code *)swi(4);
  if (SCARRY1(cVar11,cVar9)) {
    (*pcVar6)();
  }
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


