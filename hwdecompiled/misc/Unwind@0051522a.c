/*
 * Function: Unwind@0051522a
 * Address: 0051522a
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */

ulonglong __fastcall Unwind_0051522a(uint param_1,int param_2)

{
  byte bVar1;
  uint *puVar2;
  byte bVar3;
  uint *puVar4;
  bool bVar5;
  byte bVar6;
  byte bVar7;
  ushort uVar8;
  int in_EAX;
  uint uVar9;
  undefined3 uVar12;
  char *pcVar11;
  byte bVar13;
  undefined2 uVar16;
  uint uVar15;
  int iVar17;
  int unaff_EBX;
  undefined1 *puVar18;
  uint unaff_EBP;
  int *piVar19;
  int iVar20;
  byte *unaff_ESI;
  byte *pbVar21;
  byte *pbVar22;
  byte *unaff_EDI;
  byte *pbVar23;
  undefined2 in_ES;
  byte in_AF;
  unkbyte10 in_ST6;
  int iVar10;
  int iVar14;
  
  do {
    bVar6 = 9 < ((byte)in_EAX & 0xf) | in_AF;
    puVar4 = (uint *)(unaff_EDI + 4);
    puVar2 = (uint *)(unaff_ESI + 5);
    piVar19 = (int *)(unaff_EBP ^ *puVar2);
    uVar9 = CONCAT31(CONCAT21((short)((uint)in_EAX >> 0x10),(char)((uint)in_EAX >> 8) + bVar6),
                     *unaff_ESI) ^ 0xb3e2a5d9;
    *(int *)(uVar9 + 0xc50b6b97) = *(int *)(uVar9 + 0xc50b6b97) + param_1;
    *(byte *)puVar4 = (byte)*puVar4 & (byte)((uint)unaff_EBX >> 8);
    uVar12 = (undefined3)(uVar9 >> 8);
    bVar7 = in(0x1e);
    iVar10 = CONCAT31(uVar12,bVar7);
    *(uint *)(iVar10 + -0x25c9712b) = *(uint *)(iVar10 + -0x25c9712b) >> 1;
    uVar16 = (undefined2)(param_1 >> 0x10);
    bVar13 = (byte)param_1;
    iVar14 = CONCAT22(uVar16,CONCAT11(0xbc,bVar13));
    iVar17 = (CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 + -0x6f) -
             *(int *)((int)piVar19 + 10)) + -1;
    out(0x3c,bVar7);
    unaff_EBX = unaff_EBX + -1 + iVar10;
    ffree(in_ST6);
    puRam27a589d1 = puVar4;
    if (iVar14 == 0) {
      uVar9 = CONCAT31(uVar12,bVar7 ^ bRam560d8960);
      out(0xbe,uVar9);
      bVar7 = (bVar7 ^ bRam560d8960) + 0x2a;
      uRam6313a706 = (undefined1)unaff_EBX;
      bVar6 = 9 < (bVar7 & 0xf) | bVar6;
      bVar7 = bVar7 + bVar6 * '\x06';
      uRam27a589cd = 0x34;
      puVar18 = (undefined1 *)0x27a589d1;
      pbVar22 = unaff_ESI + 6;
      if ((char)(byte)*puVar4 < (char)(byte)*puVar2) {
        if ((char)(byte)*puVar4 <= (char)(byte)*puVar2) {
          unaff_ESI[-0x1d2a9bd9] = unaff_ESI[-0x1d2a9bd9] ^ (byte)((uint)iVar17 >> 8);
          puVar18 = (undefined1 *)0x27a589f1;
          iVar17 = iRam27a589e5;
          piVar19 = piRam27a589d9;
        }
        DAT_f90d9182 = SUB41(piVar19,0);
        out(0x6b,DAT_f90d9182);
        DAT_e68987fb = DAT_e68987fb << 1;
        *(undefined4 *)(puVar18 + -4) = 0xffffffdb;
        return CONCAT44(iVar17 + 1,piVar19) & 0xffffffffdfbeb05c;
      }
      DAT_c7db89d1 = DAT_c7db89d1 |
                     bVar7 + (0x90 < (bVar7 & 0xf0) | 0x789dc3d5 < uVar9 | bVar6 * (0xf9 < bVar7)) *
                             'a' + 0xb8;
      uVar8 = 0x4ce5;
LAB_005152d5:
      DAT_fe699a47 = (undefined1)uVar8;
      *(undefined2 *)(puVar18 + -4) = in_ES;
      out(*pbVar22,(short)iVar17);
      *(int *)(puVar18 + -8) = (int)(short)uVar8;
      return CONCAT44(iVar17,(int)(short)uVar8);
    }
    iVar20 = *piVar19;
    *(undefined2 *)piVar19 = in_ES;
    param_2 = CONCAT31((int3)((uint)iVar17 >> 8),*(undefined1 *)(unaff_EBX + 0x2bd0eaeb));
    *puVar4 = *puVar2;
    unaff_ESI = unaff_ESI + 9;
    pbVar22 = unaff_EDI + 8;
    do {
      pbVar23 = pbVar22;
      pbVar21 = unaff_ESI;
      unaff_ESI = pbVar21 + 1;
      bVar3 = *pbVar23;
      bVar1 = *pbVar21;
      pbVar22 = pbVar23 + 1;
    } while ((char)bVar3 <= (char)bVar1);
    if (SBORROW1(bVar1,bVar3)) {
      puVar18 = (undefined1 *)0x422f6737;
      iVar17 = param_2 + -1;
      uVar8 = (ushort)CONCAT31(uVar12,bVar7) ^ 0x14;
      pbVar22 = unaff_ESI;
      if (iVar14 != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      goto LAB_005152d5;
    }
    in_AF = 9 < (bVar7 & 0xf) | bVar6;
    bVar7 = bVar7 + in_AF * '\x06';
    uVar15 = CONCAT22(uVar16,CONCAT11((char)((uint)unaff_EBX >> 8),bVar13)) | 0xbc00;
    uVar8 = (ushort)(byte)(bVar7 + (0x90 < (bVar7 & 0xf0) | in_AF * (0xf9 < bVar7)) * '`' +
                          (char)(uVar9 >> 8) * '\t');
    pcVar11 = (char *)CONCAT22((short)(uVar9 >> 0x10),uVar8);
    unaff_EDI = pbVar23 + 6;
    in_ES = *(undefined2 *)(iVar10 + 0x422f6733 + (uint)(bVar1 < bVar3));
    if (pcVar11 < *(char **)(pbVar23 + 2) || pcVar11 == *(char **)(pbVar23 + 2)) {
      *pcVar11 = *pcVar11 + '\x01';
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    piVar19 = (int *)(uVar15 + 0x36);
    *piVar19 = *piVar19 - iVar20;
    iVar17 = *piVar19;
    pbVar21 = pbVar21 + 0x54;
    *(int *)pbVar21 = *(int *)pbVar21 >> (bVar13 & 0x1f);
    bVar5 = (param_1 & 0x1f) != 0;
    in_EAX = (int)(short)uVar8;
    if (!bVar5 && iVar17 == 0 || bVar5 && *(int *)pbVar21 == 0) {
      *(byte **)(iVar10 + 0x422f6733 + (uint)(bVar1 < bVar3) + -1) = unaff_EDI;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    unaff_EBP = iVar20 - 1;
    param_1 = uVar15;
  } while( true );
}


