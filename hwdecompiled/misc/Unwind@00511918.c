/*
 * Function: Unwind@00511918
 * Address: 00511918
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005118ca) overlaps instruction at (ram,0x005118c8)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined2 * __fastcall Unwind_00511918(uint *param_1,undefined4 *param_2)

{
  uint *puVar1;
  uint uVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  ushort uVar6;
  undefined4 uVar7;
  undefined2 *puVar8;
  undefined3 uVar10;
  int in_EAX;
  byte *pbVar9;
  undefined4 *puVar11;
  uint unaff_EBX;
  undefined4 *unaff_ESI;
  byte *unaff_EDI;
  byte in_AF;
  float10 in_ST0;
  
  *(int *)(unaff_EBX + 0x18d1fef7) = (int)ROUND(in_ST0);
  while( true ) {
    puVar11 = param_2;
    pbVar9 = (byte *)(in_EAX + -0x79484278);
    *pbVar9 = *pbVar9 & (byte)puVar11;
    out((short)puVar11,(char)pbVar9);
    if ((char)*pbVar9 < '\x01') {
      *(undefined4 *)unaff_EDI = *unaff_ESI;
      uVar7 = in((short)puVar11);
      *(undefined4 *)(unaff_EDI + 4) = uVar7;
      *(int *)((int)puVar11 + -0x2b) = *(int *)((int)puVar11 + -0x2b) - (int)puVar11;
      puVar1 = (uint *)((int)unaff_ESI + 0x15);
      *puVar1 = *puVar1 >> 1 | (uint)((*puVar1 & 1) != 0) << 0x1f;
      *(uint *)(in_EAX + -0x794842e0) = *(uint *)(in_EAX + -0x794842e0) >> 1;
      do {
                    /* WARNING: Do nothing block with infinite loop */
      } while( true );
    }
    param_1 = (uint *)((int)param_1 + -1);
    uVar10 = (undefined3)((uint)unaff_ESI >> 8);
    cVar3 = *(char *)(unaff_EBX + ((uint)unaff_ESI & 0xff));
    bVar4 = cVar3 + *(char *)(CONCAT31(uVar10,cVar3) + -0x3e8c4a17);
    uVar2 = *param_1;
    param_2 = (undefined4 *)((int)puVar11 + *param_1);
    if (!CARRY4((uint)puVar11,uVar2) && param_2 != (undefined4 *)0x0) break;
    pbVar9 = unaff_EDI + 1;
    *unaff_EDI = bVar4;
    unaff_EDI = unaff_EDI + 2;
                    /* WARNING: Do nothing block with infinite loop */
    in_AF = 9 < (bVar4 & 0xf) | in_AF;
    bVar5 = bVar4 + in_AF * '\x06';
    in_EAX = CONCAT31(uVar10,bVar5 + (0x90 < (bVar5 & 0xf0) |
                                     CARRY4((uint)puVar11,uVar2) | in_AF * (0xf9 < bVar5)) * '`');
    unaff_ESI = puVar11;
    _DAT_308d8bac = CONCAT31(uVar10,bVar4);
    if (SCARRY4((int)pbVar9,1) != (int)unaff_EDI < 0) {
      do {
      } while( true );
    }
  }
  uVar6 = (ushort)CONCAT31(uVar10,bVar4);
  bVar4 = (char)(uVar6 / *unaff_EDI) + (char)(uVar6 % (ushort)*unaff_EDI) * 'S';
  puVar8 = (undefined2 *)CONCAT22((short)((uint)unaff_ESI >> 0x10),(ushort)bVar4);
  *unaff_EDI = bVar4;
  if (0 < (int)(*(uint *)(unaff_EBX + 0x10) & unaff_EBX)) {
    _DAT_f588bd97 = CONCAT22((short)(unaff_EBX >> 0x10),(short)param_1);
    *puVar8 = *puVar8;
    uVar7 = in(CONCAT11((char)((uint)param_2 >> 8) * '\x02',(char)param_2));
    bVar4 = (byte)uVar7;
    puVar8 = (undefined2 *)
             CONCAT31((int3)(CONCAT22((short)((uint)uVar7 >> 0x10),CONCAT11(bVar4 / 0x20,bVar4)) >>
                            8),bVar4 % 0x20);
  }
  return puVar8;
}


