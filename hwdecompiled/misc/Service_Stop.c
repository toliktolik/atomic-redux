/*
 * Function: Service_Stop
 * Address: 004e37d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint * __cdecl Service_Stop(uint *param_1,uint *param_2)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  int local_c;
  uint *local_8;
  
  local_8 = (uint *)0x0;
  puVar2 = (uint *)Assembly_DecompilationFailed(1,0x514);
  uVar1 = param_1[7];
  uVar3 = GIF_SetTransparentIndex(param_2,0x18);
  *puVar2 = uVar3;
  uVar3 = GIF_SetTransparentIndex(param_2,0x18);
  puVar2[1] = uVar3;
  uVar3 = GIF_SetTransparentIndex(param_2,0x18);
  puVar2[2] = uVar3 + 1;
  uVar3 = GIF_SetTransparentIndex(param_2,6);
  puVar2[3] = uVar3 + 1;
  uVar3 = GIF_SetTransparentIndex(param_2,8);
  puVar2[4] = uVar3;
  local_c = 0;
  if (0 < (int)puVar2[3]) {
    param_1 = puVar2 + 5;
    do {
      uVar3 = GIF_SetTransparentIndex(param_2,3);
      uVar4 = GIF_SetTransparentIndex(param_2,1);
      if (uVar4 != 0) {
        uVar4 = GIF_SetTransparentIndex(param_2,5);
        uVar3 = uVar3 | uVar4 << 3;
      }
      *param_1 = uVar3;
      iVar5 = Service_Start(uVar3);
      local_8 = (uint *)((int)local_8 + iVar5);
      local_c = local_c + 1;
      param_1 = param_1 + 1;
    } while (local_c < (int)puVar2[3]);
  }
  if (0 < (int)local_8) {
    puVar6 = puVar2 + 0x45;
    param_1 = local_8;
    do {
      uVar3 = GIF_SetTransparentIndex(param_2,8);
      *puVar6 = uVar3;
      puVar6 = puVar6 + 1;
      param_1 = (uint *)((int)param_1 + -1);
    } while (param_1 != (uint *)0x0);
  }
  if (*(int *)(uVar1 + 0x1c) <= (int)puVar2[4]) {
LAB_004e38f8:
    Service_Install(puVar2);
    return (uint *)0x0;
  }
  iVar5 = 0;
  if (0 < (int)local_8) {
    puVar6 = puVar2 + 0x45;
    do {
      if (*(int *)(uVar1 + 0x1c) <= (int)*puVar6) goto LAB_004e38f8;
      iVar5 = iVar5 + 1;
      puVar6 = puVar6 + 1;
    } while (iVar5 < (int)local_8);
  }
  return puVar2;
}


