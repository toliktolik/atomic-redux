/*
 * Function: XML_ParseSurvivalData
 * Address: 0044aca0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall XML_ParseSurvivalData(int param_1)

{
  double dVar1;
  double dVar2;
  undefined4 uVar3;
  int iVar4;
  undefined4 *puVar5;
  int iVar6;
  uint extraout_ECX;
  uint *extraout_EDX;
  float10 fVar7;
  float10 extraout_ST1;
  ulonglong uVar8;
  undefined4 uVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  undefined1 uVar15;
  int iVar16;
  
  if (*(int *)(param_1 + 0x68) == 0) {
    uVar3 = List_Clear(param_1);
    *(undefined4 *)(param_1 + 0x68) = uVar3;
  }
  else {
    *(undefined4 *)(*(int *)(param_1 + 0x58) + 0x1f8) =
         *(undefined4 *)(*(int *)(param_1 + 0x58) + 500);
    iVar6 = *(int *)(param_1 + 0x58);
    do {
      iVar4 = *(int *)(*(int *)(iVar6 + 0x1f8) + 4);
      if (iVar4 == 0) {
        *(undefined4 *)(param_1 + 0x68) = 0;
        break;
      }
      *(int *)(iVar6 + 0x1f8) = iVar4;
      iVar6 = *(int *)(param_1 + 0x58);
      if (*(int *)(iVar6 + 0x200) == 0) {
        iVar4 = 0;
      }
      else {
        iVar4 = **(int **)(iVar6 + 0x1f8);
      }
    } while (iVar4 != *(int *)(param_1 + 0x68));
  }
  if ((((*(int *)(param_1 + 0x110) == 0) ||
       (*(double *)(param_1 + 0x70) < _DAT_00531258 !=
        (NAN(*(double *)(param_1 + 0x70)) || NAN(_DAT_00531258)))) ||
      (_DAT_00531250 < *(double *)(param_1 + 0x70))) ||
     ((*(double *)(param_1 + 0xc0) < _DAT_00530570 !=
       (NAN(*(double *)(param_1 + 0xc0)) || NAN(_DAT_00530570)) ||
      (_DAT_00531248 < *(double *)(param_1 + 0xc0))))) {
    String_ToLowerCase(param_1);
    return;
  }
  puVar5 = (undefined4 *)(param_1 + 0xb8);
  iVar6 = 9;
  do {
    *puVar5 = puVar5[-2];
    puVar5[1] = puVar5[-1];
    puVar5[0x14] = puVar5[0x12];
    puVar5[0x15] = puVar5[0x13];
    puVar5 = puVar5 + -2;
    iVar6 = iVar6 + -1;
  } while (iVar6 != 0);
  iVar6 = Collision_HandleEnemyHit();
  *(double *)(param_1 + 0x78) =
       ((double)(iVar6 % 2000) * _DAT_0052c538 - _DAT_0052c568) + *(double *)(param_1 + 0x78);
  iVar4 = Collision_HandleEnemyHit();
  iVar6 = *(int *)(param_1 + 0x68);
  *(double *)(param_1 + 200) =
       ((double)(iVar4 % 2000) * _DAT_0052c538 - _DAT_0052c568) + *(double *)(param_1 + 200);
  if (iVar6 == 0) {
    *(double *)(param_1 + 0x20) = -*(double *)(param_1 + 0x70);
    dVar1 = _DAT_0052d4e8;
  }
  else {
    *(double *)(param_1 + 0x20) = *(double *)(iVar6 + 8) - *(double *)(param_1 + 0x70);
    dVar1 = *(double *)(iVar6 + 0x10);
  }
  *(double *)(param_1 + 0x28) = dVar1 - *(double *)(param_1 + 0xc0);
  Math_ProcessFloatPrecision(2000,(uint *)(iVar4 % 2000));
  fVar7 = (float10)Math_ProcessFloatPrecision(extraout_ECX,extraout_EDX);
  if ((float10)_DAT_0052c5a8 < SQRT(fVar7 + extraout_ST1)) {
    fVar7 = (float10)_DAT_0052c5a8 / SQRT(fVar7 + extraout_ST1);
    *(double *)(param_1 + 0x20) = (double)(fVar7 * (float10)*(double *)(param_1 + 0x20));
    *(double *)(param_1 + 0x28) = (double)(fVar7 * (float10)*(double *)(param_1 + 0x28));
  }
  dVar1 = *(double *)(param_1 + 0x70) + *(double *)(param_1 + 0x20);
  *(double *)(param_1 + 0x70) = dVar1;
  dVar2 = *(double *)(param_1 + 0x28) + *(double *)(param_1 + 0xc0);
  *(double *)(param_1 + 0xc0) = dVar2;
  if (((iVar6 != 0) &&
      ((NAN(dVar1) || NAN(*(double *)(iVar6 + 8))) != (dVar1 == *(double *)(iVar6 + 8)))) &&
     ((NAN(dVar2) || NAN(*(double *)(iVar6 + 0x10))) != (dVar2 == *(double *)(iVar6 + 0x10)))) {
    iVar16 = -1;
    uVar15 = 1;
    iVar14 = 100;
    iVar13 = 0x40080000;
    iVar12 = 0;
    iVar11 = 0x3fa99999;
    iVar10 = -0x66666666;
    uVar9 = 0x40080000;
    uVar3 = 0;
    *(double *)(iVar6 + 0x58) =
         *(double *)(iVar6 + 0x58) -
         (double)*(int *)(*(int *)(*(int *)(param_1 + 0x58) + 0x5c) + 0x994);
    *(undefined4 *)(*(int *)(param_1 + 0x68) + 0x34) = 0xff;
    iVar6 = *(int *)(param_1 + 0x58);
    iVar4 = *(int *)(param_1 + 0x68);
    uVar8 = Math_FloatToUInt64();
    ParticleEffects_CreateParticles
              (iVar6 + 0x2e8,*(int *)(*(int *)(iVar6 + 0x5c) + 0x7a4),*(int *)(iVar4 + 8),
               *(int *)(iVar4 + 0xc),*(int *)(iVar4 + 0x10),*(int *)(iVar4 + 0x14),
               *(double *)(iVar4 + 0x18),*(double *)(iVar4 + 0x20),(int)uVar8,
               (double)CONCAT44(uVar9,uVar3),iVar10,iVar11,iVar12,iVar13,iVar14,uVar15,iVar16);
    iVar6 = **(int **)(*(int *)(param_1 + 0x58) + 0x5c);
    uVar8 = Math_FloatToUInt64();
    (**(code **)(iVar6 + 0xb8))(0x2c,(int)uVar8);
    puVar5 = (undefined4 *)operator_new(0x30);
    LinkedList_PushBack((void *)(*(int *)(param_1 + 0x58) + 0x2a4),puVar5);
    iVar6 = *(int *)(param_1 + 0x68);
    *puVar5 = *(undefined4 *)(iVar6 + 8);
    puVar5[1] = *(undefined4 *)(iVar6 + 0xc);
    iVar6 = *(int *)(param_1 + 0x68);
    puVar5[2] = *(undefined4 *)(iVar6 + 0x10);
    puVar5[3] = *(undefined4 *)(iVar6 + 0x14);
    iVar6 = *(int *)(param_1 + 0x68);
    puVar5[4] = *(undefined4 *)(iVar6 + 0x18);
    puVar5[5] = *(undefined4 *)(iVar6 + 0x1c);
    iVar6 = *(int *)(param_1 + 0x68);
    puVar5[6] = *(undefined4 *)(iVar6 + 0x20);
    puVar5[7] = *(undefined4 *)(iVar6 + 0x24);
    puVar5[10] = 0x14;
    puVar5[8] = 0;
    puVar5[9] = 0;
    dVar1 = *(double *)(*(int **)(param_1 + 0x68) + 0x16);
    if (dVar1 < _DAT_0052a0c0 != (NAN(dVar1) || NAN(_DAT_0052a0c0))) {
      (**(code **)(**(int **)(param_1 + 0x68) + 0x10))();
      if (*(int *)(param_1 + 0x68) != *(int *)(*(int *)(param_1 + 0x58) + 0x2e4)) {
        Boss_BattleshipCannonSystem(*(int *)(param_1 + 0x68));
      }
    }
    uVar3 = List_Clear(param_1);
    *(undefined4 *)(param_1 + 0x68) = uVar3;
    *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + -1;
    return;
  }
  return;
}


