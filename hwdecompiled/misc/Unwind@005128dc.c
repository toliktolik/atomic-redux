/*
 * Function: Unwind@005128dc
 * Address: 005128dc
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00512936) */
/* WARNING: Removing unreachable block (ram,0x0051294f) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005128dc(int param_1)

{
  char *pcVar1;
  byte *pbVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  undefined1 uVar6;
  undefined4 in_EAX;
  undefined3 uVar10;
  uint uVar8;
  int iVar9;
  byte bVar11;
  int iVar12;
  undefined2 uVar13;
  int *piVar14;
  uint unaff_EBX;
  uint uVar15;
  int unaff_EBP;
  byte *unaff_ESI;
  uint *unaff_EDI;
  byte in_CF;
  bool bVar16;
  byte in_AF;
  int unaff_retaddr;
  undefined4 uVar7;
  
  bVar4 = 9 < ((byte)in_EAX & 0xf) | in_AF;
  uVar10 = (undefined3)((uint)in_EAX >> 8);
  bVar5 = (byte)in_EAX + bVar4 * '\x06';
  bVar5 = bVar5 + (0x90 < (bVar5 & 0xf0) | in_CF | bVar4 * (0xf9 < bVar5)) * '`';
  uVar7 = CONCAT31(uVar10,bVar5);
  if (bVar5 < (byte)*unaff_EDI) {
    _DAT_7350d32d = uVar7;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  piVar14 = (int *)&stack0xffffffe0;
  uVar13 = (undefined2)unaff_retaddr;
  out(uVar13,uVar7);
  uVar15 = unaff_EBX & *(uint *)(&stack0xffffffc0 + unaff_EBP * 4);
  *unaff_ESI = (byte)uVar15;
  bVar4 = *unaff_ESI;
  bVar11 = (byte)param_1;
  *unaff_ESI = *unaff_ESI + bVar11;
  uVar6 = *(undefined1 *)(uVar15 + bVar5);
  iVar12 = CONCAT22((short)((uint)param_1 >> 0x10),
                    CONCAT11(*(undefined1 *)(param_1 + 0x59cc2f26),bVar11));
  pbVar2 = (byte *)(unaff_EBP + -0x37 + iVar12);
  bVar5 = *pbVar2;
  *pbVar2 = *pbVar2 << 1 | CARRY1(bVar4,bVar11);
  uVar8 = CONCAT31(uVar10,uVar6) + 0x65d3a876 + (uint)((char)bVar5 < '\0');
  iVar9 = CONCAT31((int3)(uVar8 >> 8),*(undefined1 *)(uVar15 + (uVar8 & 0xff)));
  pcVar1 = (char *)(uVar15 - 0x29);
  cVar3 = *pcVar1;
  *pcVar1 = *pcVar1 << 1;
  uVar8 = iVar12 - 1;
  pbVar2 = *(byte **)(unaff_ESI + -0x55477b3b);
  out(uVar13,iVar9);
  if (uVar8 == 0 || iVar12 < 1) {
    if ((POPCOUNT(uVar8 & 0xff) & 1U) == 0) {
      out(0x30,iVar9);
      goto LAB_00512966;
    }
    in(uVar13);
    bVar16 = (byte)unaff_retaddr < *pbVar2;
  }
  else {
    unaff_retaddr = (iVar9 + -0x5f3366d) - (uint)(cVar3 < '\0');
    unaff_ESI[0x2e6c204a] = unaff_ESI[0x2e6c204a] + (char)(uVar8 >> 8);
    pbVar2 = (byte *)((int)unaff_EDI + 1);
    *(byte *)unaff_EDI = *unaff_ESI;
    piVar14 = (int *)unaff_EDI[2];
    bVar16 = (byte)unaff_retaddr < *pbVar2;
    unaff_EBX = uVar8;
  }
  unaff_EDI = (uint *)(pbVar2 + 1);
  iVar9 = unaff_retaddr;
  uVar8 = unaff_EBX;
  unaff_retaddr = (int)piVar14 + *piVar14 + (uint)bVar16;
  if (SCARRY4((int)piVar14,*piVar14) != SCARRY4((int)piVar14 + *piVar14,(uint)bVar16)) {
    return;
  }
LAB_00512966:
  pbVar2 = (byte *)((int)unaff_EDI + uVar8 + 4);
  _DAT_6bf01d05 = iVar9;
  *pbVar2 = (*pbVar2 - (char)unaff_retaddr) -
            (CONCAT31((int3)((uint)iVar9 >> 8),DAT_bfaa5f7b) < *unaff_EDI);
  return;
}


