/*
 * Function: Runtime_GetHeapInfo
 * Address: 004f881c
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Runtime_GetHeapInfo(void)

{
  uint *puVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *puVar4;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  int unaff_EBP;
  uint uVar5;
  char *pcVar6;
  float10 fVar7;
  undefined8 uVar8;
  undefined4 *in_stack_ffffffbc;
  undefined4 *in_stack_ffffffc0;
  
  Assembly_BitShiftLocking();
  *(uint *)(unaff_EBP + -0x10) = DAT_00569f5c ^ *(uint *)(unaff_EBP + 4);
  Runtime_AllocateBlock();
  *(undefined4 *)(unaff_EBP + -4) = 0;
  uVar2 = Graphics_LoadTexture((void *)(unaff_EBP + 0xc),(int *)(unaff_EBP + 0x14));
  puVar1 = *(uint **)(unaff_EBP + 0x24);
  if ((char)uVar2 != '\0') {
    *puVar1 = *puVar1 | 1;
  }
  if (*(int *)(unaff_EBP + -0x3c) == 0) {
    *puVar1 = *puVar1 | 2;
    uVar5 = extraout_EDX;
    goto LAB_004f890d;
  }
  *(undefined4 *)(unaff_EBP + -0x1c) = 0xf;
  String_SetLength((void *)(unaff_EBP + -0x34),0);
  *(undefined1 *)(unaff_EBP + -4) = 1;
  if (*(uint *)(unaff_EBP + -0x1c) < *(uint *)(unaff_EBP + -0x3c)) {
    Level_ProcessWaveSpawning
              ((_String_base *)(unaff_EBP + -0x34),extraout_EDX_00,*(uint *)(unaff_EBP + -0x3c),'\0'
              );
  }
  uVar5 = 0;
  if (*(int *)(unaff_EBP + -0x3c) != 0) {
    do {
      iVar3 = *(int *)(unaff_EBP + -0x4c);
      if (*(uint *)(unaff_EBP + -0x38) < 0x10) {
        iVar3 = unaff_EBP + -0x4c;
      }
      Memory_AllocateSound((_String_base *)(unaff_EBP + -0x34),1,*(_String_base *)(iVar3 + uVar5));
      uVar5 = uVar5 + 1;
    } while (uVar5 < *(uint *)(unaff_EBP + -0x3c));
  }
  pcVar6 = *(char **)(unaff_EBP + -0x30);
  if (*(uint *)(unaff_EBP + -0x1c) < 0x10) {
    pcVar6 = (char *)(unaff_EBP + -0x30);
  }
  puVar4 = (undefined4 *)System_GetSystemInfo();
  *puVar4 = 0;
  fVar7 = CRuntime_StringToFloat(pcVar6,(char **)(unaff_EBP + 0x20),0);
  *(double *)(unaff_EBP + -0x18) = (double)fVar7;
  uVar5 = extraout_EDX_01;
  if (*(char **)(unaff_EBP + 0x20) == pcVar6) {
LAB_004f8900:
    *puVar1 = *puVar1 | 2;
  }
  else {
    uVar8 = System_GetSystemInfo();
    uVar5 = (uint)((ulonglong)uVar8 >> 0x20);
    if (*(int *)uVar8 != 0) goto LAB_004f8900;
    **(undefined8 **)(unaff_EBP + 0x28) = *(undefined8 *)(unaff_EBP + -0x18);
  }
  String_Reset(unaff_EBP + -0x34,uVar5,'\x01');
  uVar5 = extraout_EDX_02;
LAB_004f890d:
  puVar4 = *(undefined4 **)(unaff_EBP + 8);
  *puVar4 = *(undefined4 *)(unaff_EBP + 0xc);
  puVar4[1] = *(undefined4 *)(unaff_EBP + 0x10);
  String_Reset(unaff_EBP + -0x50,uVar5,'\x01');
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  Exception_SetMessage
            ((void *)(*(uint *)(unaff_EBP + -0x10) ^ *(uint *)(unaff_EBP + 4)),in_stack_ffffffbc,
             in_stack_ffffffc0);
  return;
}


