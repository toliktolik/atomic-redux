/*
 * Function: Unwind@00510360
 * Address: 00510360
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x00510336) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __fastcall Unwind_00510360(uint param_1,char *param_2)

{
  uint *puVar1;
  byte *pbVar2;
  uint uVar3;
  byte bVar5;
  ushort uVar6;
  char cVar7;
  byte bVar9;
  undefined2 uVar10;
  char *in_EAX;
  int unaff_EBP;
  undefined1 *unaff_ESI;
  undefined1 *unaff_EDI;
  bool bVar11;
  undefined1 in_CF;
  char in_PF;
  char in_AF;
  undefined1 in_ZF;
  char in_SF;
  float10 in_ST0;
  undefined8 in_MM3;
  uint uVar4;
  uint uVar8;
  
  while( true ) {
    if (!(bool)in_ZF) {
      return in_ST0;
    }
    bVar5 = ((byte)param_1 & 0x1f) % 9;
    uVar6 = CONCAT11(in_CF,in_EAX[0x2c]);
    uVar6 = uVar6 >> bVar5 | uVar6 << 9 - bVar5;
    in_EAX[0x2c] = (char)uVar6;
    bVar11 = (uVar6 & 0x100) != 0;
    bVar5 = in_SF << 7 | in_ZF << 6 | in_AF << 4 | in_PF << 2;
    uVar10 = (undefined2)((uint)in_EAX >> 0x10);
    bVar9 = bVar5 | 2 | bVar11;
    cVar7 = ((char)in_EAX + '\b') - bVar11;
    uVar8 = CONCAT31((int3)(CONCAT22(uVar10,CONCAT11(bVar9,(char)in_EAX)) >> 8),cVar7);
    pbVar2 = unaff_ESI + unaff_EBP + 0x615d615b;
    *pbVar2 = *pbVar2 ^ bVar9;
    if ((POPCOUNT(*pbVar2) & 1U) == 0) break;
    in_AF = (bVar5 & 0x10) != 0;
    in_EAX = (char *)CONCAT22(uVar10,CONCAT11(0x9e,cVar7));
    *unaff_EDI = *unaff_ESI;
    *in_EAX = *in_EAX << 1;
    puVar1 = (uint *)(&stack0x00000000 + param_1 * 2);
    *puVar1 = *puVar1 & (uint)in_EAX;
    uVar8 = *puVar1;
    uVar3 = *puVar1;
    uVar4 = *puVar1;
    bVar5 = (byte)param_1 & 0x1f;
    cVar7 = *param_2;
    *param_2 = *param_2 >> bVar5;
    in_CF = (param_1 & 0x1f) != 0 && (cVar7 >> bVar5 - 1 & 1U) != 0;
    bVar11 = (param_1 & 0x1f) != 0;
    in_SF = !bVar11 && (int)uVar8 < 0 || bVar11 && *param_2 < '\0';
    in_ZF = !bVar11 && uVar3 == 0 || bVar11 && *param_2 == '\0';
    in_PF = !bVar11 && (POPCOUNT(uVar4 & 0xff) & 1U) == 0 ||
            bVar11 && (POPCOUNT(*param_2) & 1U) == 0;
    unaff_ESI = unaff_ESI + 1;
    unaff_EDI = unaff_EDI + 1;
  }
  puVar1 = (uint *)(unaff_EBP + 10 + (int)param_2 * 4);
  *puVar1 = *puVar1 ^ uVar8;
  paddusb(in_MM3,_DAT_a0272890);
  swi(4);
  return (float10)*(double *)(uVar8 + 0x8c4cdb4b);
}


