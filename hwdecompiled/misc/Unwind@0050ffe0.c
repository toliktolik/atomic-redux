/*
 * Function: Unwind@0050ffe0
 * Address: 0050ffe0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0050fff8) overlaps instruction at (ram,0x0050fff4)
    */

void __fastcall Unwind_0050ffe0(undefined4 param_1,int *param_2)

{
  byte *pbVar1;
  uint *puVar2;
  int *piVar3;
  undefined1 uVar4;
  byte bVar5;
  byte bVar6;
  uint uVar7;
  undefined4 uVar8;
  undefined3 uVar10;
  byte bVar11;
  undefined2 uVar13;
  float *unaff_ESI;
  int *unaff_EDI;
  int in_GS_OFFSET;
  bool bVar15;
  byte in_CF;
  char in_AF;
  float10 in_ST0;
  float10 in_ST1;
  int unaff_retaddr;
  int iVar9;
  uint uVar12;
  char cVar14;
  
  uVar8 = in(0xec);
  uVar10 = (undefined3)((uint)uVar8 >> 8);
  bVar5 = in((short)param_2);
  *unaff_ESI = (float)in_ST0;
  bVar11 = bVar5 + 0xb8;
  bVar6 = bVar11 + in_CF;
  iVar9 = CONCAT31(uVar10,bVar6);
  if ((0x47 < bVar5 || CARRY1(bVar11,in_CF)) || bVar6 == 0) {
    puVar2 = (uint *)(iVar9 + -0x6b586377);
    *puVar2 = *puVar2 | (uint)unaff_EDI;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  if (0x47 < bVar5 || CARRY1(bVar11,in_CF)) {
    DAT_3ad49563 = bVar6 % 0x7d;
    uVar4 = in((short)((int)uVar8 >> 0x1f));
    *(undefined1 *)unaff_EDI = uVar4;
  }
  else {
    bVar15 = false;
    bVar11 = (byte)param_1 & *(byte *)(unaff_retaddr + -0x58);
    uVar12 = CONCAT31((int3)((uint)param_1 >> 8),bVar11);
    *unaff_EDI = iVar9;
    uVar7 = CONCAT31(uVar10,DAT_197b54c2);
    if (uVar12 != 0) {
      bVar6 = (bVar11 & 0x1f) % 9;
      bVar5 = *(byte *)(in_GS_OFFSET + 0x3c5baa4);
      *(byte *)(in_GS_OFFSET + 0x3c5baa4) = bVar5 >> bVar6 | bVar5 << 9 - bVar6;
      cVar14 = (char)((uint)param_2 >> 8);
      uVar13 = CONCAT11(cVar14 - bVar11,(char)param_2);
      out(*(undefined1 *)unaff_ESI,uVar13);
      out(*(undefined4 *)((int)unaff_ESI + 1),uVar13);
      if ((char)bVar11 <= cVar14) {
        *(short *)(unaff_EDI + 1) = (short)in_ST1;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      piVar3 = (int *)((uVar12 ^ 0x6a3b4455) + 0x37135fdd);
      *piVar3 = *piVar3 + -0x3c5bac0;
      in(uVar13);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    while( true ) {
      if (bVar15) {
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      bVar15 = *(uint *)((int)unaff_ESI + -0x4ac22e57) < 0xf60591c7;
      pbVar1 = (byte *)((int)unaff_EDI + 0x711c8c56);
      bVar11 = *pbVar1;
      bVar6 = (byte)(uVar7 >> 8);
      bVar5 = *pbVar1 + bVar6;
      *pbVar1 = bVar5 + bVar15;
      uVar7 = CONCAT11(((char)*pbVar1 < '\0') << 7 | (*pbVar1 == 0) << 6 | in_AF << 4 |
                       ((POPCOUNT(*pbVar1) & 1U) == 0) << 2 | 2U |
                       (CARRY1(bVar11,bVar6) || CARRY1(bVar5,bVar15)),(char)uVar7) + 0x174128e6;
      if (uVar12 != 1) break;
      if ((POPCOUNT(uVar7 & 0xff) & 1U) != 0) {
        return;
      }
      iVar9 = *param_2;
      *param_2 = *param_2 << 0xc;
      bVar15 = iVar9 << 0xb < 0;
      uVar12 = 0;
    }
  }
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


