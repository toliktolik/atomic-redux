/*
 * Function: Unwind@005128f2
 * Address: 005128f2
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00512936) */
/* WARNING: Removing unreachable block (ram,0x0051294f) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall
Unwind_005128f2(int param_1,int param_2,undefined4 param_3,undefined4 param_4,int *param_5,
               uint param_6,int param_7)

{
  char *pcVar1;
  byte *pbVar2;
  byte bVar3;
  char cVar4;
  int in_EAX;
  uint uVar5;
  int iVar6;
  int iVar7;
  int unaff_EBX;
  int unaff_EBP;
  byte *unaff_ESI;
  uint *unaff_EDI;
  byte in_CF;
  bool bVar8;
  
  iVar7 = CONCAT22((short)((uint)param_1 >> 0x10),
                   CONCAT11(*(undefined1 *)(param_1 + 0x59cc2f26),(char)param_1));
  pbVar2 = (byte *)(unaff_EBP + -0x37 + iVar7);
  bVar3 = *pbVar2;
  *pbVar2 = *pbVar2 << 1 | in_CF;
  uVar5 = in_EAX + 0x65d3a876 + (uint)((char)bVar3 < '\0');
  iVar6 = CONCAT31((int3)(uVar5 >> 8),*(undefined1 *)(unaff_EBX + (uVar5 & 0xff)));
  pcVar1 = (char *)(unaff_EBX + -0x29);
  cVar4 = *pcVar1;
  *pcVar1 = *pcVar1 << 1;
  uVar5 = iVar7 - 1;
  pbVar2 = *(byte **)(unaff_ESI + -0x55477b3b);
  out((short)param_2,iVar6);
  if (uVar5 == 0 || iVar7 < 1) {
    if ((POPCOUNT(uVar5 & 0xff) & 1U) == 0) {
      out(0x30,iVar6);
      goto LAB_00512966;
    }
    in((short)param_2);
    bVar8 = (byte)param_7 < *pbVar2;
  }
  else {
    param_7 = (iVar6 + -0x5f3366d) - (uint)(cVar4 < '\0');
    unaff_ESI[0x2e6c204a] = unaff_ESI[0x2e6c204a] + (char)(uVar5 >> 8);
    pbVar2 = (byte *)((int)unaff_EDI + 1);
    *(byte *)unaff_EDI = *unaff_ESI;
    param_5 = (int *)unaff_EDI[2];
    bVar8 = (byte)param_7 < *pbVar2;
    param_6 = uVar5;
  }
  unaff_EDI = (uint *)(pbVar2 + 1);
  param_2 = (int)param_5 + *param_5 + (uint)bVar8;
  iVar6 = param_7;
  uVar5 = param_6;
  if (SCARRY4((int)param_5,*param_5) != SCARRY4((int)param_5 + *param_5,(uint)bVar8)) {
    return;
  }
LAB_00512966:
  pbVar2 = (byte *)((int)unaff_EDI + uVar5 + 4);
  _DAT_6bf01d05 = iVar6;
  *pbVar2 = (*pbVar2 - (char)param_2) -
            (CONCAT31((int3)((uint)iVar6 >> 8),DAT_bfaa5f7b) < *unaff_EDI);
  return;
}


