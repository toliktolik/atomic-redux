/*
 * Function: Matrix_Transpose
 * Address: 00496720
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl
Matrix_Transpose(LPCVOID param_1,LPSTR param_2,DWORD param_3,int *param_4,int *param_5)

{
  int iVar1;
  uint uVar2;
  SIZE_T SVar3;
  uint *puVar4;
  uint *puVar5;
  uint uVar6;
  uint *puVar7;
  uint uVar8;
  _MEMORY_BASIC_INFORMATION local_24;
  
  SVar3 = VirtualQuery(param_1,&local_24,0x1c);
  if (SVar3 == 0) {
    return 0;
  }
  puVar4 = (uint *)GetModuleFileNameA((HMODULE)local_24.AllocationBase,param_2,param_3);
  if (puVar4 != (uint *)0x0) {
    iVar1 = ((HMODULE)((int)local_24.AllocationBase + 0x3c))->unused;
    puVar5 = (uint *)(uint)*(ushort *)
                            ((int)&((HMODULE)((int)local_24.AllocationBase + 4))->unused + iVar1 + 2
                            );
    uVar8 = (int)param_1 - (int)local_24.AllocationBase;
    puVar4 = puVar5;
    if (puVar5 != (uint *)0x0) {
      puVar4 = (uint *)((int)&((HMODULE)((int)local_24.AllocationBase + 0x28))->unused +
                       (uint)*(ushort *)
                              ((int)&((HMODULE)((int)local_24.AllocationBase + 0x14))->unused +
                              iVar1) + iVar1);
      puVar7 = (uint *)0x0;
      do {
        uVar2 = puVar4[-1];
        uVar6 = *puVar4;
        if (*puVar4 <= puVar4[-2]) {
          uVar6 = puVar4[-2];
        }
        if ((uVar2 <= uVar8) && (uVar8 <= uVar6 + uVar2)) {
          *param_4 = (int)puVar7 + 1;
          *param_5 = uVar8 - uVar2;
          return CONCAT31((int3)((uint)param_5 >> 8),1);
        }
        puVar7 = (uint *)((int)puVar7 + 1);
        puVar4 = puVar4 + 10;
      } while (puVar7 < puVar5);
    }
  }
  return (uint)puVar4 & 0xffffff00;
}


