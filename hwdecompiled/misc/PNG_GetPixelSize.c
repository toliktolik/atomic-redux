/*
 * Function: PNG_GetPixelSize
 * Address: 004d0f70
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __fastcall PNG_GetPixelSize(undefined1 param_1,undefined1 param_2)

{
  byte bVar1;
  byte bVar2;
  undefined4 *puVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  int iVar7;
  int *unaff_ESI;
  byte *pbVar8;
  byte *pbVar9;
  uint local_10;
  
  puVar3 = (undefined4 *)unaff_ESI[6];
  iVar7 = puVar3[1];
  pbVar8 = (byte *)*puVar3;
  *(undefined1 *)(unaff_ESI + 0x32) = param_1;
  *(undefined1 *)((int)unaff_ESI + 0xc9) = param_2;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar8 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  bVar1 = *pbVar8;
  iVar7 = iVar7 + -1;
  pbVar8 = pbVar8 + 1;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar8 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  bVar2 = *pbVar8;
  iVar7 = iVar7 + -1;
  pbVar8 = pbVar8 + 1;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar8 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar7 = iVar7 + -1;
  pbVar9 = pbVar8 + 1;
  unaff_ESI[0x30] = (uint)*pbVar8;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar9 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar7 = iVar7 + -1;
  pbVar8 = pbVar9 + 1;
  unaff_ESI[8] = (uint)*pbVar9 << 8;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar8 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar7 = iVar7 + -1;
  pbVar9 = pbVar8 + 1;
  unaff_ESI[8] = unaff_ESI[8] + (uint)*pbVar8;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar9 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar7 = iVar7 + -1;
  pbVar8 = pbVar9 + 1;
  unaff_ESI[7] = (uint)*pbVar9 << 8;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') goto LAB_004d1280;
    pbVar8 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar7 = iVar7 + -1;
  pbVar9 = pbVar8 + 1;
  unaff_ESI[7] = unaff_ESI[7] + (uint)*pbVar8;
  if (iVar7 == 0) {
    uVar4 = (*(code *)puVar3[3])();
    if ((char)uVar4 == '\0') {
LAB_004d1280:
      return uVar4 & 0xffffff00;
    }
    pbVar9 = (byte *)*puVar3;
    iVar7 = puVar3[1];
  }
  iVar5 = *unaff_ESI;
  unaff_ESI[9] = (uint)*pbVar9;
  *(int *)(iVar5 + 0x18) = unaff_ESI[0x5f];
  *(int *)(iVar5 + 0x1c) = unaff_ESI[7];
  *(int *)(iVar5 + 0x20) = unaff_ESI[8];
  *(int *)(iVar5 + 0x24) = unaff_ESI[9];
  *(undefined4 *)(*unaff_ESI + 0x14) = 100;
  iVar7 = iVar7 + -1;
  pbVar9 = pbVar9 + 1;
  (**(code **)(*unaff_ESI + 4))();
  if (*(char *)(unaff_ESI[0x65] + 0xd) != '\0') {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0x3a;
    (**(code **)*unaff_ESI)();
  }
  if (((unaff_ESI[8] == 0) || (unaff_ESI[7] == 0)) || (unaff_ESI[9] < 1)) {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0x20;
    (**(code **)*unaff_ESI)();
  }
  if ((uint)bVar1 * 0x100 + (uint)bVar2 + -8 != unaff_ESI[9] * 3) {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0xb;
    (**(code **)*unaff_ESI)();
  }
  if (unaff_ESI[0x31] == 0) {
    iVar5 = (**(code **)unaff_ESI[1])();
    unaff_ESI[0x31] = iVar5;
  }
  puVar6 = (uint *)unaff_ESI[0x31];
  local_10 = 0;
  if (0 < unaff_ESI[9]) {
    do {
      puVar6[1] = local_10;
      if (iVar7 == 0) {
        uVar4 = (*(code *)puVar3[3])();
        if ((char)uVar4 == '\0') goto LAB_004d1280;
        pbVar9 = (byte *)*puVar3;
        iVar7 = puVar3[1];
      }
      iVar7 = iVar7 + -1;
      pbVar8 = pbVar9 + 1;
      *puVar6 = (uint)*pbVar9;
      if (iVar7 == 0) {
        uVar4 = (*(code *)puVar3[3])();
        if ((char)uVar4 == '\0') goto LAB_004d1280;
        pbVar8 = (byte *)*puVar3;
        iVar7 = puVar3[1];
      }
      bVar1 = *pbVar8;
      iVar7 = iVar7 + -1;
      pbVar8 = pbVar8 + 1;
      puVar6[2] = (int)(uint)bVar1 >> 4;
      puVar6[3] = bVar1 & 0xf;
      if (iVar7 == 0) {
        uVar4 = (*(code *)puVar3[3])();
        if ((char)uVar4 == '\0') goto LAB_004d1280;
        pbVar8 = (byte *)*puVar3;
        iVar7 = puVar3[1];
      }
      puVar6[4] = (uint)*pbVar8;
      iVar5 = *unaff_ESI;
      *(uint *)(iVar5 + 0x18) = *puVar6;
      *(uint *)(iVar5 + 0x1c) = puVar6[2];
      *(uint *)(iVar5 + 0x20) = puVar6[3];
      *(uint *)(iVar5 + 0x24) = puVar6[4];
      *(undefined4 *)(*unaff_ESI + 0x14) = 0x65;
      iVar7 = iVar7 + -1;
      pbVar9 = pbVar8 + 1;
      (**(code **)(*unaff_ESI + 4))();
      local_10 = local_10 + 1;
      puVar6 = puVar6 + 0x15;
    } while ((int)local_10 < unaff_ESI[9]);
  }
  *(undefined1 *)(unaff_ESI[0x65] + 0xd) = 1;
  *puVar3 = pbVar9;
  puVar3[1] = iVar7;
  return CONCAT31((int3)((uint)puVar3 >> 8),1);
}


