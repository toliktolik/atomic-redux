/*
 * Function: Input_GetMouseWheel
 * Address: 004a22d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Input_GetMouseWheel(_String_base *param_1,int param_2,int param_3)

{
  _String_base _Var1;
  char *pcVar2;
  HANDLE pvVar3;
  HANDLE pvVar4;
  char *pcVar5;
  _String_base *p_Var6;
  int iVar7;
  int extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint uVar8;
  uint extraout_EDX_01;
  LPCVOID *ppvVar9;
  undefined8 uVar10;
  uint unaff_retaddr;
  LPCVOID *ppvVar11;
  LPCVOID pvVar12;
  undefined4 uVar13;
  int *piVar14;
  undefined4 uVar15;
  undefined4 *puVar16;
  undefined4 uVar17;
  undefined4 *puVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  _String_base local_d30 [2048];
  undefined1 local_530 [256];
  undefined4 local_430 [4];
  undefined4 local_420;
  undefined1 local_41c [516];
  _String_base local_218 [260];
  LPCVOID local_114 [6];
  int local_fc;
  undefined4 local_f4;
  undefined4 local_f0;
  undefined4 local_e8;
  _String_base local_70 [4];
  uint local_6c;
  undefined4 local_5c;
  uint local_58;
  _String_base local_54 [4];
  uint local_50;
  undefined4 local_40;
  uint local_3c;
  _String_base local_38 [4];
  uint local_34;
  undefined4 local_24;
  uint local_20;
  int local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  int local_8;
  
  uStack_c = 0x515800;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = 0;
  local_3c = 0xf;
  local_40 = 0;
  local_50 = local_50 & 0xffffff00;
  ppvVar9 = local_114;
  for (iVar7 = 0x29; iVar7 != 0; iVar7 = iVar7 + -1) {
    *ppvVar9 = (LPCVOID)0x0;
    ppvVar9 = ppvVar9 + 1;
  }
  local_114[0] = *(LPCVOID *)(param_2 + 0xb8);
  local_f0 = *(undefined4 *)(param_2 + 0xc4);
  local_fc = *(int *)(param_2 + 0xb4);
  uVar20 = 0;
  local_114[2] = (LPCVOID)0x3;
  local_e8 = 3;
  local_f4 = 3;
  uVar19 = 0;
  puVar18 = (undefined4 *)0x0;
  ppvVar9 = local_114;
  local_8 = 0;
  ExceptionList = &local_10;
  uVar13 = DAT_005a380c;
  uVar15 = DAT_005a3810;
  pvVar3 = GetCurrentThread();
  pvVar4 = GetCurrentProcess();
  uVar10 = (*DAT_005a3808)(0x14c,pvVar4,pvVar3,ppvVar9,puVar18,uVar19,uVar13,uVar15,uVar20);
  pvVar12 = local_114[0];
  while (uVar8 = (uint)((ulonglong)uVar10 >> 0x20), local_114[0] = pvVar12, (int)uVar10 != 0) {
    if ((local_fc == 0) || (pvVar12 == (LPCVOID)0x0)) goto LAB_004a263c;
    if (param_3 < 1) {
      puVar16 = local_430;
      piVar14 = &param_2;
      local_430[0] = 0x218;
      local_420 = 0x200;
      param_2 = 0;
      pvVar3 = GetCurrentProcess();
      iVar7 = (*DAT_005a3814)(pvVar3,pvVar12,piVar14,puVar16);
      if (iVar7 == 0) {
        local_18 = 0;
        local_1c = 0;
        Matrix_Transpose(local_114[0],(LPSTR)local_218,0x104,&local_18,&local_1c);
        p_Var6 = local_218;
        local_20 = 0xf;
        local_24 = 0;
        local_34 = local_34 & 0xffffff00;
        do {
          _Var1 = *p_Var6;
          p_Var6 = p_Var6 + 1;
        } while (_Var1 != (_String_base)0x0);
        String_Assign(local_38,local_218,(int)p_Var6 - (int)(local_218 + 1));
        local_8._0_1_ = 1;
        Image_ReleaseTexture(local_70,local_38);
        Exception_Release(local_d30,"%08X %08X %04X:%08X %s\r\n");
        if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_6c,extraout_EDX);
        }
        local_58 = 0xf;
        local_5c = 0;
        local_6c = local_6c & 0xffffff00;
        local_8 = (uint)local_8._1_3_ << 8;
        if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,local_34);
        }
        local_20 = 0xf;
        local_24 = 0;
        local_34 = local_34 & 0xffffff00;
      }
      else {
        (*DAT_005a3800)(local_41c,local_530,0x100,0x47f8);
        Exception_Release(local_d30,"%08X %08X %hs+%X\r\n");
      }
      p_Var6 = local_d30;
      do {
        _Var1 = *p_Var6;
        p_Var6 = p_Var6 + 1;
      } while (_Var1 != (_String_base)0x0);
      Enemy_ProcessSatelliteLogic(local_54,local_d30,(int)p_Var6 - (int)(local_d30 + 1));
      Exception_Release(local_d30,"Params: %08X %08X %08X %08X\r\n");
      p_Var6 = local_d30;
      do {
        _Var1 = *p_Var6;
        p_Var6 = p_Var6 + 1;
      } while (_Var1 != (_String_base)0x0);
      Enemy_ProcessSatelliteLogic(local_54,local_d30,(int)p_Var6 - (int)(local_d30 + 1));
      pcVar2 = "\r\n";
      do {
        pcVar5 = pcVar2;
        pcVar2 = pcVar5 + 1;
      } while (*pcVar5 != '\0');
      Enemy_ProcessSatelliteLogic(local_54,(_String_base *)&DAT_00531704,(uint)(pcVar5 + -0x531704))
      ;
    }
    else {
      param_3 = param_3 + -1;
    }
    uVar17 = 0;
    uVar20 = 0;
    uVar19 = 0;
    ppvVar11 = local_114;
    uVar13 = DAT_005a380c;
    uVar15 = DAT_005a3810;
    pvVar3 = GetCurrentThread();
    pvVar4 = GetCurrentProcess();
    uVar10 = (*DAT_005a3808)(0x14c,pvVar4,pvVar3,ppvVar11,uVar19,uVar20,uVar13,uVar15,uVar17);
    pvVar12 = local_114[0];
  }
  GetLastError();
  Exception_Release(local_d30,"StackWalk failed (error %d)\r\n");
  p_Var6 = local_d30;
  do {
    _Var1 = *p_Var6;
    p_Var6 = p_Var6 + 1;
  } while (_Var1 != (_String_base)0x0);
  Enemy_ProcessSatelliteLogic(local_54,local_d30,(int)p_Var6 - (int)(local_d30 + 1));
  uVar8 = extraout_EDX_00;
LAB_004a263c:
  *(undefined4 *)(param_1 + 0x18) = 0xf;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike(param_1,uVar8,local_54,0,0xffffffff);
  if (0xf < local_3c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_50,extraout_EDX_01);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),ppvVar9,puVar18);
  return;
}


