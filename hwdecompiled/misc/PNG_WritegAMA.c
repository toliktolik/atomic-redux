/*
 * Function: PNG_WritegAMA
 * Address: 004cfb50
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


char * __cdecl PNG_WritegAMA(uint param_1)

{
  char *pcVar1;
  uint uVar2;
  char *pcVar3;
  char *pcVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  int unaff_ESI;
  uint local_14;
  char *local_10;
  uint local_c;
  char local_6;
  char local_5;
  
  uVar2 = *(uint *)(unaff_ESI + 100);
  local_c = *(uint *)(unaff_ESI + 0x74);
  pcVar5 = (char *)(*(int *)(unaff_ESI + 0x30) + uVar2);
  pcVar4 = *(char **)(unaff_ESI + 0x70);
  if (*(int *)(unaff_ESI + 0x24) - 0x106U < uVar2) {
    local_14 = (uVar2 - *(int *)(unaff_ESI + 0x24)) + 0x106;
  }
  else {
    local_14 = 0;
  }
  local_5 = (pcVar4 + -1)[(int)pcVar5];
  local_6 = pcVar4[(int)pcVar5];
  pcVar1 = pcVar5 + 0x102;
  if (*(char **)(unaff_ESI + 0x84) <= pcVar4) {
    local_c = local_c >> 2;
  }
  pcVar3 = *(char **)(unaff_ESI + 0x6c);
  local_10 = *(char **)(unaff_ESI + 0x88);
  if (pcVar3 < *(char **)(unaff_ESI + 0x88)) {
    local_10 = pcVar3;
  }
  do {
    pcVar8 = (char *)(*(int *)(unaff_ESI + 0x30) + param_1);
    if ((((pcVar8[(int)pcVar4] == local_6) && ((pcVar8 + -1)[(int)pcVar4] == local_5)) &&
        (*pcVar8 == *pcVar5)) && (pcVar8[1] == pcVar5[1])) {
      pcVar8 = pcVar8 + 2;
      pcVar6 = pcVar5 + 2;
      while (((((pcVar7 = pcVar6 + 1, pcVar6[1] == pcVar8[1] &&
                (pcVar7 = pcVar6 + 2, pcVar6[2] == pcVar8[2])) &&
               ((pcVar7 = pcVar6 + 3, pcVar6[3] == pcVar8[3] &&
                ((pcVar7 = pcVar6 + 4, pcVar6[4] == pcVar8[4] &&
                 (pcVar7 = pcVar6 + 5, pcVar6[5] == pcVar8[5])))))) &&
              (pcVar7 = pcVar6 + 6, pcVar6[6] == pcVar8[6])) &&
             (pcVar7 = pcVar6 + 7, pcVar6[7] == pcVar8[7]))) {
        pcVar7 = pcVar6 + 8;
        pcVar8 = pcVar8 + 8;
        if ((pcVar6[8] != *pcVar8) || (pcVar6 = pcVar7, pcVar1 <= pcVar7)) break;
      }
      pcVar8 = pcVar7 + (0x102 - (int)pcVar1);
      if ((int)pcVar4 < (int)pcVar8) {
        *(uint *)(unaff_ESI + 0x68) = param_1;
        if ((int)local_10 <= (int)pcVar8) {
LAB_004cfc9a:
          if (pcVar3 < pcVar8) {
            pcVar8 = pcVar3;
          }
          return pcVar8;
        }
        local_5 = pcVar5[(int)(pcVar7 + (0x101 - (int)pcVar1))];
        local_6 = pcVar8[(int)pcVar5];
        pcVar4 = pcVar8;
      }
    }
    pcVar8 = pcVar4;
    param_1 = (uint)*(ushort *)
                     (*(int *)(unaff_ESI + 0x38) + (*(uint *)(unaff_ESI + 0x2c) & param_1) * 2);
    if ((param_1 <= local_14) || (local_c = local_c - 1, pcVar4 = pcVar8, local_c == 0))
    goto LAB_004cfc9a;
  } while( true );
}


