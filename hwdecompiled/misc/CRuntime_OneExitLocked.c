/*
 * Function: CRuntime_OneExitLocked
 * Address: 004fb9ef
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* Library Function - Single Match
    __onexit_lk
   
   Library: Visual Studio 2003 Release */

void CRuntime_OneExitLocked(void)

{
  double *pdVar1;
  int iVar2;
  double *pdVar3;
  double *pdVar4;
  undefined4 unaff_EDI;
  undefined8 uVar5;
  
  pdVar1 = (double *)Runtime_StackOverflow();
  pdVar4 = (double *)((int)DAT_005a6248 + (4 - DAT_005a624c));
  if (pdVar1 < pdVar4) {
    pdVar3 = (double *)0x800;
    if (pdVar1 < (double *)0x800) {
      pdVar3 = pdVar1;
    }
    uVar5 = Assembly_ComplexControlFlow((int)pdVar3 + (int)pdVar1,pdVar4,DAT_005a624c);
    iVar2 = (int)uVar5;
    if (iVar2 == 0) {
      iVar2 = Assembly_ComplexControlFlow
                        ((int)pdVar3 + (int)pdVar1,(double *)((ulonglong)uVar5 >> 0x20),DAT_005a624c
                        );
      if (iVar2 == 0) {
        return;
      }
    }
    DAT_005a6248 = (undefined4 *)(iVar2 + ((int)DAT_005a6248 - DAT_005a624c >> 2) * 4);
    DAT_005a624c = iVar2;
  }
  *DAT_005a6248 = unaff_EDI;
  DAT_005a6248 = DAT_005a6248 + 1;
  return;
}


