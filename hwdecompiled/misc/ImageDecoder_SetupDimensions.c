/*
 * Function: ImageDecoder_SetupDimensions
 * Address: 004cd240
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl ImageDecoder_SetupDimensions(uint *param_1,undefined4 *param_2,uint param_3)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined1 uVar5;
  uint uVar6;
  uint uVar7;
  undefined4 *puVar8;
  int iVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  bool bVar12;
  undefined4 *local_8;
  
  uVar4 = param_3;
  if (5 < (int)param_3) {
    return;
  }
  bVar1 = *(byte *)((int)param_1 + 0xb);
  if (bVar1 == 1) {
    uVar2 = *param_1;
    uVar3 = (&DAT_00567d64)[param_3];
    local_8 = param_2;
    param_3 = 0;
    iVar9 = 7;
    if (uVar2 <= uVar3) goto LAB_004cd43c;
    do {
      param_3 = param_3 | (*(byte *)((uVar3 >> 3) + (int)param_2) >> (7 - ((byte)uVar3 & 7) & 0x1f)
                          & 1) << ((byte)iVar9 & 0x1f);
      uVar5 = (undefined1)param_3;
      if (iVar9 == 0) {
        *(undefined1 *)local_8 = uVar5;
        local_8 = (undefined4 *)((int)local_8 + 1);
        uVar5 = 0;
        iVar9 = 7;
        param_3 = 0;
      }
      else {
        iVar9 = iVar9 + -1;
      }
      uVar3 = uVar3 + (&DAT_00567d80)[uVar4];
    } while (uVar3 < uVar2);
    bVar12 = iVar9 == 7;
  }
  else if (bVar1 == 2) {
    uVar2 = *param_1;
    uVar3 = (&DAT_00567d64)[param_3];
    local_8 = param_2;
    iVar9 = 6;
    param_3 = 0;
    if (uVar2 <= uVar3) goto LAB_004cd43c;
    do {
      param_3 = param_3 | (*(byte *)((uVar3 >> 2) + (int)param_2) >>
                           (('\x03' - ((byte)uVar3 & 3)) * '\x02' & 0x1f) & 3) <<
                          ((byte)iVar9 & 0x1f);
      uVar5 = (undefined1)param_3;
      if (iVar9 == 0) {
        *(undefined1 *)local_8 = uVar5;
        local_8 = (undefined4 *)((int)local_8 + 1);
        uVar5 = 0;
        iVar9 = 6;
        param_3 = 0;
      }
      else {
        iVar9 = iVar9 + -2;
      }
      uVar3 = uVar3 + (&DAT_00567d80)[uVar4];
    } while (uVar3 < uVar2);
    bVar12 = iVar9 == 6;
  }
  else {
    uVar2 = (&DAT_00567d64)[param_3];
    if (bVar1 != 4) {
      uVar3 = *param_1;
      uVar6 = (uint)(bVar1 >> 3);
      puVar11 = param_2;
      for (; uVar2 < uVar3; uVar2 = uVar2 + (&DAT_00567d80)[param_3]) {
        puVar8 = (undefined4 *)(uVar2 * uVar6 + (int)param_2);
        if (puVar11 != puVar8) {
          puVar10 = puVar11;
          for (uVar7 = (uint)(bVar1 >> 5); uVar7 != 0; uVar7 = uVar7 - 1) {
            *puVar10 = *puVar8;
            puVar8 = puVar8 + 1;
            puVar10 = puVar10 + 1;
          }
          for (uVar7 = uVar6 & 3; uVar7 != 0; uVar7 = uVar7 - 1) {
            *(undefined1 *)puVar10 = *(undefined1 *)puVar8;
            puVar8 = (undefined4 *)((int)puVar8 + 1);
            puVar10 = (undefined4 *)((int)puVar10 + 1);
          }
        }
        puVar11 = (undefined4 *)((int)puVar11 + uVar6);
      }
      goto LAB_004cd43c;
    }
    uVar3 = *param_1;
    local_8 = param_2;
    iVar9 = 4;
    param_3 = 0;
    if (uVar3 <= uVar2) goto LAB_004cd43c;
    do {
      param_3 = param_3 | (*(byte *)((uVar2 >> 1) + (int)param_2) >>
                           (((byte)uVar2 & 1) * -4 + 4 & 0x1f) & 0xf) << ((byte)iVar9 & 0x1f);
      uVar5 = (undefined1)param_3;
      if (iVar9 == 0) {
        *(undefined1 *)local_8 = uVar5;
        local_8 = (undefined4 *)((int)local_8 + 1);
        uVar5 = 0;
        iVar9 = 4;
        param_3 = 0;
      }
      else {
        iVar9 = iVar9 + -4;
      }
      uVar2 = uVar2 + (&DAT_00567d80)[uVar4];
    } while (uVar2 < uVar3);
    bVar12 = iVar9 == 4;
  }
  if (!bVar12) {
    *(undefined1 *)local_8 = uVar5;
  }
LAB_004cd43c:
  uVar4 = ((*param_1 - (&DAT_00567d64)[uVar4]) + -1 + (&DAT_00567d80)[uVar4]) /
          (uint)(&DAT_00567d80)[uVar4];
  *param_1 = uVar4;
  param_1[1] = *(byte *)((int)param_1 + 0xb) * uVar4 + 7 >> 3;
  return;
}


