/*
 * Function: Unwind@0051528a
 * Address: 0051528a
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */

ulonglong __fastcall Unwind_0051528a(uint param_1,int param_2)

{
  int *piVar1;
  uint *puVar2;
  int iVar3;
  char cVar4;
  uint *puVar5;
  char cVar6;
  uint *puVar7;
  bool bVar8;
  byte bVar9;
  byte bVar10;
  byte bVar11;
  ushort uVar12;
  uint uVar13;
  undefined3 uVar15;
  undefined4 in_EAX;
  undefined2 uVar16;
  int iVar17;
  int unaff_EBX;
  undefined1 *puVar18;
  int *piVar19;
  int unaff_EBP;
  char *unaff_ESI;
  char *pcVar20;
  char *unaff_EDI;
  byte in_AF;
  unkbyte10 in_ST6;
  undefined2 unaff_retaddr;
  char *pcVar14;
  
  while( true ) {
    uVar16 = (undefined2)(param_1 >> 0x10);
    bVar11 = (byte)param_1;
    bVar9 = (byte)((uint)unaff_EBX >> 8);
    iVar17 = CONCAT22(uVar16,CONCAT11((byte)(param_1 >> 8) | bVar9,bVar11));
    bVar10 = (char)in_EAX + (char)((uint)in_EAX >> 8) * '\t';
    pcVar14 = (char *)CONCAT22((short)((uint)in_EAX >> 0x10),(ushort)bVar10);
    if (pcVar14 < *(char **)(unaff_EDI + 1) || pcVar14 == *(char **)(unaff_EDI + 1)) {
      *pcVar14 = *pcVar14 + '\x01';
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    piVar1 = (int *)(iVar17 + 0x36);
    *piVar1 = *piVar1 - unaff_EBP;
    iVar3 = *piVar1;
    piVar1 = (int *)(unaff_ESI + 0x53);
    *piVar1 = *piVar1 >> (bVar11 & 0x1f);
    bVar8 = (param_1 & 0x1f) != 0;
    if (!bVar8 && iVar3 == 0 || bVar8 && *piVar1 == 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    bVar10 = 9 < (bVar10 & 0xf) | in_AF;
    puVar7 = (uint *)(unaff_EDI + 9);
    puVar5 = (uint *)(unaff_ESI + 5);
    piVar19 = (int *)(unaff_EBP - 1U ^ *puVar5);
    uVar13 = CONCAT11(bVar10,*unaff_ESI) ^ 0xb3e2a5d9;
    piVar1 = (int *)(uVar13 + 0xc50b6b97);
    *piVar1 = *piVar1 + iVar17;
    *(byte *)puVar7 = (byte)*puVar7 & bVar9;
    uVar15 = (undefined3)(uVar13 >> 8);
    bVar9 = in(0x1e);
    puVar2 = (uint *)(CONCAT31(uVar15,bVar9) + -0x25c9712b);
    *puVar2 = *puVar2 >> 1;
    param_1 = CONCAT22(uVar16,CONCAT11(0xbc,bVar11));
    iVar17 = (CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 + -0x6f) -
             *(int *)((int)piVar19 + 10)) + -1;
    out(0x3c,bVar9);
    unaff_EBX = unaff_EBX + -1 + CONCAT31(uVar15,bVar9);
    ffree(in_ST6);
    puRam27a589d1 = puVar7;
    if (param_1 == 0) break;
    unaff_EBP = *piVar19;
    *(undefined2 *)piVar19 = unaff_retaddr;
    param_2 = CONCAT31((int3)((uint)iVar17 >> 8),*(undefined1 *)(unaff_EBX + 0x2bd0eaeb));
    *puVar7 = *puVar5;
    pcVar14 = unaff_ESI + 9;
    pcVar20 = unaff_EDI + 0xd;
    do {
      unaff_EDI = pcVar20 + 1;
      unaff_ESI = pcVar14 + 1;
      cVar6 = *pcVar20;
      cVar4 = *pcVar14;
      pcVar14 = unaff_ESI;
      pcVar20 = unaff_EDI;
    } while (cVar6 <= cVar4);
    if (SBORROW1(cVar4,cVar6)) {
      puVar18 = (undefined1 *)0x422f6737;
      iVar17 = param_2 + -1;
      uVar12 = (ushort)CONCAT31(uVar15,bVar9) ^ 0x14;
      if (param_1 != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      goto LAB_005152d5;
    }
    in_AF = 9 < (bVar9 & 0xf) | bVar10;
    bVar9 = bVar9 + in_AF * '\x06';
    in_EAX = CONCAT31(uVar15,bVar9 + (0x90 < (bVar9 & 0xf0) | in_AF * (0xf9 < bVar9)) * '`');
  }
  uVar13 = CONCAT31(uVar15,bVar9 ^ bRam560d8960);
  out(0xbe,uVar13);
  bVar11 = (bVar9 ^ bRam560d8960) + 0x2a;
  uRam6313a706 = (undefined1)unaff_EBX;
  bVar10 = 9 < (bVar11 & 0xf) | bVar10;
  bVar11 = bVar11 + bVar10 * '\x06';
  uRam27a589cd = 0x34;
  puVar18 = (undefined1 *)0x27a589d1;
  pcVar14 = unaff_ESI + 6;
  if ((char)(byte)*puVar7 < (char)*puVar5) {
    if ((char)(byte)*puVar7 <= (char)*puVar5) {
      unaff_ESI[-0x1d2a9bd9] = unaff_ESI[-0x1d2a9bd9] ^ (byte)((uint)iVar17 >> 8);
      puVar18 = (undefined1 *)0x27a589f1;
      iVar17 = iRam27a589e5;
      piVar19 = piRam27a589d9;
    }
    DAT_f90d9182 = SUB41(piVar19,0);
    out(0x6b,DAT_f90d9182);
    DAT_e68987fb = DAT_e68987fb << 1;
    *(undefined4 *)(puVar18 + -4) = 0xffffffdb;
    return CONCAT44(iVar17 + 1,piVar19) & 0xffffffffdfbeb05c;
  }
  DAT_c7db89d1 = DAT_c7db89d1 |
                 bVar11 + (0x90 < (bVar11 & 0xf0) | 0x789dc3d5 < uVar13 | bVar10 * (0xf9 < bVar11))
                          * 'a' + 0xb8;
  uVar12 = 0x4ce5;
LAB_005152d5:
  DAT_fe699a47 = (undefined1)uVar12;
  *(undefined2 *)(puVar18 + -4) = unaff_retaddr;
  out(*pcVar14,(short)iVar17);
  *(int *)(puVar18 + -8) = (int)(short)uVar12;
  return CONCAT44(iVar17,(int)(short)uVar12);
}


