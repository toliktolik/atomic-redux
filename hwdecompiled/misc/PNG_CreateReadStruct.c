/*
 * Function: PNG_CreateReadStruct
 * Address: 004c4090
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __cdecl
PNG_CreateReadStruct(char *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 *puVar1;
  void *pvVar2;
  undefined4 *extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  uint extraout_ECX_02;
  uint uVar3;
  undefined4 extraout_ECX_03;
  undefined4 extraout_ECX_04;
  undefined4 extraout_EDX;
  uint extraout_EDX_00;
  byte *extraout_EDX_01;
  byte *extraout_EDX_02;
  byte *extraout_EDX_03;
  undefined8 uVar4;
  
  puVar1 = CPU_Instruction10(1);
  if (puVar1 == (undefined4 *)0x0) {
    return (undefined4 *)0x0;
  }
  uVar4 = Assembly_LoopingConstruct(extraout_ECX,extraout_EDX);
  if ((int)uVar4 == 0) {
    CPU_Instruction19((int)puVar1,param_2,param_3,param_4);
    uVar3 = extraout_ECX_02;
    if (((param_1 == (char *)0x0) ||
        (uVar3 = CONCAT31((int3)(extraout_ECX_02 >> 8),s_1_0_5_00567cc8[0]),
        *param_1 != s_1_0_5_00567cc8[0])) || ((s_1_0_5_00567cc8[0] == '0' && (param_1[2] < '9')))) {
      CPU_Instruction20(uVar3,extraout_EDX_01,(int)puVar1,
                        "Incompatible libpng version in application and library");
    }
    puVar1[0x2c] = 0x2000;
    pvVar2 = CPU_Instruction12((int)puVar1,0x2000);
    puVar1[0x2b] = pvVar2;
    PNG_ReadIDAT(extraout_ECX_03,extraout_EDX_02,(uint)puVar1,0,0,0);
    PNG_SetupFilterHeuristics(extraout_ECX_04,extraout_EDX_03,(uint)puVar1,0,1,0,(double *)0x0);
    return puVar1;
  }
  CPU_Instruction13(extraout_ECX_00,(uint)((ulonglong)uVar4 >> 0x20),(int)puVar1,puVar1[0x2b]);
  CPU_Instruction11(extraout_ECX_01,extraout_EDX_00,(int)puVar1);
  return (undefined4 *)0x0;
}


