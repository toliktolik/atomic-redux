/*
 * Function: CPU_Instruction29
 * Address: 004c8070
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl CPU_Instruction29(int param_1,byte *param_2,uint param_3)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  byte *pbVar4;
  int iVar5;
  int iVar6;
  byte *pbVar7;
  byte *pbVar8;
  int local_1c;
  int local_18;
  int local_14;
  int local_10;
  byte *local_c;
  byte local_5;
  
  bVar1 = *(byte *)(param_1 + 0x10b);
  uVar2 = (uint)bVar1;
  if (param_3 == 0xff) {
    uVar2 = uVar2 * *(int *)(param_1 + 200) + 7;
    pbVar4 = (byte *)(*(int *)(param_1 + 0xec) + 1);
    for (uVar3 = uVar2 >> 5; uVar3 != 0; uVar3 = uVar3 - 1) {
      *(undefined4 *)param_2 = *(undefined4 *)pbVar4;
      pbVar4 = pbVar4 + 4;
      param_2 = param_2 + 4;
    }
    for (uVar2 = uVar2 >> 3 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
      *param_2 = *pbVar4;
      pbVar4 = pbVar4 + 1;
      param_2 = param_2 + 1;
    }
    return;
  }
  if (uVar2 == 1) {
    iVar5 = *(int *)(param_1 + 200);
    pbVar4 = (byte *)(*(int *)(param_1 + 0xec) + 1);
    local_c = (byte *)0x80;
    if ((*(uint *)(param_1 + 0x70) & 0x10000) == 0) {
      local_10 = 7;
      local_1c = 0;
      local_18 = -1;
      iVar6 = local_10;
    }
    else {
      local_10 = 0;
      local_1c = 7;
      local_18 = 1;
      iVar6 = local_10;
    }
    for (; iVar5 != 0; iVar5 = iVar5 + -1) {
      if (((uint)local_c & param_3) != 0) {
        bVar1 = (byte)iVar6;
        *param_2 = (byte)(0x7f7f >> (7 - bVar1 & 0x1f)) & *param_2 |
                   (*pbVar4 >> (bVar1 & 0x1f) & 1) << (bVar1 & 0x1f);
      }
      if (iVar6 == local_1c) {
        pbVar4 = pbVar4 + 1;
        param_2 = param_2 + 1;
        iVar6 = local_10;
      }
      else {
        iVar6 = iVar6 + local_18;
      }
      if (local_c == (byte *)0x1) {
        local_c = (byte *)0x80;
      }
      else {
        local_c = (byte *)((int)local_c >> 1);
      }
    }
  }
  else if (uVar2 == 2) {
    local_14 = *(int *)(param_1 + 200);
    pbVar4 = (byte *)(*(int *)(param_1 + 0xec) + 1);
    local_c = (byte *)0x80;
    if ((*(uint *)(param_1 + 0x70) & 0x10000) == 0) {
      local_10 = 6;
      local_1c = 0;
      local_18 = -2;
    }
    else {
      local_10 = 0;
      local_1c = 6;
      local_18 = 2;
    }
    iVar5 = local_10;
    if (local_14 != 0) {
      do {
        if (((uint)local_c & param_3) != 0) {
          bVar1 = (byte)iVar5;
          *param_2 = (byte)(0x3f3f >> (6 - bVar1 & 0x1f)) & *param_2 |
                     (*pbVar4 >> (bVar1 & 0x1f) & 3) << (bVar1 & 0x1f);
        }
        if (iVar5 == local_1c) {
          pbVar4 = pbVar4 + 1;
          param_2 = param_2 + 1;
          iVar5 = local_10;
        }
        else {
          iVar5 = iVar5 + local_18;
        }
        if (local_c == (byte *)0x1) {
          local_c = (byte *)0x80;
        }
        else {
          local_c = (byte *)((int)local_c >> 1);
        }
        local_14 = local_14 + -1;
      } while (local_14 != 0);
      return;
    }
  }
  else if (uVar2 == 4) {
    local_1c = *(int *)(param_1 + 200);
    pbVar4 = (byte *)(*(int *)(param_1 + 0xec) + 1);
    local_c = (byte *)0x80;
    if ((*(uint *)(param_1 + 0x70) & 0x10000) == 0) {
      local_10 = 4;
      local_14 = 0;
      local_18 = -4;
    }
    else {
      local_10 = 0;
      local_14 = 4;
      local_18 = 4;
    }
    iVar5 = local_10;
    if (local_1c != 0) {
      do {
        if (((uint)local_c & param_3) != 0) {
          bVar1 = (byte)iVar5;
          *param_2 = (byte)(0xf0f >> (4 - bVar1 & 0x1f)) & *param_2 |
                     (*pbVar4 >> (bVar1 & 0x1f) & 0xf) << (bVar1 & 0x1f);
        }
        if (iVar5 == local_14) {
          pbVar4 = pbVar4 + 1;
          param_2 = param_2 + 1;
          iVar5 = local_10;
        }
        else {
          iVar5 = iVar5 + local_18;
        }
        if (local_c == (byte *)0x1) {
          local_c = (byte *)0x80;
        }
        else {
          local_c = (byte *)((int)local_c >> 1);
        }
        local_1c = local_1c + -1;
      } while (local_1c != 0);
      return;
    }
  }
  else {
    local_10 = *(int *)(param_1 + 200);
    uVar2 = (uint)(bVar1 >> 3);
    pbVar4 = (byte *)(*(int *)(param_1 + 0xec) + 1);
    local_c = param_2;
    local_5 = 0x80;
    if (local_10 != 0) {
      do {
        if (((byte)param_3 & local_5) != 0) {
          pbVar7 = pbVar4;
          pbVar8 = local_c;
          for (uVar3 = (uint)(bVar1 >> 5); uVar3 != 0; uVar3 = uVar3 - 1) {
            *(undefined4 *)pbVar8 = *(undefined4 *)pbVar7;
            pbVar7 = pbVar7 + 4;
            pbVar8 = pbVar8 + 4;
          }
          for (uVar3 = uVar2 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
            *pbVar8 = *pbVar7;
            pbVar7 = pbVar7 + 1;
            pbVar8 = pbVar8 + 1;
          }
        }
        local_c = local_c + uVar2;
        pbVar4 = pbVar4 + uVar2;
        if (local_5 == 1) {
          local_5 = 0x80;
        }
        else {
          local_5 = local_5 >> 1;
        }
        local_10 = local_10 + -1;
      } while (local_10 != 0);
      return;
    }
  }
  return;
}


