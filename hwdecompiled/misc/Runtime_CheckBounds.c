/*
 * Function: Runtime_CheckBounds
 * Address: 00503428
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005035c4) overlaps instruction at (ram,0x005035c2)
    */
/* WARNING: Removing unreachable block (ram,0x0050345c) */
/* WARNING: Variable defined which should be unmapped: param_5 */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int __fastcall
Runtime_CheckBounds(undefined4 param_1,uint param_2,int param_3,undefined4 *param_4,int param_5,
                   undefined4 *param_6,undefined4 *param_7)

{
  byte *pbVar1;
  uint *puVar2;
  undefined4 *puVar3;
  undefined6 uVar4;
  int *piVar5;
  float10 fVar6;
  float10 fVar7;
  byte bVar8;
  byte bVar9;
  char cVar14;
  int iVar10;
  short sVar17;
  char *in_EAX;
  undefined3 uVar16;
  char *pcVar11;
  uint uVar12;
  uint uVar13;
  undefined2 uVar18;
  int iVar19;
  uint unaff_EBX;
  uint uVar20;
  undefined4 **ppuVar21;
  undefined4 *unaff_EBP;
  undefined4 *puVar22;
  byte *unaff_ESI;
  byte *pbVar23;
  byte *unaff_EDI;
  byte *pbVar24;
  int *piVar25;
  int *piVar26;
  undefined2 in_CS;
  bool bVar27;
  bool bVar28;
  float10 in_ST0;
  float10 fVar29;
  float10 in_ST1;
  float10 fVar30;
  float10 in_ST2;
  float10 in_ST3;
  float10 fVar31;
  float10 in_ST4;
  float10 in_ST5;
  float10 in_ST6;
  float10 in_ST7;
  undefined4 uStack_47b8;
  char cVar15;
  
  do {
    do {
      pbVar24 = unaff_EDI;
      puVar22 = unaff_EBP;
      uVar16 = (undefined3)((uint)in_EAX >> 8);
      DAT_450d5a0e = in(0x52);
      uVar4 = *(undefined6 *)(CONCAT31(uVar16,DAT_450d5a0e) + 8);
      *(undefined4 *)pbVar24 = *(undefined4 *)unaff_ESI;
      pbVar23 = (byte *)(param_2 * 3 + -0x75);
      pcVar11 = (char *)CONCAT31(uVar16,DAT_450d5a0e + *pbVar23);
      uVar12 = (uint)CARRY1(DAT_450d5a0e,*pbVar23);
      uVar13 = param_2 - *(uint *)(pcVar11 + 0x7b);
      iVar19 = uVar13 - uVar12;
      *pcVar11 = (*pcVar11 - (char)(unaff_EBX >> 8)) -
                 (param_2 < *(uint *)(pcVar11 + 0x7b) || uVar13 < uVar12);
      uVar12 = CONCAT31((int3)(CONCAT22((short)((uint6)uVar4 >> 0x10),0x5d00) >> 8),
                        -CARRY4((uint)puVar22,unaff_EBX));
      pbVar23 = unaff_ESI + 8;
      uVar18 = CONCAT11(0x57,(char)iVar19);
      param_2 = CONCAT22((short)((uint)iVar19 >> 0x10),uVar18);
      in_EAX = (char *)(uVar12 + 0xf22662a2);
      unaff_ESI = unaff_ESI + 9;
      out(*pbVar23,uVar18);
      unaff_EBP = (undefined4 *)((int)puVar22 + unaff_EBX);
      unaff_EDI = pbVar24 + 8;
    } while (0xdd99d5d < uVar12);
    bVar27 = ((uint)param_6 & 0x1000) != 0;
    param_2 = -(int)param_6;
    *(char *)(param_3 + 0x49) = (char)param_4;
    swi(4);
    uVar12 = 0xdd656b58;
                    /* WARNING (jumptable): Ignoring partial resolution of indirect */
                    /* WARNING: Ignoring partial resolution of indirect */
    unaff_ESI = pbVar24 + 9;
    param_3._0_1_ = pbVar24[8];
    iVar19 = param_5;
    piVar25 = (int *)((int)&param_3 + 1);
    while( true ) {
      param_4 = &param_6;
      ppuVar21 = &param_6;
      cVar14 = '\x01';
      puVar3 = puVar22;
      do {
        puVar3 = puVar3 + -1;
        ppuVar21 = ppuVar21 + -1;
        *ppuVar21 = (undefined4 *)*puVar3;
        cVar14 = cVar14 + -1;
      } while ('\0' < cVar14);
      unaff_EBX = 0xfe1a105d;
      bVar8 = 9 < ((byte)uVar12 & 0xf) | bVar27;
      bVar9 = (byte)uVar12 + bVar8 * -6;
      bVar27 = (bool)(9 < (bVar9 & 0xf) | bVar8);
      uVar13 = CONCAT31((int3)(uVar12 >> 8),bVar9 + bVar27 * -6) & 0xffffff0f;
      cVar14 = (char)uVar13;
      iVar10 = CONCAT22((short)(uVar13 >> 0x10),CONCAT11((char)(uVar12 >> 8) - bVar27,cVar14));
      param_6 = puVar22;
      if (!bVar27) break;
      piVar5 = (int *)*param_7;
      piVar26 = piVar25 + 1;
      *piVar25 = iVar10;
      puVar22 = (undefined4 *)*piVar5;
      uVar13 = 0xe53eb38f;
      *piVar5 = (int)unaff_ESI;
code_r0x005034d1:
      bVar8 = (byte)((uint)iVar19 >> 8);
      iVar19 = CONCAT22((short)((uint)iVar19 >> 0x10),CONCAT11(bVar8 + 0x61,(char)iVar19)) + uVar13
               + (uint)(0x9e < bVar8);
      bVar28 = iVar19 < 0;
      uVar12 = param_2;
      while (param_2 = CONCAT31((int3)(uVar13 >> 8),*(undefined1 *)(unaff_EBX + 0x10f2363f)),
            uVar20 = unaff_EBX, piVar25 = piVar26, fVar29 = in_ST0, fVar30 = in_ST1, fVar6 = in_ST2,
            fVar31 = in_ST3, fVar7 = in_ST4, !bVar28) {
        while( true ) {
          in_ST4 = in_ST6;
          in_ST3 = in_ST5;
          in_ST2 = fVar7;
          in_ST0 = fVar6;
          pbVar23 = _DAT_d0725e43;
          in_ST1 = fVar29 / fVar31;
          out(0xf9,(char)uVar12);
          *(short *)(param_2 + 0xaef5c79) = (short)fVar30;
          iVar10 = _DAT_0433a597;
          bVar8 = *pbVar23;
          bVar9 = (byte)param_2;
          cVar14 = bVar9 + *pbVar23;
          param_4 = &param_6;
          if (pbVar23 != (byte *)0x1) goto code_r0x0050355b;
          iVar19 = in((short)CONCAT31((int3)(param_2 >> 8),cVar14));
          *piVar26 = iVar19;
          uVar18 = CONCAT11(0xab,cVar14);
          param_2 = CONCAT22((short)(param_2 >> 0x10),uVar18);
          piVar26 = (int *)((int)piVar26 + 5);
          puVar2 = (uint *)(_DAT_0433a597 + -0x115812f4 + (int)piVar26 * 8);
          uVar12 = (uint)CARRY1(bVar9,bVar8);
          uVar13 = (int)puVar22 - *puVar2;
          bVar28 = puVar22 < (undefined4 *)*puVar2 || uVar13 < uVar12;
          puVar22 = (undefined4 *)(uVar13 - uVar12);
          bVar8 = (byte)_DAT_0433a597 + 0x61;
          cVar14 = bVar8 - bVar28;
          unaff_EBX = CONCAT31((int3)((uint)_DAT_0433a597 >> 8),cVar14);
          iVar19 = 0;
          in_ST5 = in_ST7;
          in_ST6 = in_ST7;
          if (((byte)_DAT_0433a597 < 0x9f || bVar8 < bVar28) || cVar14 == '\0') {
            uVar13 = in(0x56);
            unaff_EBX = uVar20;
            goto code_r0x005034d1;
          }
          bVar8 = (byte)(uVar20 >> 8);
          *(byte *)((int)puVar22 + 0x51) = *(byte *)((int)puVar22 + 0x51) ^ bVar8;
          pcVar11 = (char *)(uVar20 + 0x4c84bb4d);
          *pcVar11 = *pcVar11;
          bVar28 = *pcVar11 == '\0';
          if (-1 < *pcVar11) break;
          *(char *)(uVar20 - 0x7a) = *(char *)(uVar20 - 0x7a) + (char)((uint)iVar10 >> 8);
          uVar12 = uVar20;
          uVar20 = unaff_EBX;
          fVar29 = in_ST0;
          fVar30 = in_ST1;
          fVar6 = in_ST2;
          fVar31 = in_ST3;
          fVar7 = in_ST4;
        }
        while (!bVar28) {
          unaff_EBX = 0x7c934c84;
          bVar28 = (char)uVar20 == (char)*piVar26;
          piVar26 = (int *)((int)piVar26 + 1);
        }
        iVar10 = CONCAT22((short)(uVar20 >> 0x10),(ushort)(byte)((char)uVar20 + bVar8 * -0x7a));
        uVar13 = iVar10 + 1;
        param_6 = (undefined4 *)CONCAT22(param_6._2_2_,in_CS);
        param_7 = (undefined4 *)0xd694a9df;
        if (uVar13 == 0) {
          if (uVar13 != 0) {
            return 0;
          }
          if (iVar10 == -0x36cea1e1) {
            uRama711b355 = uRama711b355 | (ushort)puVar22;
            return -0x514b96c6;
          }
          cRam26154e9d = cRam26154e9d + '\x01';
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        bVar28 = (char)uVar13 < '\0';
        uVar12 = param_2;
        if ((uVar13 & 0xd6) != 0 && !bVar28) {
          *(char *)piVar26 = (char)uVar13;
          ppuVar21 = &param_4;
          cVar14 = '\x15';
          puVar3 = puVar22;
          do {
            puVar3 = puVar3 + -1;
            ppuVar21 = ppuVar21 + -1;
            *ppuVar21 = (undefined4 *)*puVar3;
            cVar14 = cVar14 + -1;
          } while ('\0' < cVar14);
          out(uVar18,uStack_47b8);
          param_4 = puVar22;
code_r0x0050355b:
                    /* WARNING: Could not recover jumptable at 0x0050355c. Too many branches */
                    /* WARNING: Treating indirect jump as call */
          iVar19 = (**(code **)unaff_ESI)();
          return iVar19;
        }
      }
    }
    pbVar23 = (byte *)(iVar19 + -0x5a3ce654 + iVar10 * 2);
    *pbVar23 = *pbVar23 ^ (byte)iVar19;
    iVar19 = iVar19 + -1;
    if (iVar19 == 0 || *pbVar23 == 0) {
      pbVar24[0x1d4a0b09] = pbVar24[0x1d4a0b09] | (byte)iVar19;
                    /* WARNING: Could not recover jumptable at 0x00503487. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      iVar19 = (*(code *)&stack0x00000000)();
      return iVar19;
    }
    iVar10 = CONCAT31((int3)((uint)iVar10 >> 8),cVar14 + -0x13) + 1;
    in_ST0 = (float10)CONCAT28((short)((unkuint10)in_ST0 >> 0x40),
                               SUB108(in_ST0,0) + *(longlong *)((int)puVar22 + -0x6e));
    *unaff_ESI = *unaff_ESI >> ((byte)iVar19 & 0x1f);
    cVar15 = (char)((uint)iVar10 >> 8);
    sVar17 = (short)((uint)iVar10 >> 0x10);
    bVar8 = (byte)iVar10;
    cVar14 = cVar15 + -0x10;
    in_EAX = (char *)CONCAT22(sVar17,CONCAT11(cVar14,bVar8));
    unaff_EBP = puVar22;
    unaff_EDI = (byte *)((int)piVar25 + 2);
    param_4 = &param_6;
    if (cVar14 == '\0' || cVar15 < '\x10') {
      *in_EAX = *in_EAX + '\x01';
      pbVar23 = (byte *)((int)piVar25 + 2);
      for (; iVar19 != 0; iVar19 = iVar19 + -1) {
        *pbVar23 = bVar8;
        pbVar23 = pbVar23 + -1;
      }
      bVar9 = 9 < (bVar8 & 0xf) | bVar27;
      uVar12 = CONCAT31((int3)((uint)in_EAX >> 8),bVar8 + bVar9 * '\x06') & 0xffffff0f;
      pbVar1 = (byte *)(((uint)((int)sVar17 >> 0xf) >> 8 & 0xff) + 0x19);
      *pbVar1 = *pbVar1 | (*pbVar23 | 0x5d) ^ pbVar24[0xb30fe5e];
      return CONCAT22((short)(uVar12 >> 0x10),CONCAT11(cVar14 + bVar9,(char)uVar12)) + 0x324fafbc;
    }
  } while( true );
}


