/*
 * Function: Unwind@005179c1
 * Address: 005179c1
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00517a4b) overlaps instruction at (ram,0x00517a47)
    */

int __fastcall
Unwind_005179c1(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,int *param_5,
               undefined2 param_6)

{
  char *pcVar1;
  uint uVar2;
  int in_EAX;
  uint uVar3;
  uint extraout_ECX;
  int iVar4;
  uint *puVar5;
  int unaff_EBP;
  int *unaff_ESI;
  int *unaff_EDI;
  undefined2 in_CS;
  undefined8 uVar6;
  int unaff_retaddr;
  
  puVar5 = (uint *)CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 - *(char *)(in_EAX + -0x4c));
  if (param_1 == 1) {
    uVar3 = 0;
    if (unaff_EBP <= *unaff_EDI) {
      iVar4 = 0;
      goto LAB_00517a1a;
    }
  }
  else {
    uVar6 = (*(code *)((int)unaff_ESI + 0x597d2f39))(in_CS);
    puVar5 = (uint *)((ulonglong)uVar6 >> 0x20);
    in_EAX = (int)uVar6;
    uVar3 = extraout_ECX;
  }
  pcVar1 = (char *)((int)unaff_EDI + 1);
  unaff_EDI = (int *)((int)unaff_EDI + 2);
  iVar4 = in_EAX + -1;
  if (iVar4 == 0 || (uVar3 & 0x4000) == 0) {
    out(1,unaff_retaddr);
    return unaff_retaddr;
  }
  if (!SBORROW1((char)*unaff_ESI,*pcVar1)) {
    do {
                    /* WARNING: Do nothing block with infinite loop */
    } while( true );
  }
  *puVar5 = *puVar5 | (int)unaff_ESI + 1U;
  iRam5eff25d6 = (int)unaff_EDI + (uint)(unaff_EDI < (int *)0x9a39dd2b) + iRam5eff25d6;
  puVar5 = (uint *)((int)unaff_EDI >> 0x1f);
  unaff_ESI = (int *)((int)unaff_ESI + 1U);
  unaff_retaddr = unaff_EBP;
LAB_00517a1a:
  do {
    uVar3 = in((short)puVar5);
    *(undefined4 *)((int)puVar5 + 0x48086a55) = *(undefined4 *)((int)puVar5 + 0x48086a55);
    unaff_retaddr = CONCAT22((short)((uint)unaff_retaddr >> 0x10),in_CS);
    *(short *)unaff_EDI = (short)*unaff_EDI;
    uVar3 = (uVar3 ^ 0xb3) + 0x42d04a72;
    uVar2 = (uint)puVar5 >> 8;
    puVar5 = (uint *)CONCAT22((short)((uint)puVar5 >> 0x10),CONCAT11((char)iVar4,(char)puVar5));
    iVar4 = (uVar2 & 0xff) - 1;
  } while ((POPCOUNT(((char)uVar3 + '4') - (uVar3 < 0xd93b54e0)) & 1U) == 0);
  *unaff_EDI = *unaff_ESI;
  *param_5 = (int)(&stack0x0000001c + *param_5);
  puVar5 = (uint *)(unaff_retaddr + 0x52);
  *puVar5 = *puVar5 << 1 | (uint)((int)*puVar5 < 0);
  in(param_6);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


