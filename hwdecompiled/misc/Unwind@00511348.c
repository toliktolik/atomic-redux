/*
 * Function: Unwind@00511348
 * Address: 00511348
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00511358) overlaps instruction at (ram,0x00511356)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x005112ea) */
/* WARNING: Removing unreachable block (ram,0x00511324) */
/* WARNING: Removing unreachable block (ram,0x005113ff) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __fastcall Unwind_00511348(uint *param_1,double *param_2)

{
  int iVar1;
  uint uVar3;
  undefined1 *puVar4;
  char cVar5;
  byte bVar6;
  undefined4 uVar7;
  byte *pbVar8;
  byte *in_EAX;
  uint uVar9;
  byte bVar11;
  uint *puVar10;
  undefined2 uVar12;
  int unaff_EBX;
  byte *pbVar13;
  byte *pbVar14;
  undefined4 *puVar15;
  undefined4 *unaff_ESI;
  undefined4 *unaff_EDI;
  bool bVar16;
  bool bVar17;
  byte in_AF;
  bool bVar18;
  bool bVar19;
  byte bVar20;
  bool bVar21;
  float10 in_ST0;
  undefined4 auStack_1a7b [7];
  undefined1 auStack_1a5f [4];
  int aiStack_1a5b [4];
  undefined4 uStack_1a4b;
  undefined4 uStack_8;
  byte abStack_4 [4];
  int iVar2;
  
  bVar20 = 0;
  pbVar8 = *(byte **)((int)unaff_EDI + -9);
  while( true ) {
    puVar15 = (undefined4 *)((uint)pbVar8 ^ *(uint *)((int)unaff_EDI + -0x16));
    iVar1 = *(int *)param_2;
    iVar2 = *(int *)param_2;
    *(int *)param_2 = iVar2 + 0x38;
    if ((SCARRY4(iVar1,0x38) != SCARRY4(iVar2 + 0x38,0)) != *(int *)param_2 < 0) {
      while( true ) {
        bVar6 = (char)in_EAX + (char)((uint)in_EAX >> 8) * -0x2a;
        in_AF = 9 < (bVar6 & 0xf) | in_AF;
        uVar9 = CONCAT31((int3)((uint)in_EAX >> 8),bVar6 + in_AF * '\x06') & 0xffff000f;
        in_EAX = (byte *)CONCAT22((short)(uVar9 >> 0x10),CONCAT11(in_AF,(char)uVar9));
        *(char *)(unaff_EBX + -0x594a7e72) = *(char *)(unaff_EBX + -0x594a7e72) + '\x01';
        pbVar8 = (byte *)((int)puVar15 + (int)param_2 * 8 + -0x12a0c462);
        *pbVar8 = *pbVar8 & (byte)param_2;
        bVar6 = *pbVar8;
        LOCK();
        iVar1 = *(int *)(unaff_EBX + 0x3b);
        *(int *)(unaff_EBX + 0x3b) = (int)unaff_ESI;
        UNLOCK();
        in_ST0 = (float10)*(short *)((int)puVar15 + 0x12017d15) - in_ST0;
        if (*(int *)in_EAX * 0x7c36d3e == 1 || bVar6 == 0) break;
        unaff_EDI = (undefined4 *)((int)unaff_EDI + (uint)bVar20 * -2 + 1);
        unaff_ESI = (undefined4 *)(iVar1 + 1 + (uint)bVar20 * -2);
      }
      pbVar8 = (byte *)(iVar1 + 0x3ae58c97);
      *pbVar8 = *pbVar8 | (byte)unaff_EBX;
      in(0xcb);
      _DAT_f34175d1 = 0x9c1f0f7c;
      *unaff_EDI = 0x7cd3db60;
      DAT_6f119c16 = DAT_6f119c16 + -0x5c;
      return (float10)*param_2 - in_ST0;
    }
    pbVar8 = abStack_4;
    pbVar13 = abStack_4;
    cVar5 = '\x14';
    do {
      puVar15 = puVar15 + -1;
      pbVar8 = (byte *)((int)pbVar8 + -4);
      *(undefined4 *)pbVar8 = *puVar15;
      cVar5 = cVar5 + -1;
    } while ('\0' < cVar5);
    bVar20 = 1;
    bVar16 = (byte *)0x34391253 < in_EAX;
    bVar21 = SCARRY4((int)in_EAX,-0x34391254);
    pbVar8 = in_EAX + -0x34391254;
    bVar19 = (int)pbVar8 < 0;
    bVar18 = pbVar8 == (byte *)0x0;
    bVar6 = POPCOUNT((uint)pbVar8 & 0xff);
                    /* WARNING: Bad instruction - Truncating control flow here */
    if (bVar21 == bVar19) {
      SegmentLimit(*unaff_ESI);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    while( true ) {
      bVar17 = (bVar6 & 1) == 0;
      uVar12 = SUB42(param_2,0);
      bVar6 = (byte)pbVar8;
      if (bVar17) break;
      in_AF = 9 < (bVar6 & 8) | in_AF;
      unaff_ESI = (undefined4 *)((int)unaff_ESI + -1);
      pbVar8 = (byte *)(int)(short)(CONCAT11((char)((uint)pbVar8 >> 8) + in_AF,
                                             (bVar6 & 0x18) + in_AF * '\x06') & 0xff0f);
      bVar11 = (byte)((uint)param_1 >> 8);
      bVar6 = *pbVar8 + bVar11;
      bVar16 = CARRY1(*pbVar8,bVar11) || CARRY1(bVar6,in_AF);
      bVar21 = SCARRY1(*pbVar8,bVar11) != SCARRY1(bVar6,in_AF);
      *pbVar8 = bVar6 + in_AF;
      bVar19 = (char)*pbVar8 < '\0';
      bVar18 = *pbVar8 == 0;
      bVar6 = POPCOUNT(*pbVar8);
      if (!bVar21) {
        puVar15 = unaff_EDI + -1;
        bVar16 = pbVar8 < (byte *)*unaff_EDI;
        goto code_r0x0051128e;
      }
    }
    out(uVar12,bVar6);
    pbVar14 = abStack_4;
    pbVar13 = abStack_4;
    puVar15 = unaff_EDI;
    if (!bVar18 && bVar21 == bVar19) break;
    while( true ) {
      puVar10 = param_1;
      in_EAX = pbVar8;
      if (bVar17) {
        pbVar8 = (byte *)in(uVar12);
        param_1 = puVar10;
        pbVar13 = pbVar14;
        goto code_r0x0051128e;
      }
      pbVar8 = pbVar14 + 1;
      bVar17 = (POPCOUNT((uint)pbVar8 & 0xff) & 1U) == 0;
      param_1 = (uint *)((int)puVar10 + -1);
      if (param_1 != (uint *)0x0) break;
      pbVar14 = in_EAX;
      if (!bVar16 && pbVar8 != (byte *)0x0) {
        *(char *)(puVar10 + 0xf) = (char)puVar10[0xf] << 1;
        in(0x37);
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
    }
  }
code_r0x0051128e:
  uVar3 = (uint)bVar16;
  uVar9 = *param_1;
  puVar4 = &stack0xffffe5b9 + *param_1;
  *(byte **)(puVar4 + (uVar3 - 4)) = pbVar8;
  *(byte **)(puVar4 + (uVar3 - 8)) = pbVar8;
  *(uint **)(puVar4 + (uVar3 - 0xc)) = param_1;
  *(double **)(puVar4 + (uVar3 - 0x10)) = param_2;
  *(int *)(puVar4 + (uVar3 - 0x14)) = unaff_EBX;
  *(undefined1 **)(puVar4 + (uVar3 - 0x18)) = puVar4 + (uVar3 - 4);
  *(byte **)(puVar4 + (uVar3 - 0x1c)) = pbVar13;
  *(undefined4 **)(puVar4 + (uVar3 - 0x20)) = unaff_ESI;
  *(undefined4 **)(puVar4 + (uVar3 - 0x24)) = puVar15;
  puVar15 = (undefined4 *)((uint)puVar15 ^ *(uint *)((int)puVar15 + 1));
  *(uint *)(puVar4 + (uVar3 - 0x28)) =
       CONCAT22((short)((uint)pbVar8 >> 0x10),
                CONCAT11(((int)(puVar4 + uVar3) < 0) << 7 |
                         (puVar4 + uVar3 == (undefined1 *)0x0) << 6 | in_AF << 4 |
                         ((POPCOUNT((uint)(puVar4 + uVar3) & 0xff) & 1U) == 0) << 2 | 2 |
                         (CARRY4((uint)&stack0xffffe5b9,uVar9) || CARRY4((uint)puVar4,uVar3)),
                         (char)pbVar8));
  *(char *)(unaff_EBX + -0x3c) = *(char *)(unaff_EBX + -0x3c) - (char)((uint)param_2 >> 8);
  *(undefined4 *)(puVar4 + (uVar3 - 0x2c)) = 0xffffffaf;
  uVar7 = in(0xa6);
  *(char *)((int)param_2 + -0x66) = *(char *)((int)param_2 + -0x66) - (char)((uint)uVar7 >> 8);
  out(uVar12,(char)uVar7);
  DAT_af3c70c7 = DAT_af3c70c7 | (byte)param_2;
  uVar7 = in((short)((int)param_2 + 1));
  DAT_10984e34 = DAT_10984e34 + '\x01';
  DAT_09247a77 = (undefined1)uVar7;
  iVar1 = -*(int *)((((int)param_2 + 1) - (int)puVar15) + -0x5d914a3a);
  *(undefined4 *)(puVar4 + iVar1 + uVar3 + -0x30) = 0xb5d7fe81;
  *(undefined4 **)(puVar4 + iVar1 + uVar3 + -0x34) = unaff_ESI;
  *puVar15 = *unaff_ESI;
  halt_baddata();
}


