/*
 * Function: Unwind@005141a8
 * Address: 005141a8
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005141d6) overlaps instruction at (ram,0x005141d4)
    */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int __fastcall Unwind_005141a8(undefined4 param_1,int *param_2)

{
  uint *puVar1;
  byte *pbVar2;
  byte bVar3;
  undefined1 uVar4;
  byte bVar5;
  short sVar6;
  int in_EAX;
  int iVar8;
  undefined3 uVar11;
  undefined2 uVar12;
  undefined4 uVar10;
  uint unaff_EBX;
  undefined4 *puVar13;
  uint *puVar14;
  undefined4 *puVar15;
  undefined4 *unaff_EBP;
  undefined4 *puVar16;
  undefined4 *unaff_ESI;
  undefined4 *puVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  undefined2 in_DS;
  bool bVar20;
  byte in_AF;
  undefined4 *puVar7;
  uint uVar9;
  
  do {
    iVar8 = in_EAX + -1;
    uVar11 = (undefined3)((uint)iVar8 >> 8);
    bVar5 = (char)iVar8 + 0xb3;
    _DAT_f787b54d = CONCAT31(uVar11,bVar5);
    puVar16 = (undefined4 *)*unaff_EBP;
    out((short)param_2,_DAT_f787b54d);
    in_AF = 9 < (bVar5 & 0xf) | in_AF;
    uVar9 = CONCAT31(uVar11,bVar5 + in_AF * -6) & 0xffffff0f;
    uVar12 = (undefined2)(uVar9 >> 0x10);
    bVar5 = (byte)uVar9;
    sVar6 = CONCAT11((char)((uint)iVar8 >> 8) - in_AF,bVar5);
    puVar7 = (undefined4 *)CONCAT22(uVar12,sVar6);
    puVar19 = (undefined4 *)unaff_EBP[1];
    unaff_EBP[1] = puVar16;
    *(char *)((int)puVar16 + 0x12324de5) = '\0';
    if (SBORROW1((char)iVar8,'M') == *(char *)((int)puVar16 + 0x12324de5) < '\0') {
      puVar19 = (undefined4 *)((int)puVar19 + 1);
      pbVar2 = (byte *)((int)puVar7 + (int)param_2 * 4 + 0xf);
      bVar20 = CARRY1((byte)unaff_EBX,*pbVar2);
      unaff_EBX = (uint)(byte)((byte)unaff_EBX + *pbVar2);
      iVar8 = CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(0x5e,(char)param_1)) + -1;
      if (iVar8 == 0) {
        *(undefined2 *)(unaff_EBP + 1) = *(undefined2 *)(unaff_EBP + 1);
        uVar10 = CONCAT22(uVar12,sVar6 + (ushort)(puVar16 < puVar19) *
                                         (((ushort)puVar19 & 3) - (bVar5 & 3)));
        *unaff_EBP = uVar10;
        unaff_EBP[-1] = uVar10;
        return (uint)(byte)-(puVar16 < puVar19) << 8;
      }
      puVar15 = unaff_EBP + 1;
      *(undefined2 *)(unaff_EBP + 1) = in_DS;
      do {
        bVar5 = (byte)unaff_EBX;
        puVar17 = (undefined4 *)&DAT_6bfb50b8;
        *(char *)(iVar8 + 0xf30e2db) = *(char *)(iVar8 + 0xf30e2db) + -0x1e + bVar20;
        puVar18 = _DAT_6bfb50b8;
        param_2 = (int *)CONCAT31((int3)((uint)param_2 >> 8),0x1e);
        puVar16 = (undefined4 *)((int)puVar16 - *param_2);
        puVar13 = puVar15;
        if ((POPCOUNT((uint)puVar16 & 0xff) & 1U) != 0) goto LAB_00514192_1;
        puVar16 = (undefined4 *)*puVar15;
        bVar5 = (byte)puVar7;
        bVar20 = bVar5 < 0x53;
        puVar7 = (undefined4 *)CONCAT31((int3)(char)((uint)puVar7 >> 8),bVar5 + 0xad);
        if ((char)bVar5 < 'S') {
          param_1 = puVar15[1];
          unaff_ESI = puVar17;
          puVar18 = puVar19;
          goto Unwind_005141a0;
        }
        puVar17 = (undefined4 *)0x6bfb50bc;
        iVar8 = CONCAT31((int3)((uint)(iVar8 + 1) >> 8),0x97) + -1;
        if (iVar8 == 0 || (byte)(bVar5 + 0xad) != '\0') {
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        unaff_EBX = puVar15[1];
        puVar14 = puVar15 + 1;
        puVar13 = puVar15 + 1;
        puVar15 = puVar15 + 1;
        *puVar14 = unaff_EBX;
        param_2 = (int *)((int)param_2 + 1);
        bVar5 = (byte)unaff_EBX;
        puVar7 = puVar19;
        puVar19 = puVar18;
      } while (!bVar20 && param_2 != (int *)0x0);
    }
    else {
      puVar16 = (undefined4 *)((int)puVar16 + -1);
      bVar5 = (byte)unaff_EBP[2];
      puVar13 = unaff_EBP + 3;
      puVar17 = (undefined4 *)((int)unaff_ESI + 3);
      puVar7 = *(undefined4 **)((int)unaff_ESI + -1);
LAB_00514192_1:
      puVar1 = (uint *)((int)puVar16 + -0x52a4b2a9);
      uVar9 = *puVar1;
      *puVar1 = (uint)(*puVar1 + (int)puVar19);
      puVar18 = (undefined4 *)((int)puVar19 + -1);
      in_AF = 9 < ((byte)puVar7 & 0xf) | in_AF;
      bVar3 = (byte)puVar7 + in_AF * -6;
      puVar7 = (undefined4 *)
               CONCAT31((int3)((uint)puVar7 >> 8),
                        bVar3 + (0x9f < bVar3 | CARRY4(uVar9,(uint)puVar19) | in_AF * (bVar3 < 6)) *
                                -0x60);
    }
    unaff_ESI = puVar17 + 1;
    out(*puVar17,(short)param_2);
    unaff_EBX = (uint)bVar5;
    param_1 = *puVar13;
Unwind_005141a0:
    *(char *)puVar18 = (char)puVar7;
    uVar4 = in(0x50);
    in_EAX = CONCAT31((int3)((uint)puVar7 >> 8),uVar4);
    unaff_EBP = puVar16;
  } while( true );
}


