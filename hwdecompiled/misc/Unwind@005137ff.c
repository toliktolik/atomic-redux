/*
 * Function: Unwind@005137ff
 * Address: 005137ff
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */

uint __fastcall Unwind_005137ff(undefined4 param_1,int param_2)

{
  uint *puVar1;
  undefined1 uVar2;
  int iVar3;
  code *pcVar4;
  int iVar5;
  undefined4 in_EAX;
  uint uVar6;
  undefined1 *puVar7;
  int extraout_ECX;
  uint3 uVar8;
  char unaff_BL;
  undefined1 *puVar9;
  char *pcVar10;
  undefined1 *unaff_ESI;
  undefined1 *unaff_EDI;
  undefined2 in_GS;
  int in_GS_OFFSET;
  byte in_CF;
  bool bVar11;
  bool in_SF;
  char in_OF;
  undefined2 in_FPUControlWord;
  undefined2 in_FPUStatusWord;
  undefined2 in_FPUTagWord;
  undefined2 in_FPULastInstructionOpcode;
  undefined4 in_FPUDataPointer;
  undefined4 in_FPUInstructionPointer;
  undefined8 uVar12;
  int aiStack_2b20 [2756];
  undefined1 *puStack_10;
  
  pcVar10 = unaff_ESI + 1;
  uVar2 = *unaff_ESI;
  if (!in_SF) {
    pcVar4 = (code *)swi(1);
    uVar6 = (*pcVar4)();
    return uVar6;
  }
  if ((bool)in_OF == in_SF) {
    *(undefined2 *)(param_2 + -0xaeedd1d) = in_FPUControlWord;
    *(undefined2 *)(param_2 + -0xaeedd19) = in_FPUStatusWord;
    *(undefined2 *)(param_2 + -0xaeedd15) = in_FPUTagWord;
    *(undefined4 *)(param_2 + -0xaeedd09) = in_FPUDataPointer;
    *(undefined4 *)(param_2 + -0xaeedd11) = in_FPUInstructionPointer;
    *(undefined2 *)(param_2 + -0xaeedd0b) = in_FPULastInstructionOpcode;
    *pcVar10 = *pcVar10 + unaff_BL + in_CF;
    out((short)CONCAT31((int3)((uint)param_2 >> 8),0xfd),uVar2);
    return CONCAT31((int3)((uint)in_EAX >> 8),uVar2);
  }
  uVar12 = func_0xdb3426e3();
  iVar5 = aiStack_2b20[0];
  puStack_10 = &stack0xfffffff4;
  uVar8 = (uint3)((ulonglong)uVar12 >> 0x28) ^
          (uint3)((uint)*(undefined4 *)(unaff_ESI + 0x78eb58b6) >> 8);
  puVar7 = (undefined1 *)CONCAT22((short)((int)uVar12 + -0x2489d702 + (uint)in_CF >> 0x10),in_GS);
  if (extraout_ECX == 0) {
    puVar7 = &DAT_72650b0e;
  }
  else {
    aiStack_2b20[0] = -0xc31b7d3;
    pcVar10 = (char *)((uint)pcVar10 | *(uint *)(extraout_ECX + 0x2c));
    if ((int)pcVar10 < 1) {
      iVar3 = *(int *)(pcVar10 + 0x35);
      puVar9 = puVar7 + -4;
      *(char **)(puVar7 + -4) = pcVar10;
      if (SBORROW4(CONCAT31(uVar8,0x7b),1)) {
        pcVar4 = (code *)swi(0x94);
        uVar12 = (*pcVar4)();
        puVar1 = (uint *)(in_GS_OFFSET + (int)((ulonglong)uVar12 >> 0x20) + 0x1b);
        *puVar1 = *puVar1 & (uint)uVar12;
        return (uint)uVar12;
      }
      puVar7 = (undefined1 *)
               CONCAT31((int3)((uint)aiStack_2b20 >> 8),
                        -((longlong)(int)((longlong)iVar3 * -0x16) != (longlong)iVar3 * -0x16));
      bVar11 = *(undefined1 **)(puVar7 + iVar5 + -0xd) < puVar9;
      goto code_r0x00513845;
    }
  }
  puVar1 = (uint *)(CONCAT31(uVar8,'{' - pcVar10[-0x3a5ded41]) + -0x2a);
  uVar6 = (uint)(0x7b < (byte)pcVar10[-0x3a5ded41]);
  bVar11 = 0xcd79bc6 < *puVar1 || CARRY4(*puVar1 + 0xf3286439,uVar6);
  *puVar1 = *puVar1 + 0xf3286439 + uVar6;
code_r0x00513845:
  uVar6 = *(uint *)(puVar7 + -0x79);
  *(uint *)(puVar7 + -0x79) = uVar6 << 5 | (uint)(CONCAT14(bVar11,uVar6) >> 0x1c);
  *unaff_EDI = (char)puVar7;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


