/*
 * Function: Log_WriteError
 * Address: 0044f4b0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Log_WriteError(HWND param_1,int param_2,uint param_3)

{
  HWND pHVar1;
  WPARAM WVar2;
  LRESULT LVar3;
  HWND hWnd;
  HDC hdc;
  HGDIOBJ h;
  LPCSTR ***ppppCVar4;
  int iVar5;
  undefined4 *puVar6;
  int extraout_ECX;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff88;
  undefined4 *in_stack_ffffff8c;
  int local_64;
  _String_base local_40 [4];
  LPCSTR **local_3c [4];
  int local_2c;
  uint local_28;
  tagRECT local_24;
  tagSIZE local_14;
  HGDIOBJ local_c;
  uint local_8;
  
  pHVar1 = param_1;
  local_8 = (uint)DAT_00569f5c ^ unaff_retaddr;
  if (param_2 != 0x10) {
    if (param_2 == 0x110) {
      hWnd = GetDlgItem(param_1,100);
      param_1 = (HWND)0x0;
      hdc = GetDC(hWnd);
      h = (HGDIOBJ)SendMessageA(hWnd,0x31,0,0);
      local_c = SelectObject(hdc,h);
      GetTextMetricsA(hdc,(LPTEXTMETRICA)&stack0xffffff88);
      GetClientRect(pHVar1,&local_24);
      MoveWindow(hWnd,10,10,(local_24.right - local_24.left) + -0x14,
                 (local_24.bottom - local_24.top) + -0x14,0);
      puVar6 = *(undefined4 **)(DAT_0056da10 + 0x524);
      if (puVar6 != (undefined4 *)0x0) {
        puVar6 = (undefined4 *)*puVar6;
      }
      iVar5 = DAT_0056da10;
      if (puVar6 != *(undefined4 **)(DAT_0056da10 + 0x524)) {
        do {
          if (*(int *)(iVar5 + 0x414) < (int)puVar6[9]) {
            Sound_SetPosition(local_40,"%s (%02d:%02d:%02d)");
            ppppCVar4 = (LPCSTR ***)local_3c[0];
            if (local_28 < 0x10) {
              ppppCVar4 = local_3c;
            }
            GetTextExtentPoint32A(hdc,(LPCSTR)ppppCVar4,local_2c,&local_14);
            if ((int)param_1 < local_64 + local_14.cx) {
              param_1 = (HWND)(local_64 + local_14.cx);
            }
            SendMessageA(hWnd,0x194,(WPARAM)param_1,0);
            ppppCVar4 = (LPCSTR ***)local_3c[0];
            if (local_28 < 0x10) {
              ppppCVar4 = local_3c;
            }
            WVar2 = SendMessageA(hWnd,0x180,0,(LPARAM)ppppCVar4);
            SendMessageA(hWnd,0x19a,WVar2,puVar6[9]);
            if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
              System_ShutdownHandler(extraout_ECX,(uint)local_3c[0]);
            }
            local_28 = 0xf;
            local_2c = 0;
            local_3c[0] = (LPCSTR **)((uint)local_3c[0] & 0xffffff00);
            iVar5 = DAT_0056da10;
          }
          puVar6 = (undefined4 *)*puVar6;
        } while (puVar6 != *(undefined4 **)(iVar5 + 0x524));
      }
      SelectObject(hdc,local_c);
      ReleaseDC(hWnd,hdc);
      goto LAB_0044f724;
    }
    if ((param_2 != 0x111) || (param_3 >> 0x10 != 2)) {
      Exception_SetMessage(DAT_00569f5c,in_stack_ffffff88,in_stack_ffffff8c);
      return;
    }
    pHVar1 = GetDlgItem(param_1,100);
    WVar2 = SendMessageA(pHVar1,0x188,0,0);
    if (((int)WVar2 < 0) ||
       (LVar3 = SendMessageA(pHVar1,0x199,WVar2,0), LVar3 <= *(int *)(DAT_0056da10 + 0x414)))
    goto LAB_0044f724;
    *(LRESULT *)(DAT_0056da10 + 0x424) = LVar3;
  }
  EndDialog(param_1,0);
LAB_0044f724:
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_ffffff88,in_stack_ffffff8c);
  return;
}


