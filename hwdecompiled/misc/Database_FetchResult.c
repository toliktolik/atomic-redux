/*
 * Function: Database_FetchResult
 * Address: 004e24f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Database_FetchResult(int *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int *local_18;
  int local_14;
  int local_10;
  int local_c;
  int local_8;
  
  iVar1 = param_1[0x6a];
  local_18 = (int *)(iVar1 + 0x20);
  iVar3 = Database_Connect(param_1,local_18);
  if (param_1[0x19] == 3) {
    iVar2 = *param_1;
    *(int *)(iVar2 + 0x18) = iVar3;
    *(int *)(iVar2 + 0x1c) = *local_18;
    *(undefined4 *)(iVar2 + 0x20) = *(undefined4 *)(iVar1 + 0x24);
    *(undefined4 *)(iVar2 + 0x24) = *(undefined4 *)(iVar1 + 0x28);
    *(undefined4 *)(*param_1 + 0x14) = 0x5e;
  }
  else {
    *(undefined4 *)(*param_1 + 0x14) = 0x5f;
    *(int *)(*param_1 + 0x18) = iVar3;
  }
  (**(code **)(*param_1 + 4))(param_1,1);
  piVar4 = (int *)(**(code **)(param_1[1] + 8))(param_1,1,iVar3,param_1[0x19]);
  local_14 = 0;
  piVar9 = piVar4;
  local_10 = iVar3;
  if (0 < param_1[0x19]) {
    do {
      iVar2 = *local_18;
      iVar5 = local_10 / iVar2;
      local_8 = 0;
      if (0 < iVar2) {
        local_c = 0;
        do {
          iVar6 = Database_Disconnect(local_8);
          for (iVar8 = local_c; iVar8 < iVar3; iVar8 = iVar8 + local_10) {
            iVar7 = 0;
            if (0 < iVar5) {
              do {
                iVar10 = *piVar9 + iVar7;
                iVar7 = iVar7 + 1;
                *(char *)(iVar10 + iVar8) = (char)iVar6;
              } while (iVar7 < iVar5);
            }
          }
          local_8 = local_8 + 1;
          local_c = local_c + iVar5;
        } while (local_8 < iVar2);
      }
      local_14 = local_14 + 1;
      local_18 = local_18 + 1;
      piVar9 = piVar9 + 1;
      local_10 = iVar5;
    } while (local_14 < param_1[0x19]);
    *(int **)(iVar1 + 0x10) = piVar4;
    *(int *)(iVar1 + 0x14) = iVar3;
    return;
  }
  *(int *)(iVar1 + 0x14) = iVar3;
  *(int **)(iVar1 + 0x10) = piVar4;
  return;
}


