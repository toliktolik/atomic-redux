/*
 * Function: CheatCode_WaffleHandler
 * Address: 004175a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall CheatCode_WaffleHandler(int param_1,_String_base param_2)

{
  _String_base *this;
  char *pcVar1;
  _String_base *p_Var2;
  _String_base *p_Var3;
  uint uVar4;
  char *pcVar5;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  byte *extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  undefined8 uVar6;
  _String_base local_64 [4];
  int local_60;
  uint local_4c;
  _String_base local_48 [4];
  uint local_44;
  undefined4 local_34;
  uint local_30;
  undefined1 local_2c [4];
  uint local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005105d8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  EmptyFunction_NoOp();
  this = (_String_base *)(param_1 + 0x34c);
  Memory_AllocateSound(this,1,param_2);
  uVar6 = Image_LoadFromFile(extraout_ECX,extraout_EDX,local_64,(int)this);
  local_8 = 0;
  PowerUp_ProcessThunderstrike
            (this,(uint)((ulonglong)uVar6 >> 0x20),(_String_base *)uVar6,0,0xffffffff);
  local_8 = 0xffffffff;
  if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_60,extraout_EDX_00);
  }
  local_14 = 0xf;
  local_18 = 0;
  local_28 = local_28 & 0xffffff00;
  pcVar1 = "WAFFLE";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  String_Assign(local_2c,(_String_base *)"WAFFLE",(uint)(pcVar5 + -0x52c7d0));
  local_8 = 1;
  p_Var2 = GameMenu_ProcessRegistrationScreen(local_2c,local_48,0,*(uint *)(param_1 + 0x360));
  local_8 = CONCAT31(local_8._1_3_,2);
  if (*(uint *)(p_Var2 + 0x18) < 0x10) {
    p_Var3 = p_Var2 + 4;
  }
  else {
    p_Var3 = *(_String_base **)(p_Var2 + 4);
  }
  uVar4 = String_Compare(this,0,*(uint *)(param_1 + 0x360),p_Var3,*(uint *)(p_Var2 + 0x14));
  if (0xf < local_30) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_44,extraout_EDX_01);
  }
  local_30 = 0xf;
  local_34 = 0;
  local_44 = local_44 & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_14) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_28);
  }
  local_14 = 0xf;
  local_18 = 0;
  local_28 = local_28 & 0xffffff00;
  if (uVar4 != 0) {
    pcVar1 = "";
    do {
      pcVar5 = pcVar1;
      pcVar1 = pcVar5 + 1;
    } while (*pcVar5 != '\0');
    String_Assign(this,(_String_base *)&DAT_0052c7cf,(uint)(pcVar5 + -0x52c7cf));
  }
  pcVar1 = "WAFFLE";
  do {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
  } while (*pcVar5 != '\0');
  uVar4 = String_Compare(this,0,*(uint *)(param_1 + 0x360),(_String_base *)"WAFFLE",
                         (uint)(pcVar5 + -0x52c7d0));
  if (uVar4 == 0) {
    (**(code **)(**(int **)(param_1 + 0x5c) + 0xb8))(0x3e,0);
    pcVar1 = "";
    do {
      pcVar5 = pcVar1;
      pcVar1 = pcVar5 + 1;
    } while (*pcVar5 != '\0');
    String_Assign(this,(_String_base *)&DAT_0052c7cf,(uint)(pcVar5 + -0x52c7cf));
  }
  ExceptionList = local_10;
  return;
}


