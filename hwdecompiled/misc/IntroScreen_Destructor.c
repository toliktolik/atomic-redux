/*
 * Function: IntroScreen_Destructor
 * Address: 00421620
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall IntroScreen_Destructor(void *this,void *param_1)

{
  char *pcVar1;
  undefined4 *puVar2;
  char *pcVar3;
  double *pdVar4;
  undefined4 *puVar5;
  undefined4 uVar6;
  int iVar7;
  uint uVar8;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  int extraout_ECX_04;
  uint extraout_EDX;
  int iVar9;
  ulonglong uVar10;
  ulonglong uVar11;
  int iVar12;
  char cVar13;
  int iVar14;
  undefined4 uVar15;
  char cVar16;
  undefined4 uVar17;
  undefined1 local_100 [4];
  uint local_fc;
  uint local_e8;
  undefined1 local_e4 [4];
  uint local_e0;
  uint local_cc;
  undefined1 local_c8 [4];
  uint local_c4;
  uint local_b0;
  undefined1 local_ac [4];
  uint local_a8;
  uint local_94;
  undefined4 local_90;
  undefined4 local_8c;
  undefined4 local_88;
  undefined4 local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined4 local_78;
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  undefined4 local_58;
  undefined4 local_54;
  uint local_50;
  undefined1 local_4c [4];
  uint local_48;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  uint local_34;
  undefined1 local_30 [4];
  uint local_2c;
  int local_24;
  undefined4 local_20;
  int local_1c;
  uint local_18;
  int local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00510fbc;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar10 = Math_FloatToUInt64();
  uVar11 = Math_FloatToUInt64();
  local_14 = (int)uVar11;
  puVar5 = (undefined4 *)((int)param_1 + 0x10);
  *(undefined4 *)((int)param_1 + 8) = 0;
  *puVar5 = 0;
  *(undefined4 *)((int)param_1 + 0xc) = 0;
  *(undefined4 *)((int)param_1 + 0x14) = 0;
  *(undefined4 *)((int)param_1 + 0x18) = 0x280;
  *(undefined4 *)((int)param_1 + 0x1c) = 0x1e0;
  DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x824),param_1,0,0,'\0',0,0,'\0');
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(&local_24,0xff,0xff,0xff);
  SexyWidget_SetRectangle(param_1,puVar2);
  Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x928));
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  pcVar1 = "HOW TO PLAY";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_4c,(_String_base *)"HOW TO PLAY",(uint)(pcVar3 + -0x52d5f0));
                    /* WARNING: Load size is inaccurate */
  local_8 = 0;
  (**(code **)(*this + 0x90))(&local_24,param_1,0x19,local_4c);
  local_8 = 0xffffffff;
  if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX);
  }
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(&local_24,0xff,0xff,0xff);
  SexyWidget_SetRectangle(param_1,puVar2);
  Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x940));
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  pcVar1 = "Do not show this screen at startup";
  do {
    pcVar3 = pcVar1;
    pcVar1 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  String_Assign(local_30,(_String_base *)"Do not show this screen at startup",
                (uint)(pcVar3 + -0x52d5cc));
                    /* WARNING: Load size is inaccurate */
  local_8 = 1;
  (**(code **)(*this + 0x94))(param_1,local_30,0x37,0x1d3,0xffffffff,0xffffffff,1,0,0xffffffff);
  local_8 = 0xffffffff;
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_2c);
  }
  *(float *)((int)param_1 + 8) = (float)(int)uVar10;
  *puVar5 = 0x14;
  *(float *)((int)param_1 + 0xc) = (float)local_14;
  *(undefined4 *)((int)param_1 + 0x14) = 0x28;
  *(undefined4 *)((int)param_1 + 0x18) = 600;
  *(undefined4 *)((int)param_1 + 0x1c) = 0x168;
  SexyWidget_Translate(param_1,0x140,0);
  *(undefined4 *)((int)this + 0x268) = *(undefined4 *)((int)this + 0x264);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x268) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x268) = iVar9;
    if (*(int *)((int)this + 0x270) == 0) {
      Settings_ProcessAntiAliasingOptions((void *)0x0,param_1);
    }
    else {
      Settings_ProcessAntiAliasingOptions((void *)**(undefined4 **)((int)this + 0x268),param_1);
    }
  }
  SexyWidget_Translate(param_1,-0x140,0);
  *puVar5 = 0x14;
  *(undefined4 *)((int)param_1 + 0x14) = 0x28;
  *(undefined4 *)((int)param_1 + 0x18) = 600;
  *(undefined4 *)((int)param_1 + 0x1c) = 400;
  *(undefined4 *)((int)this + 600) = *(undefined4 *)((int)this + 0x254);
  while (iVar9 = *(int *)(*(int *)((int)this + 600) + 4), iVar9 != 0) {
    *(int *)((int)this + 600) = iVar9;
    if (*(int *)((int)this + 0x260) == 0) {
      pdVar4 = (double *)0x0;
    }
    else {
      pdVar4 = (double *)**(undefined4 **)((int)this + 600);
    }
    if (pdVar4[1] - *pdVar4 < _DAT_0052c758 != (NAN(pdVar4[1] - *pdVar4) || NAN(_DAT_0052c758))) {
      local_40 = 0;
      local_3c = 0;
      uVar10 = Math_FloatToUInt64();
      local_34 = 0x11;
      local_38 = (int)uVar10;
      uVar11 = Math_FloatToUInt64();
      local_24 = (int)uVar11;
      local_20 = 0x1c7;
      local_18 = 0x11;
      local_1c = (int)uVar10;
      Graphics_SetImageAlpha
                (param_1,*(undefined4 *)(*(int *)(*(int *)((int)this + 0x5c) + 0x744) + 8),
                 (int)&local_24,&local_40);
    }
  }
  SexyWidget_Translate(param_1,0x140,0);
  *(undefined4 *)((int)this + 0x228) = *(undefined4 *)((int)this + 0x224);
  SexyWidget_SetColorizeFlag2(param_1,1);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x228) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x228) = iVar9;
    if (*(int *)((int)this + 0x230) == 0) {
      iVar9 = 0;
    }
    else {
      iVar9 = **(int **)((int)this + 0x228);
    }
    if (*(int *)(iVar9 + 8) < 0x200) {
      puVar5 = (undefined4 *)CreateColor(&local_24,0xff,0xff,0xff,*(int *)(iVar9 + 8) / 2);
    }
    else {
      puVar5 = (undefined4 *)SexyWidget_ApplyMatrix(&local_40,0xff,0xff,0xff);
    }
    SexyWidget_SetRectangle(param_1,puVar5);
    iVar9 = *(int *)(iVar9 + 0xc);
    cVar16 = '\0';
    iVar14 = 0;
    cVar13 = '\x01';
    iVar12 = 0x1cc;
    uVar10 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x6f0),param_1,(int)uVar10,iVar12,cVar13,
               iVar9,iVar14,cVar16);
  }
  SexyWidget_SetColorizeFlag2(param_1,0);
  *(undefined4 *)((int)this + 0x1f8) = *(undefined4 *)((int)this + 500);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x1f8) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x1f8) = iVar9;
    if (*(int *)((int)this + 0x200) == 0) {
      (**(code **)(_DAT_00000000 + 4))(param_1);
    }
    else {
      (**(code **)(*(int *)**(undefined4 **)((int)this + 0x1f8) + 4))(param_1);
    }
  }
  uVar10 = Math_FloatToUInt64();
  iVar12 = (int)uVar10;
  iVar9 = *(int *)((int)this + 0x98);
  uVar10 = Math_FloatToUInt64();
  Tank_RenderWithPowerUps(*(void **)((int)this + 0x5c),param_1,(int)uVar10,iVar9,iVar12);
  *(undefined4 *)((int)this + 0x288) = *(undefined4 *)((int)this + 0x284);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x288) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x288) = iVar9;
    cVar16 = '\0';
    iVar14 = 0;
    iVar12 = 0;
    cVar13 = '\x01';
    uVar10 = Math_FloatToUInt64();
    iVar9 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x778),param_1,(int)uVar10,iVar9,cVar13,
               iVar12,iVar14,cVar16);
  }
  ParticleEffects_Render((void *)((int)this + 0x2e8),param_1);
  *(undefined4 *)((int)this + 0x208) = *(undefined4 *)((int)this + 0x204);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x208) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x208) = iVar9;
    if (*(int *)((int)this + 0x210) == 0) {
      iVar9 = 0;
    }
    else {
      iVar9 = **(int **)((int)this + 0x208);
    }
    uVar6 = Compression_GetCompressedSize(*(int *)((int)this + 0x5c));
    Graphics_SwapBuffers(param_1,(char)uVar6 == '\0');
    uVar10 = Math_FloatToUInt64();
    local_1c = 0xa0;
    local_18 = 0xa0;
    local_14 = *(int *)(iVar9 + 0x20);
    local_20 = 0;
    local_24 = (int)uVar10 * 0xa0;
    uVar10 = Math_FloatToUInt64();
    local_40 = (undefined4)uVar10;
    local_50 = *(uint *)(iVar9 + 0x24);
    uVar10 = Math_FloatToUInt64();
    local_3c = (undefined4)uVar10;
    local_34 = local_50;
    local_38 = local_14;
    Graphics_SetImageAlpha
              (param_1,*(undefined4 *)(*(int *)(*(int *)((int)this + 0x5c) + 0x81c) + 8),
               (int)&local_40,&local_24);
  }
  *(undefined4 *)((int)this + 0x248) = *(undefined4 *)((int)this + 0x244);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x248) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x248) = iVar9;
    if (*(int *)((int)this + 0x250) == 0) {
      Projectile_Render((void *)0x0,param_1);
    }
    else {
      Projectile_Render((void *)**(undefined4 **)((int)this + 0x248),param_1);
    }
  }
  TextEffect_Render(*(void **)((int)this + 0x2fc),param_1);
  *(undefined4 *)((int)this + 0x218) = *(undefined4 *)((int)this + 0x214);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x218) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x218) = iVar9;
    if (*(int *)((int)this + 0x220) == 0) {
      iVar9 = 0;
    }
    else {
      iVar9 = **(int **)((int)this + 0x218);
    }
    if (*(char *)(iVar9 + 0x55) == '\0') {
      if (*(int *)((int)this + 0x220) == 0) {
        (**(code **)(_DAT_00000000 + 4))(param_1);
      }
      else {
        (**(code **)(*(int *)**(undefined4 **)((int)this + 0x218) + 4))(param_1);
      }
    }
  }
  *(undefined4 *)((int)this + 0x1e8) = *(undefined4 *)((int)this + 0x1e4);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x1e8) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x1e8) = iVar9;
    if (*(int *)((int)this + 0x1f0) == 0) {
      iVar9 = 0;
    }
    else {
      iVar9 = **(int **)((int)this + 0x1e8);
    }
    iVar12 = *(int *)(iVar9 + 0x3c);
    iVar14 = *(int *)(iVar9 + 0x38);
    cVar16 = '\0';
    cVar13 = '\x01';
    uVar10 = Math_FloatToUInt64();
    iVar7 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    DrawSprite(*(void **)(iVar9 + 0x34),param_1,(int)uVar10,iVar7,cVar13,iVar14,iVar12,cVar16);
  }
  *(undefined4 *)((int)this + 0x298) = *(undefined4 *)((int)this + 0x294);
  SexyWidget_SetDrawMode(param_1,1);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x298) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x298) = iVar9;
    cVar16 = '\0';
    iVar14 = 0;
    uVar10 = Math_FloatToUInt64();
    iVar9 = (int)uVar10;
    cVar13 = '\x01';
    uVar10 = Math_FloatToUInt64();
    iVar12 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x700),param_1,(int)uVar10,iVar12,cVar13,
               iVar9,iVar14,cVar16);
  }
  SexyWidget_SetDrawMode(param_1,0);
  if ((NAN(*(double *)((int)this + 0x88)) || NAN(_DAT_0052a0c0)) ==
      (*(double *)((int)this + 0x88) == _DAT_0052a0c0)) {
    SexyWidget_Translate(param_1,-0x140,0);
    SexyWidget_SetDrawMode(param_1,1);
    uVar17 = 0xff;
    uVar15 = 0;
    uVar10 = Math_FloatToUInt64();
    uVar6 = (undefined4)uVar10;
    uVar10 = Math_FloatToUInt64();
    puVar5 = (undefined4 *)CreateColor(&local_24,(int)uVar10,uVar6,uVar15,uVar17);
    SexyWidget_SetRectangle(param_1,puVar5);
    Graphics_FillRect(param_1,0,0,0x280,0x1e0);
    SexyWidget_SetDrawMode(param_1,0);
    SexyWidget_Translate(param_1,0x140,0);
  }
  if (*(int *)((int)this + 0x84) != 0) {
    SexyWidget_Translate(param_1,-0x140,0);
    SexyWidget_SetDrawMode(param_1,1);
    uVar6 = *(undefined4 *)((int)this + 0x84);
    puVar5 = (undefined4 *)CreateColor(&local_24,uVar6,uVar6,uVar6,0xff);
    SexyWidget_SetRectangle(param_1,puVar5);
    Graphics_FillRect(param_1,0,0,0x280,0x1e0);
    SexyWidget_SetDrawMode(param_1,0);
    SexyWidget_Translate(param_1,0x140,0);
  }
  if (*(int *)((int)this + 0x388) != 0) {
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x6fc),param_1,-0x118,0x46,'\x01',0,0,'\0');
  }
  *(undefined4 *)((int)this + 0x2c8) = *(undefined4 *)((int)this + 0x2c4);
  while (iVar9 = *(int *)(*(int *)((int)this + 0x2c8) + 4), iVar9 != 0) {
    *(int *)((int)this + 0x2c8) = iVar9;
    if (*(int *)((int)this + 0x2d0) == 0) {
      DataStructure_InitializeStack((void *)0x0,param_1);
    }
    else {
      DataStructure_InitializeStack((void *)**(undefined4 **)((int)this + 0x2c8),param_1);
    }
  }
  SexyWidget_Translate(param_1,-0x140,0);
  iVar9 = *(int *)(*(int *)((int)this + 0x5c) + 0x414);
  uVar8 = (int)(iVar9 + (iVar9 >> 0x1f & 3U)) >> 2 & 0x80000007;
  if ((int)uVar8 < 0) {
    uVar8 = (uVar8 - 1 | 0xfffffff8) + 1;
  }
  Graphics_DrawImage(param_1,*(int *)(*(int *)((int)this + 0x5c) + 0x8fc + uVar8 * 4));
  puVar5 = (undefined4 *)SexyWidget_ApplyMatrix(&local_24,0xff,0xff,0xff);
  SexyWidget_SetRectangle(param_1,puVar5);
  Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x940));
  switch(*(undefined4 *)((int)this + 0x374)) {
  case 0:
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x828),param_1,0x21c,0x15e,'\x01',
               (uint)(*(char *)((int)this + 0x128) != '\0'),0,'\0');
    Level_InitializeDictastroika
              (local_ac,"Click or hold left mouse button to fire.\nTank will follow cursor.");
                    /* WARNING: Load size is inaccurate */
    iVar9 = *this;
    local_80 = 0x78;
    local_7c = 0x32;
    local_78 = 400;
    local_74 = 100;
    local_8 = 2;
    uVar6 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x934) + 0x10))(0);
    (**(code **)(iVar9 + 0x98))(param_1,&local_80,local_ac,uVar6);
    iVar9 = extraout_ECX_01;
    local_fc = local_a8;
    local_e8 = local_94;
    break;
  case 1:
    Level_InitializeDictastroika(local_e4,"Dodge or destroy enemy fire!");
                    /* WARNING: Load size is inaccurate */
    iVar9 = *this;
    local_60 = 0x78;
    local_5c = 0x32;
    local_58 = 400;
    local_54 = 100;
    local_8 = 3;
    uVar6 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x934) + 0x10))(0);
    (**(code **)(iVar9 + 0x98))(param_1,&local_60,local_e4,uVar6);
    iVar9 = extraout_ECX_02;
    local_fc = local_e0;
    local_e8 = local_cc;
    break;
  case 2:
    Level_InitializeDictastroika
              (local_c8,"Collect power-ups.\nDon\'t destroy the friendly white chopper!");
                    /* WARNING: Load size is inaccurate */
    iVar9 = *this;
    local_70 = 0x78;
    local_6c = 0x32;
    local_68 = 400;
    local_64 = 100;
    local_8 = 4;
    uVar6 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x934) + 0x10))(0);
    (**(code **)(iVar9 + 0x98))(param_1,&local_70,local_c8,uVar6);
    iVar9 = extraout_ECX_03;
    local_fc = local_c4;
    local_e8 = local_b0;
    break;
  case 3:
    if ((*(int *)((int)this + 0x378) < 0xb5) || (0xef < *(int *)((int)this + 0x378))) {
      iVar9 = 0;
    }
    else {
      iVar9 = 2;
    }
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x828),param_1,0x21c,0x15e,'\x01',iVar9,0,
               '\0');
    Level_InitializeDictastroika(local_100,"Right-click to unleash a nuclear bomb!");
                    /* WARNING: Load size is inaccurate */
    iVar9 = *this;
    local_90 = 0x78;
    local_8c = 0x32;
    local_88 = 400;
    local_84 = 100;
    local_8 = 5;
    uVar6 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x934) + 0x10))(0);
    (**(code **)(iVar9 + 0x98))(param_1,&local_90,local_100,uVar6);
    iVar9 = extraout_ECX_04;
    break;
  default:
    goto switchD_00421f1d_default;
  }
  if (0xf < local_e8) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar9,local_fc);
  }
switchD_00421f1d_default:
  ExceptionList = local_10;
  return;
}


