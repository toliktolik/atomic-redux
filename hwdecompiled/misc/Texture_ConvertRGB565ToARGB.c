/*
 * Function: Texture_ConvertRGB565ToARGB
 * Address: 00475b30
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Texture_ConvertRGB565ToARGB(void *this,int param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  byte bVar8;
  undefined4 extraout_ECX;
  int iVar9;
  uint uVar10;
  uint uVar11;
  ushort *puVar12;
  ushort *puVar13;
  int local_1c;
  int local_14;
  uint *local_10;
  uint *local_8;
  
  uVar1 = *(uint *)(param_2 + 0x58);
  uVar2 = *(uint *)(param_2 + 0x60);
  uVar3 = *(uint *)(param_2 + 0x5c);
  iVar4 = BitUtils_FindHighestBit(this,uVar1);
  iVar5 = BitUtils_FindHighestBit(extraout_ECX,uVar3);
  iVar5 = 0xf - iVar5;
  iVar6 = BitUtils_FindHighestBit(iVar5,uVar2);
  puVar13 = *(ushort **)(param_2 + 0x24);
  local_8 = *(uint **)(param_1 + 4);
  local_1c = 0;
  if (0 < *(int *)(param_1 + 0xc)) {
    iVar9 = *(int *)(param_1 + 8);
    do {
      local_10 = local_8;
      local_14 = 0;
      puVar12 = puVar13;
      if (0 < iVar9) {
        do {
          uVar7 = (uint)*puVar12;
          uVar11 = uVar7 & uVar1;
          uVar10 = uVar7 & uVar3;
          uVar7 = uVar7 & uVar2;
          puVar12 = puVar12 + 1;
          bVar8 = (byte)(0x17 - iVar4);
          if (0x17 - iVar4 < 1) {
            uVar11 = (int)uVar11 >> (-bVar8 & 0x1f);
          }
          else {
            uVar11 = uVar11 << (bVar8 & 0x1f);
          }
          if (iVar5 < 1) {
            uVar10 = (int)uVar10 >> (-(byte)iVar5 & 0x1f);
          }
          else {
            uVar10 = uVar10 << ((byte)iVar5 & 0x1f);
          }
          bVar8 = (byte)(7 - iVar6);
          if (7 - iVar6 < 1) {
            uVar7 = (int)uVar7 >> (-bVar8 & 0x1f);
          }
          else {
            uVar7 = uVar7 << (bVar8 & 0x1f);
          }
          *local_10 = uVar7 | uVar10 | uVar11 | 0xff000000;
          local_10 = local_10 + 1;
          local_14 = local_14 + 1;
        } while (local_14 < *(int *)(param_1 + 8));
      }
      puVar13 = (ushort *)((int)puVar13 + *(int *)(param_2 + 0x10));
      iVar9 = *(int *)(param_1 + 8);
      local_8 = local_8 + iVar9;
      local_1c = local_1c + 1;
    } while (local_1c < *(int *)(param_1 + 0xc));
  }
  return;
}


