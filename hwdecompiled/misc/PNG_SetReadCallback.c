/*
 * Function: PNG_SetReadCallback
 * Address: 004c5170
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __fastcall PNG_SetReadCallback(undefined4 param_1,double *param_2)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  size_t _Size;
  void *pvVar3;
  int *unaff_EBX;
  size_t unaff_EDI;
  
  puVar2 = (undefined4 *)*unaff_EBX;
  unaff_EBX[2] = unaff_EBX[2] + 1;
  if (puVar2 == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)_malloc(0x10);
    _Size = 0x10;
    if (0xf < (int)unaff_EDI) {
      _Size = unaff_EDI;
    }
    pvVar3 = _malloc(_Size);
    *puVar2 = pvVar3;
    puVar2[1] = unaff_EDI;
  }
  else {
    *unaff_EBX = puVar2[3];
    if ((int)puVar2[1] < (int)unaff_EDI) {
      uVar1 = Assembly_ComplexControlFlow(*puVar2,param_2,*puVar2);
      *puVar2 = uVar1;
      puVar2[1] = unaff_EDI;
      puVar2[2] = 1;
      puVar2[3] = unaff_EBX;
      return puVar2;
    }
  }
  puVar2[2] = 1;
  puVar2[3] = unaff_EBX;
  return puVar2;
}


