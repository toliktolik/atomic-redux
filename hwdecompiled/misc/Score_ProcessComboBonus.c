/*
 * Function: Score_ProcessComboBonus
 * Address: 00424660
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Score_ProcessComboBonus(int *param_1)

{
  void *this;
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  ulonglong uVar8;
  double local_18;
  
  Algorithm_CopyN((int)param_1);
  (**(code **)(*param_1 + 0xbc))();
  iVar5 = param_1[0x2c];
  if (iVar5 != 0) {
    if (iVar5 < 0) {
      if (param_1[0x26] != 0) {
        param_1[0x26] = param_1[0x26] + -1;
        return;
      }
      iVar5 = GetBossIndex((void *)param_1[0x17],*(int *)(param_1[0x17] + 0x960));
      if ((char)param_1[0x27] == '\0') {
        if ((NAN(*(double *)(param_1 + 0x2a)) || NAN(_DAT_0052a0c0)) ==
            (*(double *)(param_1 + 0x2a) == _DAT_0052a0c0)) {
          *(double *)(param_1 + 0x2a) = *(double *)(param_1 + 0x2a) + _DAT_0052c590;
          iVar5 = GetBossIndex((void *)param_1[0x17],*(int *)(param_1[0x17] + 0x960));
          if (iVar5 == 4) {
            local_18 = _DAT_0052dc80 - *(double *)(param_1 + 0x1c);
            dVar1 = _DAT_0052dc78;
          }
          else {
            local_18 = _DAT_0052c858 - *(double *)(param_1 + 0x1c);
            dVar1 = _DAT_0052c9a0;
          }
          local_18 = local_18 * _DAT_0052d040;
          dVar1 = (dVar1 - *(double *)(param_1 + 0x1e)) * _DAT_0052d040;
          *(double *)(param_1 + 0x1c) = local_18 + *(double *)(param_1 + 0x1c);
          *(double *)(param_1 + 0x1e) = dVar1 + *(double *)(param_1 + 0x1e);
          if (((local_18 < _DAT_0052c5a0 != (NAN(local_18) || NAN(_DAT_0052c5a0))) &&
              (dVar1 < _DAT_0052c5a0 != (NAN(dVar1) || NAN(_DAT_0052c5a0)))) &&
             (_DAT_0052dc70 < *(double *)(param_1 + 0x2a))) {
            this = (void *)param_1[0x17];
            if (((*(byte *)(*(int *)((int)this + 0xb40) * 0x60 + 0x42 + *(int *)((int)this + 0x148c)
                           ) & 1) == 0) && (*(char *)((int)this + 0xb30) != '\0')) {
              iVar5 = ObjectFactory_Create920ByteObject(this,param_1 + 0x16);
              param_1[0x19] = iVar5;
              *(undefined1 *)(param_1[0x17] + 0xb30) = 0;
            }
            else {
              BackgroundSystem_LoadLevelImages((int)this);
            }
            UI_UpdateChildBinding(*(void **)(param_1[0x17] + 0x2dc),param_1);
            *(undefined1 *)((int)param_1 + 0x1a) = 0;
            param_1[0x2c] = 0xff;
          }
        }
        else {
          param_1[0x24] = param_1[0x24] + 4;
          if (0xff < param_1[0x24]) {
            param_1[0x24] = 0xff;
            if (*(char *)((int)param_1 + 0x9d) == '\0') {
              if ((param_1[0x25] < 0xff) &&
                 (iVar5 = param_1[0x25] + 4, param_1[0x25] = iVar5, 0xfe < iVar5)) {
                param_1[0x25] = 0xff;
              }
            }
            else {
              iVar6 = SexyWidget_GetTextureId(*(int *)(param_1[0x17] + 0x7c0 + iVar5 * 4));
              dVar1 = ((double)(0xa0 - iVar6 / 2) - *(double *)(param_1 + 0x1c)) * _DAT_0052c5a0;
              iVar5 = Level_InitializePetrovakia(*(int *)(param_1[0x17] + 0x7c0 + iVar5 * 4));
              dVar2 = ((double)(0x10e - iVar5 / 2) - *(double *)(param_1 + 0x1e)) * _DAT_0052c5a0;
              *(double *)(param_1 + 0x1c) = dVar1 + *(double *)(param_1 + 0x1c);
              *(double *)(param_1 + 0x1e) = dVar2 + *(double *)(param_1 + 0x1e);
              *(double *)(param_1 + 0x20) = dVar1 + *(double *)(param_1 + 0x20);
              *(double *)(param_1 + 0x22) = dVar2 + *(double *)(param_1 + 0x22);
              uVar8 = Math_FloatToUInt64();
              uVar7 = (int)(uint)uVar8 >> 0x1f;
              dVar1 = (double)(int)(((uint)uVar8 ^ uVar7) - uVar7);
              if ((dVar1 < _DAT_0052c5a0 != (NAN(dVar1) || NAN(_DAT_0052c5a0))) &&
                 (uVar8 = Math_FloatToUInt64(), uVar7 = (int)(uint)uVar8 >> 0x1f,
                 dVar1 = (double)(int)(((uint)uVar8 ^ uVar7) - uVar7),
                 dVar1 < _DAT_0052c5a0 != (NAN(dVar1) || NAN(_DAT_0052c5a0)))) {
                *(undefined1 *)((int)param_1 + 0x9d) = 0;
              }
            }
          }
          if (param_1[0x25] != 0) {
            (**(code **)(*(int *)param_1[0x18] + 0x10))(1);
            (**(code **)(*(int *)param_1[0x1a] + 0x10))(1);
          }
        }
      }
      else {
        dVar1 = ((double)*(int *)(&DAT_0052dc18 + iVar5 * 8) - *(double *)(param_1 + 0x1c)) *
                _DAT_0052c5a0;
        dVar2 = ((double)*(int *)(&DAT_0052dc1c + iVar5 * 8) - *(double *)(param_1 + 0x1e)) *
                _DAT_0052c5a0;
        iVar6 = SexyWidget_GetTextureId(*(int *)(param_1[0x17] + 0x7c0 + iVar5 * 4));
        dVar3 = ((double)(iVar6 + *(int *)(&DAT_0052dc18 + iVar5 * 8)) - *(double *)(param_1 + 0x20)
                ) * _DAT_0052c5a0;
        iVar6 = Level_InitializePetrovakia(*(int *)(param_1[0x17] + 0x7c0 + iVar5 * 4));
        dVar4 = ((double)(iVar6 + *(int *)(&DAT_0052dc1c + iVar5 * 8)) - *(double *)(param_1 + 0x22)
                ) * _DAT_0052c5a0;
        *(double *)(param_1 + 0x1c) = dVar1 + *(double *)(param_1 + 0x1c);
        *(double *)(param_1 + 0x1e) = dVar2 + *(double *)(param_1 + 0x1e);
        *(double *)(param_1 + 0x20) = dVar3 + *(double *)(param_1 + 0x20);
        *(double *)(param_1 + 0x22) = dVar4 + *(double *)(param_1 + 0x22);
        if ((((dVar1 < _DAT_0052c5a0 != (NAN(dVar1) || NAN(_DAT_0052c5a0))) &&
             (dVar2 < _DAT_0052c5a0 != (NAN(dVar2) || NAN(_DAT_0052c5a0)))) &&
            (dVar3 < _DAT_0052c5a0 != (NAN(dVar3) || NAN(_DAT_0052c5a0)))) &&
           (dVar4 < _DAT_0052c5a0 != (NAN(dVar4) || NAN(_DAT_0052c5a0)))) {
          *(undefined1 *)(param_1 + 0x27) = 0;
        }
      }
      if ((*(char *)((int)param_1 + 0x9e) == '\0') && (*(char *)(param_1[0x18] + 0x20) == '\0')) {
        iVar5 = param_1[0x28];
        param_1[0x28] = iVar5 + -0xc;
        if (iVar5 + -0xc < 0) {
          param_1[0x28] = 0;
        }
      }
      else {
        iVar5 = param_1[0x28];
        param_1[0x28] = iVar5 + 0xc;
        if (0xff < iVar5 + 0xc) {
          param_1[0x28] = 0xff;
        }
      }
      iVar5 = (param_1[0x2f] + 1) % 300;
      param_1[0x2f] = iVar5;
      if ((iVar5 == 0) && ((char)param_1[0x31] != '\0')) {
        uVar7 = Vector_Size_4ByteObjects((int)(param_1 + 0x32));
        param_1[0x30] = (param_1[0x30] + 1U) % uVar7;
      }
      (**(code **)(*param_1 + 0xbc))();
    }
    else {
      param_1[0x2c] = iVar5 + -2;
      if (iVar5 + -2 < 0) {
        param_1[0x2c] = 0;
        if (param_1[0x19] != 0) {
          UI_ValidateChildBinding(*(void **)(param_1[0x17] + 0x2dc),param_1);
          return;
        }
        UI_ProcessChildAnimation(*(void **)(param_1[0x17] + 0x2dc),param_1);
        (**(code **)(*(int *)param_1[0x17] + 0x78))(param_1);
        return;
      }
    }
  }
  return;
}


