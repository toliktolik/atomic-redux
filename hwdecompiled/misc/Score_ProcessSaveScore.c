/*
 * Function: Score_ProcessSaveScore
 * Address: 00425e20
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall Score_ProcessSaveScore(void *this,undefined4 param_1)

{
  int iVar1;
  char *pcVar2;
  char cVar3;
  void *pvVar4;
  undefined4 *puVar5;
  char *pcVar6;
  undefined4 uVar7;
  undefined1 local_24 [16];
  void *local_14;
  void *local_10;
  undefined *puStack_c;
  int local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00511320;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_14 = this;
  SexyWidget_Constructor((undefined4 *)this);
  puVar5 = (undefined4 *)((int)this + 0x58);
  *puVar5 = &PTR_EmptyFunction_NoOp_0053127c;
  local_8 = 0;
  *(undefined ***)this = &PTR_Score_ProcessNameEntry_0052dfb0;
  *puVar5 = &PTR_EmptyFunction_NoOp_0052df90;
  *(undefined4 *)((int)this + 0x60) = param_1;
  pvVar4 = operator_new(0x118);
  local_8._0_1_ = 1;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = SexyWidget_ProcessTiming(pvVar4,100,(uint)puVar5);
  }
  *(undefined4 **)((int)this + 100) = puVar5;
  local_8._0_1_ = 0;
  pcVar2 = "If this isn\'t you, click here";
  do {
    pcVar6 = pcVar2;
    pcVar2 = pcVar6 + 1;
  } while (*pcVar6 != '\0');
  String_Assign(puVar5 + 0x17,(_String_base *)"If this isn\'t you, click here",
                (uint)(pcVar6 + -0x52e070));
  iVar1 = **(int **)((int)this + 100);
  uVar7 = (**(code **)(**(int **)(*(int *)((int)this + 0x60) + 0x938) + 0x2c))();
  (**(code **)(iVar1 + 0xc0))(uVar7);
  iVar1 = **(int **)((int)this + 100);
  uVar7 = SexyWidget_ApplyMatrix(local_24,0xc0,0x40,0x20);
  (**(code **)(iVar1 + 0x1c))(0,uVar7);
  *(undefined4 *)(*(int *)((int)this + 100) + 0x110) = 0;
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 2;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement(pvVar4,*(undefined4 *)((int)this + 0x60),(int)this + 0x58,0);
  }
  *(undefined4 **)((int)this + 0x68) = puVar5;
  local_8._0_1_ = 0;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b8);
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 3;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement(pvVar4,*(undefined4 *)((int)this + 0x60),(int)this + 0x58,1);
  }
  *(undefined4 **)((int)this + 0x6c) = puVar5;
  local_8._0_1_ = 0;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b8);
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 4;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement(pvVar4,*(undefined4 *)((int)this + 0x60),(int)this + 0x58,2);
  }
  *(undefined4 **)((int)this + 0x70) = puVar5;
  local_8._0_1_ = 0;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b4);
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 5;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement
                       (pvVar4,*(undefined4 *)((int)this + 0x60),*(undefined4 *)((int)this + 0x60),6
                       );
  }
  *(undefined4 **)((int)this + 0x74) = puVar5;
  local_8._0_1_ = 0;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b4);
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 6;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement(pvVar4,*(undefined4 *)((int)this + 0x60),(int)this + 0x58,4);
  }
  *(undefined4 **)((int)this + 0x78) = puVar5;
  local_8._0_1_ = 0;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b4);
  pvVar4 = operator_new(0x100);
  local_8._0_1_ = 7;
  if (pvVar4 == (void *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5 = Score_ProcessAchievement(pvVar4,*(undefined4 *)((int)this + 0x60),(int)this + 0x58,5);
  }
  *(undefined4 **)((int)this + 0x7c) = puVar5;
  local_8 = (uint)local_8._1_3_ << 8;
  puVar5[0x3d] = *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7b4);
  cVar3 = (**(code **)(**(int **)(*(int *)((int)this + 0x60) + 0x330) + 0x30))(3);
  if (cVar3 == '\0') {
    (**(code **)(**(int **)(*(int *)((int)this + 0x60) + 0x330) + 0x24))(1,0xd2f1a9fc,0x3f70624d);
    (**(code **)(**(int **)(*(int *)((int)this + 0x60) + 0x330) + 0x1c))
              (3,0x3b,0xd2f1a9fc,0x3f60624d,0);
  }
  pvVar4 = operator_new(0x14);
  local_8._0_1_ = 8;
  if (pvVar4 == (void *)0x0) {
    uVar7 = 0;
  }
  else {
    uVar7 = AudioSystem_Constructor
                      (pvVar4,*(int *)((int)this + 0x60),
                       *(undefined4 *)(*(int *)((int)this + 0x60) + 0x7ec));
  }
  local_8 = (uint)local_8._1_3_ << 8;
  *(undefined4 *)((int)this + 0x80) = uVar7;
  *(undefined4 *)((int)this + 0x84) = 0;
  *(undefined4 *)((int)this + 0x5c) = 0;
  Score_ProcessFinalTally(this,0,0,0x280,0x1e0);
  ExceptionList = local_10;
  return (undefined4 *)this;
}


