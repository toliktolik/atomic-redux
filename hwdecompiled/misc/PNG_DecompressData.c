/*
 * Function: PNG_DecompressData
 * Address: 004d06a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl
PNG_DecompressData(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6,
                  char *param_7,int param_8)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  bool bVar6;
  uint local_8;
  
  if (((param_7 == (char *)0x0) || (*param_7 != *PTR_s_1_1_3_0056822c)) || (param_8 != 0x38)) {
    return 0xfffffffa;
  }
  if (param_1 != 0) {
    *(undefined4 *)(param_1 + 0x18) = 0;
    if (*(int *)(param_1 + 0x20) == 0) {
      *(code **)(param_1 + 0x20) = Math_Abs;
      *(undefined4 *)(param_1 + 0x28) = 0;
    }
    if (*(int *)(param_1 + 0x24) == 0) {
      *(code **)(param_1 + 0x24) = Math_Sign;
    }
    if (param_2 == -1) {
      param_2 = 6;
    }
    bVar6 = param_4 < 0;
    if (bVar6) {
      param_4 = -param_4;
    }
    local_8 = (uint)bVar6;
    if (((((0 < param_5) && (param_5 < 10)) &&
         ((param_3 == 8 && ((7 < param_4 && (param_4 < 0x10)))))) && (-1 < param_2)) &&
       (((param_2 < 10 && (-1 < param_6)) && (param_6 < 3)))) {
      piVar2 = (int *)(**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),1,0x16b8);
      if (piVar2 != (int *)0x0) {
        *(int **)(param_1 + 0x1c) = piVar2;
        piVar2[10] = param_4;
        iVar5 = 1 << ((byte)param_4 & 0x1f);
        piVar2[6] = local_8;
        piVar2[0xb] = iVar5 + -1;
        iVar3 = 1 << ((byte)(param_5 + 7) & 0x1f);
        piVar2[0x12] = param_5 + 7;
        *piVar2 = param_1;
        piVar2[0x11] = iVar3;
        piVar2[0x13] = iVar3 + -1;
        piVar2[9] = iVar5;
        piVar2[0x14] = (param_5 + 9U) / 3;
        iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),iVar5,2);
        piVar2[0xc] = iVar3;
        iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),piVar2[9],2);
        piVar2[0xe] = iVar3;
        iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),piVar2[0x11],2);
        piVar2[0xf] = iVar3;
        iVar3 = 1 << ((char)param_5 + 6U & 0x1f);
        piVar2[0x5a5] = iVar3;
        iVar3 = (**(code **)(param_1 + 0x20))(*(undefined4 *)(param_1 + 0x28),iVar3,4);
        uVar1 = piVar2[0x5a5];
        piVar2[3] = uVar1 * 4;
        piVar2[2] = iVar3;
        if (((piVar2[0xc] != 0) && (piVar2[0xe] != 0)) && ((piVar2[0xf] != 0 && (iVar3 != 0)))) {
          piVar2[0x5a7] = iVar3 + (uVar1 & 0xfffffffe);
          piVar2[0x5a4] = iVar3 + uVar1 * 3;
          piVar2[0x1f] = param_2;
          piVar2[0x20] = param_6;
          *(undefined1 *)((int)piVar2 + 0x1d) = 8;
          uVar4 = PNG_CompressData(param_1);
          return uVar4;
        }
        *(undefined **)(param_1 + 0x18) = PTR_s_insufficient_memory_005682e4;
        PNG_ReadtRNS(param_1);
      }
      return 0xfffffffc;
    }
  }
  return 0xfffffffe;
}


