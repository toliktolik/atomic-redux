/*
 * Function: PixelFormat_InvertColors
 * Address: 004c27a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl PixelFormat_InvertColors(int *param_1,int param_2,int param_3,int param_4,char param_5)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  if (param_1[5] != 100) {
    *(undefined4 *)(*param_1 + 0x14) = 0x14;
    *(int *)(*param_1 + 0x18) = param_1[5];
    (**(code **)*param_1)(param_1);
  }
  if ((param_2 < 0) || (3 < param_2)) {
    *(undefined4 *)(*param_1 + 0x14) = 0x1f;
    *(int *)(*param_1 + 0x18) = param_2;
    (**(code **)*param_1)(param_1);
  }
  if (param_1[param_2 + 0x12] == 0) {
    iVar1 = ZLIB_CompressBound((int)param_1);
    param_1[param_2 + 0x12] = iVar1;
  }
  iVar1 = 6;
  piVar3 = (int *)(param_3 + 8);
  do {
    iVar2 = (piVar3[-2] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(iVar1 + -6 + param_1[param_2 + 0x12]) = (short)iVar2;
    iVar2 = (piVar3[-1] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + -4 + iVar1) = (short)iVar2;
    iVar2 = (*piVar3 * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + -2 + iVar1) = (short)iVar2;
    iVar2 = (piVar3[1] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(iVar1 + param_1[param_2 + 0x12]) = (short)iVar2;
    iVar2 = (piVar3[2] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + 2 + iVar1) = (short)iVar2;
    iVar2 = (piVar3[3] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + 4 + iVar1) = (short)iVar2;
    iVar2 = (piVar3[4] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + 6 + iVar1) = (short)iVar2;
    iVar2 = (piVar3[5] * param_4 + 0x32) / 100;
    if (iVar2 < 1) {
      iVar2 = 1;
    }
    else if (0x7fff < iVar2) {
      iVar2 = 0x7fff;
    }
    if ((param_5 != '\0') && (0xff < iVar2)) {
      iVar2 = 0xff;
    }
    *(short *)(param_1[param_2 + 0x12] + 8 + iVar1) = (short)iVar2;
    iVar1 = iVar1 + 0x10;
    piVar3 = piVar3 + 8;
  } while (iVar1 < 0x86);
  *(undefined1 *)(param_1[param_2 + 0x12] + 0x80) = 0;
  return;
}


