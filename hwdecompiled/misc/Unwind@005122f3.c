/*
 * Function: Unwind@005122f3
 * Address: 005122f3
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005122d1) overlaps instruction at (ram,0x005122cf)
    */
/* WARNING: Removing unreachable block (ram,0x005122d1) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint * __fastcall Unwind_005122f3(uint *param_1)

{
  undefined2 *puVar1;
  byte bVar2;
  uint *puVar3;
  byte bVar4;
  char cVar5;
  uint *puVar6;
  uint *puVar7;
  int extraout_ECX;
  int iVar8;
  uint uVar9;
  int iVar10;
  int unaff_EBX;
  uint *puVar11;
  uint unaff_ESI;
  uint *unaff_EDI;
  undefined2 in_CS;
  undefined2 uVar12;
  undefined2 uVar13;
  bool bVar14;
  bool bVar15;
  bool bVar16;
  byte in_AF;
  byte in_TF;
  byte in_NT;
  byte in_AC;
  byte in_VIF;
  byte in_VIP;
  byte in_ID;
  undefined8 uVar17;
  
  do {
    puVar7 = param_1;
    uVar12 = 0x9468;
    uVar17 = func_0x46b48ec7(in_CS);
    _DAT_1c6e2b14 = (undefined4)uVar17;
    cVar5 = in(0x29);
    iVar8 = CONCAT31((int3)((ulonglong)uVar17 >> 0x28),0x96);
    if (extraout_ECX != 0) {
      *(char *)((int)unaff_EDI + 0x43fad9d9) =
           *(char *)((int)unaff_EDI + 0x43fad9d9) << ((byte)extraout_ECX & 0x1f);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    out((short)iVar8,cVar5);
    bVar14 = *(uint *)(unaff_ESI + 1) < *unaff_EDI;
    bVar4 = cVar5 + (char)((ulonglong)uVar17 >> 8) * -0x1f;
    bVar2 = bVar4 - 0x23;
    bVar15 = 0x22 < bVar4 || CARRY1(bVar2,bVar14);
    bVar4 = (byte)unaff_EBX + *(byte *)(unaff_ESI + 0x4291f9dc);
    bVar16 = CARRY1((byte)unaff_EBX,*(byte *)(unaff_ESI + 0x4291f9dc)) || CARRY1(bVar4,bVar15);
    unaff_EBX = CONCAT31((int3)((uint)unaff_EBX >> 8),bVar4 + bVar15);
    LOCK();
    puVar1 = *(undefined2 **)(unaff_EBX + 0x78);
    *(BADSPACEBASE **)(unaff_EBX + 0x78) = register0x00000010;
    UNLOCK();
    uVar13 = *puVar1;
    puVar6 = (uint *)0xfc3888cb;
    puVar3 = (uint *)(CONCAT31((int3)((ulonglong)uVar17 >> 8),bVar2 + bVar14) & 0xffff00ff);
    do {
      puVar11 = puVar3;
      bVar14 = SBORROW4(iVar8,*puVar7);
      iVar10 = iVar8 - *puVar7;
      iVar8 = iVar10 - (uint)bVar16;
      if (iVar8 != 0 && (bVar14 != SBORROW4(iVar10,(uint)bVar16)) == iVar8 < 0) {
        out(*(undefined4 *)(unaff_ESI + 5),(short)iVar8);
        return puVar6;
      }
      iVar10 = CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(0xf9,(char)unaff_EBX));
      puVar6 = (uint *)segment(uVar13,0xf3a1);
      *puVar6 = *puVar6 & 0xda50424e;
      bVar16 = false;
      unaff_EBX = iVar10 + -1;
      puVar6 = puVar11;
      puVar3 = puVar7;
    } while (SBORROW4(iVar10,1));
    bRamf0e8502b = bRamf0e8502b ^ (byte)puVar11;
                    /* WARNING: Bad instruction - Truncating control flow here */
    uVar9 = iVar8 - 1;
    bVar14 = 9 < ((byte)puVar7 & 0xf);
    LOCK();
    *(uint *)(unaff_ESI + 7) = uVar9;
    UNLOCK();
    param_1 = (uint *)0x2;
    unaff_ESI = (uint)(in_NT & 1) * 0x4000 | (uint)SBORROW4(iVar8,1) * 0x800 |
                (uint)(in_TF & 1) * 0x100 | (uint)((int)uVar9 < 0) * 0x80 |
                (uint)(uVar9 == 0) * 0x40 | (uint)(bVar14 | in_AF & 1) * 0x10 |
                (uint)((POPCOUNT(uVar9 & 0xff) & 1U) == 0) * 4 | (uint)(bVar14 | in_AF & 1) |
                (uint)(in_ID & 1) * 0x200000 | (uint)(in_VIP & 1) * 0x100000 |
                (uint)(in_VIF & 1) * 0x80000 | (uint)(in_AC & 1) * 0x40000;
    unaff_EDI = puVar7;
    in_CS = uVar12;
    in_AF = bVar14 | in_AF;
  } while( true );
}


