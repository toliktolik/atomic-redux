/*
 * Function: Unwind@00511970
 * Address: 00511970
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005119b1) overlaps instruction at (ram,0x005119a8)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x005119f8) */
/* WARNING: Removing unreachable block (ram,0x005119a1) */
/* WARNING: Removing unreachable block (ram,0x00511a0a) */
/* WARNING: Removing unreachable block (ram,0x00511a14) */
/* WARNING: Removing unreachable block (ram,0x005119b1) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall
Unwind_00511970(void *this,undefined4 *param_1,undefined1 *param_2,undefined3 param_3)

{
  uint *puVar1;
  byte *pbVar2;
  int *piVar3;
  code *pcVar4;
  undefined4 *puVar5;
  byte in_AL;
  byte bVar6;
  undefined4 uVar7;
  int iVar8;
  int extraout_ECX;
  undefined8 *puVar9;
  undefined4 extraout_EDX;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined1 *unaff_ESI;
  undefined1 *puVar12;
  undefined1 *unaff_EDI;
  bool bVar13;
  byte in_AF;
  byte bVar14;
  undefined8 in_MM6;
  
                    /* WARNING: Load size is inaccurate */
  *(char *)this = *this + '\x01';
  *unaff_EDI = *unaff_ESI;
  bVar14 = 9 < (in_AL & 0xf) | in_AF;
  pcVar4 = (code *)swi(0x57);
  (*pcVar4)();
  LOCK();
  piVar3 = (int *)(extraout_ECX + (int)(unaff_ESI + 1) * 2);
  iVar8 = *piVar3;
  *piVar3 = extraout_ECX;
  UNLOCK();
  bVar14 = 9 < (DAT_b26d5b30 & 0xf) | bVar14;
  puVar10 = (undefined4 *)
            CONCAT22((short)((uint)extraout_EDX >> 0x10),
                     CONCAT11((char)((uint)extraout_EDX >> 8) - *(char *)(iVar8 + 0x23),
                              (char)extraout_EDX));
  puVar12 = unaff_ESI + 1;
  puVar5 = (undefined4 *)(unaff_EDI + 1);
  while( true ) {
    puVar11 = puVar5;
    uVar7 = in(0x5c);
    bVar6 = (byte)uVar7 ^ 0x2f;
    iVar8 = CONCAT31((int3)(CONCAT22((short)((uint)uVar7 >> 0x10),CONCAT11(bVar6 / 0xf2,(byte)uVar7)
                                    ) >> 8),bVar6 % 0xf2);
    if ((POPCOUNT((ushort)iVar8 & 0xff) & 1U) != 0) break;
    puVar9 = (undefined8 *)&DAT_093224a0;
    while( true ) {
      bVar6 = (byte)puVar11;
      puVar11 = (undefined4 *)((int)puVar10 + -1);
      xabort(0x3b);
      piVar3 = (int *)(param_2 + (int)((int)puVar9 + -0x12));
      *piVar3 = (int)(*piVar3 + (int)puVar11);
      iVar8 = *piVar3;
      in(0x2a);
      uVar7 = in((short)puVar11);
      pbVar2 = param_2 + -0x7cab2;
      *pbVar2 = *pbVar2 >> 3 | *pbVar2 << 5;
      bVar14 = 9 < ((byte)uVar7 & 0xf) | 9 < (bVar6 & 0xf) | bVar14;
      bVar6 = (byte)uVar7 + bVar14 * '\x06';
      in_MM6 = psubsb(in_MM6,*puVar9);
      puVar10 = puVar11;
      puVar12 = param_2;
      puVar5 = (undefined4 *)0x4;
      if ((bool)(0x90 < (bVar6 & 0xf0) | (char)*pbVar2 < '\0' | bVar14 * (0xf9 < bVar6)) ||
          iVar8 == 0) break;
      *(undefined4 *)(CONCAT31(param_3,param_2._3_1_) + -4) = 4;
      bVar13 = DAT_7f377050 < 0x4d;
      DAT_7f377050 = DAT_7f377050 + 0xb3;
      puVar9 = (undefined8 *)
               CONCAT22((short)((uint)puVar9 >> 0x10),
                        CONCAT11((char)((uint)puVar9 >> 8) + (char)((uint)puVar11 >> 8) + bVar13,
                                 (char)puVar9));
      *(undefined4 **)(CONCAT31(param_3,param_2._3_1_) + -8) = puVar11;
      puVar10 = (undefined4 *)CONCAT31((int3)(char)((uint)uVar7 >> 8),0xb9);
    }
  }
  uVar7 = in((short)puVar10);
  *puVar11 = uVar7;
  *(int *)((int)puVar10 + -0x2b) = *(int *)((int)puVar10 + -0x2b) - (int)puVar10;
  puVar1 = (uint *)(puVar12 + 0x11);
  *puVar1 = *puVar1 >> 1 | (uint)((*puVar1 & 1) != 0) << 0x1f;
  puVar1 = (uint *)(iVar8 + -0x68);
  *puVar1 = *puVar1 >> 1;
  do {
                    /* WARNING: Do nothing block with infinite loop */
  } while( true );
}


