/*
 * Function: CPU_ProcessData9
 * Address: 004c6a50
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl CPU_ProcessData9(int *param_1,undefined4 *param_2,int param_3)

{
  uint *puVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  undefined4 uVar9;
  
  iVar2 = *(int *)(param_1[0x12] + 4);
  iVar3 = *(int *)(param_1[0x12] + 0x48);
  uVar4 = *(uint *)(iVar2 + 0x1c);
  puVar1 = (uint *)(param_1 + 1);
  CPU_ProcessData13(iVar3,uVar4,(int)param_1);
  GIF_GetLoopCount(puVar1,(undefined4 *)*param_2);
  uVar5 = GIF_SetTransparentIndex(puVar1,1);
  if (uVar5 != 0) {
    return 0xffffff79;
  }
  uVar5 = GIF_SetTransparentIndex(puVar1,*(int *)(iVar3 + 8));
  if (uVar5 == 0xffffffff) {
    return 0xffffff78;
  }
  param_1[0xb] = uVar5;
  iVar7 = **(int **)(uVar4 + 0x20 + uVar5 * 4);
  param_1[8] = iVar7;
  if (iVar7 == 0) {
    param_1[7] = 0;
    param_1[9] = 0;
  }
  else {
    uVar6 = GIF_SetTransparentIndex(puVar1,1);
    param_1[7] = uVar6;
    uVar6 = GIF_SetTransparentIndex(puVar1,1);
    param_1[9] = uVar6;
    if (uVar6 == 0xffffffff) {
      return 0xffffff78;
    }
  }
  param_1[0xe] = param_2[4];
  param_1[0xf] = param_2[5];
  uVar6 = param_2[6];
  iVar7 = param_2[7];
  param_1[0x10] = uVar6 - 3;
  param_1[0x11] = iVar7 - (uint)(uVar6 < 3);
  param_1[0xc] = param_2[3];
  if (param_3 != 0) {
    param_1[10] = *(int *)(uVar4 + param_1[8] * 4);
    iVar7 = CPU_ProcessData12((int)param_1,*(int *)(iVar2 + 4) << 2);
    *param_1 = iVar7;
    iVar7 = 0;
    if (0 < *(int *)(iVar2 + 4)) {
      do {
        iVar8 = CPU_ProcessData12((int)param_1,param_1[10] << 2);
        *(int *)(*param_1 + iVar7 * 4) = iVar8;
        iVar7 = iVar7 + 1;
      } while (iVar7 < *(int *)(iVar2 + 4));
    }
    uVar9 = (**(code **)((&PTR_PTR_Process_WaitForExit_005682c8)
                         [*(int *)(uVar4 + 0x120 +
                                  *(int *)(*(int *)(uVar4 + 0x20 + uVar5 * 4) + 0xc) * 4)] + 0x10))
                      (param_1,*(undefined4 *)(*(int *)(iVar3 + 0xc) + uVar5 * 4));
    return uVar9;
  }
  param_1[10] = 0;
  *param_1 = 0;
  return 0;
}


