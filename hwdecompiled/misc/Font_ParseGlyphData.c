/*
 * Function: Font_ParseGlyphData
 * Address: 004959a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Type propagation algorithm not settling */

uint __thiscall Font_ParseGlyphData(void *this,undefined ***param_1,_String_base *param_2)

{
  byte bVar1;
  int iVar2;
  _String_base *p_Var3;
  char cVar4;
  uint uVar5;
  undefined4 *puVar6;
  char *pcVar7;
  undefined4 uVar8;
  _String_base *p_Var9;
  int *piVar10;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int iVar11;
  char *pcVar12;
  undefined8 uVar13;
  undefined1 auStackY_12170 [73852];
  int local_f4;
  byte abStackY_f0 [4];
  int local_ec [23];
  int local_90;
  undefined **local_8c [13];
  undefined1 local_58 [4];
  uint local_54;
  undefined4 local_44;
  uint local_40;
  _String_base local_3c [4];
  uint local_38;
  undefined4 uStackY_34;
  _String_base *p_Var14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x515441;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  uVar5 = System_LoadLibrary(this);
  if (*(char *)(extraout_ECX + 4) != '\0') {
    ExceptionList = local_10;
    return uVar5 & 0xffffff00;
  }
  puVar6 = Registry_SetValue(auStackY_12170,extraout_ECX);
  iVar2 = *(int *)(extraout_ECX + 0x124);
  local_8 = 0;
  puVar6 = Memory_ValidateHeap(iVar2,*(undefined4 *)(iVar2 + 4),puVar6);
  Memory_ValidatePointer((void *)(extraout_ECX + 0x120),1);
  *(undefined4 **)(iVar2 + 4) = puVar6;
  *(undefined4 **)puVar6[1] = puVar6;
  local_8 = 0xffffffff;
  D3D_ConfigureFiltering((int)auStackY_12170);
  iVar2 = *(int *)(*(int *)(extraout_ECX + 0x124) + 4);
  local_40 = 0xf;
  local_44 = 0;
  local_54 = local_54 & 0xffffff00;
  pcVar12 = "";
  do {
    pcVar7 = pcVar12;
    pcVar12 = pcVar7 + 1;
  } while (*pcVar7 != '\0');
  String_Assign(local_58,(_String_base *)&DAT_0052c7cf,(uint)(pcVar7 + -0x52c7cf));
  local_8 = 1;
  local_38 = local_38 & 0xffffff00;
  PowerUp_ProcessThunderstrike(local_3c,(uint)local_58,(_String_base *)0x0,0xf,0xffffffff);
  puVar6 = (undefined4 *)&stack0xffffffe4;
  local_8 = CONCAT31(local_8._1_3_,2);
  uVar13 = DataStructure_InitializeLinkedList((void *)(extraout_ECX + 300),puVar6,local_3c);
  piVar10 = (int *)uVar13;
  if ((undefined4 *)0xf < puVar6) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_38);
  }
  local_38 = local_38 & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_40) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,(uint)((ulonglong)uVar13 >> 0x20));
  }
  if (*piVar10 != *(int *)(extraout_ECX + 0x130)) {
    *(undefined ****)(iVar2 + 0x1204c) = param_1;
    uVar8 = SexyWidget_GetHeight((int)param_1);
    *(undefined4 *)(iVar2 + 0x12078) = uVar8;
    uVar8 = SexyWidget_GetHeight(extraout_ECX_01);
    p_Var3 = param_2;
    *(undefined4 *)(iVar2 + 0x1206c) = uVar8;
    p_Var14 = (_String_base *)0x0;
    if (*(uint *)(param_2 + 0x18) < 0x10) {
      p_Var9 = param_2 + 4;
    }
    else {
      p_Var9 = *(_String_base **)(param_2 + 4);
    }
    SexyFramework_SetWidgetBounds(&local_f4,(int)p_Var9,1,1);
    local_8 = 3;
    if (local_90 != 0) {
      PowerUp_ProcessThunderstrike
                ((_String_base *)(extraout_ECX + 0x138),extraout_EDX,p_Var3,0,0xffffffff);
      piVar10 = Database_LogTransaction(&local_f4);
      Database_LogTransaction(piVar10);
      bVar1 = abStackY_f0[*(int *)(local_f4 + 4)];
      while ((bVar1 & 1) == 0) {
        param_1 = (undefined ***)((uint)param_1 & 0xffffff);
        param_2 = (_String_base *)0x0;
        uStackY_34 = 0x495bf6;
        piVar10 = Database_InitializeConnection(&local_f4,(undefined1 *)((int)&param_1 + 3));
        Database_LogTransaction(piVar10);
        if (param_1._3_1_ == '\0') break;
        uVar8 = SexyWidget_GetHeight(*(int *)(iVar2 + 0x1204c));
        iVar11 = (extraout_EDX_00 & 0xff) * 0x120 + iVar2 + 8;
        *(_String_base **)(iVar11 + 0x24) = p_Var14;
        *(undefined4 *)(iVar11 + 0x28) = 0;
        *(_String_base **)(iVar11 + 0x2c) = param_2;
        *(undefined4 *)(iVar11 + 0x30) = uVar8;
        *(_String_base **)(iVar11 + 0x13c) = param_2;
        p_Var14 = p_Var14 + (int)param_2;
        bVar1 = abStackY_f0[*(int *)(local_f4 + 4)];
      }
      cVar4 = 'A';
      pcVar12 = (char *)(extraout_ECX + 0x55);
      piVar10 = (int *)(iVar2 + 0x6e64);
      do {
        if ((piVar10[-0x900] == 0) && (*piVar10 != 0)) {
          *pcVar12 = cVar4 + ' ';
        }
        cVar4 = cVar4 + '\x01';
        piVar10 = piVar10 + 0x48;
        pcVar12 = pcVar12 + 1;
      } while (cVar4 < '[');
      cVar4 = 'a';
      pcVar12 = (char *)(extraout_ECX + 0x75);
      piVar10 = (int *)(iVar2 + 0x4a64);
      do {
        if ((piVar10[0x900] == 0) && (*piVar10 != 0)) {
          *pcVar12 = cVar4 + -0x20;
        }
        cVar4 = cVar4 + '\x01';
        piVar10 = piVar10 + 0x48;
        pcVar12 = pcVar12 + 1;
      } while (cVar4 < '{');
      *(undefined1 *)(extraout_ECX + 4) = 1;
      param_1 = local_8c;
      *(undefined ***)(abStackY_f0 + *(int *)(local_f4 + 4) + -4) = &PTR_D3D_EndScene_0053341c;
      local_8 = 4;
      Network_CleanupConnection(local_ec,(uint)param_1);
      *(undefined ***)(abStackY_f0 + *(int *)(local_f4 + 4) + -4) =
           &PTR_Audio_ProcessVolumeControl_0053132c;
      local_8 = 0xffffffff;
      local_8c[0] = &PTR_IOSBase_DestructorWrapper_00531324;
      uVar8 = IOStream_RefCountDestructor((ios_base *)local_8c);
      ExceptionList = local_10;
      return CONCAT31((int3)((uint)uVar8 >> 8),1);
    }
    local_8 = 0xffffffff;
    D3D_ResetTransform((int)local_8c);
    local_8c[0] = &PTR_IOSBase_DestructorWrapper_00531324;
    piVar10 = (int *)IOStream_RefCountDestructor((ios_base *)local_8c);
  }
  ExceptionList = local_10;
  return (uint)piVar10 & 0xffffff00;
}


