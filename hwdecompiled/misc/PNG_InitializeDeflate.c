/*
 * Function: PNG_InitializeDeflate
 * Address: 004d0ab0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint PNG_InitializeDeflate(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int *unaff_ESI;
  int *local_c;
  uint local_8;
  
  iVar1 = unaff_ESI[0x49];
  if (iVar1 != 1) {
    if ((iVar1 < 1) || (4 < iVar1)) {
      *(undefined4 *)(*unaff_ESI + 0x14) = 0x1a;
      *(int *)(*unaff_ESI + 0x18) = unaff_ESI[0x49];
      *(undefined4 *)(*unaff_ESI + 0x1c) = 4;
      (**(code **)*unaff_ESI)();
    }
    iVar1 = Math_AlignToMultiple(unaff_ESI[7],unaff_ESI[0x44] << 3);
    unaff_ESI[0x4e] = iVar1;
    iVar1 = Math_AlignToMultiple(unaff_ESI[8],unaff_ESI[0x45] << 3);
    unaff_ESI[0x4f] = iVar1;
    uVar4 = unaff_ESI[0x49];
    unaff_ESI[0x50] = 0;
    local_8 = 0;
    if (0 < (int)uVar4) {
      local_c = unaff_ESI + 0x4a;
      do {
        iVar1 = *local_c;
        uVar4 = *(uint *)(iVar1 + 8);
        *(uint *)(iVar1 + 0x40) = *(int *)(iVar1 + 0x24) * uVar4;
        uVar3 = *(uint *)(iVar1 + 0x1c) % uVar4;
        *(int *)(iVar1 + 0x38) = *(int *)(iVar1 + 0xc);
        iVar5 = *(int *)(iVar1 + 0xc) * uVar4;
        *(uint *)(iVar1 + 0x34) = uVar4;
        *(int *)(iVar1 + 0x3c) = iVar5;
        if (uVar3 == 0) {
          uVar3 = uVar4;
        }
        *(uint *)(iVar1 + 0x44) = uVar3;
        uVar4 = *(uint *)(iVar1 + 0x20) % *(uint *)(iVar1 + 0xc);
        if (uVar4 == 0) {
          uVar4 = *(uint *)(iVar1 + 0xc);
        }
        *(uint *)(iVar1 + 0x48) = uVar4;
        if (10 < unaff_ESI[0x50] + iVar5) {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0xd;
          (**(code **)*unaff_ESI)();
        }
        if (0 < iVar5) {
          do {
            unaff_ESI[unaff_ESI[0x50] + 0x51] = local_8;
            iVar5 = iVar5 + -1;
            unaff_ESI[0x50] = unaff_ESI[0x50] + 1;
          } while (iVar5 != 0);
        }
        uVar4 = local_8 + 1;
        local_c = local_c + 1;
        local_8 = uVar4;
      } while ((int)uVar4 < unaff_ESI[0x49]);
    }
    return uVar4;
  }
  iVar1 = unaff_ESI[0x4a];
  unaff_ESI[0x4e] = *(int *)(iVar1 + 0x1c);
  unaff_ESI[0x4f] = *(int *)(iVar1 + 0x20);
  uVar4 = *(uint *)(iVar1 + 0xc);
  *(undefined4 *)(iVar1 + 0x40) = *(undefined4 *)(iVar1 + 0x24);
  uVar3 = *(uint *)(iVar1 + 0x20);
  uVar2 = uVar3 % uVar4;
  *(undefined4 *)(iVar1 + 0x34) = 1;
  *(undefined4 *)(iVar1 + 0x38) = 1;
  *(undefined4 *)(iVar1 + 0x3c) = 1;
  *(undefined4 *)(iVar1 + 0x44) = 1;
  if (uVar2 == 0) {
    uVar2 = uVar4;
  }
  *(uint *)(iVar1 + 0x48) = uVar2;
  unaff_ESI[0x50] = 1;
  unaff_ESI[0x51] = 0;
  return uVar3 / uVar4;
}


