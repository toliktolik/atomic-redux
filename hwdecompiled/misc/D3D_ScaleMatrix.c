/*
 * Function: D3D_ScaleMatrix
 * Address: 00484940
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
D3D_ScaleMatrix(void *this,_String_base *param_1,int param_2,int param_3,int param_4,int param_5)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  undefined4 *puVar4;
  int iVar5;
  _String_base *p_Var6;
  undefined4 local_84 [2];
  int local_7c;
  int local_74;
  undefined4 *local_60;
  void *local_8;
  
  iVar5 = param_4;
  local_84[0] = 0x7c;
  p_Var6 = param_1;
  local_8 = this;
  iVar1 = (**(code **)(*(int *)param_1 + 100))(param_1,0,local_84,0x21,0,"Lock Texture");
  D3D_ValidateRenderTarget(iVar1,p_Var6);
  iVar1 = *(int *)((int)this + 8) - param_2;
  if (iVar1 <= param_4) {
    param_4 = iVar1;
  }
  iVar1 = *(int *)((int)this + 0xc) - param_3;
  if (param_5 < iVar1) {
    iVar1 = param_5;
  }
  if ((param_4 < iVar5) || (iVar1 < param_5)) {
    puVar4 = local_60;
    for (uVar3 = (uint)(local_7c * local_74) >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
      *puVar4 = 0;
      puVar4 = puVar4 + 1;
    }
    for (uVar3 = local_7c * local_74 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
      *(undefined1 *)puVar4 = 0;
      puVar4 = (undefined4 *)((int)puVar4 + 1);
    }
  }
  if (((0 < param_4) && (0 < iVar1)) &&
     (puVar4 = (undefined4 *)
               (*(int *)((int)this + 4) + (*(int *)((int)this + 8) * param_3 + param_2) * 4),
     param_3 = iVar1, 0 < iVar1)) {
    do {
      if (0 < param_4) {
        puVar2 = puVar4;
        iVar5 = param_4;
        do {
          *(undefined4 *)(((int)local_60 - (int)puVar4) + (int)puVar2) = *puVar2;
          puVar2 = puVar2 + 1;
          iVar5 = iVar5 + -1;
          this = local_8;
        } while (iVar5 != 0);
      }
      puVar4 = puVar4 + *(int *)((int)this + 8);
      local_60 = (undefined4 *)((int)local_60 + local_74);
      param_3 = param_3 + -1;
    } while (param_3 != 0);
  }
  iVar5 = (**(code **)(*(int *)param_1 + 0x80))(param_1,0,"Texture Unlock");
  D3D_ValidateRenderTarget(iVar5,param_1);
  return;
}


