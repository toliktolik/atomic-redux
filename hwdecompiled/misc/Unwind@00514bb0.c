/*
 * Function: Unwind@00514bb0
 * Address: 00514bb0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dd2) overlaps instruction at (ram,0x00514dce)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00514d0a) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514bb0(char *param_1,char *param_2)

{
  byte *pbVar1;
  undefined1 uVar2;
  char cVar3;
  bool bVar4;
  code *pcVar5;
  undefined6 uVar6;
  ushort uVar7;
  int in_EAX;
  char *pcVar8;
  uint uVar9;
  uint uVar10;
  undefined1 *puVar12;
  uint *extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar14;
  undefined2 uVar15;
  char *extraout_EDX;
  undefined2 *puVar16;
  char *unaff_EBX;
  undefined4 *puVar17;
  undefined4 *puVar18;
  byte *pbVar19;
  undefined1 *puVar20;
  byte *unaff_EBP;
  undefined4 uVar21;
  char *pcVar22;
  int *piVar24;
  undefined1 *puVar25;
  byte *pbVar26;
  char *unaff_EDI;
  char *pcVar27;
  uint *puVar28;
  uint *puVar29;
  undefined2 uVar30;
  undefined2 in_SS;
  byte in_CF;
  byte bVar31;
  byte bVar32;
  bool bVar33;
  byte in_AF;
  bool bVar34;
  bool bVar35;
  byte bVar36;
  bool bVar37;
  unkbyte10 in_ST7;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar38;
  char *pcVar39;
  undefined1 auStack_5efb [17498];
  char *pcStack_1aa1;
  char acStack_4d [21];
  undefined1 *puStack_38;
  char *pcStack_24;
  char *pcStack_20;
  undefined4 *puStack_1c;
  undefined1 *puStack_18;
  char *pcStack_14;
  char *pcStack_10;
  char *pcStack_c;
  char *pcStack_8;
  byte bStack_4;
  byte bStack_3;
  undefined2 uStack_2;
  char *pcVar11;
  undefined3 uVar13;
  char *pcVar23;
  
  bVar36 = 0;
  do {
    pcVar8 = (char *)((in_EAX + 0x762820d6) - (uint)in_CF);
    *(int *)(param_1 + 0x4108dc58) = *(int *)(param_1 + 0x4108dc58) + 0x5f;
    pcVar23 = (char *)0x9cea6bd8;
    pcVar11 = unaff_EDI;
    while( true ) {
      pcVar22 = pcVar23 + -1;
      bVar32 = (byte)pcVar8;
      uStack_2 = (undefined2)((uint)pcVar8 >> 0x10);
      uVar13 = (undefined3)(CONCAT22(uStack_2,CONCAT11(bVar32 / 0x66,bVar32)) >> 8);
      uVar7 = (ushort)CONCAT31(uVar13,bVar32 % 0x66);
      if (uVar7 != 0) break;
      bStack_4 = 0x26;
      bStack_3 = bVar32 / 0x66;
      pcVar27 = pcVar11 + (uint)bVar36 * -8 + 4;
      *(uint *)pcVar11 = CONCAT31(uVar13,0x26);
      pcVar8 = (char *)(CONCAT31((int3)(CONCAT22(uStack_2,0x9026) >> 8),0x26) | 0x25);
      *(uint *)(unaff_EBX + -0xf) = *(uint *)(unaff_EBX + -0xf) | (uint)pcVar8;
      pcStack_8 = pcVar8;
      pcStack_c = param_1;
      pcStack_10 = param_2;
      pcStack_14 = unaff_EBX;
      puStack_18 = &bStack_4;
      puStack_1c = (undefined4 *)unaff_EBP;
      pcStack_20 = pcVar22;
      pcStack_24 = pcVar27;
      uVar9 = (int)pcVar27 - (int)unaff_EBX;
      bVar33 = (POPCOUNT(uVar9 & 0xff) & 1U) == 0;
      if (bVar33) {
        pcVar5 = (code *)swi(0x53);
        (*pcVar5)();
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      pcVar23 = (char *)((int)unaff_EBP + 0x7bc92438);
      bVar32 = (byte)param_1 & 0x1f;
      cVar3 = *pcVar23;
      *pcVar23 = *pcVar23 << bVar32;
      bVar4 = ((uint)param_1 & 0x1f) != 0;
      bVar31 = !bVar4 && pcVar27 < unaff_EBX || bVar4 && (char)(cVar3 << bVar32 - 1) < '\0';
      bVar37 = bVar32 != 1 && SBORROW4((int)pcVar27,(int)unaff_EBX) ||
               bVar32 == 1 && (bool)bVar31 != *pcVar23 < '\0';
      bVar4 = ((uint)param_1 & 0x1f) != 0;
      bVar35 = !bVar4 && (int)uVar9 < 0 || bVar4 && *pcVar23 < '\0';
      bVar34 = !bVar4 && uVar9 == 0 || bVar4 && *pcVar23 == '\0';
      bVar33 = !bVar4 && bVar33 || bVar4 && (POPCOUNT(*pcVar23) & 1U) == 0;
      param_2 = pcVar27;
code_r0x00514c19:
      pcVar23 = pcVar22;
      pcVar11 = pcVar27;
      if (!bVar34 && bVar37 == bVar35) {
        pbVar26 = unaff_EBP;
        if (bVar37) {
          piVar24 = (int *)CONCAT22((short)((uint)pcVar8 >> 0x10),CONCAT11(0xa3,(char)pcVar8));
          if (!bVar34 && bVar37 == bVar35) {
            *piVar24 = *piVar24 >> 1;
            return;
          }
          *(int *)(pcVar27 + -0x2a) = *(int *)(pcVar27 + -0x2a) - (int)param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        do {
          pcVar11 = param_1;
          pcVar23 = pcVar8;
          if (!bVar33) {
            pcVar22 = (char *)*(undefined6 *)(param_2 + 0x7b);
            goto code_r0x00514c8f;
          }
          puVar28 = (uint *)(pcVar23 + 0x5b25e658);
          uVar9 = *puVar28;
          uVar10 = *puVar28;
          *puVar28 = (uint)(&stack0x00000000 + uVar10 + bVar31);
          *pcVar23 = *pcVar23 + -0x42 +
                     (CARRY4(uVar9,(uint)&stack0x00000000) ||
                     CARRY4((uint)(&stack0x00000000 + uVar10),(uint)bVar31));
          param_2 = (char *)(*(int *)(pcVar11 + 0x12) * -0x32);
          pbVar19 = &bStack_4;
          unaff_EBP = &bStack_4;
          bStack_4 = (byte)pbVar26;
          bStack_3 = (byte)((uint)pbVar26 >> 8);
          uStack_2 = (undefined2)((uint)pbVar26 >> 0x10);
          cVar3 = '\f';
          do {
            pbVar26 = (byte *)((int)pbVar26 + -4);
            pbVar19 = (byte *)((int)pbVar19 + -4);
            *(undefined4 *)pbVar19 = *(undefined4 *)pbVar26;
            cVar3 = cVar3 + -1;
          } while ('\0' < cVar3);
          puStack_38 = &bStack_4;
          unaff_EBX = (char *)CONCAT31((int3)((uint)unaff_EBX >> 8),
                                       (char)unaff_EBX - acStack_4d[(int)param_2]);
          param_1 = (char *)CONCAT22((short)((uint)pcVar11 >> 0x10),CONCAT11(0x38,(char)pcVar11));
          bVar31 = false;
          bVar37 = false;
          pcVar8 = (char *)((uint)pcVar23 & 0xffffffc9);
          bVar35 = false;
          bVar34 = ((uint)pcVar23 & 0xc9) == 0;
          bVar33 = (POPCOUNT((byte)pcVar23 & 0xc9) & 1U) == 0;
          do {
            pcStack_1aa1 = pcVar23;
            if (bVar33) goto code_r0x00514c19;
            param_1 = param_1 + -1;
            pcVar11 = pcVar22;
            if (param_1 == (char *)0x0) {
              out(*(undefined4 *)pcVar22,(short)param_2);
              pcVar11 = pcVar39;
            }
            pcVar22 = pcVar11 + (uint)bVar36 * -2 + 1;
            out(*pcVar11,(short)param_2);
          } while (!bVar34);
          uVar9 = (uint)pcVar23 & 0x27f02f00;
          bVar33 = true;
          uVar10 = CONCAT31((int3)(uVar9 >> 8),in_AF * '\x06') & 0xffffff0f;
          pcVar11 = (char *)CONCAT22((short)(uVar10 >> 0x10),
                                     CONCAT11((char)(uVar9 >> 8) + in_AF,(char)uVar10));
          pcVar8 = pcVar11;
          pbVar26 = &bStack_4;
          bVar31 = in_AF;
          pcVar39 = pcVar27;
        } while (uVar9 == 0);
        pbVar26 = (byte *)((uint)&bStack_4 | (uint)pcVar11);
code_r0x00514c8f:
        uVar6 = *(undefined6 *)(pcVar11 + 0x1b5c9807);
        uVar30 = (undefined2)((uint6)uVar6 >> 0x20);
        out(0xec,pcVar11);
        pcVar8 = pcVar22 + 0x325f871d;
        cVar3 = *pcVar8;
        *pcVar8 = *pcVar8 - (char)param_2;
        piVar24 = (int *)(pcVar22 + (uint)bVar36 * -2 + 1);
        out(*pcVar22,(short)param_2);
        pcVar5 = (code *)swi(4);
        if (SBORROW1(cVar3,(char)param_2)) {
          (*pcVar5)();
          param_2 = extraout_EDX;
        }
        uVar21 = *(undefined4 *)pbVar26;
        bStack_4 = 0x1b;
        bStack_3 = 0x4d;
        uStack_2 = 0x51;
        uVar38 = (*(code *)(param_2 + 0x1d))();
        pcVar8 = pcVar27 + (uint)bVar36 * -2 + 1;
        bVar32 = (byte)uVar38;
        if (SBORROW1(bVar32,*pcVar27)) {
          uVar9 = CONCAT22((short)((uint6)uVar6 >> 0x10),
                           CONCAT11((char)((uint6)uVar6 >> 8) + *(char *)((ulonglong)uVar38 >> 0x20)
                                    ,(char)uVar6));
          pbVar19 = (byte *)((int)(pcVar8 + (uint)bVar36 * -2 + 1) + ((uint)bVar36 * -2 + 1) * 4);
          *(int *)(pcVar8 + (uint)bVar36 * -2 + 1) = *piVar24;
          pbVar26 = (byte *)(uVar9 - 0x2e);
          *pbVar26 = *pbVar26 << 1 | *pbVar26 >> 7;
          bVar31 = *pbVar26;
          cVar3 = *(char *)((int)uVar38 + -0x2a0e4518);
          *extraout_ECX = *extraout_ECX ^ uVar9;
          bStack_4 = (byte)in_SS;
          bStack_3 = (byte)((ushort)in_SS >> 8);
          bVar32 = 0xf < (byte)(bVar32 + cVar3 + ((bVar31 & 1) != 0));
          *pbVar19 = *pbVar19 - 1;
          ffree(in_ST7);
          pcStack_8 = (char *)0x514d44;
          uVar38 = func_0x11b54bd3();
          puVar16 = (undefined2 *)((ulonglong)uVar38 >> 0x20);
          puVar25 = (undefined1 *)((int)piVar24 + (uint)bVar36 * -8 + 3);
          uVar9 = (uint)bVar32;
          puVar12 = (undefined1 *)((int)piVar24 + (uint)bVar36 * -8 + 0x29f53f96);
          pbVar26 = puVar12 + uVar9;
          uVar15 = (undefined2)((ulonglong)uVar38 >> 0x20);
          if ((SCARRY4((int)puVar25,0x29f53f93) != SCARRY4((int)puVar12,uVar9)) != (int)pbVar26 < 0)
          {
            bVar36 = 9 < ((byte)uVar38 & 0xf) | in_AF;
            bVar32 = (byte)uVar38 + bVar36 * -6;
            *(uint *)(puVar16 + -0x3fbcdc63) =
                 *(uint *)(puVar16 + -0x3fbcdc63) ^
                 CONCAT31((int3)((ulonglong)uVar38 >> 8),
                          bVar32 + (0x9f < bVar32 |
                                   ((undefined1 *)0xd60ac06c < puVar25 ||
                                   CARRY4((uint)puVar12,uVar9)) | bVar36 * (bVar32 < 6)) * -0x60 +
                          (char)((ulonglong)uVar38 >> 8) * '~' + 'P') & 0xffff00ff;
            _DAT_a21d64f1 = in(uVar15);
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          pbVar1 = (byte *)((int)puVar16 + 0x1b);
          bVar32 = (byte)extraout_ECX_00 & 7;
          *pbVar1 = *pbVar1 << bVar32 | *pbVar1 >> 8 - bVar32;
          out(0xfe,(int)uVar38);
          if (*pbVar26 >= *pbVar19) {
            out(uVar15,(char)*(undefined4 *)(pbVar26 + (uint)bVar36 * -2 + 2));
            *(uint *)(pbVar26 + (uint)bVar36 * -8 + (uint)bVar36 * -2 + (int)&stack0x00000002 +
                     (*pbVar26 < *pbVar19)) =
                 *(uint *)(pbVar26 + (uint)bVar36 * -8 + (uint)bVar36 * -2 + (int)&stack0x00000002 +
                          (*pbVar26 < *pbVar19)) ^ (uint)&bStack_4;
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          if (extraout_ECX_00 == 0) {
            bVar32 = in(uVar15);
            pbVar19[(uint)bVar36 * -2 + 1] = bVar32;
            halt_baddata();
          }
        }
        else {
          bVar32 = 9 < (bVar32 & 0xf) | in_AF;
          pbVar26 = &bStack_4;
          bStack_4 = (byte)uVar21;
          bStack_3 = (byte)((uint)uVar21 >> 8);
          uStack_2 = (undefined2)((uint)uVar21 >> 0x10);
          pcVar5 = (code *)swi(0x43);
          uVar38 = (*pcVar5)();
          puVar16 = (undefined2 *)((ulonglong)uVar38 >> 0x20);
          puVar28 = (uint *)((int)pcVar8 * 0x200000);
          puVar17 = (undefined4 *)
                    *(undefined6 *)(extraout_ECX_01 + 0x14d442a4 + (int)pcVar8 * 0x800000);
          uVar9 = (uint)((int)pcVar8 * 0x100000 < 0);
          puVar12 = &stack0xa5aa28f2 + uVar9;
          iVar14 = *(int *)uVar38;
          puVar20 = (undefined1 *)(iVar14 + -4);
          *(undefined2 *)(iVar14 + -4) = uVar30;
          if (auStack_5efb < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28f2,uVar9)) {
            if ((int)((uint)puVar17 & (uint)puVar28) < 1) {
              bVar36 = 0;
              iVar14 = extraout_ECX_01;
              puVar18 = puVar17;
            }
            else {
              bVar33 = *(uint *)(extraout_ECX_01 + 0x19) < 0x6383ea3e;
              puVar20 = (undefined1 *)(iVar14 + -8);
              *(undefined4 *)(iVar14 + -8) = 0x514db1;
              uVar38 = func_0x8f4910b7();
              puVar16 = (undefined2 *)((ulonglong)uVar38 >> 0x20);
              if (bVar33) {
                puVar18 = (undefined4 *)(puVar20 + -4);
                *(undefined4 **)(puVar20 + -4) = puVar17;
                cVar3 = '\x1d';
                do {
                  puVar17 = puVar17 + -1;
                  puVar18 = puVar18 + -1;
                  *puVar18 = *puVar17;
                  cVar3 = cVar3 + -1;
                } while ('\0' < cVar3);
                *(undefined1 **)(puVar20 + -0x7c) = puVar20 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
                halt_baddata();
              }
              *piVar24 = (*piVar24 - (int)piVar24) - (uint)bVar33;
              bVar32 = 9 < ((byte)uVar38 & 0xf) | bVar32;
              uVar13 = (undefined3)((ulonglong)uVar38 >> 8);
              bVar31 = (byte)uVar38 + bVar32 * '\x06';
              puVar18 = (undefined4 *)
                        (puVar12 +
                        (-(uint)(CONCAT31(uVar13,bVar31 + (0x90 < (bVar31 & 0xf0) |
                                                          puVar17 < *(undefined4 **)
                                                                     (puVar16 + (int)puVar12 * 4) |
                                                          bVar32 * (0xf9 < bVar31)) * '`') <
                                0xb79e35cb) - *(int *)((int)piVar24 + 0xf)));
              puVar12 = (undefined1 *)CONCAT31(uVar13,uRamf0a18cd1);
              puVar29 = puVar28 + (uint)bVar36 * -2 + 1;
              puVar25 = (undefined1 *)*puVar28;
              iVar14 = extraout_ECX_02;
              do {
                iVar14 = iVar14 + -1;
                pbVar26 = (byte *)puVar17;
                puVar28 = puVar29;
              } while (iVar14 != 0 && puVar12 == puVar25);
            }
            *(undefined4 *)((int)pbVar26 + -0x3f3251b) = in_XMM1_Da;
            *(undefined4 *)((int)pbVar26 + -0x3f32517) = in_XMM1_Db;
            *(undefined4 *)((int)pbVar26 + -0x3f32513) = in_XMM1_Dc;
            *(undefined4 *)((int)pbVar26 + -0x3f3250f) = in_XMM1_Dd;
            *(uint *)(puVar20 + -4) = (uint)puVar12 | 0xee99e10d;
            *(int *)(puVar20 + -8) = iVar14;
            *(undefined2 **)(puVar20 + -0xc) = puVar16;
            *(undefined4 **)(puVar20 + -0x10) = puVar18;
            *(undefined1 **)(puVar20 + -0x14) = puVar20;
            *(int *)(puVar20 + -0x18) = (int)pbVar26 + 1;
            *(int **)(puVar20 + -0x1c) = piVar24;
            *(uint **)(puVar20 + -0x20) = puVar28;
            while (iVar14 != 0) {
              iVar14 = iVar14 + -1;
              uVar2 = in((short)puVar16);
              *(undefined1 *)puVar28 = uVar2;
              puVar28 = (uint *)((int)puVar28 + (uint)bVar36 * -2 + 1);
            }
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
        }
        *puVar16 = uVar30;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
    }
    in_EAX = in(0x5a);
    if ((POPCOUNT(uVar7 & 0xff) & 1U) != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    *pcVar11 = *pcVar22;
    puVar28 = (uint *)(param_2 + -0x15);
    in_CF = (*puVar28 & 1) != 0;
    *puVar28 = (int)*puVar28 >> 1;
    uVar9 = *puVar28;
    bStack_4 = (byte)param_2;
    uStack_2 = (undefined2)((uint)param_2 >> 0x10);
    unaff_EDI = pcVar11 + (uint)bVar36 * -2 + 1 + (uint)bVar36 * -2 + 1;
    pcVar11[(uint)bVar36 * -2 + 1] = pcVar23[(uint)bVar36 * -2];
    bVar36 = 1;
    if ((POPCOUNT(uVar9 & 0xff) & 1U) != 0) {
      DAT_28bdda20 = DAT_28bdda20 & bStack_4;
      pcRamf775c62f = param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    LOCK();
    cVar3 = *param_2;
    *param_2 = (char)((uint)param_1 >> 8);
    param_1 = (char *)CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(cVar3,(byte)param_1));
    UNLOCK();
    unaff_EBX = param_2 + -1;
    param_2 = (char *)CONCAT22(uStack_2,CONCAT11(0x6d,bStack_4));
  } while( true );
}


