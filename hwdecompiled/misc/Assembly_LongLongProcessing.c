/*
 * Function: Assembly_LongLongProcessing
 * Address: 00500c98
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00500cae) overlaps instruction at (ram,0x00500caa)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

ulonglong __fastcall Assembly_LongLongProcessing(int param_1,int *param_2)

{
  char *pcVar1;
  byte *pbVar2;
  undefined4 *puVar3;
  byte bVar4;
  uint uVar5;
  code *pcVar6;
  int iVar7;
  int iVar8;
  undefined1 uVar9;
  char cVar10;
  char cVar11;
  byte bVar12;
  int iVar13;
  uint in_EAX;
  uint uVar14;
  uint *puVar15;
  undefined4 uVar16;
  int *piVar18;
  undefined1 *puVar19;
  int iVar20;
  undefined4 uVar22;
  uint uVar23;
  int iVar24;
  int *unaff_EBX;
  int iVar25;
  undefined4 *unaff_EBP;
  int *unaff_ESI;
  undefined4 *unaff_EDI;
  bool bVar26;
  char in_AF;
  char in_ZF;
  bool in_SF;
  ulonglong uVar27;
  int *unaff_retaddr;
  int aiStack_2c [5];
  undefined1 auStack_18 [4];
  int aiStack_14 [4];
  undefined4 uStack_4;
  uint uVar17;
  short sVar21;
  
  if (in_SF) {
    in_EAX = uRamfc351dec;
    uVar14 = uRamfc351dec;
    if (param_1 == 0) goto code_r0x00500cc7;
  }
  else {
    unaff_ESI = (int *)((int)unaff_ESI + 1);
    do {
      param_2 = unaff_retaddr;
      param_1 = param_1 + *unaff_ESI;
      unaff_EBX = (int *)((uint)unaff_EBX ^ in_EAX | *(uint *)((uint)unaff_EBX ^ in_EAX));
      cVar10 = in(0xdf);
      uVar14 = (uint)_DAT_52b9402e >> 0x10;
      puVar3 = *(undefined4 **)(param_1 + 0x548df168 + (int)unaff_EBX * 4);
      unaff_ESI = puVar3 + 1;
      *unaff_EDI = *puVar3;
      unaff_EDI = (undefined4 *)0x4a799d9d;
      in_EAX = CONCAT31((int3)(CONCAT22((short)uVar14,
                                        CONCAT11(((int)unaff_EBX < 0) << 7 |
                                                 (unaff_EBX == (int *)0x0) << 6 | in_AF << 4 |
                                                 ((POPCOUNT((uint)unaff_EBX & 0xff) & 1U) == 0) << 2
                                                 ,cVar10)) >> 8),cVar10) & 0xffffffb1 | 0x200;
      unaff_retaddr = unaff_EBX;
    } while (-1 < cVar10);
    uStack_4 = 0x4a799d9d;
    param_1 = param_1 + -1;
    _DAT_4a799e12 = _DAT_4a799e12 + 0x2b232e28;
code_r0x00500cc7:
    puVar15 = (uint *)((int)unaff_EBX + 0x2f);
    puVar19 = (undefined1 *)*puVar15;
    *puVar15 = *puVar15 - (int)&stack0x00000000;
    uVar14 = in_EAX - 1;
    puVar15 = (uint *)CONCAT22((short)(uVar14 >> 0x10),
                               CONCAT11(((int)uVar14 < 0) << 7 | (uVar14 == 0) << 6 | in_AF << 4 |
                                        ((POPCOUNT(uVar14 & 0xff) & 1U) == 0) << 2 | 2U |
                                        puVar19 < &stack0x00000000,(char)uVar14));
    bVar12 = (byte)param_2;
    cVar10 = bVar12 * '\x02';
    param_2 = (int *)CONCAT31((int3)((uint)param_2 >> 8),cVar10);
    if (cVar10 != '\0' && SCARRY1(bVar12,bVar12) == cVar10 < '\0') {
      *puVar15 = *puVar15 ^ (uint)unaff_EDI;
      piVar18 = (int *)((int)unaff_EDI + -0x12f05e8d);
      *piVar18 = *piVar18 - (int)param_2;
      if (*piVar18 == 0) {
        unaff_EBP[-1] = param_2;
        uVar22 = unaff_EBP[5];
        uVar16 = unaff_EBP[7];
        if ((int)(unaff_ESI + 1) < 2) {
          *(undefined4 *)*unaff_EBP = uVar16;
          return CONCAT44(uVar22,uVar16) & 0xffffffffffffff00;
        }
        pcVar6 = (code *)swi(1);
        uVar27 = (*pcVar6)();
        return uVar27;
      }
      goto Assembly_ConditionalAdd;
    }
    unaff_ESI = (int *)0xa12bd2c3;
    uVar9 = in((short)param_2);
    uVar14 = (CONCAT31((int3)((uint)puVar15 >> 8),uVar9) + -0x66e3fc35) -
             (uint)CARRY1(bVar12,bVar12);
    in_ZF = uVar14 == 0;
    unaff_EBP = (undefined4 *)register0x00000010;
  }
  if (param_1 + -1 != 0 && in_ZF == '\0') {
    return CONCAT44(param_2,uVar14);
  }
  piVar18 = (int *)CONCAT31((int3)((uint)(param_1 + -1) >> 8),0x12);
  uStack_4 = 0x604407c3;
  bVar12 = (byte)uVar14;
  uVar17 = (uint)((uVar14 & 0x100) != 0);
  iVar25 = (int)unaff_EBP + (int)&uStack_4 + uVar17;
  iVar13 = CONCAT31((int3)(CONCAT22((short)uVar14 >> 0xf,CONCAT11(bVar12 / 0x83,bVar12)) >> 8),
                    bVar12 % 0x83) + -1;
  aiStack_14[3] = iVar13;
  iVar24 = (int)unaff_EBX +
           (uint)(CARRY4((uint)unaff_EBP,(uint)&uStack_4) ||
                 CARRY4((int)unaff_EBP + (int)&uStack_4,uVar17)) + unaff_ESI[0x17];
  *piVar18 = *piVar18 - (int)unaff_EDI;
  param_2 = (int *)(iVar13 >> 0x1f);
  cVar10 = (byte)iVar24 + 0x17;
  piVar18 = (int *)CONCAT31((int3)((uint)iVar24 >> 8),cVar10);
  sVar21 = (short)((uint)iVar13 >> 0x10);
  puVar19 = (undefined1 *)CONCAT22(sVar21,CONCAT11(0x1f,(char)iVar13));
  uVar17 = (uint)(0xe8 < (byte)iVar24);
  uVar5 = (int)&uStack_4 - (int)puVar19;
  bVar26 = &uStack_4 < puVar19 || uVar5 < uVar17;
  iVar8 = -uVar17;
  if (SBORROW4((int)&uStack_4,(int)puVar19) == SBORROW4(uVar5,uVar17)) {
    cVar11 = -bVar26;
    uVar17 = CONCAT31((int3)((uint)iVar13 >> 8),cVar11);
    iVar20 = CONCAT22(sVar21,CONCAT11(('\x1f' - *(char *)((int)unaff_EDI + 0x4035cd31)) - bVar26,
                                      (char)iVar13));
    *(uint *)(uVar5 + iVar8 + -4) = uVar17;
    out(0xe9,cVar11);
    pbVar2 = (byte *)((int)param_2 + 0xc23d133);
    *pbVar2 = *pbVar2 >> 1 | *pbVar2 << 7;
    iVar7 = *(int *)(uVar5 + iVar8 + -4);
    uVar23 = CONCAT22(sVar21 >> 0xf,CONCAT11((char)*piVar18,(char)(iVar13 >> 0x1f)));
    *piVar18 = *piVar18 << 1;
    iVar13 = CONCAT22((short)((uint)iVar24 >> 0x10),CONCAT11(0xde,cVar10));
    uVar17 = (uVar17 | 0x5f) & 0xffffffe9;
    *(uint *)(uVar5 + iVar8 + -4) = uVar17;
    *(int *)(uVar5 + iVar8 + -8) = iVar20;
    *(uint *)(uVar5 + iVar8 + -0xc) = uVar23;
    *(int *)(uVar5 + iVar8 + -0x10) = iVar13;
    *(uint *)(uVar5 + iVar8 + -0x14) = uVar5 + iVar8;
    *(int *)(uVar5 + iVar8 + -0x18) = iVar25;
    *(int **)(uVar5 + iVar8 + -0x1c) = unaff_ESI;
    *(int *)(uVar5 + iVar8 + -0x20) = iVar7 + 1;
    bVar26 = uVar23 < *(uint *)(iVar13 * 9 + 0x1b);
    bVar12 = (byte)uVar17 % 0x4a;
    if (iVar20 == 1) {
      bVar4 = bVar12 + 0x85;
      cVar10 = bVar4 + bVar26;
      return CONCAT44(uVar23,CONCAT22((short)(uVar17 >> 0x10),
                                      CONCAT11((cVar10 < '\0') << 7 | (cVar10 == '\0') << 6 |
                                               ((uVar14 & 0x1000) != 0) << 4 |
                                               ((POPCOUNT(cVar10) & 1U) == 0) << 2 | 2U |
                                               (0x7a < bVar12 || CARRY1(bVar4,bVar26)),cVar10)));
    }
    in(0xfc);
    *(int *)(uVar5 + iVar8 + -0x24) = iVar25 - *(int *)((uVar17 - 0x68) + iVar20);
    *(undefined4 *)(uVar5 + iVar8 + -0x28) = 0x500da1;
    func_0xa84243b1();
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
Assembly_ConditionalAdd:
  pcVar1 = (char *)((int)param_2 + -0x61);
  cVar10 = *pcVar1;
  cVar11 = (char)((uint)param_2 >> 8);
  *pcVar1 = *pcVar1 + cVar11;
  pcVar6 = (code *)swi(4);
  if (SCARRY1(cVar10,cVar11)) {
    (*pcVar6)();
  }
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


