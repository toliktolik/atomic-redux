/*
 * Function: String_Compare
 * Address: 00499030
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall String_Compare(undefined4 param_1)

{
  int iVar1;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  uint extraout_ECX_01;
  uint extraout_ECX_02;
  uint extraout_ECX_03;
  undefined2 extraout_DX;
  int extraout_EDX;
  byte *extraout_EDX_00;
  uint unaff_EBX;
  undefined4 *unaff_EBP;
  undefined4 *unaff_retaddr;
  byte local_2010 [8156];
  undefined4 uStack_34;
  int iStack_30;
  byte *pbStack_2c;
  int *piVar2;
  uint uVar3;
  
  System_LoadLibrary(param_1);
  uVar3 = DAT_00569f5c ^ (uint)unaff_retaddr;
  if (DAT_005a385d != '\0') {
    EnterCriticalSection((LPCRITICAL_SECTION)&DAT_005a4268);
    iVar1 = String_AllocateBuffer(extraout_ECX,extraout_DX);
    if (iVar1 == 0) {
      LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_005a4268);
      Exception_SetMessage((void *)(unaff_EBX ^ (uint)unaff_retaddr),unaff_EBP,unaff_retaddr);
      return;
    }
    Threading_WaitInfinite();
    Threading_TerminateThread(extraout_ECX_00,extraout_EDX);
    Threading_CreateThread();
    pbStack_2c = (byte *)0x4990c4;
    Exception_Release(local_2010,"Memory Leak Report for %s\n");
    pbStack_2c = local_2010;
    uStack_34 = 0x4990d1;
    iStack_30 = iVar1;
    String_ReallocateBuffer(extraout_ECX_01,pbStack_2c);
    OutputDebugStringA("\n");
    OutputDebugStringA((LPCSTR)local_2010);
    piVar2 = (int *)*DAT_005a4260;
    if (piVar2 != DAT_005a4260) {
      do {
        pbStack_2c = (byte *)0x49912d;
        Exception_Release(local_2010,"%s(%d) : Leak %d byte%s\n");
        OutputDebugStringA((LPCSTR)local_2010);
        String_ReallocateBuffer(extraout_ECX_02,local_2010);
        Animation_InitializeSystem((int *)&stack0xfffffff4);
      } while (piVar2 != DAT_005a4260);
    }
    Exception_Release(local_2010,"-----------------------------------------------------------\n");
    String_ReallocateBuffer((uint)local_2010,extraout_EDX_00);
    OutputDebugStringA((LPCSTR)local_2010);
    Exception_Release(local_2010,"Total Unfreed: %d bytes\n\n");
    OutputDebugStringA((LPCSTR)local_2010);
    String_ReallocateBuffer(extraout_ECX_03,local_2010);
    LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_005a4268);
    uVar3 = unaff_EBX;
  }
  Exception_SetMessage((void *)(uVar3 ^ (uint)unaff_retaddr),unaff_EBP,unaff_retaddr);
  return;
}


