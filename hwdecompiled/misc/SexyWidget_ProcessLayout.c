/*
 * Function: SexyWidget_ProcessLayout
 * Address: 00468b80
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int * __thiscall SexyWidget_ProcessLayout(void *this,int *param_1,int param_2)

{
  LPVOID *ppv;
  int *piVar1;
  HMODULE hModule;
  FARPROC pFVar2;
  int iVar3;
  int *local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x514490;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  SexyWidget_Constructor((undefined4 *)this);
  *(undefined ***)this = &PTR_UI_ProcessChildHitTest_005327dc;
  local_8 = 0;
  *(undefined4 *)((int)this + 0x9c) = 0;
  *(undefined4 *)((int)this + 0xa0) = 0;
  *(undefined4 *)((int)this + 0xa4) = 0;
  *(undefined4 *)((int)this + 0xa8) = 0;
  SexyWidget_SetMatrix((undefined4 *)((int)this + 0xac));
  *(undefined4 *)((int)this + 0x58) = 0;
  *(undefined4 *)((int)this + 0x8c) = 0;
  *(undefined4 *)((int)this + 0x90) = 0;
  *(undefined4 *)((int)this + 0x7c) = 0;
  *(undefined4 *)((int)this + 0x84) = 0;
  *(undefined1 *)((int)this + 0x94) = 1;
  ppv = (LPVOID *)((int)this + 0x74);
  *(bool *)((int)this + 0x88) = *(char *)(DAT_0056da10 + 0x454) == '\0';
  *(undefined1 *)((int)this + 0x89) = 1;
  *(undefined4 *)((int)this + 0xb8) = 0;
  *(int **)((int)this + 0x5c) = param_1;
  *(int *)((int)this + 0x60) = param_2;
  *(undefined4 *)((int)this + 0x6c) = 0;
  *(undefined4 *)((int)this + 0x80) = 0;
  *(undefined4 *)((int)this + 0x70) = 0;
  *ppv = (LPVOID)0x0;
  *(undefined4 *)((int)this + 0x78) = 0;
  *(undefined4 *)((int)this + 0x98) = 0;
  *(undefined4 *)((int)this + 100) = 0;
  CoInitialize((LPVOID)0x0);
  piVar1 = (int *)operator_new(0x10);
  if (piVar1 == (int *)0x0) {
    piVar1 = (int *)0x0;
  }
  else {
    *piVar1 = (int)&PTR_UI_UpdateChildTransform_005322ac;
    piVar1[1] = (int)&PTR_LAB_00532284;
    piVar1[2] = 0;
    piVar1[3] = 0;
  }
  *(int **)((int)this + 0x68) = piVar1;
  (**(code **)(*piVar1 + 4))(piVar1);
  *(void **)(*(int *)((int)this + 0x68) + 0xc) = this;
  *(int *)((int)this + 0x7c) = *(int *)((int)this + 0x7c) + 1;
  hModule = LoadLibraryA("flash.ocx");
  *(HMODULE *)((int)this + 100) = hModule;
  if (hModule == (HMODULE)0x0) {
    CoCreateInstance((IID *)&DAT_00532204,(LPUNKNOWN)0x0,1,(IID *)&DAT_0054ccdc,ppv);
  }
  else {
    param_1 = (int *)0x0;
    pFVar2 = GetProcAddress(hModule,"DllGetClassObject");
    (*pFVar2)(&DAT_00532204,&DAT_0054cd0c,&param_1);
    (**(code **)(*param_1 + 0xc))(param_1,0,&DAT_0054ccdc,ppv);
    (**(code **)(*param_1 + 8))(param_1);
  }
  local_14 = (int *)0x0;
  (**(code **)**(undefined4 **)((int)this + 0x68))
            (*(undefined4 **)((int)this + 0x68),&DAT_00532d00,&local_14);
                    /* WARNING: Load size is inaccurate */
  (**(code **)(**ppv + 0xc))(*ppv,local_14);
                    /* WARNING: Load size is inaccurate */
  (*(code *)***ppv)(*ppv,&DAT_0053223c,(int)this + 0x70);
  UI_Widget_ProcessTransform(&param_1,"Transparent");
  local_8 = CONCAT31(local_8._1_3_,1);
  if (param_1 == (int *)0x0) {
    iVar3 = 0;
  }
  else {
    iVar3 = *param_1;
  }
  (**(code **)(**(int **)((int)this + 0x70) + 0xa4))(*(int **)((int)this + 0x70),iVar3);
                    /* WARNING: Load size is inaccurate */
  (**(code **)(**ppv + 0x2c))(*ppv,0xfffffffb,0,local_14,0,0,0);
  (**(code **)(*local_14 + 8))(local_14);
                    /* WARNING: Load size is inaccurate */
  (*(code *)***ppv)(*ppv,&DAT_00532ce4,(int)this + 0x78);
  piVar1 = (int *)operator_new(0x14);
  if (piVar1 == (int *)0x0) {
    piVar1 = (int *)0x0;
  }
  else {
    *piVar1 = (int)&PTR_UI_RenderWidgetChildren_00532250;
    piVar1[2] = 0;
    piVar1[1] = 0;
    piVar1[3] = 0;
    piVar1[4] = 0;
  }
  *(int **)((int)this + 0x6c) = piVar1;
  (**(code **)(*piVar1 + 4))(piVar1);
  UI_Widget_HandleMouseRelease(*(void **)((int)this + 0x6c),(int *)this);
  if (param_1 != (int *)0x0) {
    UI_DrawWidgetContents(param_1);
  }
  ExceptionList = local_10;
  return (int *)this;
}


