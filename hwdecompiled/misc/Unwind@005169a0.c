/*
 * Function: Unwind@005169a0
 * Address: 005169a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005169ab) overlaps instruction at (ram,0x005169aa)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: This function may have set the stack pointer */

void __fastcall Unwind_005169a0(uint param_1,byte param_2)

{
  int *piVar1;
  uint *puVar2;
  char cVar3;
  code *pcVar4;
  byte bVar5;
  uint in_EAX;
  uint uVar6;
  uint uVar7;
  int iVar8;
  undefined4 uVar9;
  int *extraout_ECX;
  int unaff_EBX;
  undefined1 *puVar10;
  undefined4 *puVar11;
  undefined4 *unaff_EBP;
  int unaff_ESI;
  int unaff_EDI;
  bool bVar12;
  
  uVar6 = in_EAX & 0xffffff05;
  puVar2 = (uint *)(unaff_EDI + 1);
  bVar12 = (in_EAX & 0x100) != 0;
  uVar7 = uVar6;
  if ((!bVar12) && (uVar7 = param_1, !bVar12 && (in_EAX & 0x4000) == 0)) {
    *(byte *)(unaff_ESI + -0x68) = *(byte *)(unaff_ESI + -0x68) ^ param_2;
    *(byte *)(param_1 + 0xeb352234) = *(byte *)(param_1 + 0xeb352234) ^ (byte)uVar6;
    bVar5 = (char)param_1 - (byte)uVar6;
    bVar12 = 9 < (bVar5 & 0xf) || (in_EAX & 0x1000) != 0;
    bVar5 = bVar5 + bVar12 * '\x06';
    bVar5 = 0x90 < (bVar5 & 0xf0) | param_1 < uVar6 | bVar12 * (0xf9 < bVar5);
    puVar10 = (undefined1 *)0xdc94295a;
    pcVar4 = (code *)swi(0x4a);
    uVar9 = (*pcVar4)();
    *puVar2 = (*puVar2 - (int)puVar2) - (uint)bVar5;
    out(0x74,(char)uVar9);
    if ((POPCOUNT(*puVar2 & 0xff) & 1U) != 0) {
      puVar2 = (uint *)(CONCAT22((short)((uint)uVar9 >> 0x10),
                                 CONCAT11((char)((uint)uVar9 >> 8) - *(char *)(unaff_EBX + -0x59),
                                          (char)uVar9)) + -0xd5cefdd);
      *puVar2 = *puVar2 & (uint)puVar10;
      puVar11 = (undefined4 *)(puVar10 + -4);
      *(undefined4 **)(puVar10 + -4) = unaff_EBP;
      cVar3 = '\x04';
      do {
        unaff_EBP = unaff_EBP + -1;
        puVar11 = puVar11 + -1;
        *puVar11 = *unaff_EBP;
        cVar3 = cVar3 + -1;
      } while ('\0' < cVar3);
      *(undefined1 **)(puVar10 + -0x18) = puVar10 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    *extraout_ECX = *extraout_ECX + unaff_ESI + 1;
    return;
  }
  iVar8 = (int)(short)((ushort)CONCAT31((int3)(uVar7 >> 8),(char)uVar7 + -0x42 + bVar12) & 0x92bd);
  piVar1 = (int *)(iVar8 + 0x1f);
  *piVar1 = *piVar1 - iVar8;
  return;
}


