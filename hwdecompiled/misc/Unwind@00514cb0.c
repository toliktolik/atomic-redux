/*
 * Function: Unwind@00514cb0
 * Address: 00514cb0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dd2) overlaps instruction at (ram,0x00514dce)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00514d0a) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514cb0(int param_1,char *param_2)

{
  byte *pbVar1;
  char cVar2;
  undefined1 uVar3;
  undefined1 *puVar4;
  byte bVar5;
  code *pcVar6;
  undefined6 uVar7;
  byte bVar8;
  ushort uVar9;
  char *pcVar10;
  uint uVar11;
  uint uVar12;
  undefined4 in_EAX;
  char *pcVar13;
  undefined1 *puVar14;
  char *pcVar16;
  uint *extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar17;
  undefined2 uVar18;
  char *extraout_EDX;
  undefined2 *puVar19;
  char *unaff_EBX;
  undefined4 *puVar20;
  undefined1 *puVar21;
  undefined4 *puVar22;
  undefined4 uVar23;
  byte *unaff_EBP;
  char *pcVar24;
  char *pcVar25;
  int *piVar26;
  char *unaff_ESI;
  uint uVar27;
  byte *pbVar28;
  char *unaff_EDI;
  byte *pbVar29;
  uint *puVar30;
  uint *puVar31;
  undefined2 uVar32;
  undefined2 in_CS;
  undefined2 in_SS;
  undefined2 in_DS;
  byte bVar33;
  bool bVar34;
  byte bVar35;
  byte in_AF;
  bool bVar36;
  bool bVar37;
  bool bVar38;
  float10 in_ST0;
  unkbyte10 in_ST7;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar39;
  char *unaff_retaddr;
  undefined1 auStack_5f27 [17498];
  char *pcStack_1acd;
  char acStack_79 [21];
  undefined1 *puStack_64;
  char *pcStack_50;
  undefined4 *puStack_48;
  undefined1 *puStack_44;
  char *pcStack_40;
  char *pcStack_3c;
  char *pcStack_38;
  char *pcStack_34;
  byte bStack_30;
  byte bStack_2f;
  undefined2 uStack_2e;
  undefined1 auStack_2c [2];
  undefined2 uStack_2a;
  char *pcStack_24;
  char *pcStack_20;
  undefined4 *puStack_1c;
  undefined1 *puStack_18;
  char *pcStack_14;
  char *pcStack_10;
  char *pcStack_c;
  char *pcStack_8;
  undefined4 uStack_4;
  undefined3 uVar15;
  
  bVar8 = 0;
  bVar35 = 9 < ((byte)in_EAX & 0xf) | in_AF;
  pcVar13 = (char *)(CONCAT31((int3)((uint)in_EAX >> 8),*unaff_ESI) | 0xc64269c);
  bVar37 = (int)pcVar13 < 0;
  bVar36 = pcVar13 == (char *)0x0;
  bVar34 = (POPCOUNT((uint)pcVar13 & 0xff) & 1U) == 0;
  if (param_1 != 0) {
    piVar26 = (int *)((int)unaff_ESI * 4 + 0xca84539);
    *piVar26 = *piVar26 + (int)unaff_EBP;
    uStack_4 = 0x514ccb;
    func_0xa0ecf380();
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  pcVar16 = (char *)0x0;
  pcRam5e6f02e2 = pcVar13;
  while( true ) {
    pcVar25 = unaff_ESI + (uint)bVar8 * -2 + 1;
    out(*unaff_ESI,(short)param_2);
    uStack_4 = CONCAT22(uStack_4._2_2_,in_DS);
    pcStack_8 = pcVar13;
    pcStack_c = pcVar16;
    pcStack_10 = param_2;
    pcStack_14 = unaff_EBX;
    puStack_18 = (undefined1 *)&uStack_4;
    puStack_1c = (undefined4 *)unaff_EBP;
    pcStack_20 = pcVar25;
    pcStack_24 = unaff_EDI;
    if (!bVar36 && bVar37 == false) goto LAB_00514c12_5;
    auStack_2c[0] = SUB41(unaff_EDI,0);
    auStack_2c[1] = (undefined1)((uint)unaff_EDI >> 8);
    uStack_2a = (undefined2)((uint)unaff_EDI >> 0x10);
    uVar11 = (uint)pcVar13 & 0x27f02f34;
    bVar34 = (POPCOUNT((uint)pcVar13 & 0x34) & 1U) == 0;
    *(short *)((int)unaff_EBP + 0x12) = (short)ROUND(in_ST0);
    bVar33 = 9 < ((byte)uVar11 & 0xf) | bVar35;
    uVar12 = CONCAT31((int3)(uVar11 >> 8),(byte)uVar11 + bVar33 * '\x06') & 0xffffff0f;
    pcVar13 = (char *)CONCAT22((short)(uVar12 >> 0x10),
                               CONCAT11((char)(uVar11 >> 8) + bVar33,(char)uVar12));
    pcVar10 = pcVar13;
    puVar22 = (undefined4 *)unaff_EBP;
    bVar35 = bVar33;
    if (uVar11 != 0) break;
    while( true ) {
      pcVar13 = pcVar16;
      if (!bVar34) {
        pcVar25 = (char *)*(undefined6 *)(param_2 + 0x7b);
        goto code_r0x00514c8f;
      }
      puVar30 = (uint *)(pcVar10 + 0x5b25e658);
      uVar11 = *puVar30;
      uVar12 = *puVar30;
      *puVar30 = (uint)(auStack_2c + uVar12 + bVar33);
      *pcVar10 = *pcVar10 + -0x42 +
                 (CARRY4(uVar11,(uint)auStack_2c) ||
                 CARRY4((uint)(auStack_2c + uVar12),(uint)bVar33));
      param_2 = (char *)(*(int *)(pcVar13 + 0x12) * -0x32);
      pbVar28 = &bStack_30;
      unaff_EBP = &bStack_30;
      bStack_30 = (byte)puVar22;
      bStack_2f = (byte)((uint)puVar22 >> 8);
      uStack_2e = (undefined2)((uint)puVar22 >> 0x10);
      cVar2 = '\f';
      do {
        puVar22 = puVar22 + -1;
        pbVar28 = (byte *)((int)pbVar28 + -4);
        *(undefined4 *)pbVar28 = *puVar22;
        cVar2 = cVar2 + -1;
      } while ('\0' < cVar2);
      puStack_64 = &bStack_30;
      unaff_EBX = (char *)CONCAT31((int3)((uint)unaff_EBX >> 8),
                                   (char)unaff_EBX - acStack_79[(int)param_2]);
      pcVar16 = (char *)CONCAT22((short)((uint)pcVar13 >> 0x10),CONCAT11(0x38,(char)pcVar13));
      bVar33 = (byte)pcVar10 & 0xc9;
      pcVar13 = (char *)((uint)pcVar10 & 0xffffffc9);
      bVar37 = (char)bVar33 < '\0';
      bVar36 = ((uint)pcVar10 & 0xc9) == 0;
      bVar34 = (POPCOUNT(bVar33) & 1U) == 0;
      pcStack_1acd = pcVar10;
LAB_00514c12_5:
      bVar38 = false;
      bVar33 = false;
      if (!bVar34) break;
      while (pcVar10 = param_2, bVar36 || bVar38 != bVar37) {
        while( true ) {
          pcVar24 = pcVar25 + -1;
          bVar33 = (byte)pcVar13;
          uStack_2e = (undefined2)((uint)pcVar13 >> 0x10);
          uVar15 = (undefined3)(CONCAT22(uStack_2e,CONCAT11(bVar33 / 0x66,bVar33)) >> 8);
          uVar9 = (ushort)CONCAT31(uVar15,bVar33 % 0x66);
          if (uVar9 == 0) break;
          iVar17 = in(0x5a);
          if ((POPCOUNT(uVar9 & 0xff) & 1U) != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          pcVar13 = unaff_EDI + (uint)bVar8 * -2 + 1;
          *unaff_EDI = *pcVar24;
          puVar30 = (uint *)(pcVar10 + -0x15);
          uVar11 = *puVar30;
          *puVar30 = (int)*puVar30 >> 1;
          uVar12 = *puVar30;
          bStack_30 = (byte)pcVar10;
          uStack_2e = (undefined2)((uint)pcVar10 >> 0x10);
          unaff_EDI = pcVar13 + (uint)bVar8 * -2 + 1;
          *pcVar13 = pcVar25[(uint)bVar8 * -2];
          bVar8 = 1;
          if ((POPCOUNT(uVar12 & 0xff) & 1U) != 0) {
            DAT_28bdda20 = DAT_28bdda20 & bStack_30;
            pcRamf775c62f = pcVar16;
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          LOCK();
          cVar2 = *pcVar10;
          *pcVar10 = (char)((uint)pcVar16 >> 8);
          pcVar16 = (char *)CONCAT22((short)((uint)pcVar16 >> 0x10),CONCAT11(cVar2,(byte)pcVar16));
          UNLOCK();
          unaff_EBX = pcVar10 + -1;
          pcVar13 = (char *)((iVar17 + 0x762820d6) - (uint)((uVar11 & 1) != 0));
          pcVar25 = (char *)0x9cea6bd8;
          *(int *)(pcVar16 + 0x4108dc58) = *(int *)(pcVar16 + 0x4108dc58) + 0x5f;
          pcVar10 = (char *)CONCAT22(uStack_2e,CONCAT11(0x6d,bStack_30));
        }
        bStack_30 = 0x26;
        bStack_2f = bVar33 / 0x66;
        param_2 = unaff_EDI + (uint)bVar8 * -8 + 4;
        *(uint *)unaff_EDI = CONCAT31(uVar15,0x26);
        pcVar13 = (char *)(CONCAT31((int3)(CONCAT22(uStack_2e,0x9026) >> 8),0x26) | 0x25);
        *(uint *)(unaff_EBX + -0xf) = *(uint *)(unaff_EBX + -0xf) | (uint)pcVar13;
        pcStack_34 = pcVar13;
        pcStack_38 = pcVar16;
        pcStack_3c = pcVar10;
        pcStack_40 = unaff_EBX;
        puStack_44 = &bStack_30;
        puStack_48 = (undefined4 *)unaff_EBP;
        auStack_2c[0] = SUB41(pcVar24,0);
        auStack_2c[1] = (undefined1)((uint)pcVar24 >> 8);
        uStack_2a = (undefined2)((uint)pcVar24 >> 0x10);
        pcStack_50 = param_2;
        uVar11 = (int)param_2 - (int)unaff_EBX;
        bVar34 = (POPCOUNT(uVar11 & 0xff) & 1U) == 0;
        if (bVar34) {
          pcVar6 = (code *)swi(0x53);
          (*pcVar6)();
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        pcVar25 = (char *)((int)unaff_EBP + 0x7bc92438);
        bVar5 = (byte)pcVar16 & 0x1f;
        cVar2 = *pcVar25;
        *pcVar25 = *pcVar25 << bVar5;
        bVar36 = ((uint)pcVar16 & 0x1f) != 0;
        bVar33 = !bVar36 && param_2 < unaff_EBX || bVar36 && (char)(cVar2 << bVar5 - 1) < '\0';
        bVar38 = bVar5 != 1 && SBORROW4((int)param_2,(int)unaff_EBX) ||
                 bVar5 == 1 && (bool)bVar33 != *pcVar25 < '\0';
        bVar36 = ((uint)pcVar16 & 0x1f) != 0;
        bVar37 = !bVar36 && (int)uVar11 < 0 || bVar36 && *pcVar25 < '\0';
        bVar34 = !bVar36 && bVar34 || bVar36 && (POPCOUNT(*pcVar25) & 1U) == 0;
        bVar36 = !bVar36 && uVar11 == 0 || bVar36 && *pcVar25 == '\0';
        pcVar25 = pcVar24;
        unaff_EDI = param_2;
      }
      pcVar10 = pcVar13;
      puVar22 = (undefined4 *)unaff_EBP;
      if (bVar38) {
        piVar26 = (int *)CONCAT22((short)((uint)pcVar13 >> 0x10),CONCAT11(0xa3,(char)pcVar13));
        if (!bVar36 && bVar38 == bVar37) {
          *piVar26 = *piVar26 >> 1;
          return;
        }
        *(int *)(unaff_EDI + -0x2a) = *(int *)(unaff_EDI + -0x2a) - (int)pcVar16;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
    }
    pcVar16 = pcVar16 + -1;
    unaff_ESI = pcVar25;
    if (pcVar16 == (char *)0x0) {
      out(*(undefined4 *)pcVar25,(short)param_2);
      unaff_ESI = unaff_retaddr;
    }
  }
  puVar22 = (undefined4 *)((uint)unaff_EBP | (uint)pcVar13);
code_r0x00514c8f:
  uVar7 = *(undefined6 *)(pcVar13 + 0x1b5c9807);
  uVar32 = (undefined2)((uint6)uVar7 >> 0x20);
  out(0xec,pcVar13);
  pcVar13 = pcVar25 + 0x325f871d;
  cVar2 = *pcVar13;
  *pcVar13 = *pcVar13 - (char)param_2;
  piVar26 = (int *)(pcVar25 + (uint)bVar8 * -2 + 1);
  out(*pcVar25,(short)param_2);
  pcVar6 = (code *)swi(4);
  if (SBORROW1(cVar2,(char)param_2)) {
    (*pcVar6)();
    param_2 = extraout_EDX;
  }
  uVar23 = *puVar22;
  auStack_2c[0] = (undefined1)in_CS;
  auStack_2c[1] = (undefined1)((ushort)in_CS >> 8);
  bStack_30 = 0x1b;
  bStack_2f = 0x4d;
  uStack_2e = 0x51;
  uVar39 = (*(code *)(param_2 + 0x1d))();
  pcVar13 = unaff_EDI + (uint)bVar8 * -2 + 1;
  bVar33 = (byte)uVar39;
  if (SBORROW1(bVar33,*unaff_EDI)) {
    uVar11 = CONCAT22((short)((uint6)uVar7 >> 0x10),
                      CONCAT11((char)((uint6)uVar7 >> 8) + *(char *)((ulonglong)uVar39 >> 0x20),
                               (char)uVar7));
    pbVar29 = (byte *)((int)(pcVar13 + (uint)bVar8 * -2 + 1) + ((uint)bVar8 * -2 + 1) * 4);
    *(int *)(pcVar13 + (uint)bVar8 * -2 + 1) = *piVar26;
    pbVar28 = (byte *)(uVar11 - 0x2e);
    *pbVar28 = *pbVar28 << 1 | *pbVar28 >> 7;
    bVar5 = *pbVar28;
    cVar2 = *(char *)((int)uVar39 + -0x2a0e4518);
    *extraout_ECX = *extraout_ECX ^ uVar11;
    bStack_30 = (byte)in_SS;
    bStack_2f = (byte)((ushort)in_SS >> 8);
    bVar33 = 0xf < (byte)(bVar33 + cVar2 + ((bVar5 & 1) != 0));
    *pbVar29 = *pbVar29 - 1;
    ffree(in_ST7);
    pcStack_34 = (char *)0x514d44;
    uVar39 = func_0x11b54bd3();
    puVar19 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
    uVar27 = (int)piVar26 + (uint)bVar8 * -8 + 3;
    uVar11 = (uint)bVar33;
    uVar12 = (int)piVar26 + (uint)bVar8 * -8 + 0x29f53f96;
    pbVar28 = (byte *)(uVar12 + uVar11);
    uVar18 = (undefined2)((ulonglong)uVar39 >> 0x20);
    if ((SCARRY4(uVar27,0x29f53f93) != SCARRY4(uVar12,uVar11)) != (int)pbVar28 < 0) {
      bVar35 = 9 < ((byte)uVar39 & 0xf) | bVar35;
      bVar8 = (byte)uVar39 + bVar35 * -6;
      *(uint *)(puVar19 + -0x3fbcdc63) =
           *(uint *)(puVar19 + -0x3fbcdc63) ^
           CONCAT31((int3)((ulonglong)uVar39 >> 8),
                    bVar8 + (0x9f < bVar8 |
                            (0xd60ac06c < uVar27 || CARRY4(uVar12,uVar11)) | bVar35 * (bVar8 < 6)) *
                            -0x60 + (char)((ulonglong)uVar39 >> 8) * '~' + 'P') & 0xffff00ff;
      _DAT_a21d64f1 = in(uVar18);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    pbVar1 = (byte *)((int)puVar19 + 0x1b);
    bVar35 = (byte)extraout_ECX_00 & 7;
    *pbVar1 = *pbVar1 << bVar35 | *pbVar1 >> 8 - bVar35;
    out(0xfe,(int)uVar39);
    if (*pbVar28 >= *pbVar29) {
      out(uVar18,(char)*(undefined4 *)(pbVar28 + (uint)bVar8 * -2 + 2));
      *(uint *)(pbVar28 + (uint)bVar8 * -8 + (uint)bVar8 * -2 + (int)&uStack_2a +
               (*pbVar28 < *pbVar29)) =
           *(uint *)(pbVar28 + (uint)bVar8 * -8 + (uint)bVar8 * -2 + (int)&uStack_2a +
                    (*pbVar28 < *pbVar29)) ^ (uint)&bStack_30;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    if (extraout_ECX_00 == 0) {
      bVar35 = in(uVar18);
      pbVar29[(uint)bVar8 * -2 + 1] = bVar35;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
  }
  else {
    bVar35 = 9 < (bVar33 & 0xf) | bVar35;
    pbVar28 = &bStack_30;
    bStack_30 = (byte)uVar23;
    bStack_2f = (byte)((uint)uVar23 >> 8);
    uStack_2e = (undefined2)((uint)uVar23 >> 0x10);
    pcVar6 = (code *)swi(0x43);
    uVar39 = (*pcVar6)();
    puVar19 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
    puVar30 = (uint *)((int)pcVar13 * 0x200000);
    puVar22 = (undefined4 *)*(undefined6 *)(extraout_ECX_01 + 0x14d442a4 + (int)pcVar13 * 0x800000);
    uVar11 = (uint)((int)pcVar13 * 0x100000 < 0);
    puVar14 = &stack0xa5aa28c6 + uVar11;
    iVar17 = *(int *)uVar39;
    puVar21 = (undefined1 *)(iVar17 + -4);
    *(undefined2 *)(iVar17 + -4) = uVar32;
    if (auStack_5f27 < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28c6,uVar11)) {
      if ((int)((uint)puVar22 & (uint)puVar30) < 1) {
        bVar8 = 0;
        iVar17 = extraout_ECX_01;
        puVar20 = puVar22;
      }
      else {
        bVar34 = *(uint *)(extraout_ECX_01 + 0x19) < 0x6383ea3e;
        puVar21 = (undefined1 *)(iVar17 + -8);
        *(undefined4 *)(iVar17 + -8) = 0x514db1;
        uVar39 = func_0x8f4910b7();
        puVar19 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
        if (bVar34) {
          puVar20 = (undefined4 *)(puVar21 + -4);
          *(undefined4 **)(puVar21 + -4) = puVar22;
          cVar2 = '\x1d';
          do {
            puVar22 = puVar22 + -1;
            puVar20 = puVar20 + -1;
            *puVar20 = *puVar22;
            cVar2 = cVar2 + -1;
          } while ('\0' < cVar2);
          *(undefined1 **)(puVar21 + -0x7c) = puVar21 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        *piVar26 = (*piVar26 - (int)piVar26) - (uint)bVar34;
        bVar35 = 9 < ((byte)uVar39 & 0xf) | bVar35;
        uVar15 = (undefined3)((ulonglong)uVar39 >> 8);
        bVar33 = (byte)uVar39 + bVar35 * '\x06';
        puVar20 = (undefined4 *)
                  (puVar14 +
                  (-(uint)(CONCAT31(uVar15,bVar33 + (0x90 < (bVar33 & 0xf0) |
                                                    puVar22 < *(undefined4 **)
                                                               (puVar19 + (int)puVar14 * 4) |
                                                    bVar35 * (0xf9 < bVar33)) * '`') < 0xb79e35cb) -
                  *(int *)((int)piVar26 + 0xf)));
        puVar14 = (undefined1 *)CONCAT31(uVar15,uRamf0a18cd1);
        puVar31 = puVar30 + (uint)bVar8 * -2 + 1;
        puVar4 = (undefined1 *)*puVar30;
        iVar17 = extraout_ECX_02;
        do {
          iVar17 = iVar17 + -1;
          pbVar28 = (byte *)puVar22;
          puVar30 = puVar31;
        } while (iVar17 != 0 && puVar14 == puVar4);
      }
      *(undefined4 *)((int)pbVar28 + -0x3f3251b) = in_XMM1_Da;
      *(undefined4 *)((int)pbVar28 + -0x3f32517) = in_XMM1_Db;
      *(undefined4 *)((int)pbVar28 + -0x3f32513) = in_XMM1_Dc;
      *(undefined4 *)((int)pbVar28 + -0x3f3250f) = in_XMM1_Dd;
      *(uint *)(puVar21 + -4) = (uint)puVar14 | 0xee99e10d;
      *(int *)(puVar21 + -8) = iVar17;
      *(undefined2 **)(puVar21 + -0xc) = puVar19;
      *(undefined4 **)(puVar21 + -0x10) = puVar20;
      *(undefined1 **)(puVar21 + -0x14) = puVar21;
      *(int *)(puVar21 + -0x18) = (int)pbVar28 + 1;
      *(int **)(puVar21 + -0x1c) = piVar26;
      *(uint **)(puVar21 + -0x20) = puVar30;
      while (iVar17 != 0) {
        iVar17 = iVar17 + -1;
        uVar3 = in((short)puVar19);
        *(undefined1 *)puVar30 = uVar3;
        puVar30 = (uint *)((int)puVar30 + (uint)bVar8 * -2 + 1);
      }
      halt_baddata();
    }
  }
  *puVar19 = uVar32;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


