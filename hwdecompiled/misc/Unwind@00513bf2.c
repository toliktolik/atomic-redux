/*
 * Function: Unwind@00513bf2
 * Address: 00513bf2
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: This function may have set the stack pointer */

uint __fastcall Unwind_00513bf2(int param_1,int param_2)

{
  char cVar1;
  undefined6 uVar2;
  undefined1 *puVar3;
  byte bVar4;
  undefined4 *puVar5;
  char *in_EAX;
  int3 iVar7;
  uint uVar6;
  int iVar8;
  undefined2 extraout_DX;
  undefined4 unaff_EBX;
  int unaff_EBP;
  undefined1 *unaff_ESI;
  int unaff_EDI;
  undefined2 in_ES;
  undefined2 in_CS;
  char in_CF;
  bool bVar9;
  undefined1 *local_8;
  
  *in_EAX = (*in_EAX - (char)((uint)param_2 >> 8)) - in_CF;
  local_8 = &stack0xfffffffc;
  iVar8 = (param_1 - param_2) + -1;
  iVar7 = (int3)((uint)unaff_EBX >> 8);
  if (iVar8 == 0 || (param_2 ^ *(uint *)(in_EAX + 1)) != 0) {
    return CONCAT31(iVar7,*unaff_ESI) | 0x21173c00;
  }
  if (unaff_EBP + 1 == 0) {
    uVar6 = File_GetSize(iVar8,(short)(param_2 ^ *(uint *)(in_EAX + 1)));
    return uVar6;
  }
  bVar9 = 9 < ((byte)unaff_EBX & 0xf) || ((uint)&stack0xfffffffc & 0x10) != 0;
  bVar4 = (byte)unaff_EBX + bVar9 * -6;
  local_8 = (undefined1 *)CONCAT31(iVar7,bVar4 + (0x9f < bVar4 | bVar9 * (bVar4 < 6)) * -0x60);
  bVar9 = (POPCOUNT((uint)in_EAX & 0xff) & 1U) == 0;
  iVar8 = CONCAT22((short)((uint)in_EAX >> 0x10),CONCAT11(0xe1,(char)in_EAX));
  puVar5 = (undefined4 *)
           CONCAT22((short)((uint)unaff_EBX >> 0x10),
                    CONCAT11((char)((ushort)local_8 % (ushort)(byte)local_8[-9]),
                             (char)((ushort)local_8 / (ushort)(byte)local_8[-9])));
  if (&local_8 < (undefined1 *)(unaff_EDI + 1) || in_EAX == (char *)0x0) {
    out(0x97,&local_8);
    cVar1 = *(char *)((int)iVar7 >> 0x17);
    puVar3 = (undefined1 *)*puVar5;
    *(undefined2 *)puVar5 = in_CS;
    puVar5[-1] = &local_8;
    puVar5[-2] = CONCAT22(0xf970,CONCAT11('\x1e' - cVar1,0x52));
    puVar5[-3] = (char *)((int)iVar7 >> 0x17);
    puVar5[-4] = iVar8;
    puVar5[-5] = puVar5;
    puVar5[-6] = unaff_EBP + 1;
    puVar5[-7] = unaff_ESI;
    puVar5[-8] = puVar3;
    bVar4 = *(byte *)(iVar8 + ((uint)&local_8 & 0xff));
    *puVar3 = *unaff_ESI;
    *(undefined2 *)(puVar5 + -8) = in_ES;
    out(0xb9,(bVar4 | 0x78) + 0x94);
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  uVar2 = *(undefined6 *)((int)puVar5 + (int)unaff_ESI * 8 + 0x2d);
  puVar5[-1] = 0x513bd5;
  func_0x32504fb3();
  if (bVar9) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  out(*(undefined1 *)uVar2,extraout_DX);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


