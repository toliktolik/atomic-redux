/*
 * Function: Unwind@00510118
 * Address: 00510118
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00510130) overlaps instruction at (ram,0x0051012e)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00510118(undefined4 param_1,undefined4 param_2)

{
  char *pcVar1;
  code *pcVar2;
  undefined1 uVar3;
  int in_EAX;
  uint uVar4;
  char cVar7;
  undefined2 uVar6;
  char cVar8;
  undefined4 unaff_EBX;
  undefined4 *unaff_ESI;
  byte *unaff_EDI;
  undefined2 in_DS;
  float10 in_ST0;
  byte bVar5;
  
  cVar8 = (char)((uint)unaff_EBX >> 8);
  cVar7 = (char)((uint)param_2 >> 8) + cVar8;
  pcVar1 = (char *)segment(in_DS,(short)unaff_EBX + (short)unaff_EDI + -0x2e);
  *pcVar1 = *pcVar1 - (char)((uint)in_EAX >> 8);
  bVar5 = (byte)((uint)param_1 >> 8) | (byte)in_EAX;
  uVar4 = CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(bVar5,(char)param_1 + cVar8));
  out(0xc0,(byte)in_EAX);
  if ((POPCOUNT(bVar5) & 1U) == 0) {
    cVar7 = cVar7 + -1;
    *(uint *)((int)unaff_ESI + -0x4b) = uVar4;
    unaff_EDI[0x21] = unaff_EDI[0x21] << 1;
  }
  else {
    *(uint *)(in_EAX + 0x1b) = *(uint *)(in_EAX + 0x1b) & uVar4;
  }
  uVar6 = CONCAT11(cVar7,(char)param_2);
  _DAT_1c14f324 = (double)in_ST0;
  uVar3 = in(uVar6);
  out(uVar6,uVar3);
  out(*unaff_ESI,uVar6);
  pcVar2 = (code *)swi(0xd5);
  bVar5 = (*pcVar2)();
  *unaff_EDI = *unaff_EDI & bVar5;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


