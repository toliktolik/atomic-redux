/*
 * Function: Unwind@005101c2
 * Address: 005101c2
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005101b2) overlaps instruction at (ram,0x005101b0)
    */
/* WARNING: Removing unreachable block (ram,0x0051019d) */
/* WARNING: Type propagation algorithm not settling */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005101c2(int param_1,undefined4 param_2)

{
  char *pcVar1;
  byte bVar2;
  undefined4 *puVar3;
  char cVar4;
  byte bVar5;
  byte bVar6;
  undefined4 in_EAX;
  uint extraout_ECX;
  uint uVar7;
  undefined4 unaff_EBX;
  undefined4 *unaff_EBP;
  undefined1 *unaff_ESI;
  undefined1 **unaff_EDI;
  bool bVar8;
  byte in_AF;
  undefined1 in_OF;
  undefined1 *puStack_5533;
  undefined1 *puStack_552f;
  undefined4 *apuStack_552b [2];
  undefined4 uStack_5523;
  undefined4 uStack_551f;
  int iStack_551b;
  undefined4 uStack_5517;
  undefined4 *puStack_4c;
  undefined4 *apuStack_8 [2];
  
  _DAT_55197d09 = param_2;
  do {
    out(0xf9,(char)in_EAX);
    if ((bool)in_OF) {
      out(0x4f,in_EAX);
      _DAT_defb0afe = in_EAX;
      bVar5 = func_0xf854cea7();
      pcVar1 = unaff_ESI + 0x62;
      cVar4 = *pcVar1;
      *pcVar1 = *pcVar1 - (char)unaff_EBX;
      in_AF = 9 < (bVar5 & 0xf) | in_AF;
      uVar7 = extraout_ECX;
      if (SBORROW1(cVar4,(char)unaff_EBX) == *pcVar1 < '\0') goto code_r0x00510195;
      uVar7 = *(uint *)(unaff_ESI + -0x2f) ^ 0x76b699cf;
      if (-1 < (int)uVar7) {
        do {
                    /* WARNING: Do nothing block with infinite loop */
        } while( true );
      }
      swi(4);
      while( true ) {
        in((short)puStack_5533);
        bVar6 = in((short)puStack_5533);
        uVar7 = uVar7 - 1;
        bVar8 = 0x14 < *(byte *)unaff_EDI;
        bVar5 = *(byte *)unaff_EDI;
        bVar2 = *(byte *)unaff_EDI;
        *(byte *)unaff_EDI = bVar2 - 0x15;
        if (SCARRY1(bVar5,-0x15) == SCARRY1(bVar2 - 0x15,'\0')) break;
        puStack_5533[-0x51a95b73] = puStack_5533[-0x51a95b73] << ((byte)uVar7 & 0x1f);
code_r0x00510195:
        puStack_5533 = (undefined1 *)CONCAT31((int3)((uint)puStack_5533 >> 8),0xba);
      }
    }
    else {
      puStack_4c = apuStack_8 + 1;
      puVar3 = apuStack_8 + 1;
      apuStack_8[1] = unaff_EBP;
      cVar4 = '\x11';
      do {
        unaff_EBP = unaff_EBP + -1;
        puVar3 = puVar3 + -1;
        *puVar3 = *unaff_EBP;
        cVar4 = cVar4 + -1;
      } while ('\0' < cVar4);
      (&stack0x0000004a)[param_1] = (&stack0x0000004a)[param_1] & (byte)((uint)in_EAX >> 8);
      bVar8 = puStack_552f < *(undefined1 **)(param_1 + -0x32f4142f);
      unaff_EDI = (undefined1 **)(puStack_552f + -*(uint *)(param_1 + -0x32f4142f));
      puStack_552f = (undefined1 *)apuStack_552b;
      bVar6 = DAT_f2ea105e;
    }
    puStack_5533 = (undefined1 *)&puStack_552f;
    *(byte *)unaff_EDI = bVar6;
    in(0xd2);
    in_OF = SCARRY4((int)unaff_EDI + 1,*(int *)((int)unaff_EDI + 0x9048e4e)) !=
            SCARRY4((int)((byte *)((int)unaff_EDI + 1) + *(int *)((int)unaff_EDI + 0x9048e4e)),
                    (uint)bVar8);
    in_AF = 9 < ((byte)uStack_5517 & 0xf) | in_AF;
    uVar7 = CONCAT31((int3)((uint)uStack_5517 >> 8),(byte)uStack_5517 + in_AF * -6) & 0xffffff0f;
    in_EAX = CONCAT22((short)(uVar7 >> 0x10),
                      CONCAT11((char)((uint)uStack_5517 >> 8) - in_AF,(char)uVar7));
    param_1 = iStack_551b;
    _DAT_55197d09 = uStack_551f;
    unaff_EBX = uStack_5523;
    unaff_EBP = apuStack_552b[0];
    unaff_ESI = puStack_552f;
    unaff_EDI = &puStack_552f;
  } while( true );
}


