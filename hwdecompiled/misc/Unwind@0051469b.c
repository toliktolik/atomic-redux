/*
 * Function: Unwind@0051469b
 * Address: 0051469b
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005146f2) overlaps instruction at (ram,0x005146ef)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_0051469b(uint param_1,int param_2)

{
  int iVar1;
  undefined4 uVar2;
  char cVar3;
  uint uVar4;
  byte bVar6;
  int *piVar5;
  int unaff_EBX;
  undefined4 unaff_EBP;
  undefined4 *puVar7;
  int unaff_ESI;
  undefined1 *puVar8;
  undefined4 *puVar9;
  undefined2 in_ES;
  undefined2 in_DS;
  bool bVar10;
  float10 in_ST0;
  int unaff_retaddr;
  int in_stack_0000002a;
  undefined4 auStack_8 [2];
  
  piVar5 = (int *)CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 - *(char *)(param_2 + 0x12));
  iVar1 = *piVar5;
  *(char *)(unaff_EBX + 0x7e) = *(char *)(unaff_EBX + 0x7e) + '\x01';
  puVar9 = (undefined4 *)0x8b078a65;
  puVar8 = (undefined1 *)(unaff_ESI + 1);
  *(short *)((int)piVar5 + -0x32c15d07) = (short)ROUND(in_ST0 / (float10)iVar1);
  uVar4 = in(0xd7);
  uVar4 = uVar4 | 0xfe;
  bVar10 = CARRY4(_DAT_16e7ff7e,uVar4);
  _DAT_16e7ff7e = _DAT_16e7ff7e + uVar4;
  if (bVar10) {
    puVar7 = (undefined4 *)CONCAT22((short)((uint)unaff_EBP >> 0x10),in_DS);
    puVar9 = auStack_8 + 1;
    cVar3 = '\x02';
    do {
      puVar7 = puVar7 + -1;
      puVar9 = puVar9 + -1;
      *puVar9 = *puVar7;
      cVar3 = cVar3 + -1;
    } while ('\0' < cVar3);
    *(undefined1 *)(unaff_retaddr + -0x69ec1662) = 0;
    *(int *)(param_1 - 0x5c) = *(int *)(param_1 - 0x5c) << 1;
    bVar6 = (byte)((uint)param_2 >> 8);
    piVar5 = (int *)CONCAT31((uint3)(byte)(bVar6 << 1 | bVar6 >> 7),0x84);
    out(*puVar8,(short)piVar5);
    uVar4 = param_1;
    unaff_EBX = unaff_retaddr;
    puVar8 = (undefined1 *)(unaff_ESI + 2);
    puVar9 = (undefined4 *)(in_stack_0000002a + 0x53f1f231);
    unaff_retaddr = CONCAT22((short)((uint)unaff_retaddr >> 0x10),in_ES);
  }
  else {
    *(byte *)(unaff_ESI + -0x6391dba4) = *(byte *)(unaff_ESI + -0x6391dba4) ^ (byte)uVar4;
  }
  while (uVar4 != 0) {
    uVar4 = uVar4 - 1;
    uVar2 = in((short)piVar5);
    *puVar9 = uVar2;
    puVar9 = puVar9 + 1;
  }
  out(puVar8[4],(short)piVar5);
  if ((char)unaff_EBX < *(char *)(unaff_retaddr + 0x10b1e478)) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  out(0xc6,(char)*(undefined4 *)(puVar8 + 5));
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


