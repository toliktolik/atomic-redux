/*
 * Function: JPEG_DecodeBitSelection
 * Address: 004defb0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl JPEG_DecodeBitSelection(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  undefined4 local_20;
  undefined4 local_1c;
  uint local_18;
  int local_14;
  int local_10;
  ushort *local_c;
  int local_8;
  
  iVar5 = param_1;
  local_8 = 1 << ((byte)*(undefined4 *)(param_1 + 0x178) & 0x1f);
  iVar2 = *(int *)(param_1 + 0x198);
  if (((*(int *)(param_1 + 0xfc) != 0) && (*(int *)(iVar2 + 0x28) == 0)) &&
     (uVar3 = JPEG_ProcessNewScanlineSequential(), (char)uVar3 == '\0')) {
    return uVar3;
  }
  local_10 = param_1;
  local_20 = **(undefined4 **)(param_1 + 0x18);
  local_1c = (*(undefined4 **)(param_1 + 0x18))[1];
  piVar1 = (int *)(param_1 + 0x140);
  uVar3 = *(uint *)(iVar2 + 0xc);
  iVar6 = *(int *)(iVar2 + 0x10);
  param_1 = 0;
  if (0 < *piVar1) {
    do {
      local_c = *(ushort **)(param_2 + param_1 * 4);
      if ((iVar6 < 1) &&
         (uVar4 = Compression_FillBitBuffer(&local_20,uVar3,iVar6,1), uVar3 = local_18,
         iVar6 = local_14, (char)uVar4 == '\0')) {
        return uVar4 & 0xffffff00;
      }
      iVar6 = iVar6 + -1;
      if (((int)uVar3 >> ((byte)iVar6 & 0x1f) & 1U) != 0) {
        *local_c = *local_c | (ushort)local_8;
      }
      param_1 = param_1 + 1;
    } while (param_1 < *(int *)(iVar5 + 0x140));
  }
  **(undefined4 **)(iVar5 + 0x18) = local_20;
  *(undefined4 *)(*(int *)(iVar5 + 0x18) + 4) = local_1c;
  *(uint *)(iVar2 + 0xc) = uVar3;
  iVar5 = *(int *)(iVar2 + 0x28) + -1;
  *(int *)(iVar2 + 0x28) = iVar5;
  *(int *)(iVar2 + 0x10) = iVar6;
  return CONCAT31((int3)((uint)iVar5 >> 8),1);
}


