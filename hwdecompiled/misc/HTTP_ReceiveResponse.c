/*
 * Function: HTTP_ReceiveResponse
 * Address: 00451820
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall HTTP_ReceiveResponse(void *this,int param_1)

{
  char *pcVar1;
  undefined1 *puVar2;
  uint uVar3;
  char cVar4;
  int iVar5;
  undefined8 uVar6;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffc4;
  undefined4 *in_stack_ffffffc8;
  undefined1 local_30 [16];
  char *local_20;
  undefined1 *local_1c;
  char local_15;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x513168;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (param_1 != -1) {
    uVar3 = **(uint **)((int)this + 0x24);
    cVar4 = (char)param_1;
    if (uVar3 != 0) {
      iVar5 = **(int **)((int)this + 0x34);
      if (uVar3 < iVar5 + uVar3) {
        **(int **)((int)this + 0x34) = iVar5 + -1;
        pcVar1 = (char *)**(int **)((int)this + 0x24);
        **(int **)((int)this + 0x24) = (int)(pcVar1 + 1);
        *pcVar1 = cVar4;
        goto LAB_004519f5;
      }
    }
    if (*(int *)((int)this + 0x5c) != 0) {
      if (*(int *)((int)this + 0x3c) == 0) {
        ExceptionList = &local_10;
        Threading_DestroyMutex(0,(int)cVar4);
      }
      else {
        ExceptionList = &local_10;
        local_15 = cVar4;
        PowerUp_ProcessFlakCannon(*(void **)((int)this + 0x48),0,0xffffffff);
        in_stack_ffffffc8 = (undefined4 *)0x0;
        local_8 = 0;
        while( true ) {
          uVar6 = (**(code **)(**(int **)((int)this + 0x3c) + 0x14))
                            ((int)this + 0x50,&local_15,&local_14,&local_20,&stack0xffffffc8,
                             local_30,&local_1c);
          puVar2 = local_1c;
          uVar3 = (uint)((ulonglong)uVar6 >> 0x20);
          iVar5 = (int)uVar6;
          if (iVar5 < 0) break;
          if (1 < iVar5) {
            if (iVar5 == 3) {
              uVar6 = Threading_DestroyMutex((int)local_15,uVar3);
              uVar3 = (uint)((ulonglong)uVar6 >> 0x20);
              if ((int)uVar6 == -1) {
                String_Destructor((int)&stack0xffffffc4,uVar3);
              }
              else {
                String_Destructor((int)&stack0xffffffc4,uVar3);
              }
              goto LAB_004519f5;
            }
            break;
          }
          iVar5 = (int)local_1c - (int)&stack0xffffffc8;
          if (local_1c != &stack0xffffffc8) {
            uVar6 = String_CopyData((char)*(undefined4 *)((int)this + 0x5c));
            uVar3 = (uint)((ulonglong)uVar6 >> 0x20);
            if (iVar5 != (int)uVar6) break;
          }
          *(undefined1 *)((int)this + 0x4c) = 1;
          if (local_20 != &local_15) {
            String_Destructor((int)&stack0xffffffc4,(uint)in_stack_ffffffc8);
            goto LAB_004519f5;
          }
          if (puVar2 == &stack0xffffffc8) {
            Memory_AllocateSound((_String_base *)&stack0xffffffc4,8,(_String_base)0x0);
          }
        }
        String_Destructor((int)&stack0xffffffc4,uVar3);
      }
    }
  }
LAB_004519f5:
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffc4,in_stack_ffffffc8);
  return;
}


