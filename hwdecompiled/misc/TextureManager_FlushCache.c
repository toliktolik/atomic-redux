/*
 * Function: TextureManager_FlushCache
 * Address: 004bace0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl TextureManager_FlushCache(int *param_1,int *param_2,uint param_3)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  int *piVar5;
  int *piVar6;
  
  piVar6 = param_1;
  uVar3 = param_1[4];
  uVar1 = uVar3 + param_3 * 8;
  param_1[4] = uVar1;
  if (uVar1 < uVar3) {
    param_1[5] = param_1[5] + 1;
  }
  uVar1 = uVar3 >> 3 & 0x3f;
  param_1[5] = param_1[5] + (param_3 >> 0x1d);
  if (uVar1 != 0) {
    uVar3 = 0x40 - uVar1;
    piVar5 = (int *)(uVar1 + 0x18 + (int)param_1);
    if (param_3 < uVar3) {
      for (uVar1 = param_3 >> 2; uVar1 != 0; uVar1 = uVar1 - 1) {
        *piVar5 = *param_2;
        param_2 = param_2 + 1;
        piVar5 = piVar5 + 1;
      }
      for (uVar1 = param_3 & 3; uVar1 != 0; uVar1 = uVar1 - 1) {
        *(char *)piVar5 = (char)*param_2;
        param_2 = (int *)((int)param_2 + 1);
        piVar5 = (int *)((int)piVar5 + 1);
      }
      return;
    }
    piVar4 = param_2;
    for (uVar1 = uVar3 >> 2; uVar1 != 0; uVar1 = uVar1 - 1) {
      *piVar5 = *piVar4;
      piVar4 = piVar4 + 1;
      piVar5 = piVar5 + 1;
    }
    for (uVar1 = uVar3 & 3; uVar1 != 0; uVar1 = uVar1 - 1) {
      *(char *)piVar5 = (char)*piVar4;
      piVar4 = (int *)((int)piVar4 + 1);
      piVar5 = (int *)((int)piVar5 + 1);
    }
    Texture_Compare(param_1,param_1 + 6);
    param_2 = (int *)((int)param_2 + uVar3);
    param_3 = param_3 - uVar3;
  }
  if (0x3f < param_3) {
    param_1 = (int *)(param_3 >> 6);
    do {
      piVar5 = param_2;
      piVar4 = piVar6 + 6;
      for (iVar2 = 0x10; iVar2 != 0; iVar2 = iVar2 + -1) {
        *piVar4 = *piVar5;
        piVar5 = piVar5 + 1;
        piVar4 = piVar4 + 1;
      }
      Texture_Compare(piVar6,piVar6 + 6);
      param_2 = param_2 + 0x10;
      param_3 = param_3 - 0x40;
      param_1 = (int *)((int)param_1 + -1);
    } while (param_1 != (int *)0x0);
  }
  piVar6 = piVar6 + 6;
  for (uVar1 = param_3 >> 2; uVar1 != 0; uVar1 = uVar1 - 1) {
    *piVar6 = *param_2;
    param_2 = param_2 + 1;
    piVar6 = piVar6 + 1;
  }
  for (uVar1 = param_3 & 3; uVar1 != 0; uVar1 = uVar1 - 1) {
    *(char *)piVar6 = (char)*param_2;
    param_2 = (int *)((int)param_2 + 1);
    piVar6 = (int *)((int)piVar6 + 1);
  }
  return;
}


