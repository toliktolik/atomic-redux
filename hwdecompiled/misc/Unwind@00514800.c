/*
 * Function: Unwind@00514800
 * Address: 00514800
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514862) overlaps instruction at (ram,0x00514860)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void Unwind_00514800(undefined6 *param_1)

{
  char *pcVar1;
  int iVar2;
  char cVar3;
  char cVar4;
  code *pcVar5;
  undefined6 uVar6;
  int iVar7;
  undefined6 *puVar8;
  byte bVar9;
  byte *pbVar10;
  int *piVar11;
  undefined4 uVar12;
  undefined1 uVar13;
  int extraout_ECX;
  int iVar14;
  undefined2 uVar15;
  int *piVar16;
  int *unaff_EBX;
  undefined4 *puVar17;
  undefined4 *unaff_EBP;
  int unaff_ESI;
  uint uVar18;
  int *unaff_EDI;
  undefined2 in_ES;
  float10 extraout_ST0;
  int unaff_retaddr;
  
  uVar18 = unaff_ESI - 1;
  do {
    pcVar5 = (code *)swi(0xc6);
    pbVar10 = (byte *)(*pcVar5)();
    puVar8 = param_1;
    unaff_EBX[-0x751e259] = unaff_EBX[-0x751e259] + (int)unaff_EDI;
    *unaff_EDI = *unaff_EDI - (int)unaff_EDI;
    iVar2 = *unaff_EDI;
    piVar16 = (int *)0x64073b28;
    puVar17 = (undefined4 *)&stack0x00003ab2;
    cVar4 = '\x02';
    do {
      unaff_EBP = unaff_EBP + -1;
      puVar17 = puVar17 + -1;
      *puVar17 = *unaff_EBP;
      cVar4 = cVar4 + -1;
    } while ('\0' < cVar4);
    iVar14 = extraout_ECX + -1;
    if (iVar14 != 0 && iVar2 == 0) {
      if (iVar2 != 0) {
        *pbVar10 = *pbVar10 | (byte)pbVar10;
        _DAT_797a2b07 = (float)extraout_ST0;
        return;
      }
      goto code_r0x00514854;
    }
    iVar7 = -*(int *)((int)unaff_EDI + 0x6f);
    piVar16 = (int *)(iVar7 + 0x64073b28);
    piVar11 = (int *)(CONCAT22((short)((uint)pbVar10 >> 0x10),
                               CONCAT11((char)((uint)pbVar10 >> 8) + *(char *)(extraout_ECX + 0x49),
                                        (byte)pbVar10)) ^ 0x8d7a3ad8);
    iVar2 = *piVar16;
    *piVar16 = *piVar16 << 1;
    cVar4 = *(char *)piVar16;
    cVar3 = *(char *)piVar16 + (char)piVar16;
    *(char *)piVar16 = cVar3 + (iVar2 < 0);
    uVar15 = (undefined2)((uint)iVar14 >> 0x10);
    uVar13 = (undefined1)iVar14;
    iVar14 = CONCAT22(uVar15,CONCAT11(*(undefined1 *)(extraout_ECX + -0x35 + (int)piVar11),uVar13));
    if (SCARRY1(cVar4,(char)piVar16) != SCARRY1(cVar3,iVar2 < 0)) {
      unaff_EBX = (int *)CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(0x44,(char)unaff_EBX));
      goto code_r0x00514854;
    }
    unaff_EBP = (undefined4 *)((uint)&stack0x00003ab2 | (uint)piVar16);
  } while ((int)unaff_EBP < 1);
  *(uint *)(iVar7 + 0x64073ae8) = *(uint *)(iVar7 + 0x64073ae8) | uVar18;
  bVar9 = *(byte *)(iVar7 + 0x64073b8a);
  *(byte *)(iVar7 + 0x64073b8a) = bVar9 >> 3 | bVar9 << 6;
  iVar14 = CONCAT22(uVar15,CONCAT11(0x7e,uVar13));
  *(uint *)((int)unaff_EBP + 0x2e3132a2) = *(uint *)((int)unaff_EBP + 0x2e3132a2) | (uint)piVar11;
  uVar18 = uVar18 - *(int *)((int)unaff_EBP + -0x69);
  unaff_EBX = piVar11;
code_r0x00514854:
  unaff_EDI[0x10] = unaff_retaddr;
  *(uint *)((int)param_1 * 3) = *(uint *)((int)param_1 * 3) & 0x62a44b7;
  *(int *)((int)unaff_EBX + 0x65fb5f85) = *(int *)((int)unaff_EBX + 0x65fb5f85) + -0x51e2abe0;
  param_1 = (undefined6 *)CONCAT22(param_1._2_2_,in_ES);
  pcVar1 = (char *)((int)puVar8 + -0x726de8af);
  *pcVar1 = *pcVar1 + (char)((uint)piVar16 >> 8);
  uVar6 = *puVar8;
  uVar12 = (undefined4)uVar6;
  bVar9 = (byte)uVar6;
  if ((char)bVar9 <= (char)*(byte *)((int)unaff_EDI + 1)) {
    *(int *)((int)piVar16 + -0x31e939b1) =
         (*(int *)((int)piVar16 + -0x31e939b1) - uVar18) -
         (uint)(bVar9 < *(byte *)((int)unaff_EDI + 1));
    pcVar5 = (code *)swi(1);
    (*pcVar5)();
    return;
  }
  LOCK();
  iVar2 = *unaff_EBX;
  *unaff_EBX = (int)&param_1;
  UNLOCK();
  out((short)piVar16,uVar12);
  *(int *)(iVar2 + -4) = (int)unaff_EDI + 2;
  *(int *)(iVar2 + -8) = iVar14;
  _DAT_56bd081d = uVar12;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


