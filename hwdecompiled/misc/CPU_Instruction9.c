/*
 * Function: CPU_Instruction9
 * Address: 004c7800
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


byte * __cdecl CPU_Instruction9(byte *param_1,int param_2)

{
  byte bVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  byte *pbVar4;
  byte *pbVar5;
  
  if (((param_1 == (byte *)0x0) || (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0)) ||
     (*(int *)param_1 == 0)) {
switchD_004c7847_default:
    return (byte *)0xfffffffe;
  }
  uVar2 = **(undefined4 **)(param_1 + 0x1c);
  pbVar5 = (byte *)0xfffffffb;
  pbVar4 = (byte *)((param_2 != 4) - 1 & 0xfffffffb);
  do {
    switch(uVar2) {
    case 0:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      *(uint *)(*(int *)(param_1 + 0x1c) + 4) = (uint)**(byte **)param_1;
      puVar3 = *(undefined4 **)(param_1 + 0x1c);
      uVar2 = puVar3[1];
      *(int *)param_1 = *(int *)param_1 + 1;
      if (((byte)uVar2 & 0xf) == 8) {
        if (((uint)puVar3[1] >> 4) + 8 <= (uint)puVar3[4]) {
          *puVar3 = 1;
          pbVar5 = pbVar4;
          goto switchD_004c7847_caseD_1;
        }
        *puVar3 = 0xd;
        *(char **)(param_1 + 0x18) = "invalid window size";
      }
      else {
        *puVar3 = 0xd;
        *(char **)(param_1 + 0x18) = "unknown compression method";
      }
      goto LAB_004c7a71;
    case 1:
switchD_004c7847_caseD_1:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      puVar3 = *(undefined4 **)(param_1 + 0x1c);
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      bVar1 = **(byte **)param_1;
      *(byte **)param_1 = *(byte **)param_1 + 1;
      if ((puVar3[1] * 0x100 + (uint)bVar1) % 0x1f == 0) {
        if ((bVar1 & 0x20) != 0) {
          **(undefined4 **)(param_1 + 0x1c) = 2;
          pbVar5 = pbVar4;
          goto switchD_004c7847_caseD_2;
        }
        *puVar3 = 7;
        pbVar5 = pbVar4;
      }
      else {
        *puVar3 = 0xd;
        *(char **)(param_1 + 0x18) = "incorrect header check";
        *(undefined4 *)(*(int *)(param_1 + 0x1c) + 4) = 5;
        pbVar5 = pbVar4;
      }
      break;
    case 2:
switchD_004c7847_caseD_2:
      if (*(int *)(param_1 + 4) != 0) {
        *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
        *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
        *(uint *)(*(int *)(param_1 + 0x1c) + 8) = (uint)**(byte **)param_1 << 0x18;
        *(int *)param_1 = *(int *)param_1 + 1;
        **(undefined4 **)(param_1 + 0x1c) = 3;
        pbVar5 = pbVar4;
switchD_004c7847_caseD_3:
        if (*(int *)(param_1 + 4) != 0) {
          *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
          *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
          *(uint *)(*(int *)(param_1 + 0x1c) + 8) =
               *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1 * 0x10000;
          *(int *)param_1 = *(int *)param_1 + 1;
          **(undefined4 **)(param_1 + 0x1c) = 4;
          pbVar5 = pbVar4;
switchD_004c7847_caseD_4:
          if (*(int *)(param_1 + 4) != 0) {
            *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
            *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
            *(uint *)(*(int *)(param_1 + 0x1c) + 8) =
                 *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1 * 0x100;
            *(int *)param_1 = *(int *)param_1 + 1;
            **(undefined4 **)(param_1 + 0x1c) = 5;
            pbVar5 = pbVar4;
switchD_004c7847_caseD_5:
            if (*(int *)(param_1 + 4) != 0) {
              *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
              *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
              *(int *)(*(int *)(param_1 + 0x1c) + 8) =
                   *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1;
              *(int *)param_1 = *(int *)param_1 + 1;
              *(undefined4 *)(param_1 + 0x30) = (*(undefined4 **)(param_1 + 0x1c))[2];
              **(undefined4 **)(param_1 + 0x1c) = 6;
              return (byte *)0x2;
            }
          }
        }
      }
      return pbVar5;
    case 3:
      goto switchD_004c7847_caseD_3;
    case 4:
      goto switchD_004c7847_caseD_4;
    case 5:
      goto switchD_004c7847_caseD_5;
    case 6:
      **(undefined4 **)(param_1 + 0x1c) = 0xd;
      *(char **)(param_1 + 0x18) = "need dictionary";
      *(undefined4 *)(*(int *)(param_1 + 0x1c) + 4) = 0;
      return (byte *)0xfffffffe;
    case 7:
      pbVar5 = (byte *)GIF_CreateImageObject
                                 (*(uint **)(*(int *)(param_1 + 0x1c) + 0x14),param_1,pbVar5);
      if (pbVar5 == (byte *)0xfffffffd) {
        **(undefined4 **)(param_1 + 0x1c) = 0xd;
        *(undefined4 *)(*(int *)(param_1 + 0x1c) + 4) = 0;
        pbVar5 = (byte *)0xfffffffd;
      }
      else {
        if (pbVar5 == (byte *)0x0) {
          pbVar5 = pbVar4;
        }
        if (pbVar5 != (byte *)0x1) {
          return pbVar5;
        }
        GIF_AllocateImageData
                  (*(int **)(*(int *)(param_1 + 0x1c) + 0x14),(int)param_1,
                   (int *)(*(int *)(param_1 + 0x1c) + 4));
        puVar3 = *(undefined4 **)(param_1 + 0x1c);
        if (puVar3[3] == 0) {
          *puVar3 = 8;
          pbVar5 = pbVar4;
          goto switchD_004c7847_caseD_8;
        }
        *puVar3 = 0xc;
        pbVar5 = pbVar4;
      }
      break;
    case 8:
switchD_004c7847_caseD_8:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      *(uint *)(*(int *)(param_1 + 0x1c) + 8) = (uint)**(byte **)param_1 << 0x18;
      *(int *)param_1 = *(int *)param_1 + 1;
      **(undefined4 **)(param_1 + 0x1c) = 9;
      pbVar5 = pbVar4;
    case 9:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      *(uint *)(*(int *)(param_1 + 0x1c) + 8) =
           *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1 * 0x10000;
      *(int *)param_1 = *(int *)param_1 + 1;
      **(undefined4 **)(param_1 + 0x1c) = 10;
      pbVar5 = pbVar4;
switchD_004c7847_caseD_a:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      *(uint *)(*(int *)(param_1 + 0x1c) + 8) =
           *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1 * 0x100;
      *(int *)param_1 = *(int *)param_1 + 1;
      **(undefined4 **)(param_1 + 0x1c) = 0xb;
      pbVar5 = pbVar4;
switchD_004c7847_caseD_b:
      if (*(int *)(param_1 + 4) == 0) {
        return pbVar5;
      }
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + -1;
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + 1;
      *(int *)(*(int *)(param_1 + 0x1c) + 8) =
           *(int *)(*(int *)(param_1 + 0x1c) + 8) + (uint)**(byte **)param_1;
      *(int *)param_1 = *(int *)param_1 + 1;
      puVar3 = *(undefined4 **)(param_1 + 0x1c);
      if (puVar3[1] == puVar3[2]) {
        **(undefined4 **)(param_1 + 0x1c) = 0xc;
switchD_004c7847_caseD_c:
        return (byte *)0x1;
      }
      *puVar3 = 0xd;
      *(char **)(param_1 + 0x18) = "incorrect data check";
LAB_004c7a71:
      *(undefined4 *)(*(int *)(param_1 + 0x1c) + 4) = 5;
      pbVar5 = pbVar4;
      break;
    case 10:
      goto switchD_004c7847_caseD_a;
    case 0xb:
      goto switchD_004c7847_caseD_b;
    case 0xc:
      goto switchD_004c7847_caseD_c;
    case 0xd:
      return (byte *)0xfffffffd;
    default:
      goto switchD_004c7847_default;
    }
    uVar2 = **(undefined4 **)(param_1 + 0x1c);
  } while( true );
}


