/*
 * Function: Unwind@00517546
 * Address: 00517546
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005175d3) overlaps instruction at (ram,0x005175d2)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00517546(undefined1 param_1,int param_2)

{
  uint uVar1;
  byte bVar2;
  longlong lVar4;
  code *pcVar5;
  uint *puVar6;
  byte bVar7;
  undefined1 uVar8;
  int in_EAX;
  uint uVar9;
  undefined3 uVar11;
  short *psVar10;
  float *pfVar12;
  float *pfVar13;
  float *unaff_EBX;
  int unaff_EBP;
  uint *puVar14;
  uint *unaff_EDI;
  uint *puVar15;
  uint *puVar16;
  undefined2 in_ES;
  undefined2 in_SS;
  byte in_AF;
  float10 in_ST0;
  uint *unaff_retaddr;
  byte *in_stack_00000010;
  int in_stack_00000014;
  int in_stack_00000018;
  byte bVar3;
  
  *unaff_EDI = *unaff_EDI ^ 0xe55cd5c0;
  lVar4 = (longlong)*(int *)(in_EAX + 0x15) * -0x78;
  puVar14 = (uint *)lVar4;
  uVar9 = in_EAX - 2;
  pfVar13 = unaff_EBX;
  while (-1 < (int)uVar9) {
    pfVar13 = (float *)CONCAT22((short)((uint)pfVar13 >> 0x10),in_SS);
    *(undefined1 *)(in_EAX + 0x51) = param_1;
  }
  if ((int)puVar14 != lVar4 || uVar9 == 0) {
    *(int *)(unaff_EBP + 0x5ccf2a79) = *(int *)(unaff_EBP + 0x5ccf2a79) + param_2;
    pcVar5 = (code *)swi(3);
    (*pcVar5)();
    return;
  }
  if (uVar9 == 0 || in_EAX + -1 < 1) {
    puVar16 = unaff_EDI + 1;
    uVar1 = in((short)param_2);
    *unaff_EDI = uVar1;
    while (puVar6 = puVar16, puVar16 = unaff_retaddr, (char)uVar9 == -0xc) {
      while( true ) {
        puVar15 = puVar6;
        psVar10 = (short *)(uVar9 & 0xe7e350ea);
        pfVar12 = (float *)((int)pfVar13 + -1);
        if (pfVar12 == (float *)0x0 || psVar10 == (short *)0x0) break;
        in_ST0 = (float10)*psVar10 / in_ST0;
        unaff_EBP = unaff_EBP + -1;
        uVar11 = (undefined3)((uint)psVar10 >> 8);
        if (unaff_EBP < 0) {
          bVar2 = 9 < ((byte)psVar10 & 0xf) | in_AF;
          bVar7 = (byte)psVar10 + bVar2 * '\x06';
          bVar3 = 0x90 < (bVar7 & 0xf0) | bVar2 * (0xf9 < bVar7);
          bVar7 = bVar7 + bVar3 * '`';
          bVar2 = 9 < (bVar7 & 0xf) | bVar2;
          bVar7 = bVar7 + bVar2 * -6;
          *unaff_EBX = (float)in_ST0;
          *puVar14 = *puVar14 & (uint)pfVar13;
          lVar4 = (longlong)
                  ((ulonglong)
                   CONCAT31(uVar11,bVar7 + (0x9f < bVar7 | bVar3 | bVar2 * (bVar7 < 6)) * -0x60) |
                  0x9d17eea800000000) % (longlong)*(int *)((int)puVar15 + 2);
          *(int *)((int)puVar14 + -0x7b) =
               *(int *)((int)puVar14 + -0x7b) +
               CONCAT22((short)((ulonglong)lVar4 >> 0x10),CONCAT11(0x6e,(char)lVar4));
          do {
                    /* WARNING: Do nothing block with infinite loop */
          } while( true );
        }
        uVar8 = in(0x31);
        uVar9 = CONCAT31(uVar11,uVar8);
        *(byte *)unaff_EBX = *(byte *)unaff_EBX ^ (byte)pfVar12;
        pfVar13 = pfVar12;
        puVar6 = (uint *)((int)puVar15 + -1);
        puVar16 = puVar15;
      }
      unaff_retaddr = (uint *)&stack0x00000020;
      puVar14 = (uint *)&DAT_0096ab75;
      in((short)in_stack_00000014);
      *(undefined2 *)(in_stack_00000018 + -0x10) = in_ES;
      unaff_EBX = (float *)CONCAT22((short)((uint)in_stack_00000010 >> 0x10),
                                    CONCAT11((byte)((uint)in_stack_00000010 >> 8) ^
                                             *in_stack_00000010,(char)in_stack_00000010));
      uVar9 = in(0x6e);
      _DAT_0096ab75 = _DAT_0096ab75 << 1;
      pfVar13 = (float *)*unaff_EBX;
      uVar9 = uVar9 & 0xffffff0b;
      LOCK();
      *(char *)(uVar9 + in_stack_00000014 * 4) = (char)((uint)in_stack_00000014 >> 8);
      UNLOCK();
      unaff_EBP = 0x6d987e2f;
    }
    if (-0xc < (char)uVar9) {
      return;
    }
  }
  do {
                    /* WARNING: Do nothing block with infinite loop */
  } while( true );
}


