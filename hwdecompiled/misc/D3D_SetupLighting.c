/*
 * Function: D3D_SetupLighting
 * Address: 004860e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall D3D_SetupLighting(void *this,undefined4 param_1,int *param_2)

{
  char cVar1;
  LSTATUS LVar2;
  
  if (*(char *)((int)DAT_0056da10 + 0x491) != '\0') goto LAB_0048616d;
  *(undefined1 *)((int)this + 0x81) = 0;
  cVar1 = D3D_LockVertexBuffer(this,param_1,param_2);
  if (cVar1 == '\0') {
    if (*(char *)((int)this + 0x80) == '\0') goto LAB_00486155;
    if (*(char *)((int)this + 0x81) == '\0') {
      LVar2 = RegQueryValueExA(*(HKEY *)((int)this + 0x1c),"FailureReason",(LPDWORD)0x0,(LPDWORD)0x0
                               ,(LPBYTE)0x0,(LPDWORD)0x0);
      *(bool *)((int)this + 0x82) = LVar2 != 0;
      *(undefined1 *)((int)this + 0x81) = 1;
      goto LAB_00486155;
    }
LAB_0048615f:
    DirectX_EnumerateDisplayModes((int)this);
  }
  else {
    D3D_ConfigureDepthBuffer((int)this);
LAB_00486155:
    if (*(char *)((int)this + 0x81) != '\0') goto LAB_0048615f;
  }
  System_CleanupInterfaces((int)this);
LAB_0048616d:
  STL_Map_UpperBound(DAT_0056da10,(_String_base *)((int)this + 0x40));
  STL_Map_UpperBound(DAT_0056da10,(_String_base *)((int)this + 0x5c));
  Iterator_MoveToPrevious(DAT_0056da10,(char *)((int)this + 0x82));
  return;
}


