/*
 * Function: Image_DownsamplePixelData
 * Address: 004d94c0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Image_DownsamplePixelData(int param_1,int param_2,int *param_3,int param_4)

{
  undefined1 *puVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  byte *pbVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  int local_20;
  int local_10;
  int *local_8;
  
  iVar2 = *(int *)(param_2 + 0x1c) * 8;
  iVar3 = *(int *)(param_1 + 0xd8) / *(int *)(param_2 + 8);
  iVar4 = *(int *)(param_1 + 0xdc) / *(int *)(param_2 + 0xc);
  Image_FillPixelBoundaries
            ((void *)(iVar3 * iVar2),(int)param_3,*(int *)(param_1 + 0xdc),*(int *)(param_1 + 0x1c))
  ;
  local_20 = 0;
  if (0 < *(int *)(param_2 + 0xc)) {
    local_8 = param_3;
    do {
      param_1 = 0;
      puVar1 = *(undefined1 **)(param_4 + local_20 * 4);
      for (iVar6 = iVar2; iVar6 != 0; iVar6 = iVar6 + -1) {
        iVar9 = 0;
        piVar8 = local_8;
        local_10 = iVar4;
        if (0 < iVar4) {
          do {
            pbVar5 = (byte *)(*piVar8 + param_1);
            iVar7 = iVar3;
            if (0 < iVar3) {
              do {
                iVar9 = iVar9 + (uint)*pbVar5;
                pbVar5 = pbVar5 + 1;
                iVar7 = iVar7 + -1;
              } while (iVar7 != 0);
            }
            local_10 = local_10 + -1;
            piVar8 = piVar8 + 1;
          } while (local_10 != 0);
        }
        *puVar1 = (char)(((iVar4 * iVar3) / 2 + iVar9) / (iVar4 * iVar3));
        param_1 = param_1 + iVar3;
        puVar1 = puVar1 + 1;
      }
      local_8 = local_8 + iVar4;
      local_20 = local_20 + 1;
    } while (local_20 < *(int *)(param_2 + 0xc));
  }
  return;
}


