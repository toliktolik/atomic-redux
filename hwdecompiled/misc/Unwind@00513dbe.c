/*
 * Function: Unwind@00513dbe
 * Address: 00513dbe
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00513e3f) overlaps instruction at (ram,0x00513e3d)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint __fastcall Unwind_00513dbe(int param_1,int param_2)

{
  int *piVar1;
  char *pcVar2;
  byte *pbVar3;
  uint *puVar4;
  undefined1 uVar5;
  ulonglong uVar6;
  ulonglong uVar7;
  code *pcVar8;
  byte bVar9;
  char cVar10;
  byte bVar11;
  byte bVar14;
  int in_EAX;
  uint uVar12;
  uint uVar13;
  int iVar15;
  undefined2 uVar16;
  int iVar17;
  byte bVar20;
  uint unaff_EBX;
  uint uVar18;
  int iVar19;
  int unaff_EBP;
  int unaff_ESI;
  uint *puVar21;
  int unaff_EDI;
  float10 in_ST0;
  uint unaff_retaddr;
  
  iVar15 = param_1 + 1;
  bVar9 = (byte)in_EAX ^ *(byte *)(in_EAX + 0x59);
  puVar21 = (uint *)(unaff_ESI + -1);
  if ((POPCOUNT((uint)puVar21 & 0xff) & 1U) == 0) {
    *(uint *)(unaff_EDI + 1) = CONCAT31((int3)((uint)in_EAX >> 8),bVar9);
    pcVar8 = (code *)swi(1);
    uVar12 = (*pcVar8)();
    return uVar12;
  }
  out((short)param_2,bVar9);
  iVar19 = unaff_EDI + 2;
  uVar12 = in(0x34);
  uVar12 = uVar12 ^ 0x911b10f5;
  cVar10 = (char)uVar12;
  if (iVar15 == 0) {
    uVar13 = 0x2a;
    iVar17 = param_2 + 1;
    if (SCARRY4(param_2,1) == iVar17 < 0) {
      iVar15 = _DAT_00000000 + iVar17;
      if (SCARRY4(_DAT_00000000,iVar17) == SCARRY4(iVar15,0)) {
        uVar12 = (uint)(byte)(cVar10 + *(char *)(param_1 + 0x54fd65a1 + (int)puVar21));
      }
      DAT_00000000 = (char)iVar15;
      _DAT_00000000 = CONCAT31((int3)((uint)iVar15 >> 8),DAT_00000000 - (char)unaff_EBX);
      return CONCAT31((int3)(unaff_retaddr >> 8),(char)unaff_retaddr + -0x3b + (0x61 < (byte)uVar12)
                     );
    }
    if (iVar17 != 0) {
      return uVar12;
    }
  }
  else {
    uVar13 = CONCAT31((int3)(CONCAT22((short)(uVar12 >> 0x10),
                                      CONCAT11((char)(uVar12 >> 8) + (char)((uint)param_2 >> 8) &
                                               (byte)(unaff_EBX >> 8),cVar10)) >> 8),cVar10) ^ 100;
    uVar18 = unaff_EBX | *(uint *)(unaff_EBP + 0x16);
    iVar19 = uVar18 - 1;
    in_ST0 = in_ST0 * (float10)*(float *)(uVar18 + 0x9cf2f395);
    if (iVar19 == 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    pcVar2 = (char *)(unaff_EBP + 0x79 + (int)puVar21 * 2);
    *pcVar2 = *pcVar2 + -0x1d;
    uVar6 = CONCAT44(param_2,0x2a) / (ulonglong)*(uint *)(uVar18 - 0x37);
    uVar12 = (uint)uVar6;
    uVar7 = CONCAT44(param_2,0x2a) % (ulonglong)*(uint *)(uVar18 - 0x37);
    pbVar3 = (undefined1 *)(uVar13 + 1) + uVar13 + 0x11;
    bVar9 = *pbVar3;
    bVar20 = (byte)((uint)iVar19 >> 8);
    *pbVar3 = *pbVar3 + bVar20;
    bVar14 = (byte)(uVar6 >> 8);
    bVar11 = (byte)iVar19 + bVar14;
    unaff_EBX = CONCAT31((int3)((uint)iVar19 >> 8),bVar11 + CARRY1(bVar9,bVar20));
    uVar16 = CONCAT11(0x83,(char)uVar7);
    iVar17 = CONCAT22((short)(uVar7 >> 0x10),uVar16);
    puVar4 = (uint *)(uVar13 + 0x51 + iVar17);
    uVar18 = *puVar4;
    *puVar4 = (uint)(CONCAT14(CARRY1((byte)iVar19,bVar14) || CARRY1(bVar11,CARRY1(bVar9,bVar20)),
                              uVar18) >> 0x15) | uVar18 << 0xc;
    iVar19 = uVar13 + 2;
    uVar5 = in(uVar16);
    *(undefined1 *)(uVar13 + 1) = uVar5;
    uVar13 = unaff_retaddr;
  }
  *puVar21 = *puVar21 ^ uVar13;
  bVar11 = (byte)uVar12;
  out(0xfb,bVar11);
  pbVar3 = (byte *)(param_1 + 0x15014b36 + iVar15 * 2);
  bVar14 = (byte)((uint)(iVar17 + -1) >> 8);
  *pbVar3 = *pbVar3 & bVar14;
  bVar9 = *pbVar3;
  *(short *)(uVar12 + 0xdd8decdd) = (short)ROUND(in_ST0);
  if ((char)bVar9 < '\0') {
    *(int *)(iVar19 + -0x6c) = *(int *)(iVar19 + -0x6c) + 1;
    puVar21 = (uint *)(CONCAT22((short)((uint)iVar15 >> 0x10),CONCAT11(0x61,(char)iVar15)) +
                      0x5ac8ad85);
    *puVar21 = *puVar21 >> 1 | (uint)((*puVar21 & 1) != 0) << 0x1f;
    uVar12 = CONCAT31((int3)(CONCAT22((short)(uVar12 >> 0x10),CONCAT11(bVar11 / 0x92,bVar11)) >> 8),
                      *(undefined1 *)(unaff_EBX + bVar11 % 0x92));
    pbVar3 = (byte *)(unaff_EBX - 0x24);
    bVar9 = *pbVar3;
    *pbVar3 = *pbVar3 - bVar14;
    piVar1 = (int *)(uVar12 + 0x35);
    *piVar1 = (*piVar1 + 0x77) - (uint)(bVar9 < bVar14);
    return uVar12;
  }
  out(0xf7,uVar12);
  in((short)(iVar17 + -1) + -1);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


