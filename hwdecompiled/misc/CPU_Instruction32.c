/*
 * Function: CPU_Instruction32
 * Address: 004c8930
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl CPU_Instruction32(uint *param_1)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  void *pvVar5;
  undefined4 *puVar6;
  uint uVar7;
  
  param_1[0x1e] = 0;
  PixelFormat_ConvertYUVToRGB(param_1);
  if (*(char *)((int)param_1 + 0x123) == '\0') {
    uVar7 = param_1[0x32];
    uVar3 = param_1[0x36];
    param_1[0x34] = param_1[0x33];
    param_1[0x38] = uVar7;
  }
  else {
    if ((param_1[0x1c] & 2) == 0) {
      param_1[0x34] = ((param_1[0x33] - DAT_00567d9c) + -1 + DAT_00567db8) / DAT_00567db8;
    }
    else {
      param_1[0x34] = param_1[0x33];
    }
    uVar7 = param_1[0x32];
    uVar3 = ((uVar7 - (&DAT_00567d64)[(byte)param_1[0x49]]) + -1 +
            (&DAT_00567d80)[(byte)param_1[0x49]]) / (uint)(&DAT_00567d80)[(byte)param_1[0x49]];
    param_1[0x38] = uVar3;
    uVar3 = *(byte *)((int)param_1 + 0x129) * uVar3 + 7 >> 3;
  }
  uVar2 = param_1[0x1c];
  uVar4 = (uint)*(byte *)((int)param_1 + 0x129);
  param_1[0x37] = uVar3 + 1;
  if (((uVar2 & 4) != 0) && (*(byte *)((int)param_1 + 0x127) < 8)) {
    uVar4 = 8;
  }
  if ((uVar2 & 0x1000) != 0) {
    cVar1 = *(char *)((int)param_1 + 0x126);
    if (cVar1 == '\x03') {
      uVar4 = (uint)(*(short *)((int)param_1 + 0x11a) != 0) * 8 + 0x18;
    }
    else if (cVar1 == '\0') {
      if (uVar4 < 8) {
        uVar4 = 8;
      }
      if (*(short *)((int)param_1 + 0x11a) != 0) {
        uVar4 = uVar4 * 2;
      }
    }
    else if ((cVar1 == '\x02') && (*(short *)((int)param_1 + 0x11a) != 0)) {
      uVar4 = (uVar4 * 4) / 3;
    }
  }
  if ((uVar2 & 0x8000) != 0) {
    cVar1 = *(char *)((int)param_1 + 0x126);
    if (cVar1 == '\x03') {
      uVar4 = 0x20;
    }
    else if (cVar1 == '\0') {
      uVar4 = ((8 < uVar4) - 1 & 0xfffffff0) + 0x20;
    }
    else if (cVar1 == '\x02') {
      uVar4 = ((0x20 < uVar4) - 1 & 0xffffffe0) + 0x40;
    }
  }
  if ((uVar2 & 0x4000) != 0) {
    if ((((*(short *)((int)param_1 + 0x11a) == 0) || ((uVar2 & 0x1000) == 0)) &&
        ((uVar2 & 0x8000) == 0)) && (*(char *)((int)param_1 + 0x126) != '\x04')) {
      uVar4 = ((8 < (int)uVar4) - 1 & 0xffffffe8) + 0x30;
    }
    else {
      uVar4 = ((0x10 < (int)uVar4) - 1 & 0xffffffe0) + 0x40;
    }
  }
  if (((uVar2 & 0x100000) != 0) &&
     (uVar3 = (uint)*(byte *)((int)param_1 + 0x65) * (uint)(byte)param_1[0x19],
     uVar3 - uVar4 != 0 && (int)uVar4 <= (int)uVar3)) {
    uVar4 = uVar3;
  }
  pvVar5 = CPU_Instruction12((int)param_1,
                             ((uVar7 + 7 & 0xfffffff8) * uVar4 + 7 >> 3) + 1 +
                             ((int)(uVar4 + 7) >> 3));
  param_1[0x3b] = (uint)pvVar5;
  puVar6 = (undefined4 *)CPU_Instruction12((int)param_1,param_1[0x36] + 1);
  param_1[0x3a] = (uint)puVar6;
  CPU_Instruction15(param_1,puVar6,0,param_1[0x36] + 1);
  param_1[0x1b] = param_1[0x1b] | 0x40;
  return;
}


