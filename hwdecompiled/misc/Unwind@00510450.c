/*
 * Function: Unwind@00510450
 * Address: 00510450
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00510526) overlaps instruction at (ram,0x00510522)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00510426) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00510450(undefined4 param_1)

{
  ushort *puVar1;
  byte *pbVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  char cVar6;
  byte bVar7;
  short sVar8;
  uint *puVar9;
  byte bVar12;
  undefined4 *puVar10;
  int iVar11;
  undefined2 uVar13;
  int *piVar14;
  int *piVar15;
  int *unaff_EBX;
  int *piVar16;
  undefined4 *puVar17;
  undefined1 *puVar19;
  int *piVar20;
  undefined4 *unaff_EBP;
  int *unaff_ESI;
  uint *puVar21;
  uint *unaff_EDI;
  uint *puVar22;
  undefined2 in_SS;
  undefined2 in_DS;
  int in_GS_OFFSET;
  bool bVar23;
  bool bVar24;
  bool bVar25;
  uint uVar26;
  undefined4 *puVar18;
  
  bVar25 = false;
  puVar9 = (uint *)(*(int *)((int)unaff_EDI + -0x79) * -0x4c + -1);
  piVar15 = (int *)((int)&stack0x00000000 << 0xb);
LAB_00510459:
  do {
    piVar16 = piVar15;
    iVar11 = *piVar16;
    piVar20 = piVar16 + 1;
    bVar7 = in(0xce);
    uVar26 = in((short)iVar11);
    *unaff_EDI = uVar26;
    piVar15 = (int *)(iVar11 + 0x55);
    iVar11 = *piVar15;
    *piVar15 = *piVar15 << 2;
    sVar8 = (short)CONCAT31((int3)((uint)unaff_ESI >> 8),bVar7);
    piVar14 = (int *)((((int)sVar8 >> 0x1f) - *(int *)((int)unaff_EBP + -0x466956a3)) -
                     (uint)(iVar11 << 1 < 0));
    unaff_EDI = unaff_EDI + (uint)bVar25 * -2 + (uint)bVar25 * -2 + 2;
    bVar12 = (byte)((uint)unaff_ESI >> 8) & *(byte *)(sVar8 + -0xf7beeb3);
    unaff_ESI = (int *)CONCAT22(sVar8 >> 0xf,CONCAT11(bVar12,bVar7));
    out((short)piVar14,bVar7);
    param_1 = CONCAT22((short)((uint)param_1 >> 0x10),0x5842);
    piVar15 = piVar16 + 1;
  } while (bVar12 == 0);
  out(0xb3,bVar7);
  if (-1 < (char)bVar12) {
    *unaff_EBX = (*unaff_EBX - (int)unaff_EBP) -
                 (uint)((byte)((uint)piVar14 >> 8) < (byte)*unaff_EDI);
    *piVar16 = param_1;
    _DAT_cec2aa6c = _DAT_cec2aa6c + (int)piVar16;
    piVar16[-1] = (int)unaff_EDI;
    in(0xc1);
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  piVar15 = (int *)CONCAT31((int3)((uint)unaff_ESI >> 8),
                            *(undefined1 *)((int)unaff_EBX + (uint)bVar7));
  bVar25 = false;
  unaff_EBX = (int *)CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(0x42,(char)unaff_EBX));
  pbVar2 = (byte *)(piVar15 + (int)unaff_EBX + -0xfec95f1);
  bVar23 = *pbVar2 < 0x16;
  *pbVar2 = *pbVar2 - 0x16;
  bVar24 = *pbVar2 == 0;
  unaff_ESI = piVar14;
  puVar10 = unaff_EBP;
  do {
    *(uint **)((int)piVar20 + -4) = puVar9;
    param_1 = 0x9e15f829;
    if (bVar24) {
      *unaff_ESI = ((uint)piVar15 | 0x3c) + 0x1287968b;
      LOCK();
      _DAT_3f1a0f61 = puVar10;
      UNLOCK();
      iVar11 = ((uint)piVar15 | 0x3c) + 0x39d70f67;
      _DAT_227ee5bd =
           CONCAT22((short)((uint)iVar11 >> 0x10),
                    (short)(char)iVar11 * (short)*(char *)((int)unaff_ESI + 1)) & 0xd63ff295;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    LOCK();
    UNLOCK();
    piVar14 = unaff_ESI;
    puVar19 = _DAT_9e15f7ba;
    puVar21 = puVar9;
    _DAT_9e15f7ba = (undefined1 *)((int)piVar20 + -4);
    while( true ) {
      piVar14 = (int *)((int)piVar14 + (-(uint)bVar23 - _DAT_8cc4aaa5));
      unaff_ESI = piVar15 + -0x1f1d3eaa;
      bVar7 = (byte)unaff_ESI;
      *(byte *)(in_GS_OFFSET + -0xd6f2161) = bVar7;
      puVar1 = (ushort *)((int)unaff_EBX + -0x10628895);
      *puVar1 = *puVar1 + (ushort)((int *)0x7c74faa7 < piVar15) *
                          (((ushort)puVar21 & 3) - (*puVar1 & 3));
      uVar13 = SUB42(piVar14,0);
      out(uVar13,bVar7);
      puVar9 = (uint *)segment(in_DS,(short)unaff_EBX + (short)unaff_EDI + -0x266a);
      uVar26 = *puVar9;
      *puVar9 = *puVar9 >> 1;
      *unaff_EDI = (uint)unaff_ESI;
      *(int **)(puVar19 + -4) = unaff_ESI;
      puVar19[-0x1f1c16ab] = puVar19[-0x1f1c16ab] + (char)piVar14 + ((uVar26 & 1) != 0);
      puVar22 = unaff_EDI + (uint)bVar25 * -2 + (uint)bVar25 * -2 + 2;
      *(int **)(puVar19 + -8) = unaff_ESI;
      uVar26 = *(uint *)(puVar19 + -8);
      bVar25 = (uVar26 & 0x400) != 0;
      piVar20 = (int *)(puVar19 + -8);
      *(undefined2 *)(puVar19 + -8) = in_SS;
      piVar15 = piVar14;
      puVar9 = puVar21;
      if ((uVar26 & 0x800) != 0) break;
      unaff_EDI = puVar22 + (uint)bVar25 * -2 + 1;
      puVar9 = puVar21 + (uint)bVar25 * -2 + 1;
      uVar4 = *puVar22;
      uVar3 = *puVar21;
      bVar24 = uVar3 < uVar4;
      uVar5 = uVar3 - uVar4;
      bVar23 = (POPCOUNT(uVar5 & 0xff) & 1U) == 0;
      if (!SBORROW4(uVar3,uVar4)) {
        out(0xca,unaff_ESI);
        puVar10 = (undefined4 *)((int)unaff_EDI + bVar24 + 0xf8ea0c35);
        puVar22 = (uint *)&DAT_90d4fca4;
        piVar15 = (int *)0xc8fb487d;
        unaff_ESI = (int *)((int)piVar14 - 1U | 0xb6);
        unaff_EBX = (int *)(-0x5187cf25 - (int)puVar9);
        break;
      }
      puVar17 = (undefined4 *)(puVar19 + -0xc);
      puVar18 = (undefined4 *)(puVar19 + -0xc);
      unaff_EBP = (undefined4 *)(puVar19 + -0xc);
      *(undefined4 **)(puVar19 + -0xc) = puVar10;
      cVar6 = '\x1c';
      do {
        puVar10 = puVar10 + -1;
        puVar17 = puVar17 + -1;
        *puVar17 = *puVar10;
        cVar6 = cVar6 + -1;
      } while ('\0' < cVar6);
      *(undefined1 **)(puVar19 + -0x80) = puVar19 + -0xc;
      *(uint *)(puVar19 + -0x2aa9) =
           (uint)((uVar26 & 0x4000) != 0) * 0x4000 | (uint)SBORROW4(uVar3,uVar4) * 0x800 |
           (uint)bVar25 * 0x400 | (uint)((uVar26 & 0x200) != 0) * 0x200 |
           (uint)((uVar26 & 0x100) != 0) * 0x100 | (uint)((int)uVar5 < 0) * 0x80 |
           (uint)(uVar5 == 0) * 0x40 | (uint)((uVar26 & 0x10) != 0) * 0x10 | (uint)bVar23 * 4 |
           (uint)bVar24 | (uint)((uVar26 & 0x200000) != 0) * 0x200000 |
           (uint)((uVar26 & 0x40000) != 0) * 0x40000;
      if (bVar24) {
        if (!bVar23) {
          DAT_b7e6b0f3 = bVar7 ^ 0xbd;
          out(uVar13,DAT_b7e6b0f3);
          out(uVar13,(uint)unaff_ESI ^ 0xbd);
          *(byte *)((int)unaff_EDI + -2) = *(byte *)((int)unaff_EDI + -2) | 0xf2;
          *(uint *)(puVar19 + -0x2aa8) =
               CONCAT22((short)((uint)piVar14 >> 0x10),CONCAT11(0xf,(char)piVar14));
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        *(undefined1 **)(puVar19 + -0x2aad) = puVar19 + -0xc;
        piVar15 = (int *)(puVar19 + -0x2aad);
        goto LAB_00510459;
      }
      bVar23 = CARRY1(bVar7,bRam9161877e) || CARRY1(bVar7 + bRam9161877e,bVar24);
      piVar15 = (int *)CONCAT31((int3)((uint)unaff_ESI >> 8),bVar7 + bRam9161877e + bVar24);
      puVar19 = puVar19 + -0x2aa9;
      puVar10 = puVar18;
      puVar21 = puVar9;
    }
    *(uint *)((int)puVar22 + -0x72) = *(uint *)((int)puVar22 + -0x72) >> 0x18;
    unaff_EDI = (uint *)((int)puVar22 + (uint)bVar25 * -2 + 1);
    puVar9 = (uint *)((int)puVar9 + (uint)bVar25 * -2 + 1);
    bVar24 = ((uint)piVar15 & 0x4000) != 0;
    bVar23 = ((uint)piVar15 & 0x100) != 0;
  } while( true );
}


