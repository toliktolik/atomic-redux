/*
 * Function: ImageFormat_LoadPNG
 * Address: 004bba90
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


longlong __cdecl ImageFormat_LoadPNG(void *param_1)

{
  uint uVar1;
  int iVar2;
  int in_EAX;
  int iVar3;
  uint uVar4;
  bool bVar5;
  longlong lVar6;
  undefined8 local_14;
  uint local_c;
  int local_8;
  
  uVar1 = *(uint *)(in_EAX + 8);
  iVar2 = *(int *)(in_EAX + 0xc);
  local_14 = -1;
  local_8 = iVar2;
  local_c = uVar1;
  do {
    bVar5 = 0x3ff < local_c;
    local_c = local_c - 0x400;
    local_8 = local_8 + -1 + (uint)bVar5;
    if ((local_8 < 1) && (local_8 < 0)) {
      local_c = 0;
      local_8 = 0;
    }
    ImageFormat_LoadBMP(local_c,local_8);
    iVar3 = *(int *)(in_EAX + 0xc);
    uVar4 = *(uint *)(in_EAX + 8);
    if (iVar3 <= iVar2) {
      lVar6 = local_14;
      if (iVar3 < iVar2) goto LAB_004bbb00;
      while (local_14 = lVar6, uVar4 < uVar1) {
LAB_004bbb00:
        do {
          lVar6 = ImageFormat_LoadJPEG
                            (param_1,uVar1 - uVar4,(iVar2 - iVar3) - (uint)(uVar1 < uVar4));
          if (lVar6 == -0x80) {
            return -0x80;
          }
          if (lVar6 < 0) goto LAB_004bbb42;
          uVar4 = *(uint *)(in_EAX + 8);
          iVar3 = *(int *)(in_EAX + 0xc);
          local_14 = lVar6;
        } while (iVar3 < iVar2);
        if (iVar2 < iVar3) break;
      }
    }
LAB_004bbb42:
    if (((uint)local_14 & local_14._4_4_) != 0xffffffff) {
      ImageFormat_LoadBMP((uint)local_14,local_14._4_4_);
      lVar6 = ImageFormat_LoadJPEG(param_1,0x400,0);
      if (((int)((ulonglong)lVar6 >> 0x20) == 0 || lVar6 < 0) && (lVar6 < 0)) {
        return -0x81;
      }
      return local_14;
    }
  } while( true );
}


