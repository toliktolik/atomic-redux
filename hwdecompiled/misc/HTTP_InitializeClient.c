/*
 * Function: HTTP_InitializeClient
 * Address: 00451050
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __thiscall HTTP_InitializeClient(void *this,char param_1)

{
  double dVar1;
  bool bVar2;
  char cVar3;
  undefined4 uVar4;
  DWORD DVar5;
  DWORD DVar6;
  DWORD DVar7;
  uint *extraout_ECX;
  uint *extraout_ECX_00;
  uint *puVar8;
  int extraout_EDX;
  int extraout_EDX_00;
  uint uVar9;
  int iVar10;
  ulonglong uVar11;
  double local_20;
  double local_18;
  
  if (*(char *)((int)this + 0x481) != '\0') {
                    /* WARNING: Load size is inaccurate */
    (**(code **)(*this + 0x98))();
  }
  if (((((*(char *)((int)this + 0x491) == '\0') && (*(char *)((int)this + 0x534) != '\0')) &&
       (*(char *)((int)this + 0x3e9) == '\0')) && (*(char *)((int)this + 0x535) == '\0')) &&
     ((*(char *)((int)this + 0x2ff) == '\0' ||
      ((*(char *)((int)this + 0x544) != '\0' && (*(char *)((int)this + 0x545) == '\0')))))) {
    bVar2 = true;
  }
  else {
    bVar2 = false;
  }
  if (*(char *)((int)this + 0x534) == '\0') {
    local_18 = 1.0;
    local_20 = (double)*(int *)((int)this + 0x3e4) / *(double *)((int)this + 0x418);
  }
  else {
    local_20 = (_DAT_0052c578 / (double)*(int *)((int)this + 0x530)) /
               *(double *)((int)this + 0x418);
    local_18 = _DAT_0052c578 / (double)(*(int *)((int)this + 0x3e4) * *(int *)((int)this + 0x530));
  }
  if (*(char *)((int)this + 0x491) != '\0') {
    if ((*(int *)((int)this + 0x414) < *(int *)((int)this + 0x424)) ||
       (*(char *)((int)this + 0x428) != '\0')) {
      if ((*(char *)((int)this + 0x3d0) == '\0') && (*(char *)((int)this + 0x429) == '\0')) {
                    /* WARNING: Load size is inaccurate */
        *(undefined1 *)((int)this + 0x3d0) = 1;
        (**(code **)(*this + 0xdc))();
      }
      if ((_DAT_0056da88 & 1) == 0) {
        _DAT_0056da88 = _DAT_0056da88 | 1;
        _DAT_0056da84 = GetTickCount();
      }
      while ((*(int *)((int)this + 0x414) < *(int *)((int)this + 0x424) ||
             (*(char *)((int)this + 0x428) != '\0'))) {
        Registry_OpenKey(this,'\0');
                    /* WARNING: Load size is inaccurate */
        iVar10 = *(int *)((int)this + 0x414);
        uVar4 = (**(code **)(*this + 0x24))();
        if ((char)uVar4 != '\0') {
          *(double *)((int)this + 0x3f0) =
               (local_18 + *(double *)((int)this + 0x3f0)) - _DAT_0052a0f0;
          GameEngine_MainLoop((int)this);
          if (_DAT_0052a0f0 <= *(double *)((int)this + 0x3f0)) {
            do {
              Threading_SuspendThread((int *)this);
                    /* WARNING: Load size is inaccurate */
              cVar3 = (**(code **)(*this + 0x24))();
              if (cVar3 == '\0') break;
              GameEngine_MainLoop((int)this);
              *(double *)((int)this + 0x3f0) = *(double *)((int)this + 0x3f0) - _DAT_0052a0f0;
            } while (_DAT_0052a0f0 <= *(double *)((int)this + 0x3f0));
          }
                    /* WARNING: Load size is inaccurate */
          (**(code **)(*this + 0x28))();
          uVar4 = GameEngine_MainLoop((int)this);
        }
        if (iVar10 == *(int *)((int)this + 0x414)) goto LAB_00451586;
        DVar5 = GetTickCount();
        if ((999 < DVar5 - _DAT_0056da84) || (*(char *)((int)this + 0x429) != '\0')) {
          *(undefined1 *)((int)this + 0x429) = 0;
          _DAT_0056da84 = GetTickCount();
                    /* WARNING: Load size is inaccurate */
          uVar4 = (**(code **)(*this + 0x134))();
          return CONCAT31((int3)((uint)uVar4 >> 8),1);
        }
      }
    }
    if (*(char *)((int)this + 0x3d0) != '\0') {
      *(undefined1 *)((int)this + 0x3d0) = 0;
      (**(code **)(**(int **)((int)this + 0x438) + 0x38))();
                    /* WARNING: Load size is inaccurate */
      (**(code **)(*this + 0xe0))();
    }
  }
  if ((*(char *)((int)this + 0x420) != '\0') || (*(double *)((int)this + 0x418) <= _DAT_0052a0c0))
  goto LAB_0045157f;
  DVar6 = timeGetTime();
  DVar5 = 0;
  puVar8 = extraout_ECX;
  iVar10 = extraout_EDX;
  if (!bVar2) {
    Threading_ResetEvent((int)this);
    puVar8 = extraout_ECX_00;
    iVar10 = extraout_EDX_00;
  }
  dVar1 = *(double *)((int)this + 0x418) * _DAT_0052c568;
  *(int *)((int)this + 0x3e0) = *(int *)((int)this + 0x3e0) + 1;
  SystemCall_Handler(puVar8,iVar10,dVar1);
  uVar11 = Math_FloatToUInt64();
  if ((*(int *)((int)this + 0x3e0) < (int)uVar11) || (*(char *)((int)this + 0x47f) == '\0')) {
    if (!bVar2) {
      if (local_20 <= *(double *)((int)this + 0x3f8)) goto LAB_00451398;
      goto LAB_00451365;
    }
    if ((*(char *)((int)this + 0x3ea) != '\0') &&
       (uVar11 = Math_FloatToUInt64(),
       (double)(int)uVar11 < *(double *)((int)this + 0x3f8) ==
       ((double)(int)uVar11 == *(double *)((int)this + 0x3f8)))) goto LAB_00451365;
LAB_00451398:
    if ((*(char *)((int)this + 0x491) == '\0') &&
       (((*(int *)((int)this + 0x418) == 0 && (*(int *)((int)this + 0x41c) == 0x3ff00000)) &&
        (uVar9 = *(int *)((int)this + 0x540) + 1, *(uint *)((int)this + 0x540) = uVar9,
        (uint)((*(int *)((int)this + 0x3e4) + 999) / *(int *)((int)this + 0x3e4)) <= uVar9)))) {
      if (DVar6 - *(int *)((int)this + 0x53c) < 0x2ef) {
        iVar10 = *(int *)((int)this + 0x538) + 1;
        *(int *)((int)this + 0x538) = iVar10;
        if (2 < iVar10) {
          *(undefined1 *)((int)this + 0x535) = 1;
        }
      }
      else {
        *(undefined4 *)((int)this + 0x538) = 0;
      }
      *(DWORD *)((int)this + 0x53c) = DVar6;
      *(undefined4 *)((int)this + 0x540) = 0;
    }
                    /* WARNING: Load size is inaccurate */
    cVar3 = (**(code **)(*this + 0x24))();
    if (cVar3 != '\0') {
      *(double *)((int)this + 0x3f0) = (local_18 + *(double *)((int)this + 0x3f0)) - _DAT_0052a0f0;
      GameEngine_MainLoop((int)this);
      if (_DAT_0052a0f0 <= *(double *)((int)this + 0x3f0)) {
        do {
          Threading_SuspendThread((int *)this);
                    /* WARNING: Load size is inaccurate */
          cVar3 = (**(code **)(*this + 0x24))();
          if (cVar3 == '\0') break;
          GameEngine_MainLoop((int)this);
          *(double *)((int)this + 0x3f0) = *(double *)((int)this + 0x3f0) - _DAT_0052a0f0;
        } while (_DAT_0052a0f0 <= *(double *)((int)this + 0x3f0));
      }
                    /* WARNING: Load size is inaccurate */
      (**(code **)(*this + 0x28))();
      GameEngine_MainLoop((int)this);
    }
    local_20 = *(double *)((int)this + 0x3f8) - local_20;
    if ((bVar2) && (local_20 = local_20 - _DAT_00531490, local_20 <= _DAT_0052a0c0)) {
      local_20 = _DAT_0052a0c0;
    }
    *(double *)((int)this + 0x3f8) = local_20;
    if (0 < *(int *)((int)this + 0x78)) {
      *(undefined4 *)((int)this + 0x3f8) = 0;
      *(undefined4 *)((int)this + 0x3fc) = 0;
    }
    *(undefined1 *)((int)this + 0x3ea) = 1;
  }
  else {
LAB_00451365:
    *(undefined4 *)((int)this + 0x3e0) = 0;
    if (*(char *)((int)this + 0x3ea) == '\0') {
      uVar11 = Math_FloatToUInt64();
      DVar7 = (DWORD)uVar11;
      if (0 < (int)DVar7) {
        DVar5 = CONCAT31((int3)(uVar11 >> 8),param_1);
        if (param_1 == '\0') goto LAB_0045156d;
        *(int *)((int)this + 0x40c) = *(int *)((int)this + 0x40c) + 1;
        Sleep(DVar7);
        DVar5 = DVar7;
      }
    }
    else {
                    /* WARNING: Load size is inaccurate */
      (**(code **)(*this + 0x134))();
    }
  }
  if (*(char *)((int)this + 0x480) != '\0') {
    DVar7 = timeGetTime();
    DVar5 = DVar7 * 2 + DVar5 * -3 + DVar6 * -2;
    if ((int)DVar5 < 0xfb) {
      if ((int)DVar5 < 0) goto LAB_0045157f;
    }
    else {
      DVar5 = 0xfa;
    }
    if (param_1 == '\0') {
LAB_0045156d:
      return DVar5 & 0xffffff00;
    }
    Sleep(DVar5);
  }
LAB_0045157f:
  uVar4 = GameEngine_MainLoop((int)this);
LAB_00451586:
  return CONCAT31((int3)((uint)uVar4 >> 8),1);
}


