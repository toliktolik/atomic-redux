/*
 * Function: Unwind@005147e0
 * Address: 005147e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int * __fastcall Unwind_005147e0(undefined6 *param_1,int param_2)

{
  int iVar1;
  longlong lVar2;
  code *pcVar3;
  byte bVar4;
  int iVar5;
  undefined4 uVar6;
  int *piVar7;
  int unaff_EBX;
  int *piVar8;
  undefined4 *unaff_ESI;
  byte *unaff_EDI;
  undefined2 in_ES;
  bool in_CF;
  bool in_ZF;
  float10 in_ST0;
  undefined2 uStack_4;
  undefined2 uStack_2;
  
  piVar7 = (int *)*unaff_ESI;
  if (in_CF || in_ZF) {
    while( true ) {
      iVar5 = in(0xb);
      LOCK();
      piVar7 = (int *)((int)param_1 + unaff_EBX + -0x3a419f41);
      iVar1 = *piVar7;
      *piVar7 = (int)param_1;
      UNLOCK();
      param_1 = (undefined6 *)(iVar1 + -1);
      if (!SBORROW4(iVar1,1)) break;
      out((short)param_2,(char)(int *)(iVar5 + 0x34296688));
    }
    return (int *)(iVar5 + 0x34296688);
  }
  lVar2 = (longlong)*piVar7 * -0x32;
  piVar8 = (int *)lVar2;
  if ((int)piVar8 != lVar2 || in_ZF) {
    *(char *)(param_2 + 0x408e619) = *(char *)(param_2 + 0x408e619) + '`';
    _DAT_797a2b07 = (float)in_ST0;
    return piVar7;
  }
  *(uint *)((int)param_1 * 3) = *(uint *)((int)param_1 * 3) & 0x62a44b7;
  *(int *)((int)piVar8 + 0x65fb5f85) = *(int *)((int)piVar8 + 0x65fb5f85) + -0x51e2abe0;
  _uStack_4 = CONCAT22((short)((uint)param_1 >> 0x10),in_ES);
  *(char *)((int)param_1 + -0x726de8af) =
       *(char *)((int)param_1 + -0x726de8af) + (char)((uint)param_2 >> 8);
  uVar6 = (undefined4)*param_1;
  bVar4 = (byte)*param_1;
  if ((char)*unaff_EDI < (char)bVar4) {
    LOCK();
    iVar1 = *piVar8;
    *piVar8 = (int)&uStack_4;
    UNLOCK();
    out((short)param_2,uVar6);
    *(byte **)(iVar1 + -4) = unaff_EDI + 1;
    *(undefined6 **)(iVar1 + -8) = param_1;
    _DAT_56bd081d = uVar6;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  *(int *)(param_2 + -0x31e939b1) =
       (*(int *)(param_2 + -0x31e939b1) - (int)(unaff_ESI + 1)) - (uint)(bVar4 < *unaff_EDI);
  pcVar3 = (code *)swi(1);
  piVar7 = (int *)(*pcVar3)();
  return piVar7;
}


