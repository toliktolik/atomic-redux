/*
 * Function: Vector_Insert_48ByteStringObjects
 * Address: 0040a170
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall
Vector_Insert_48ByteStringObjects
          (int param_1,uint param_2,_String_base *param_3,_String_base *param_4,
          _String_base *param_5)

{
  uint uVar1;
  _String_base *p_Var2;
  undefined4 uVar3;
  _String_base *p_Var4;
  int extraout_ECX;
  _String_base *extraout_EDX;
  int iVar5;
  _String_base *extraout_EDX_00;
  int iVar6;
  _String_base *p_Var7;
  uint extraout_EDX_01;
  _String_base *extraout_EDX_02;
  _String_base *extraout_EDX_03;
  undefined4 *unaff_ESI;
  _String_base *p_Var8;
  undefined4 *unaff_EDI;
  uint unaff_retaddr;
  _String_base local_50 [48];
  undefined1 *local_20;
  int local_1c;
  uint local_18;
  undefined1 *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x50fb18;
  pvStack_10 = ExceptionList;
  local_18 = DAT_00569f5c ^ unaff_retaddr;
  local_14 = &stack0xffffffa4;
  ExceptionList = &pvStack_10;
  local_1c = param_1;
  StringObject_CopyConstructor(local_50,param_2,param_5);
  p_Var8 = param_4;
  p_Var2 = param_3;
  iVar6 = *(int *)(param_1 + 4);
  p_Var4 = (_String_base *)0x0;
  local_8 = 0;
  p_Var7 = extraout_EDX;
  if (iVar6 != 0) {
    p_Var4 = (_String_base *)((*(int *)(param_1 + 0xc) - iVar6) / 0x30);
    p_Var7 = p_Var4;
  }
  if (param_4 != (_String_base *)0x0) {
    if (iVar6 == 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = (*(int *)(param_1 + 8) - iVar6) / 0x30;
    }
    if ((_String_base *)(0x5555555U - iVar5) < param_4) {
      Level_InitializeVodkavania();
      p_Var7 = extraout_EDX_00;
    }
    else {
      if (iVar6 == 0) {
        iVar5 = 0;
      }
      else {
        iVar5 = (*(int *)(param_1 + 8) - iVar6) / 0x30;
      }
      if (p_Var4 < param_4 + iVar5) {
        if ((_String_base *)(0x5555555 - ((uint)p_Var4 >> 1)) < p_Var4) {
          p_Var4 = (_String_base *)0x0;
        }
        else {
          p_Var4 = p_Var4 + ((uint)p_Var4 >> 1);
        }
        if (iVar6 == 0) {
          iVar6 = 0;
        }
        else {
          iVar6 = (*(int *)(param_1 + 8) - iVar6) / 0x30;
        }
        if (p_Var4 < param_4 + iVar6) {
          iVar6 = Vector_Size_48ByteObjects(param_1);
          p_Var4 = p_Var8 + iVar6;
        }
        param_4 = (_String_base *)operator_new((int)p_Var4 * 0x30);
        local_8 = CONCAT31(local_8._1_3_,1);
        param_5 = param_4;
        param_4 = ArrayCopyConstruct_48ByteStringObjects
                            (*(undefined4 *)(param_1 + 4),(uint)param_3,
                             (_String_base *)*(undefined4 *)(param_1 + 4),param_3,param_4);
        Wave_ProcessQuantities(param_3,(uint)local_50,param_4,(int)p_Var8,local_50);
        param_4 = param_4 + (int)p_Var8 * 0x30;
        ArrayCopyConstruct_48ByteStringObjects
                  (param_3,(uint)param_3,param_3,*(_String_base **)(param_1 + 8),param_4);
        iVar6 = *(int *)(param_1 + 4);
        if (iVar6 == 0) {
          p_Var7 = (_String_base *)0x0;
        }
        else {
          p_Var7 = (_String_base *)((*(int *)(param_1 + 8) - iVar6) / 0x30);
        }
        if (iVar6 != 0) {
          ArrayDestroy_48ByteObjects(param_1,*(uint *)(param_1 + 8),iVar6,*(uint *)(param_1 + 8));
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
        }
        *(_String_base **)(param_1 + 0xc) = param_5 + (int)p_Var4 * 0x30;
        *(_String_base **)(param_1 + 8) = param_5 + (int)(p_Var8 + (int)p_Var7) * 0x30;
        *(_String_base **)(param_1 + 4) = param_5;
      }
      else {
        param_5 = *(_String_base **)(param_1 + 8);
        if ((_String_base *)(((int)param_5 - (int)param_3) / 0x30) < param_4) {
          local_20 = &stack0xffffff98;
          p_Var4 = param_5;
          param_5 = (_String_base *)((int)param_4 * 0x30);
          Wave_ProcessDifficulty
                    (param_3,(uint)p_Var4,(_String_base *)((int)param_4 * 0x30) + (int)param_3);
          uVar1 = ((int)*(_String_base **)(param_1 + 8) - (int)p_Var2) / 0x30;
          local_8 = CONCAT31(local_8._1_3_,3);
          Campaign_ProcessBossEncounter
                    (param_1,uVar1,*(_String_base **)(param_1 + 8),(int)p_Var8 - uVar1,local_50);
          iVar6 = *(int *)(param_1 + 8);
          local_8 = 0;
          *(_String_base **)(param_1 + 8) = param_5 + iVar6;
          p_Var4 = local_50;
          p_Var8 = param_5 + iVar6 + -(int)param_5;
          p_Var7 = param_5;
        }
        else {
          iVar6 = (int)param_4 * 0x30;
          param_3 = param_5 + (int)param_4 * -0x30;
          uVar3 = Wave_ProcessDifficulty(param_3,(uint)param_5,param_5);
          p_Var4 = param_3;
          *(undefined4 *)(param_1 + 8) = uVar3;
          param_4 = (_String_base *)&stack0xffffff9c;
          param_3 = (_String_base *)&stack0xffffff98;
          WeaponBomb_ProcessFragBomb((int *)&param_3,p_Var2,(uint)p_Var4,param_5);
          p_Var7 = local_50;
          p_Var8 = p_Var2 + iVar6;
          p_Var4 = extraout_EDX_02;
        }
        param_3 = (_String_base *)&stack0xffffff98;
        WeaponBomb_ProcessArmoredBomb(p_Var7,(uint)p_Var4,p_Var2,p_Var8,local_50);
        p_Var7 = extraout_EDX_03;
      }
    }
  }
  ComplexObject_Destructor((int)local_50,(uint)p_Var7);
  ExceptionList = pvStack_10;
  Exception_SetMessage((void *)(local_18 ^ unaff_retaddr),unaff_EDI,unaff_ESI);
  return;
}


