/*
 * Function: List_GetFirst
 * Address: 00499cf0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


_String_base * __thiscall
List_GetFirst(void *this,uint param_1,uint param_2,_String_base *param_3,uint param_4,uint param_5)

{
  undefined4 *puVar1;
  uint uVar2;
  undefined1 *puVar3;
  int iVar4;
  void *_Dst;
  undefined4 *puVar5;
  int iVar6;
  uint _Size;
  uint uVar7;
  void *_Src;
  _String_base *p_Var8;
  _String_base *p_Var9;
  
  if ((*(uint *)((int)this + 0x14) < param_1) || (*(uint *)(param_3 + 0x14) < param_4)) {
    std::_String_base::_Xran((_String_base *)this);
  }
  uVar2 = *(int *)((int)this + 0x14) - param_1;
  if (uVar2 < param_2) {
    param_2 = uVar2;
  }
  if (*(int *)(param_3 + 0x14) - param_4 < param_5) {
    param_5 = *(int *)(param_3 + 0x14) - param_4;
  }
  if (-param_5 - 1 <= *(int *)((int)this + 0x14) - param_2) {
    std::_String_base::_Xlen((_String_base *)this);
  }
  uVar2 = *(uint *)((int)this + 0x14);
  _Size = (uVar2 - param_1) - param_2;
  uVar7 = (uVar2 - param_2) + param_5;
  if (uVar2 < uVar7) {
    if (uVar7 == 0xffffffff) {
      std::_String_base::_Xlen((_String_base *)this);
    }
    if (*(uint *)((int)this + 0x18) < uVar7) {
      String_AllocateMemory(uVar7);
    }
    else if (uVar7 == 0) {
      *(undefined4 *)((int)this + 0x14) = 0;
      if (*(uint *)((int)this + 0x18) < 0x10) {
        puVar3 = (undefined1 *)((int)this + 4);
      }
      else {
        puVar3 = *(undefined1 **)((int)this + 4);
      }
      *puVar3 = 0;
    }
  }
  uVar2 = *(uint *)((int)this + 0x18);
  if ((_String_base *)this == param_3) {
    if (param_2 < param_5) {
      if (param_1 < param_4) {
        puVar5 = (undefined4 *)((int)this + 4);
        if (param_4 < param_1 + param_2) {
          puVar1 = puVar5;
          if (0xf < uVar2) {
            puVar1 = (undefined4 *)*puVar5;
            puVar5 = (undefined4 *)*puVar5;
          }
          STL_MemoryCopy((void *)((int)puVar5 + param_1),(void *)((int)puVar1 + param_4),param_2);
          if (*(uint *)((int)this + 0x18) < 0x10) {
            iVar4 = (int)this + 4;
            iVar6 = (int)this + 4;
          }
          else {
            iVar4 = *(int *)((int)this + 4);
            iVar6 = *(int *)((int)this + 4);
          }
          STL_MemoryCopy((void *)(iVar6 + param_1 + param_5),(void *)(iVar4 + param_1 + param_2),
                         _Size);
          if (*(uint *)((int)this + 0x18) < 0x10) {
            iVar4 = (int)this + 4;
            iVar6 = (int)this + 4;
          }
          else {
            iVar4 = *(int *)((int)this + 4);
            iVar6 = *(int *)((int)this + 4);
          }
          _Size = param_5 - param_2;
          _Src = (void *)(iVar4 + param_4 + param_5);
          _Dst = (void *)(iVar6 + param_1 + param_2);
        }
        else {
          puVar1 = puVar5;
          if (0xf < uVar2) {
            puVar1 = (undefined4 *)*puVar5;
            puVar5 = (undefined4 *)*puVar5;
          }
          STL_MemoryCopy((void *)((int)puVar5 + param_5 + param_1),
                         (void *)((int)puVar1 + param_2 + param_1),_Size);
          if (*(uint *)((int)this + 0x18) < 0x10) {
            iVar4 = (int)this + 4;
            iVar6 = (int)this + 4;
          }
          else {
            iVar4 = *(int *)((int)this + 4);
            iVar6 = *(int *)((int)this + 4);
          }
          _Src = (void *)((iVar4 - param_2) + param_4 + param_5);
          _Dst = (void *)(iVar6 + param_1);
          _Size = param_5;
        }
      }
      else {
        puVar5 = (undefined4 *)((int)this + 4);
        puVar1 = puVar5;
        if (0xf < uVar2) {
          puVar1 = (undefined4 *)*puVar5;
          puVar5 = (undefined4 *)*puVar5;
        }
        STL_MemoryCopy((void *)((int)puVar5 + param_5 + param_1),
                       (void *)((int)puVar1 + param_2 + param_1),_Size);
        if (*(uint *)((int)this + 0x18) < 0x10) {
          _Src = (void *)((int)this + param_4 + 4);
          _Dst = (void *)((int)this + param_1 + 4);
          _Size = param_5;
        }
        else {
          _Src = (void *)(*(int *)((int)this + 4) + param_4);
          _Dst = (void *)(*(int *)((int)this + 4) + param_1);
          _Size = param_5;
        }
      }
    }
    else {
      puVar5 = (undefined4 *)((int)this + 4);
      puVar1 = puVar5;
      if (0xf < uVar2) {
        puVar1 = (undefined4 *)*puVar5;
        puVar5 = (undefined4 *)*puVar5;
      }
      STL_MemoryCopy((void *)((int)puVar5 + param_1),(void *)((int)puVar1 + param_4),param_5);
      if (*(uint *)((int)this + 0x18) < 0x10) {
        _Src = (void *)((int)this + param_2 + param_1 + 4);
        _Dst = (void *)((int)this + param_5 + param_1 + 4);
      }
      else {
        _Src = (void *)(*(int *)((int)this + 4) + param_1 + param_2);
        _Dst = (void *)(*(int *)((int)this + 4) + param_1 + param_5);
      }
    }
    STL_MemoryCopy(_Dst,_Src,_Size);
  }
  else {
    puVar5 = (undefined4 *)((int)this + 4);
    puVar1 = puVar5;
    if (0xf < uVar2) {
      puVar1 = (undefined4 *)*puVar5;
      puVar5 = (undefined4 *)*puVar5;
    }
    STL_MemoryCopy((void *)((int)puVar5 + param_5 + param_1),
                   (void *)((int)puVar1 + param_2 + param_1),_Size);
    if (*(uint *)(param_3 + 0x18) < 0x10) {
      p_Var8 = param_3 + 4;
    }
    else {
      p_Var8 = *(_String_base **)(param_3 + 4);
    }
    if (*(uint *)((int)this + 0x18) < 0x10) {
      iVar4 = (int)this + 4;
    }
    else {
      iVar4 = *(int *)((int)this + 4);
    }
    p_Var8 = p_Var8 + param_4;
    p_Var9 = (_String_base *)(param_1 + iVar4);
    for (uVar2 = param_5 >> 2; uVar2 != 0; uVar2 = uVar2 - 1) {
      *(undefined4 *)p_Var9 = *(undefined4 *)p_Var8;
      p_Var8 = p_Var8 + 4;
      p_Var9 = p_Var9 + 4;
    }
    for (uVar2 = param_5 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
      *p_Var9 = *p_Var8;
      p_Var8 = p_Var8 + 1;
      p_Var9 = p_Var9 + 1;
    }
  }
  if (uVar7 <= *(uint *)((int)this + 0x14)) {
    if (uVar7 == 0xffffffff) {
      std::_String_base::_Xlen((_String_base *)this);
    }
    if (*(uint *)((int)this + 0x18) < uVar7) {
      String_AllocateMemory(uVar7);
    }
    else if (uVar7 == 0) {
      *(undefined4 *)((int)this + 0x14) = 0;
      if (*(uint *)((int)this + 0x18) < 0x10) {
        *(undefined1 *)((int)this + 4) = 0;
        return (_String_base *)this;
      }
      **(undefined1 **)((int)this + 4) = 0;
      return (_String_base *)this;
    }
    if (uVar7 == 0) {
      return (_String_base *)this;
    }
  }
  *(uint *)((int)this + 0x14) = uVar7;
  if (*(uint *)((int)this + 0x18) < 0x10) {
    *(undefined1 *)((int)this + uVar7 + 4) = 0;
    return (_String_base *)this;
  }
  *(undefined1 *)(*(int *)((int)this + 4) + uVar7) = 0;
  return (_String_base *)this;
}


