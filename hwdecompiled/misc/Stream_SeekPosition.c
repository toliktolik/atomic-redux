/*
 * Function: Stream_SeekPosition
 * Address: 00412830
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Stream_SeekPosition(void *this,int *param_1,int param_2,int param_3,byte param_4)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  uVar1 = **(uint **)((int)this + 0x24);
  if ((uVar1 != 0) && (*(uint *)((int)this + 0x3c) < uVar1)) {
    *(uint *)((int)this + 0x3c) = uVar1;
  }
  iVar4 = DAT_005468f8;
  if (((param_4 & 1) == 0) || (iVar5 = **(int **)((int)this + 0x20), iVar5 == 0)) {
    if (((param_4 & 2) != 0) && (uVar1 = **(uint **)((int)this + 0x24), uVar1 != 0)) {
      if (param_3 == 2) {
        iVar5 = param_2 + (*(int *)((int)this + 0x3c) - **(int **)((int)this + 0x10));
      }
      else if (param_3 == 1) {
        iVar5 = param_2 + (uVar1 - **(int **)((int)this + 0x10));
      }
      else {
        iVar5 = DAT_005468f8;
        if (param_3 == 0) {
          iVar5 = param_2;
        }
      }
      if ((-1 < iVar5) && (iVar5 <= *(int *)((int)this + 0x3c) - **(int **)((int)this + 0x10))) {
        iVar4 = (**(int **)((int)this + 0x10) - uVar1) + iVar5;
        **(int **)((int)this + 0x34) = **(int **)((int)this + 0x34) - iVar4;
        **(int **)((int)this + 0x24) = **(int **)((int)this + 0x24) + iVar4;
        iVar4 = iVar5;
      }
    }
    goto LAB_00412977;
  }
  if (param_3 == 2) {
    param_2 = param_2 + (*(int *)((int)this + 0x3c) - **(int **)((int)this + 0x10));
  }
  else if (param_3 == 1) {
    if ((param_4 & 2) == 0) {
      param_2 = param_2 + (iVar5 - **(int **)((int)this + 0x10));
    }
    else {
LAB_00412897:
      param_2 = DAT_005468f8;
    }
  }
  else if (param_3 != 0) goto LAB_00412897;
  if ((-1 < param_2) && (param_2 <= *(int *)((int)this + 0x3c) - **(int **)((int)this + 0x10))) {
    iVar4 = (**(int **)((int)this + 0x10) - iVar5) + param_2;
    **(int **)((int)this + 0x30) = **(int **)((int)this + 0x30) - iVar4;
    **(int **)((int)this + 0x20) = **(int **)((int)this + 0x20) + iVar4;
    iVar4 = param_2;
    if ((param_4 & 2) != 0) {
      iVar5 = **(int **)((int)this + 0x24);
      if (iVar5 != 0) {
        iVar2 = **(int **)((int)this + 0x20);
        iVar3 = **(int **)((int)this + 0x34);
        **(int **)((int)this + 0x24) = iVar2;
        **(int **)((int)this + 0x34) = (iVar3 + iVar5) - iVar2;
      }
    }
  }
LAB_00412977:
  *param_1 = iVar4;
  param_1[2] = DAT_005a4838;
  param_1[3] = DAT_005a483c;
  param_1[4] = DAT_0056d0c0;
  return;
}


