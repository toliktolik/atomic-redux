/*
 * Function: FloatingText_Constructor
 * Address: 0042c000
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int * __thiscall
FloatingText_Constructor
          (void *this,int param_1,_String_base *param_2,int param_3,int param_4,undefined1 param_5,
          int *param_6)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  int *piVar5;
  undefined4 *puVar6;
  uint extraout_EDX;
  int local_24 [4];
  void *local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  uStack_c = 0x51199b;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(undefined4 *)((int)this + 0x20) = 0xf;
  *(undefined4 *)((int)this + 0x1c) = 0;
  *(undefined1 *)((int)this + 0xc) = 0;
  piVar1 = (int *)((int)this + 0x3c);
  local_8 = 0;
  local_14 = this;
  SexyWidget_SetMatrix(piVar1);
  *(int *)((int)this + 4) = param_1;
  *(undefined4 *)this = *(undefined4 *)(param_1 + 0x5c);
  PowerUp_ProcessThunderstrike((_String_base *)((int)this + 8),extraout_EDX,param_2,0,0xffffffff);
                    /* WARNING: Load size is inaccurate */
  *(int *)((int)this + 0x2c) = param_4;
  *(undefined4 *)((int)this + 0x24) = 0xff;
  *(undefined1 *)((int)this + 0x38) = param_5;
  *(undefined4 *)((int)this + 0x34) = 0;
  iVar2 = (**(code **)(**(int **)(*this + 0x93c) + 0x1c))(param_2);
  *(int *)((int)this + 0x30) = iVar2;
  iVar3 = param_3 - iVar2 / 2;
  *(int *)((int)this + 0x28) = iVar3;
  if (0x140 < iVar3 + iVar2) {
    *(int *)((int)this + 0x28) = 0x140 - iVar2;
  }
  if (*(int *)((int)this + 0x28) < -0x140) {
    *(undefined4 *)((int)this + 0x28) = 0xfffffec0;
  }
  SexyWidget_GetMatrix(local_24,0);
  uVar4 = SexyWidget_ProcessTexture(param_6,local_24);
  if ((char)uVar4 == '\0') {
    *piVar1 = *param_6;
    *(int *)((int)this + 0x40) = param_6[1];
    *(int *)((int)this + 0x44) = param_6[2];
    *(int *)((int)this + 0x48) = param_6[3];
  }
  else {
    piVar5 = (int *)SexyWidget_ApplyMatrix(local_24,0xff,0xff,0xff);
    *piVar1 = *piVar5;
    *(int *)((int)this + 0x40) = piVar5[1];
    *(int *)((int)this + 0x44) = piVar5[2];
    *(int *)((int)this + 0x48) = piVar5[3];
  }
  iVar2 = *(int *)((int)this + 4);
  puVar6 = (undefined4 *)operator_new(0xc);
  uVar4 = *(undefined4 *)(iVar2 + 0x24c);
  puVar6[1] = 0;
  puVar6[2] = uVar4;
  *(undefined4 **)(*(int *)(iVar2 + 0x24c) + 4) = puVar6;
  *puVar6 = this;
  *(undefined4 **)(iVar2 + 0x24c) = puVar6;
  *(int *)(iVar2 + 0x250) = *(int *)(iVar2 + 0x250) + 1;
  ExceptionList = local_10;
  return (int *)this;
}


