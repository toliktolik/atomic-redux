/*
 * Function: HighScore_InsertEntry
 * Address: 00407540
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall HighScore_InsertEntry(void *this,char param_1,char param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  int iVar4;
  undefined4 *unaff_ESI;
  uint uVar5;
  undefined4 *unaff_EDI;
  uint unaff_retaddr;
  char local_2c [8];
  char local_24 [16];
  undefined4 local_14;
  int local_10;
  uint local_c;
  uint local_8;
  
  local_8 = DAT_00569f5c ^ unaff_retaddr;
  uVar5 = 0;
  if (param_1 == '\0') {
    for (_param_1 = 0;
        ((*(int *)((int)this + 0x143c) != 0 &&
         (uVar5 < (uint)((*(int *)((int)this + 0x1440) - *(int *)((int)this + 0x143c)) / 0x24))) &&
        (*(int *)((int)this + 0x95c) <= *(int *)(_param_1 + 0x18 + *(int *)((int)this + 0x143c))));
        _param_1 = _param_1 + 0x24) {
      uVar5 = uVar5 + 1;
    }
    if ((*(int *)((int)this + 0x143c) != 0) &&
       (uVar5 < (uint)((*(int *)((int)this + 0x1440) - *(int *)((int)this + 0x143c)) / 0x24))) {
      pcVar3 = (char *)(*(int *)((int)this + 0xb40) * 0x60 + *(int *)((int)this + 0x148c));
      iVar2 = -(int)pcVar3;
      do {
        cVar1 = *pcVar3;
        pcVar3[(int)(local_2c + iVar2)] = cVar1;
        pcVar3 = pcVar3 + 1;
      } while (cVar1 != '\0');
      local_10 = *(int *)((int)this + 0x960);
      local_14 = *(undefined4 *)((int)this + 0x95c);
      if (param_2 == '\0') {
        local_c = (uint)*(ushort *)
                         (*(int *)((int)this + 0xb40) * 0x60 + *(int *)((int)this + 0x148c) + 0x1e);
      }
      else {
        local_c = 0x13;
        local_10 = local_10 + 1;
      }
      Vector_InsertSingle_36ByteObjects
                ((void *)((int)this + 0x1438),(int *)&param_1,
                 (undefined4 *)(*(int *)((int)this + 0x143c) + uVar5 * 0x24),(undefined4 *)local_2c)
      ;
      if (*(int *)((int)this + 0x143c) != 0) {
        _param_1 = (*(int *)((int)this + 0x1440) - *(int *)((int)this + 0x143c)) / 0x24;
        if (_param_1 != 0) {
          *(int *)((int)this + 0x1440) = *(int *)((int)this + 0x1440) + -0x24;
        }
      }
    }
  }
  else {
    for (_param_1 = 0;
        ((*(int *)((int)this + 0x144c) != 0 &&
         (uVar5 < (uint)((*(int *)((int)this + 0x1450) - *(int *)((int)this + 0x144c)) / 0x1c))) &&
        (*(int *)(*(int *)((int)this + 0x920) + 0x17c) -
         *(int *)(*(int *)((int)this + 0x920) + 0x180) <=
         *(int *)(_param_1 + 0x18 + *(int *)((int)this + 0x144c)))); _param_1 = _param_1 + 0x1c) {
      uVar5 = uVar5 + 1;
    }
    if ((*(int *)((int)this + 0x144c) != 0) &&
       (uVar5 < (uint)((*(int *)((int)this + 0x1450) - *(int *)((int)this + 0x144c)) / 0x1c))) {
      pcVar3 = (char *)(*(int *)((int)this + 0xb40) * 0x60 + *(int *)((int)this + 0x148c));
      iVar2 = -(int)pcVar3;
      do {
        cVar1 = *pcVar3;
        pcVar3[(int)(local_24 + iVar2)] = cVar1;
        pcVar3 = pcVar3 + 1;
      } while (cVar1 != '\0');
      local_c = *(int *)(*(int *)((int)this + 0x920) + 0x17c) -
                *(int *)(*(int *)((int)this + 0x920) + 0x180);
      Vector_InsertSingle_28ByteObjects
                ((void *)((int)this + 0x1448),(int *)&param_1,
                 (undefined4 *)(*(int *)((int)this + 0x144c) + uVar5 * 0x1c),(undefined4 *)local_24)
      ;
      if (*(int *)((int)this + 0x144c) != 0) {
        _param_1 = (*(int *)((int)this + 0x1450) - *(int *)((int)this + 0x144c)) / 0x1c;
        if (_param_1 != 0) {
          *(int *)((int)this + 0x1450) = *(int *)((int)this + 0x1450) + -0x1c;
        }
      }
    }
    iVar4 = *(int *)((int)this + 0xb40) * 0x60;
    iVar2 = *(int *)(*(int *)((int)this + 0x920) + 0x17c);
    if (*(int *)(iVar4 + 0x20 + *(int *)((int)this + 0x148c)) < iVar2) {
      *(int *)(iVar4 + 0x20 + *(int *)((int)this + 0x148c)) =
           iVar2 - *(int *)(*(int *)((int)this + 0x920) + 0x180);
    }
  }
  HighScoreSystem_SaveData(this);
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),unaff_EDI,unaff_ESI);
  return;
}


