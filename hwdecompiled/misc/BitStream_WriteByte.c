/*
 * Function: BitStream_WriteByte
 * Address: 004a49a0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall BitStream_WriteByte(void *this,byte param_1)

{
  byte *pbVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  byte bStack00000007;
  
  uVar2 = *(uint *)((int)this + 0x1c);
  uVar4 = uVar2 & 0x80000007;
  if ((int)uVar4 < 0) {
    uVar4 = (uVar4 - 1 | 0xfffffff8) + 1;
  }
  if (uVar4 == 0) {
    bStack00000007 = param_1;
    ByteVector_PushBack((void *)((int)this + 4),&stack0x00000007);
  }
  else {
    pbVar1 = (byte *)(((int)(uVar2 + ((int)uVar2 >> 0x1f & 7U)) >> 3) + *(int *)((int)this + 8));
    *pbVar1 = *pbVar1 | param_1 << ((byte)uVar4 & 0x1f);
    bStack00000007 = param_1 >> (8 - (byte)uVar4 & 0x1f);
    ByteVector_PushBack((void *)((int)this + 4),&stack0x00000007);
  }
  iVar3 = *(int *)((int)this + 0x1c) + 8;
  *(int *)((int)this + 0x1c) = iVar3;
  if (*(int *)((int)this + 0x14) < iVar3) {
    *(int *)((int)this + 0x14) = iVar3;
  }
  return;
}


