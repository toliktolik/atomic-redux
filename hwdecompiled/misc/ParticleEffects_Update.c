/*
 * Function: ParticleEffects_Update
 * Address: 0042ba60
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall ParticleEffects_Update(int param_1)

{
  double dVar1;
  double dVar2;
  int iVar3;
  int *piVar4;
  uint uVar5;
  ulonglong uVar6;
  
  *(undefined4 *)(param_1 + 8) = *(undefined4 *)(param_1 + 4);
  do {
    iVar3 = *(int *)(*(int *)(param_1 + 8) + 4);
    if (iVar3 == 0) {
      return;
    }
    *(int *)(param_1 + 8) = iVar3;
    if (*(int *)(param_1 + 0x10) == 0) {
      piVar4 = (int *)0x0;
    }
    else {
      piVar4 = (int *)**(undefined4 **)(param_1 + 8);
    }
    *(double *)(piVar4 + 2) = *(double *)(piVar4 + 6) + *(double *)(piVar4 + 2);
    *(double *)(piVar4 + 4) = *(double *)(piVar4 + 4) + *(double *)(piVar4 + 8);
    dVar1 = *(double *)(piVar4 + 8);
    dVar2 = *(double *)(piVar4 + 0xc);
    if (*(double *)(piVar4 + 10) <= _DAT_0052a0c0) {
      if (dVar2 < dVar1) goto LAB_0042bac5;
    }
    else if (dVar1 < dVar2 != (NAN(dVar1) || NAN(dVar2))) {
LAB_0042bac5:
      *(double *)(piVar4 + 8) = *(double *)(piVar4 + 8) + *(double *)(piVar4 + 10);
    }
    iVar3 = *piVar4;
    *(double *)(piVar4 + 0x10) = *(double *)(piVar4 + 0x12) + *(double *)(piVar4 + 0x10);
    uVar6 = Math_FloatToUInt64();
    if ((*(int *)(iVar3 + 0x18) <= (int)uVar6) &&
       (iVar3 = *(int *)(param_1 + 8), iVar3 != *(int *)(param_1 + 4))) {
      if (iVar3 == *(int *)(param_1 + 0xc)) {
        *(undefined4 *)(param_1 + 0xc) = *(undefined4 *)(iVar3 + 8);
      }
      uVar5 = *(uint *)(iVar3 + 8);
      *(undefined4 *)(uVar5 + 4) = *(undefined4 *)(iVar3 + 4);
      iVar3 = *(int *)(*(int *)(param_1 + 8) + 4);
      if (iVar3 != 0) {
        uVar5 = *(uint *)(*(int *)(param_1 + 8) + 8);
        *(uint *)(iVar3 + 8) = uVar5;
      }
      if (**(int **)(param_1 + 8) == 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar3,uVar5);
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar3,uVar5);
    }
  } while( true );
}


