/*
 * Function: Huffman_AnalyzeRunLengths
 * Address: 004db2b0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Huffman_AnalyzeRunLengths(void *this,int param_1)

{
  short *psVar1;
  ushort uVar2;
  int in_EAX;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int local_10;
  uint local_c;
  ushort *local_8;
  
  uVar2 = *(ushort *)(in_EAX + 2);
  iVar5 = 0;
  local_c = 0xffffffff;
  iVar3 = 7;
  iVar4 = 4;
  if (uVar2 == 0) {
    iVar3 = 0x8a;
    iVar4 = 3;
  }
  *(undefined2 *)(in_EAX + 6 + (int)this * 4) = 0xffff;
  if (-1 < (int)this) {
    local_8 = (ushort *)(in_EAX + 6);
    local_10 = (int)this + 1;
    uVar6 = (uint)uVar2;
    do {
      uVar7 = (uint)*local_8;
      iVar5 = iVar5 + 1;
      if ((iVar3 <= iVar5) || (uVar6 != uVar7)) {
        if (iVar5 < iVar4) {
          psVar1 = (short *)(param_1 + 0xa74 + uVar6 * 4);
          *psVar1 = *psVar1 + (short)iVar5;
        }
        else if (uVar6 == 0) {
          if (iVar5 < 0xb) {
            *(short *)(param_1 + 0xab8) = *(short *)(param_1 + 0xab8) + 1;
          }
          else {
            *(short *)(param_1 + 0xabc) = *(short *)(param_1 + 0xabc) + 1;
          }
        }
        else {
          if (uVar6 != local_c) {
            psVar1 = (short *)(param_1 + 0xa74 + uVar6 * 4);
            *psVar1 = *psVar1 + 1;
          }
          *(short *)(param_1 + 0xab4) = *(short *)(param_1 + 0xab4) + 1;
        }
        iVar5 = 0;
        local_c = uVar6;
        if (uVar7 == 0) {
          iVar3 = 0x8a;
          iVar4 = 3;
        }
        else if (uVar6 == uVar7) {
          iVar3 = 6;
          iVar4 = 3;
        }
        else {
          iVar3 = 7;
          iVar4 = 4;
        }
      }
      local_8 = local_8 + 2;
      local_10 = local_10 + -1;
      uVar6 = uVar7;
    } while (local_10 != 0);
  }
  return;
}


