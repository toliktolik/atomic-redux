/*
 * Function: Unwind@005102c0
 * Address: 005102c0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005102fc) overlaps instruction at (ram,0x005102f9)
    */
/* WARNING: Removing unreachable block (ram,0x00510336) */
/* WARNING: Removing unreachable block (ram,0x005102b4) */
/* WARNING: Removing unreachable block (ram,0x005102fc) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint __fastcall
Unwind_005102c0(uint param_1,uint param_2,int param_3,undefined4 param_4,undefined4 param_5,
               uint param_6,uint param_7)

{
  uint *puVar1;
  char cVar2;
  code *pcVar3;
  undefined4 in_EAX;
  byte *pbVar4;
  uint uVar5;
  char *pcVar6;
  uint uVar7;
  undefined4 unaff_EBX;
  int unaff_EBP;
  uint *unaff_ESI;
  uint *unaff_EDI;
  undefined2 in_ES;
  byte in_CF;
  undefined8 in_MM3;
  uint *unaff_retaddr;
  
  while( true ) {
    uVar5 = CONCAT31((int3)((uint)in_EAX >> 8),0x56);
    uVar7 = param_2 + uVar5 + (uint)in_CF;
    if ((CARRY4(param_2,uVar5) || CARRY4(param_2 + uVar5,(uint)in_CF)) || uVar7 == 0) break;
    if ((POPCOUNT(uVar7 & 0xff) & 1U) == 0) {
      puVar1 = (uint *)(unaff_EBP + 10 + uVar7 * 4);
      *puVar1 = *puVar1 ^ uVar5;
      paddusb(in_MM3,_DAT_a0272890);
      swi(4);
      return *unaff_ESI;
    }
    pcVar6 = (char *)(param_1 ^ 0x2b);
    cVar2 = *pcVar6;
    *unaff_EDI = uVar5;
    unaff_EDI = (uint *)(pcVar6 + -1);
    if (unaff_EDI != (uint *)0x0 && (char)pcVar6 != cVar2) {
      return uVar5 & 0x5b4b1ac4;
    }
    pbVar4 = (byte *)(uVar5 + 0x2c9ac0c8);
    in_CF = 0;
    *pbVar4 = *pbVar4 & (byte)((uint)unaff_EBX >> 8);
    if ((POPCOUNT(*pbVar4) & 1U) == 0) goto code_r0x00510301;
    swi(4);
    do {
    } while (*pbVar4 != 0);
    in_EAX = _DAT_623c9378;
    param_1 = param_7;
    param_2 = param_6;
    unaff_EBX = param_5;
    unaff_EBP = param_3;
    unaff_ESI = unaff_retaddr;
    unaff_retaddr = (uint *)CONCAT22((short)((uint)unaff_retaddr >> 0x10),in_ES);
  }
  swi(4);
code_r0x00510301:
  pcVar3 = (code *)swi(1);
  uVar5 = (*pcVar3)();
  return uVar5;
}


