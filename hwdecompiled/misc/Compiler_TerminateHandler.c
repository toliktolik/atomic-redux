/*
 * Function: Compiler_TerminateHandler
 * Address: 004f5f03
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Compiler_TerminateHandler(void)

{
  byte bVar1;
  undefined4 *this;
  undefined4 uVar2;
  int *piVar3;
  bool bVar4;
  char cVar5;
  short sVar6;
  short sVar7;
  wint_t wVar8;
  facet *this_00;
  facet *pfVar9;
  undefined4 uVar10;
  char *pcVar11;
  int iVar12;
  _String_base *p_Var13;
  char *pcVar14;
  short *psVar15;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  uint extraout_EDX_07;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  uint extraout_EDX_10;
  uint extraout_EDX_11;
  uint extraout_EDX_12;
  uint extraout_EDX_13;
  uint extraout_EDX_14;
  uint extraout_EDX_15;
  uint extraout_EDX_16;
  uint extraout_EDX_17;
  uint extraout_EDX_18;
  uint extraout_EDX_19;
  uint extraout_EDX_20;
  uint extraout_EDX_21;
  uint extraout_EDX_22;
  uint extraout_EDX_23;
  uint extraout_EDX_24;
  uint extraout_EDX_25;
  uint extraout_EDX_26;
  uint extraout_EDX_27;
  uint extraout_EDX_28;
  uint extraout_EDX_29;
  uint extraout_EDX_30;
  uint extraout_EDX_31;
  uint uVar16;
  uint extraout_EDX_32;
  uint extraout_EDX_33;
  uint extraout_EDX_34;
  uint extraout_EDX_35;
  uint extraout_EDX_36;
  uint extraout_EDX_37;
  uint extraout_EDX_38;
  undefined4 *unaff_EBX;
  uint uVar17;
  int iVar18;
  int unaff_EBP;
  undefined4 *in_stack_fffffe9c;
  
  Assembly_BitShiftLocking();
  *(uint *)(unaff_EBP + -0x10) = DAT_00569f5c ^ *(uint *)(unaff_EBP + 4);
  uVar17 = 0;
  *(undefined4 *)(unaff_EBP + -0x44) = 0;
  SexyWidget_ProcessInput(*(void **)(unaff_EBP + 0x18),(int *)(unaff_EBP + -0x24));
  if (*(char *)(unaff_EBP + 0x14) == '\0') {
    *(undefined4 *)(unaff_EBP + -4) = 1;
    this_00 = Timer_GetElapsed();
  }
  else {
    *(undefined4 *)(unaff_EBP + -4) = 0;
    this_00 = Timer_SetInterval();
  }
  *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
  *(facet **)(unaff_EBP + -0x18) = this_00;
  SmartPointer_Destructor((uint *)(unaff_EBP + -0x24));
  SexyWidget_ProcessInput(*(void **)(unaff_EBP + 0x18),(int *)(unaff_EBP + -0x84));
  *(undefined4 *)(unaff_EBP + -4) = 2;
  pfVar9 = Locale_GetMoneyFacet();
  *(facet **)(unaff_EBP + -0x1c) = pfVar9;
  SmartPointer_Destructor((uint *)(unaff_EBP + -0x84));
  *(undefined1 *)(unaff_EBP + 0x17) = 0;
  *(undefined1 *)(unaff_EBP + -0x11) = 0;
  Collision_ClosestPoint(unaff_EBP + -100,extraout_EDX,'\0');
  *(undefined4 *)(unaff_EBP + -4) = 3;
  Collision_ClosestPoint(unaff_EBP + -0xac,extraout_EDX_00,'\0');
  iVar18 = *(int *)this_00;
  *(undefined1 *)(unaff_EBP + -4) = 4;
  (**(code **)(iVar18 + 0x24))(unaff_EBP + -0x44);
  this = *(undefined4 **)(unaff_EBP + 0xc);
  *(undefined4 *)(unaff_EBP + -0x20) = 0;
  uVar16 = extraout_EDX_01;
  while (uVar17 < 4) {
    cVar5 = *(char *)(unaff_EBP + -0x44 + uVar17);
    if (cVar5 == ' ') {
      if (uVar17 != 3) {
        while (uVar10 = equal(this,*(int **)(unaff_EBP + 0x10)), uVar16 = extraout_EDX_30,
              (char)uVar10 == '\0') {
          if (*(char *)(this + 1) == '\0') {
            Peek(this);
          }
          cVar5 = (**(code **)(**(int **)(unaff_EBP + -0x1c) + 8))
                            (0x48,*(undefined2 *)((int)this + 6));
          uVar16 = extraout_EDX_29;
          if (cVar5 == '\0') break;
          STL_String_Find(this);
        }
      }
      goto LAB_004f65dc;
    }
    if (cVar5 == '$') {
      Resource_FreeResource(this_00,unaff_EBP + -0x80);
      bVar1 = *(byte *)(*(int *)(unaff_EBP + 0x18) + 0xc);
      *(undefined1 *)(unaff_EBP + -4) = 5;
      if ((((bVar1 & 8) == 0) && (uVar17 == 3)) && (*(uint *)(unaff_EBP + -0x50) < 2)) {
        uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
        if ((char)uVar10 == '\0') {
          if (*(char *)(this + 1) == '\0') {
            Peek(this);
          }
          psVar15 = *(short **)(unaff_EBP + -0x7c);
          if (*(uint *)(unaff_EBP + -0x68) < 8) {
            psVar15 = (short *)(unaff_EBP + -0x7c);
          }
          if (*(short *)((int)this + 6) == *psVar15) goto LAB_004f6529;
        }
        List_AddNode((void *)(unaff_EBP + -0x80),0,0xffffffff);
      }
LAB_004f6529:
      psVar15 = *(short **)(unaff_EBP + -0x7c);
      if (*(uint *)(unaff_EBP + -0x68) < 8) {
        psVar15 = (short *)(unaff_EBP + -0x7c);
      }
      while (uVar10 = equal(this,*(int **)(unaff_EBP + 0x10)), uVar17 = extraout_EDX_28,
            (char)uVar10 == '\0') {
        iVar18 = *(int *)(unaff_EBP + -0x7c);
        if (*(uint *)(unaff_EBP + -0x68) < 8) {
          iVar18 = unaff_EBP + -0x7c;
        }
        if (psVar15 == (short *)(iVar18 + *(int *)(unaff_EBP + -0x6c) * 2)) break;
        if (*(char *)(this + 1) == '\0') {
          Peek(this);
          uVar17 = extraout_EDX_27;
        }
        if (*(short *)((int)this + 6) != *psVar15) break;
        psVar15 = psVar15 + 1;
        STL_String_Find(this);
      }
      iVar18 = *(int *)(unaff_EBP + -0x7c);
      if (*(uint *)(unaff_EBP + -0x68) < 8) {
        iVar18 = unaff_EBP + -0x7c;
      }
      if (psVar15 != (short *)(iVar18 + *(int *)(unaff_EBP + -0x6c) * 2)) {
        *(undefined1 *)(unaff_EBP + 0x17) = 1;
      }
      iVar18 = unaff_EBP + -0x80;
LAB_004f63fc:
      *(undefined1 *)(unaff_EBP + -4) = 4;
      Collision_ClosestPoint(iVar18,uVar17,'\x01');
      uVar16 = extraout_EDX_18;
    }
    else if (cVar5 == '+') {
      uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
      uVar16 = extraout_EDX_11;
      if ((char)uVar10 != '\0') goto LAB_004f65dc;
      iVar18 = STL_String_Insert(this_00,unaff_EBP + -0x11c);
      iVar18 = *(int *)(iVar18 + 0x14);
      *(undefined1 *)(unaff_EBP + -4) = 6;
      uVar17 = extraout_EDX_12;
      if (iVar18 == 0) {
LAB_004f63b9:
        bVar4 = false;
      }
      else {
        iVar18 = STL_String_Insert(this_00,unaff_EBP + -0x154);
        uVar17 = *(uint *)(iVar18 + 0x18);
        *(undefined1 *)(unaff_EBP + -4) = 7;
        if (uVar17 < 8) {
          psVar15 = (short *)(iVar18 + 4);
        }
        else {
          psVar15 = *(short **)(iVar18 + 4);
        }
        uVar17 = extraout_EDX_13;
        if (*(char *)(this + 1) == '\0') {
          Peek(this);
          uVar17 = extraout_EDX_14;
        }
        sVar6 = *(short *)((int)this + 6);
        sVar7 = *psVar15;
        Collision_ClosestPoint(unaff_EBP + -0x154,uVar17,'\x01');
        uVar17 = extraout_EDX_15;
        if (sVar7 != sVar6) goto LAB_004f63b9;
        bVar4 = true;
      }
      *(undefined1 *)(unaff_EBP + -4) = 4;
      Collision_ClosestPoint(unaff_EBP + -0x11c,uVar17,'\x01');
      if (bVar4) {
        STL_String_Find(this);
        p_Var13 = (_String_base *)STL_String_Insert(this_00,unaff_EBP + -0xe4);
        *(undefined1 *)(unaff_EBP + -4) = 8;
        UI_ShowWeaponDisplay
                  ((_String_base *)(unaff_EBP + -100),extraout_EDX_16,p_Var13,0,0xffffffff);
        iVar18 = unaff_EBP + -0xe4;
        uVar17 = extraout_EDX_17;
        goto LAB_004f63fc;
      }
      iVar18 = Runtime_ReallocBlock(this_00,unaff_EBP + -0x138);
      iVar18 = *(int *)(iVar18 + 0x14);
      *(undefined1 *)(unaff_EBP + -4) = 9;
      uVar17 = extraout_EDX_19;
      if (iVar18 == 0) {
LAB_004f6470:
        bVar4 = false;
      }
      else {
        iVar18 = Runtime_ReallocBlock(this_00,unaff_EBP + -0x100);
        uVar17 = *(uint *)(iVar18 + 0x18);
        *(undefined1 *)(unaff_EBP + -4) = 10;
        if (uVar17 < 8) {
          psVar15 = (short *)(iVar18 + 4);
        }
        else {
          psVar15 = *(short **)(iVar18 + 4);
        }
        uVar17 = extraout_EDX_20;
        if (*(char *)(this + 1) == '\0') {
          Peek(this);
          uVar17 = extraout_EDX_21;
        }
        sVar6 = *(short *)((int)this + 6);
        sVar7 = *psVar15;
        Collision_ClosestPoint(unaff_EBP + -0x100,uVar17,'\x01');
        uVar17 = extraout_EDX_22;
        if (sVar7 != sVar6) goto LAB_004f6470;
        bVar4 = true;
      }
      *(undefined1 *)(unaff_EBP + -4) = 4;
      Collision_ClosestPoint(unaff_EBP + -0x138,uVar17,'\x01');
      uVar16 = extraout_EDX_23;
      if (bVar4) {
        STL_String_Find(this);
        p_Var13 = (_String_base *)Runtime_ReallocBlock(this_00,unaff_EBP + -0x170);
        *(undefined1 *)(unaff_EBP + -4) = 0xb;
        UI_ShowWeaponDisplay
                  ((_String_base *)(unaff_EBP + -100),extraout_EDX_24,p_Var13,0,0xffffffff);
        *(undefined1 *)(unaff_EBP + -4) = 4;
        Collision_ClosestPoint(unaff_EBP + -0x170,extraout_EDX_25,'\x01');
        *(undefined1 *)(unaff_EBP + -0x11) = 1;
        uVar16 = extraout_EDX_26;
      }
    }
    else {
      if (cVar5 != 'v') goto LAB_004f65dc;
      iVar18 = *(int *)this_00;
      *(undefined4 *)(unaff_EBP + 0xc) = 0;
      uVar10 = (**(code **)(iVar18 + 0x1c))();
      *(undefined4 *)(unaff_EBP + -0x48) = uVar10;
      Runtime_FreeBlock(this_00,unaff_EBP + -200);
      pcVar11 = *(char **)(unaff_EBP + -0xc4);
      *(undefined1 *)(unaff_EBP + -4) = 0xc;
      if (*(uint *)(unaff_EBP + -0xb0) < 0x10) {
        pcVar11 = (char *)(unaff_EBP + -0xc4);
      }
      if (*pcVar11 < '\x01') {
        while (uVar10 = equal(this,*(int **)(unaff_EBP + 0x10)), (char)uVar10 == '\0') {
          if (*(char *)(this + 1) == '\0') {
            Peek(this);
          }
          cVar5 = (**(code **)(**(int **)(unaff_EBP + -0x1c) + 8))(4,*(undefined2 *)((int)this + 6))
          ;
          if (cVar5 == '\0') break;
          if (*(char *)(this + 1) == '\0') {
            Peek(this);
          }
          uVar10 = *this;
          uVar2 = this[1];
          STL_String_Find(this);
          *(undefined4 *)(unaff_EBP + -0x90) = uVar10;
          *(undefined4 *)(unaff_EBP + -0x8c) = uVar2;
          if ((char)uVar2 == '\0') {
            Peek((undefined4 *)(unaff_EBP + -0x90));
          }
          UI_ShowLivesDisplay((void *)(unaff_EBP + -0xac),1,
                              (short)*(undefined4 *)(unaff_EBP + -0x8a));
        }
LAB_004f624c:
        uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
        uVar17 = extraout_EDX_04;
        if ((char)uVar10 == '\0') {
          if (*(char *)(this + 1) == '\0') {
            Peek(this);
          }
          sVar6 = *(short *)((int)this + 6);
          sVar7 = (**(code **)(**(int **)(unaff_EBP + -0x18) + 4))();
          uVar17 = extraout_EDX_05;
          if (sVar6 != sVar7) goto LAB_004f62f7;
          STL_String_Find(this);
          uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
          uVar17 = extraout_EDX_06;
          if ((char)uVar10 != '\0') goto LAB_004f62f7;
          piVar3 = *(int **)(unaff_EBP + -0x1c);
          iVar18 = *(int *)(unaff_EBP + -0x48);
          do {
            if (*(char *)(this + 1) == '\0') {
              Peek(this);
            }
            cVar5 = (**(code **)(*piVar3 + 8))(4,*(undefined2 *)((int)this + 6));
            uVar17 = extraout_EDX_07;
            if (cVar5 == '\0') break;
            if (*(int *)(unaff_EBP + 0xc) < iVar18) {
              if (*(char *)(this + 1) == '\0') {
                Peek(this);
              }
              UI_ShowLivesDisplay((void *)(unaff_EBP + -0xac),1,*(undefined2 *)((int)this + 6));
              *(int *)(unaff_EBP + 0xc) = *(int *)(unaff_EBP + 0xc) + 1;
            }
            STL_String_Find(this);
            uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
            uVar17 = extraout_EDX_08;
          } while ((char)uVar10 == '\0');
        }
        else {
LAB_004f62f7:
          iVar18 = *(int *)(unaff_EBP + -0x48);
        }
        if (*(int *)(unaff_EBP + -0x98) == 0) {
          *(undefined1 *)(unaff_EBP + 0x17) = 1;
        }
        else if (*(int *)(unaff_EBP + 0xc) < iVar18) {
          iVar18 = iVar18 - *(int *)(unaff_EBP + 0xc);
          do {
            wVar8 = _btowc(0x30);
            UI_ShowLivesDisplay((void *)(unaff_EBP + -0xac),1,wVar8);
            iVar18 = iVar18 + -1;
            uVar17 = extraout_EDX_09;
          } while (iVar18 != 0);
        }
      }
      else {
        sVar6 = (**(code **)(**(int **)(unaff_EBP + -0x18) + 8))();
        iVar18 = 0;
        *(undefined4 *)(unaff_EBP + -0x28) = 0xf;
        String_SetLength((void *)(unaff_EBP + -0x40),0);
        Database_FetchResults
                  ((_String_base *)(unaff_EBP + -0x40),extraout_EDX_02,1,(_String_base)0x0);
        *(undefined1 *)(unaff_EBP + -4) = 0xd;
        uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
        if ((char)uVar10 == '\0') {
          do {
            if (*(char *)(this + 1) == '\0') {
              Peek(this);
            }
            cVar5 = (**(code **)(**(int **)(unaff_EBP + -0x1c) + 8))
                              (4,*(undefined2 *)((int)this + 6));
            if (cVar5 == '\0') {
              iVar12 = *(int *)(unaff_EBP + -0x3c);
              if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
                iVar12 = unaff_EBP + -0x3c;
              }
              if ((*(char *)(iVar12 + iVar18) == '\0') || (sVar6 == 0)) break;
              if (*(char *)(this + 1) == '\0') {
                Peek(this);
              }
              if (*(short *)((int)this + 6) != sVar6) break;
              Memory_AllocateSound((_String_base *)(unaff_EBP + -0x40),1,(_String_base)0x0);
              iVar18 = iVar18 + 1;
            }
            else {
              if (*(char *)(this + 1) == '\0') {
                Peek(this);
              }
              UI_ShowLivesDisplay((void *)(unaff_EBP + -0xac),1,*(undefined2 *)((int)this + 6));
              iVar12 = *(int *)(unaff_EBP + -0x3c);
              if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
                iVar12 = unaff_EBP + -0x3c;
              }
              if (*(char *)(iVar12 + iVar18) != '\x7f') {
                iVar12 = *(int *)(unaff_EBP + -0x3c);
                if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
                  iVar12 = unaff_EBP + -0x3c;
                }
                *(char *)(iVar12 + iVar18) = *(char *)(iVar12 + iVar18) + '\x01';
              }
            }
            STL_String_Find(this);
            uVar10 = equal(this,*(int **)(unaff_EBP + 0x10));
          } while ((char)uVar10 == '\0');
          if (iVar18 != 0) {
            iVar12 = *(int *)(unaff_EBP + -0x3c);
            if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
              iVar12 = unaff_EBP + -0x3c;
            }
            if (*(char *)(iVar12 + iVar18) < '\x01') {
              *(undefined1 *)(unaff_EBP + 0x17) = 1;
            }
            else {
              iVar18 = iVar18 + 1;
            }
          }
        }
        pcVar11 = *(char **)(unaff_EBP + -0xc4);
        if (*(uint *)(unaff_EBP + -0xb0) < 0x10) {
          pcVar11 = (char *)(unaff_EBP + -0xc4);
        }
        if (*(char *)(unaff_EBP + 0x17) == '\0') {
          while ((iVar18 != 0 && (cVar5 = *pcVar11, cVar5 != '\x7f'))) {
            iVar18 = iVar18 + -1;
            if (iVar18 != 0) {
              iVar12 = *(int *)(unaff_EBP + -0x3c);
              if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
                iVar12 = unaff_EBP + -0x3c;
              }
              if (cVar5 == *(char *)(iVar12 + iVar18)) goto LAB_004f620a;
LAB_004f622b:
              *(undefined1 *)(unaff_EBP + 0x17) = 1;
              goto LAB_004f622f;
            }
LAB_004f620a:
            if (iVar18 == 0) {
              pcVar14 = *(char **)(unaff_EBP + -0x3c);
              if (*(uint *)(unaff_EBP + -0x28) < 0x10) {
                pcVar14 = (char *)(unaff_EBP + -0x3c);
              }
              if (cVar5 < *pcVar14) goto LAB_004f622b;
            }
            if ('\0' < pcVar11[1]) {
              pcVar11 = pcVar11 + 1;
            }
          }
          *(undefined1 *)(unaff_EBP + -4) = 0xc;
          String_Reset(unaff_EBP + -0x40,(uint)pcVar11,'\x01');
          goto LAB_004f624c;
        }
LAB_004f622f:
        String_Reset(unaff_EBP + -0x40,(uint)pcVar11,'\x01');
        uVar17 = extraout_EDX_03;
      }
      *(undefined1 *)(unaff_EBP + -4) = 4;
      String_Reset(unaff_EBP + -200,uVar17,'\x01');
      this_00 = *(facet **)(unaff_EBP + -0x18);
      uVar16 = extraout_EDX_10;
    }
LAB_004f65dc:
    *(int *)(unaff_EBP + -0x20) = *(int *)(unaff_EBP + -0x20) + 1;
    if (*(char *)(unaff_EBP + 0x17) != '\0') break;
    uVar17 = *(uint *)(unaff_EBP + -0x20);
  }
  if (*(char *)(unaff_EBP + 0x17) == '\0') {
    if (1 < *(uint *)(unaff_EBP + -0x50)) {
      psVar15 = *(short **)(unaff_EBP + -0x60);
      if (*(uint *)(unaff_EBP + -0x4c) < 8) {
        psVar15 = (short *)(unaff_EBP + -0x60);
      }
      while (uVar10 = equal(this,*(int **)(unaff_EBP + 0x10)), uVar16 = extraout_EDX_32,
            (char)uVar10 == '\0') {
        iVar18 = *(int *)(unaff_EBP + -0x60);
        if (*(uint *)(unaff_EBP + -0x4c) < 8) {
          iVar18 = unaff_EBP + -0x60;
        }
        psVar15 = psVar15 + 1;
        if (psVar15 == (short *)(iVar18 + *(int *)(unaff_EBP + -0x50) * 2)) break;
        if (*(char *)(this + 1) == '\0') {
          Peek(this);
          uVar16 = extraout_EDX_31;
        }
        if (*(short *)((int)this + 6) != *psVar15) break;
        STL_String_Find(this);
      }
      iVar18 = *(int *)(unaff_EBP + -0x60);
      if (*(uint *)(unaff_EBP + -0x4c) < 8) {
        iVar18 = unaff_EBP + -0x60;
      }
      if (psVar15 != (short *)(iVar18 + *(int *)(unaff_EBP + -0x50) * 2)) goto LAB_004f665e;
    }
    if (*(char *)(unaff_EBP + -0x11) != '\0') {
      wVar8 = _btowc(0x2d);
      Compiler_UnexpectedHandler((_String_base *)(unaff_EBP + -0xac),extraout_EDX_34,0,1,wVar8);
      uVar16 = extraout_EDX_35;
    }
  }
  else {
LAB_004f665e:
    List_AddNode((void *)(unaff_EBP + -0xac),0,0xffffffff);
    uVar16 = extraout_EDX_33;
  }
  Collision_ClosestPoint(*(int *)(unaff_EBP + 8),uVar16,'\0');
  UI_ShowWeaponDisplay
            (*(_String_base **)(unaff_EBP + 8),extraout_EDX_36,(_String_base *)(unaff_EBP + -0xac),0
             ,0xffffffff);
  Collision_ClosestPoint(unaff_EBP + -0xac,extraout_EDX_37,'\x01');
  Collision_ClosestPoint(unaff_EBP + -100,extraout_EDX_38,'\x01');
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  Exception_SetMessage
            ((void *)(*(uint *)(unaff_EBP + -0x10) ^ *(uint *)(unaff_EBP + 4)),unaff_EBX,
             in_stack_fffffe9c);
  return;
}


