/*
 * Function: Unwind@00513793
 * Address: 00513793
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */
/* WARNING: This function may have set the stack pointer */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00513793(undefined4 param_1)

{
  uint *puVar1;
  longlong lVar2;
  code *pcVar3;
  int iVar4;
  int in_EAX;
  uint uVar5;
  uint uVar6;
  undefined1 *puVar7;
  int extraout_ECX;
  uint3 uVar8;
  undefined1 *unaff_EBX;
  undefined1 *puVar9;
  undefined1 *puVar10;
  int unaff_EBP;
  int unaff_ESI;
  int unaff_EDI;
  undefined2 in_CS;
  undefined2 uVar11;
  undefined2 in_GS;
  int in_GS_OFFSET;
  byte in_CF;
  byte bVar12;
  bool bVar13;
  byte bVar14;
  byte in_AF;
  byte bVar15;
  byte bVar16;
  byte in_TF;
  byte in_IF;
  byte bVar17;
  byte in_NT;
  byte in_AC;
  byte in_VIF;
  byte in_VIP;
  byte in_ID;
  undefined8 uVar18;
  
  uVar5 = in_EAX + -0x6854574c + (uint)in_CF;
  puVar7 = *(undefined1 **)(unaff_ESI + -0x77 + uVar5 * 2);
  uVar6 = (int)puVar7 - (int)unaff_EBX;
  uVar6 = CONCAT22((short)((uint)unaff_ESI >> 0x10),
                   CONCAT11(((int)uVar6 < 0) << 7 | (uVar6 == 0) << 6 | in_AF << 4 |
                            ((POPCOUNT(uVar6 & 0xff) & 1U) == 0) << 2 | 2 | puVar7 < unaff_EBX,
                            (char)unaff_ESI));
  if (puVar7 >= unaff_EBX) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  out(0x3a,uVar6);
  puVar1 = (uint *)(unaff_EDI + 0x34 +
                   CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(*unaff_EBX,(char)param_1)));
  _DAT_baeb392e = unaff_EBX;
  *puVar1 = *puVar1 | uVar6;
  bVar12 = 0;
  bVar17 = 0;
  bVar14 = *(byte *)(unaff_EBP + -0x16) & (byte)((uint)unaff_EBX >> 8);
  bVar16 = (char)bVar14 < '\0';
  bVar15 = bVar14 == 0;
  bVar14 = (POPCOUNT(bVar14) & 1U) == 0;
  uVar11 = 0x3188;
  puVar9 = (undefined1 *)0xbaeb3926;
  uRambaeb3926 = 0x5137bd;
  uRambaeb392a = in_CS;
  uVar18 = func_0xdb3426e3();
  *(uint *)(puVar9 + -4) =
       (uint)(in_NT & 1) * 0x4000 | (uint)(bVar17 & 1) * 0x800 | (uint)(in_IF & 1) * 0x200 |
       (uint)(in_TF & 1) * 0x100 | (uint)(bVar16 & 1) * 0x80 | (uint)(bVar15 & 1) * 0x40 |
       (uint)(in_AF & 1) * 0x10 | (uint)(bVar14 & 1) * 4 | (uint)(bVar12 & 1) |
       (uint)(in_ID & 1) * 0x200000 | (uint)(in_VIP & 1) * 0x100000 | (uint)(in_VIF & 1) * 0x80000 |
       (uint)(in_AC & 1) * 0x40000;
  *(int *)(puVar9 + -8) = unaff_EBP;
  *(undefined1 **)(puVar9 + -0xc) = puVar9 + -8;
  uVar8 = (uint3)((ulonglong)uVar18 >> 0x28) ^
          (uint3)((uint)*(undefined4 *)(uVar5 + 0x78eb58b5) >> 8);
  puVar7 = (undefined1 *)CONCAT22((short)((int)uVar18 + -0x2489d702 + (uint)bVar12 >> 0x10),in_GS);
  if (extraout_ECX == 0) {
    puVar7 = &DAT_72650b0e;
  }
  else {
    iVar4 = *(int *)(puVar9 + -0x2b1c);
    *(undefined4 *)(puVar9 + -0x2b1c) = 0xf3ce482d;
    uVar5 = uVar5 | *(uint *)(extraout_ECX + 0x2c);
    if ((int)uVar5 < 1) {
      lVar2 = (longlong)*(int *)(uVar5 + 0x35) * -0x16;
      puVar10 = puVar7 + -4;
      *(uint *)(puVar7 + -4) = uVar5;
      if (SBORROW4(CONCAT31(uVar8,0x7b),1)) {
        pcVar3 = (code *)swi(0x94);
        uVar18 = (*pcVar3)();
        puVar1 = (uint *)(in_GS_OFFSET + (int)((ulonglong)uVar18 >> 0x20) + 0x1b);
        *puVar1 = *puVar1 & (uint)uVar18;
        return;
      }
      puVar7 = (undefined1 *)CONCAT31((int3)((uint)(puVar9 + -0x2b1c) >> 8),-((int)lVar2 != lVar2));
      bVar13 = *(undefined1 **)(puVar7 + iVar4 + -0xd) < puVar10;
      goto code_r0x00513845;
    }
    *(undefined2 *)(puVar9 + -0x2b20) = uVar11;
  }
  puVar1 = (uint *)(CONCAT31(uVar8,'{' - *(byte *)(uVar5 + 0xc5a212bf)) + -0x2a);
  uVar6 = (uint)(0x7b < *(byte *)(uVar5 + 0xc5a212bf));
  bVar13 = 0xcd79bc6 < *puVar1 || CARRY4(*puVar1 + 0xf3286439,uVar6);
  *puVar1 = *puVar1 + 0xf3286439 + uVar6;
code_r0x00513845:
  uVar6 = *(uint *)(puVar7 + -0x79);
  *(uint *)(puVar7 + -0x79) = uVar6 << 5 | (uint)(CONCAT14(bVar13,uVar6) >> 0x1c);
  uRam72401b60 = (char)puVar7;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


