/*
 * Function: Registration_EncryptAndValidateUserCode
 * Address: 004afc80
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Registration_EncryptAndValidateUserCode(int param_1,byte *param_2)

{
  bool bVar1;
  char *pcVar2;
  char cVar3;
  char *pcVar4;
  int iVar5;
  uint uVar6;
  int extraout_ECX;
  undefined1 *puVar7;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  byte *pbVar8;
  uint extraout_EDX_02;
  byte *extraout_EDX_03;
  byte *extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  uint extraout_EDX_07;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  undefined4 ****ppppuVar9;
  uint uVar10;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff14;
  undefined4 *in_stack_ffffff18;
  undefined4 local_d8 [5];
  undefined4 local_c4 [5];
  undefined4 local_b0 [5];
  undefined4 local_9c [5];
  undefined1 local_88 [4];
  uint local_84;
  undefined4 local_74;
  uint local_70;
  undefined1 local_6c [4];
  uint local_68;
  undefined4 local_58;
  uint local_54;
  int local_50;
  _String_base local_4c [4];
  uint local_48;
  int local_38;
  uint local_34;
  _String_base local_30 [4];
  undefined4 ***local_2c [4];
  uint local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5169fa;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  uVar10 = 0;
  local_70 = 0xf;
  local_74 = 0;
  local_84 = local_84 & 0xffffff00;
  pcVar2 = "42BF94023BBA6D040C8B81D9";
  do {
    pcVar4 = pcVar2;
    pcVar2 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  ExceptionList = &local_10;
  String_Assign(local_88,(_String_base *)&DAT_00536ae0,(uint)(pcVar4 + -0x536ae0));
  local_8 = 0;
  TextureManager_CompressTextures(&stack0xffffff14,(int)local_88);
  local_8._0_1_ = 2;
  if (0xf < local_70) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_84,extraout_EDX);
  }
  local_70 = 0xf;
  local_74 = 0;
  local_84 = local_84 & 0xffffff00;
  local_54 = 0xf;
  local_58 = 0;
  local_68 = local_68 & 0xffffff00;
  pcVar2 = "11";
  do {
    pcVar4 = pcVar2;
    pcVar2 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign(local_6c,(_String_base *)&DAT_00536adc,(uint)(pcVar4 + -0x536adc));
  local_8._0_1_ = 3;
  TextureManager_CompressTextures(local_9c,(int)local_6c);
  if (0xf < local_54) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX_00);
  }
  local_54 = 0xf;
  local_58 = 0;
  local_68 = local_68 & 0xffffff00;
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  bVar1 = false;
  local_8._0_1_ = 6;
  uVar6 = extraout_EDX_00;
  if (*(int *)(param_1 + 0x14) != 0) {
    do {
      if (*(uint *)(param_1 + 0x18) < 0x10) {
        iVar5 = param_1 + 4;
      }
      else {
        iVar5 = *(int *)(param_1 + 4);
      }
      if (*(char *)(iVar5 + uVar10) == ' ') {
        if (local_38 != 0) {
          bVar1 = true;
        }
      }
      else {
        if (bVar1) {
          pcVar2 = " ";
          do {
            pcVar4 = pcVar2;
            pcVar2 = pcVar4 + 1;
          } while (*pcVar4 != '\0');
          Enemy_ProcessSatelliteLogic
                    (local_4c,(_String_base *)&DAT_00531ca0,(uint)(pcVar4 + -0x531ca0));
          bVar1 = false;
          uVar6 = extraout_EDX_01;
        }
        if (*(uint *)(param_1 + 0x18) < 0x10) {
          iVar5 = param_1 + 4;
        }
        else {
          iVar5 = *(int *)(param_1 + 4);
        }
        pbVar8 = (byte *)CONCAT31((int3)(uVar6 >> 8),*(undefined1 *)(iVar5 + uVar10));
        if (DAT_00537a40 != '\0') {
          puVar7 = &DAT_00537a40;
          cVar3 = DAT_00537a40;
          do {
            if (cVar3 == (char)pbVar8) {
              pbVar8 = (byte *)CONCAT31((int3)((uint)pbVar8 >> 8),puVar7[1]);
            }
            cVar3 = puVar7[2];
            puVar7 = puVar7 + 2;
          } while (cVar3 != '\0');
        }
        uVar6 = Assembly_BitwiseShiftOperation((byte)pbVar8,pbVar8);
        Memory_AllocateSound(local_4c,1,SUB41(uVar6,0));
        uVar6 = extraout_EDX_02;
      }
      uVar10 = uVar10 + 1;
    } while (uVar10 < *(uint *)(param_1 + 0x14));
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffffff00);
  local_8 = CONCAT31(local_8._1_3_,7);
  PowerUp_ProcessThunderstrike(local_30,uVar6,(_String_base *)(local_50 + 0x24),0,0xffffffff);
  uVar10 = 0;
  pbVar8 = extraout_EDX_03;
  if (local_1c != 0) {
    do {
      ppppuVar9 = (undefined4 ****)local_2c[0];
      if (local_18 < 0x10) {
        ppppuVar9 = local_2c;
      }
      uVar6 = Assembly_BitwiseShiftOperation(*(byte *)((int)ppppuVar9 + uVar10),pbVar8);
      *(char *)((int)ppppuVar9 + uVar10) = (char)uVar6;
      uVar10 = uVar10 + 1;
      pbVar8 = extraout_EDX_04;
    } while (uVar10 < local_1c);
  }
  pcVar2 = "\n";
  do {
    pcVar4 = pcVar2;
    pcVar2 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  Enemy_ProcessSatelliteLogic(local_4c,(_String_base *)&DAT_0052d384,(uint)(pcVar4 + -0x52d384));
  Enemy_UpdateAI(local_4c,(int)local_30,0,0xffffffff);
  TextureManager_GetAtlasRegion(local_b0,(int)local_4c,0x5e);
  local_8._0_1_ = 8;
  TextureManager_UnpackTextures(local_d8,param_2);
  local_8._0_1_ = 9;
  TextureManager_ReloadTextures(local_d8,local_c4,(int)local_9c,&stack0xffffff14);
  local_8._0_1_ = 10;
  Texture_Resize(local_c4,(int)local_b0);
  local_8._0_1_ = 9;
  Texture_Constructor(local_c4,extraout_EDX_05);
  local_8._0_1_ = 8;
  Texture_Constructor(local_d8,extraout_EDX_06);
  local_8._0_1_ = 7;
  Texture_Constructor(local_b0,extraout_EDX_07);
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,(uint)local_2c[0]);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c[0] = (undefined4 ***)((uint)local_2c[0] & 0xffffff00);
  if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,extraout_EDX_08);
  }
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  local_8 = CONCAT31(local_8._1_3_,2);
  Texture_Constructor(local_9c,extraout_EDX_08);
  local_8 = 0xffffffff;
  Texture_Constructor((undefined4 *)&stack0xffffff14,extraout_EDX_09);
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff14,in_stack_ffffff18);
  return;
}


