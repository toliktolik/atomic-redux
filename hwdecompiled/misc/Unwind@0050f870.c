/*
 * Function: Unwind@0050f870
 * Address: 0050f870
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0050f957) overlaps instruction at (ram,0x0050f952)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_0050f870(uint param_1,int param_2)

{
  char cVar1;
  longlong lVar2;
  code *pcVar3;
  byte bVar4;
  uint in_EAX;
  uint uVar5;
  uint *puVar6;
  int *piVar7;
  uint uVar8;
  int iVar9;
  uint unaff_EBX;
  undefined4 *puVar10;
  undefined1 *puVar11;
  uint *puVar12;
  undefined4 *unaff_EBP;
  undefined4 *puVar13;
  undefined4 *unaff_ESI;
  undefined4 *puVar14;
  undefined4 *unaff_EDI;
  undefined4 *puVar15;
  undefined2 in_ES;
  undefined2 in_CS;
  byte in_CF;
  bool bVar16;
  byte in_AF;
  bool in_ZF;
  bool bVar17;
  char in_SF;
  char in_OF;
  undefined2 in_FPUControlWord;
  undefined2 in_FPUStatusWord;
  undefined2 in_FPUTagWord;
  undefined2 in_FPULastInstructionOpcode;
  undefined4 in_FPUDataPointer;
  undefined4 in_FPUInstructionPointer;
  undefined4 *in_stack_000000b1;
  uint uStack_4;
  
  uVar8 = param_1;
  iVar9 = param_2;
  puVar13 = unaff_EBP;
  if (in_ZF || in_OF != in_SF) goto LAB_0050f868;
  while( true ) {
    param_2 = iVar9 + -1;
    if (!SBORROW4(iVar9,1)) {
      pcVar3 = (code *)swi(3);
      (*pcVar3)();
      return;
    }
    uVar5 = CONCAT31((int3)(in_EAX >> 8),-in_CF);
    if (param_1 == 0) {
      cRam700985c6 = cRam700985c6 - (char)(in_EAX >> 8);
      uVar8 = 0;
      uStack_4 = 0;
    }
    else {
      unaff_EBX = 0x6412b285;
      uVar8 = param_1 + 1;
      puVar13 = (undefined4 *)0x285188e8;
      uVar5 = (uint)&stack0x00000000 & 0x700985c6;
    }
    bVar16 = CARRY1((byte)uVar5,*(byte *)((int)unaff_ESI + -0x7e));
    uVar5 = CONCAT31((int3)(uVar5 >> 8),(byte)uVar5 + *(byte *)((int)unaff_ESI + -0x7e));
    puVar15 = unaff_EDI;
    in_CF = in_AF;
    if (!bVar16) break;
    while( true ) {
      puVar10 = &stack0x000000b1;
      piVar7 = (int *)&stack0x000000b1;
      *puVar15 = *unaff_ESI;
      uVar5 = uVar5 ^ *(uint *)((int)unaff_ESI + 0x7f);
      in_EAX = CONCAT31((int3)(unaff_EBX >> 8),(byte)unaff_EBX | (byte)uVar8);
      in_stack_000000b1 = (undefined4 *)0x4;
      unaff_ESI = in_stack_000000b1;
      unaff_EDI = (undefined4 *)((int)puVar15 + 3);
      puVar14 = (undefined4 *)0x4;
      lVar2 = (longlong)*(int *)(uVar5 + 0x21) * -0x37bcd2e0;
      bVar16 = (int)lVar2 != lVar2;
      unaff_EBP = (undefined4 *)CONCAT31((int3)((ulonglong)lVar2 >> 8),-bVar16);
      in_stack_000000b1 = puVar13;
      cVar1 = '\x1d';
      do {
        puVar13 = puVar13 + -1;
        puVar10 = puVar10 + -1;
        *puVar10 = *puVar13;
        cVar1 = cVar1 + -1;
      } while ('\0' < cVar1);
      uVar8 = uVar5 - 1;
      _DAT_3e20e58c = in_FPUControlWord;
      _DAT_3e20e590 = in_FPUStatusWord;
      _DAT_3e20e594 = in_FPUTagWord;
      _DAT_3e20e598 = in_FPUInstructionPointer;
      _DAT_3e20e59e = in_FPULastInstructionOpcode;
      _DAT_3e20e5a0 = in_FPUDataPointer;
      if (uVar8 == 0 || unaff_EDI != (undefined4 *)0x0) {
        *(int *)(iVar9 + 0x3c77f46) =
             (int)&stack0x000000b1 +
             (uint)(&stack0x000000b1 < (undefined1 *)0x2b853d1) + *(int *)(iVar9 + 0x3c77f46);
        bVar16 = false;
        bVar4 = (byte)((uint)param_2 >> 8) | (byte)param_2;
        param_2 = CONCAT22((short)((uint)param_2 >> 0x10),CONCAT11(bVar4,(byte)param_2));
        bVar17 = bVar4 == 0;
        goto code_r0x0050f92f;
      }
      in_CF = 9 < ((byte)&stack0x000000b1 & 0xf) | in_CF;
      uVar5 = CONCAT31((int3)((uint)&stack0x000000b1 >> 8),(byte)&stack0x000000b1 + in_CF * '\x06')
              & 0xffffff0f;
      uVar5 = CONCAT22((short)(uVar5 >> 0x10),
                       CONCAT11((char)((uint)&stack0x000000b1 >> 8) + in_CF,(char)uVar5));
      in_AF = in_CF;
      if (!bVar16) break;
      unaff_EBX = in_EAX + 1;
      puVar13 = unaff_EBP;
      puVar15 = puVar15 + 1;
    }
    while (param_1 = uVar8 - 1, bVar16 = (int)uVar8 < 1, uVar8 = param_1, iVar9 = param_2,
          unaff_EBX = uVar5, puVar13 = unaff_EBP, param_1 == 0 || bVar16) {
LAB_0050f868:
      uVar5 = (uint)in_CF;
      in_CF = 0xda8fc86b < in_EAX || CARRY4(in_EAX + 0x25703794,uVar5);
      uVar5 = in_EAX + 0x25703794 + uVar5;
      in_EAX = unaff_EBX;
    }
  }
  while( true ) {
    in_CF = 9 < ((byte)uVar5 & 0xf) | in_CF;
    bVar4 = (byte)uVar5 + in_CF * '\x06';
    unaff_EBP = (undefined4 *)
                ((int)puVar13 +
                (-(uint)(byte)(0x90 < (bVar4 & 0xf0) | bVar16 | in_CF * (0xf9 < bVar4)) -
                *(int *)((int)puVar13 + param_2 * 2 + 0x53)));
    puVar14 = (undefined4 *)((int)unaff_ESI + -1);
    *(char *)(unaff_EDI + 8) = *(char *)(unaff_EDI + 8) << 3;
    puVar6 = (uint *)(CONCAT31((int3)(uVar5 >> 8),0x25) | 0x11246af4);
    *(char *)((int)unaff_EDI + 0x7f) = *(char *)((int)unaff_EDI + 0x7f) + -0x39;
    bVar16 = CARRY4(uVar8,*puVar6);
    uVar8 = uVar8 + *puVar6;
    bVar17 = uVar8 == 0;
    piVar7 = (int *)CONCAT31((int3)((uint)puVar6 >> 8),-bVar16);
    in_EAX = unaff_EBX;
code_r0x0050f92f:
    if (bVar16 || bVar17) goto code_r0x0050f965;
    out(*puVar14,(short)param_2);
    puVar11 = (undefined1 *)((uint)&uStack_4 ^ *(uint *)(param_2 + 0x632ff9f));
    unaff_EBX = CONCAT22((short)(in_EAX >> 0x10),CONCAT11(0x3f,(char)in_EAX));
    puVar13 = (undefined4 *)CONCAT31((int3)((uint)piVar7 >> 8),0xff);
    if ((int)puVar11 < 1) break;
    if (puVar11 == (undefined1 *)0x0) goto code_r0x0050f948;
    unaff_ESI = (undefined4 *)((int)puVar14 + 5);
    *(byte *)(param_2 + -0x7d) = *(byte *)(param_2 + -0x7d) ^ 0xc5;
    bVar16 = false;
    uVar5 = (uint)unaff_EBP & 0xffffffaf;
  }
  puVar12 = (uint *)(puVar11 + -4);
  puVar11 = puVar11 + -4;
  *puVar12 = uVar8;
  unaff_EBP = puVar13;
code_r0x0050f948:
  piVar7 = (int *)((int)unaff_EDI + 0x273f176b);
  iVar9 = *piVar7;
  *piVar7 = *piVar7 << 0x1d;
  bVar16 = (byte)unaff_EBP < *(byte *)(uVar8 + 0x51) ||
           (byte)((byte)unaff_EBP - *(byte *)(uVar8 + 0x51)) < (iVar9 << 0x1c < 0);
  cVar1 = '?' - *(char *)(unaff_EBX + 0x8f6963fb);
  bVar17 = (char)(cVar1 - bVar16) < '\0';
  if (!bVar17) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  uStack_4 = in_EAX;
  if ((bool)cVar1 != bVar16 &&
      (SBORROW1('?',*(char *)(unaff_EBX + 0x8f6963fb)) != SBORROW1(cVar1,bVar16)) == bVar17) {
    pcVar3 = (code *)swi(0x60);
    (*pcVar3)();
    *(undefined2 *)(puVar11 + -4) = in_ES;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  *(undefined2 *)(puVar11 + -1) = in_CS;
  *(undefined4 *)(puVar11 + -5) = 0x50f965;
  piVar7 = (int *)func_0xea514202();
code_r0x0050f965:
  *piVar7 = *piVar7 + (int)piVar7;
  return;
}


