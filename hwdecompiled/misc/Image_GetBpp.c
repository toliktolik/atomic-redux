/*
 * Function: Image_GetBpp
 * Address: 0049cee0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Image_GetBpp(void *this,undefined1 *param_1,undefined1 *param_2,undefined1 *param_3)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined4 uVar3;
  uint uVar4;
  undefined1 *puVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  puVar1 = param_1;
  local_8 = 0xffffffff;
  uStack_c = 0x515650;
  local_10 = ExceptionList;
  iVar7 = *(int *)((int)this + 4);
  uVar4 = (int)param_3 - (int)param_2;
  if (iVar7 == 0) {
    uVar8 = 0;
  }
  else {
    uVar8 = *(int *)((int)this + 0xc) - iVar7;
  }
  if (uVar4 != 0) {
    if (iVar7 == 0) {
      iVar6 = 0;
    }
    else {
      iVar6 = *(int *)((int)this + 8) - iVar7;
    }
    if (-iVar6 - 1U < uVar4) {
      ExceptionList = &local_10;
      Image_DrawPolygon();
      ExceptionList = local_10;
      return;
    }
    if (iVar7 == 0) {
      iVar6 = 0;
    }
    else {
      iVar6 = *(int *)((int)this + 8) - iVar7;
    }
    if (uVar8 < iVar6 + uVar4) {
      if (-(uVar8 >> 1) - 1 < uVar8) {
        uVar8 = 0;
      }
      else {
        uVar8 = uVar8 + (uVar8 >> 1);
      }
      if (iVar7 == 0) {
        iVar6 = 0;
      }
      else {
        iVar6 = *(int *)((int)this + 8) - iVar7;
      }
      if (uVar8 < iVar6 + uVar4) {
        if (iVar7 == 0) {
          iVar7 = 0;
        }
        else {
          iVar7 = *(int *)((int)this + 8) - iVar7;
        }
        uVar8 = iVar7 + uVar4;
      }
      ExceptionList = &local_10;
      puVar1 = (undefined1 *)operator_new(uVar8);
      local_8 = 0;
      puVar2 = (undefined1 *)Vector_IsNormalized(*(undefined1 **)((int)this + 4),param_1,puVar1);
      puVar2 = (undefined1 *)Vector_IsNormalized(param_2,param_3,puVar2);
      Vector_IsNormalized(param_1,*(undefined1 **)((int)this + 8),puVar2);
      iVar7 = *(int *)((int)this + 4);
      if (iVar7 == 0) {
        iVar6 = 0;
      }
      else {
        iVar6 = *(int *)((int)this + 8) - iVar7;
      }
      if (iVar7 != 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar7,uVar4 + iVar6);
      }
      *(undefined1 **)((int)this + 0xc) = puVar1 + uVar8;
      *(undefined1 **)((int)this + 8) = puVar1 + uVar4 + iVar6;
      *(undefined1 **)((int)this + 4) = puVar1;
      ExceptionList = local_10;
      return;
    }
    puVar2 = *(undefined1 **)((int)this + 8);
    if ((uint)((int)puVar2 - (int)param_1) < uVar4) {
      puVar5 = param_1 + uVar4;
      param_1 = &stack0xffffffcc;
      ExceptionList = &local_10;
      List_FindNode(puVar1,puVar2,puVar5);
      puVar2 = param_2 + ((int)*(undefined1 **)((int)this + 8) - (int)puVar1);
      local_8 = 2;
      Vector_IsNormalized(puVar2,param_3,*(undefined1 **)((int)this + 8));
      param_3 = &stack0xffffffd4;
      *(uint *)((int)this + 8) = *(int *)((int)this + 8) + uVar4;
    }
    else {
      param_1 = puVar2 + -uVar4;
      ExceptionList = &local_10;
      uVar3 = List_FindNode(param_1,puVar2,puVar2);
      puVar5 = param_1;
      *(undefined4 *)((int)this + 8) = uVar3;
      param_1 = &stack0xffffffcc;
      Collision_CheckOverlap(&param_1,(int)puVar1,(int)puVar5,puVar2);
      param_1 = &stack0xffffffd4;
      puVar2 = param_3;
    }
    Collision_ComputeImpulse(&param_2,param_2,puVar2,puVar1);
  }
  ExceptionList = local_10;
  return;
}


