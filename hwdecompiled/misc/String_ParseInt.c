/*
 * Function: String_ParseInt
 * Address: 004d6770
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl String_ParseInt(int param_1,short *param_2,uint param_3,int *param_4,uint *param_5)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  uVar4 = (int)*param_2 - param_3;
  uVar1 = uVar4;
  if ((int)uVar4 < 0) {
    uVar1 = -uVar4;
    uVar4 = uVar4 - 1;
  }
  iVar6 = 0;
  if (uVar1 != 0) {
    do {
      uVar1 = (int)uVar1 >> 1;
      iVar6 = iVar6 + 1;
    } while (uVar1 != 0);
    if (0xb < iVar6) {
      *(undefined4 *)(**(int **)(param_1 + 0x20) + 0x14) = 6;
      (**(code **)**(undefined4 **)(param_1 + 0x20))(*(undefined4 **)(param_1 + 0x20));
    }
  }
  piVar2 = (int *)String_StartsWith(param_4[iVar6],(int)*(char *)(iVar6 + 0x400 + (int)param_4));
  if (((char)piVar2 != '\0') &&
     ((iVar6 == 0 || (piVar2 = (int *)String_StartsWith(uVar4,iVar6), (char)piVar2 != '\0')))) {
    iVar6 = 0;
    param_4 = &DAT_00542c34;
    do {
      param_3 = (uint)param_2[*param_4];
      if (param_3 == 0) {
        iVar6 = iVar6 + 1;
      }
      else {
        for (; 0xf < iVar6; iVar6 = iVar6 + -0x10) {
          piVar2 = (int *)String_StartsWith(param_5[0xf0],(int)(char)param_5[0x13c]);
          if ((char)piVar2 == '\0') goto LAB_004d6901;
        }
        uVar1 = param_3;
        if ((int)param_3 < 0) {
          uVar1 = -param_3;
          param_3 = param_3 - 1;
        }
        iVar5 = (int)uVar1 >> 1;
        iVar3 = 1;
        if (iVar5 != 0) {
          do {
            iVar5 = iVar5 >> 1;
            iVar3 = iVar3 + 1;
          } while (iVar5 != 0);
          if (10 < iVar3) {
            *(undefined4 *)(**(int **)(param_1 + 0x20) + 0x14) = 6;
            (**(code **)**(undefined4 **)(param_1 + 0x20))(*(undefined4 **)(param_1 + 0x20));
          }
        }
        iVar6 = iVar6 * 0x10 + iVar3;
        piVar2 = (int *)String_StartsWith(param_5[iVar6],
                                          (int)*(char *)(iVar6 + 0x400 + (int)param_5));
        if (((char)piVar2 == '\0') ||
           (piVar2 = (int *)String_StartsWith(param_3,iVar3), (char)piVar2 == '\0'))
        goto LAB_004d6901;
        iVar6 = 0;
      }
      piVar2 = param_4 + 1;
      param_4 = piVar2;
    } while ((int)piVar2 < 0x542d30);
    if ((iVar6 < 1) ||
       (piVar2 = (int *)String_StartsWith(*param_5,(int)(char)param_5[0x100]), (char)piVar2 != '\0')
       ) {
      return CONCAT31((int3)((uint)piVar2 >> 8),1);
    }
  }
LAB_004d6901:
  return (uint)piVar2 & 0xffffff00;
}


