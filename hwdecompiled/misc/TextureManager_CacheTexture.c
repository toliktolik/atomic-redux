/*
 * Function: TextureManager_CacheTexture
 * Address: 004bac20
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void * __thiscall TextureManager_CacheTexture(void *this,void *param_1,void *param_2)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int extraout_ECX;
  ushort extraout_DX;
  int extraout_EDX;
  void *extraout_EDX_00;
  void *this_00;
  uint extraout_EDX_01;
  int iVar5;
  undefined4 local_28 [5];
  undefined4 local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x517258;
  local_10 = ExceptionList;
  iVar5 = 0;
  local_14 = 0;
  ExceptionList = &local_10;
  Texture_CopyToBuffer(local_28);
  local_8 = 0;
  iVar2 = Graphics_SetTransform((int)param_2);
  iVar3 = Graphics_SetTransform((int)this);
  iVar4 = extraout_ECX;
  if (iVar3 <= iVar2) {
    iVar4 = extraout_EDX;
  }
  iVar4 = Graphics_SetTransform(iVar4);
  this_00 = extraout_EDX_00;
  if (0 < iVar4) {
    do {
      Texture_SetTarget(this_00,iVar5);
      uVar1 = Texture_SetTarget(this,iVar5);
      Texture_GetInternalFormat(local_28,iVar5,extraout_DX | uVar1);
      iVar5 = iVar5 + 1;
      this_00 = param_2;
    } while (iVar5 < iVar4);
  }
  TextureManager_Shutdown(param_1,(int)local_28);
  Texture_Constructor(local_28,extraout_EDX_01);
  ExceptionList = local_10;
  return param_1;
}


