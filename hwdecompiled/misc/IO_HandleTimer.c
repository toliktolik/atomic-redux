/*
 * Function: IO_HandleTimer
 * Address: 0050542e
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */

void __fastcall IO_HandleTimer(uint param_1,byte *param_2)

{
  uint *puVar1;
  int *piVar2;
  uint uVar3;
  undefined4 uVar4;
  byte bVar5;
  byte bVar6;
  bool bVar7;
  bool bVar8;
  byte bVar9;
  char cVar10;
  ushort uVar11;
  int *piVar12;
  char extraout_CH;
  undefined2 uVar14;
  undefined2 uVar15;
  undefined4 *puVar17;
  undefined4 *unaff_EBP;
  char *unaff_ESI;
  char *pcVar18;
  int *piVar19;
  int *unaff_EDI;
  byte in_CF;
  bool bVar20;
  char in_AF;
  byte bVar21;
  undefined8 uVar22;
  undefined4 auStack_c [2];
  undefined1 uStack_4;
  undefined3 uStack_3;
  int iVar13;
  byte bVar16;
  
  bVar21 = 0;
  piVar12 = (int *)&DAT_16a88eef;
  while( true ) {
    bVar5 = *param_2;
    bVar16 = (byte)((uint)param_2 >> 8);
    bVar6 = bVar16 + *param_2;
    uVar15 = CONCAT11(bVar6 + in_CF,(char)param_2);
    param_2 = (byte *)CONCAT22((short)((uint)param_2 >> 0x10),uVar15);
    pcVar18 = unaff_ESI + (uint)bVar21 * -2 + 1;
    cVar10 = *unaff_ESI;
    _uStack_4 = CONCAT31(0xffffc5,uStack_4);
    bVar9 = (byte)param_1 & 0x1f;
    unaff_ESI = (char *)((uint)pcVar18 >> bVar9);
    bVar8 = (param_1 & 0x1f) != 0;
    bVar7 = (param_1 & 0x1f) != 0;
    bVar20 = !bVar7 && (POPCOUNT((uint)&stack0x00000001 & 0xff) & 1U) == 0 ||
             bVar7 && (POPCOUNT((uint)unaff_ESI & 0xff) & 1U) == 0;
    uVar14 = (undefined2)((uint)unaff_EDI >> 0x10);
    if (bVar20) {
      if (bVar9 != 1 && SCARRY4((int)&stack0x00000000,1) || bVar9 == 1 && (int)pcVar18 < 0) {
        out(*(undefined4 *)unaff_ESI,uVar15);
        unaff_ESI = (char *)0x920e7270;
        func_0x02cc399c();
        uVar22 = func_0x6d5c4184();
        cVar10 = extraout_CH;
        goto code_r0x005053fc;
      }
      piVar19 = (int *)(CONCAT22(uVar14,CONCAT11((!bVar7 && (int)&stack0x00000001 < 0 ||
                                                 bVar7 && (int)unaff_ESI < 0) << 7 |
                                                 (!bVar7 && &stack0x00000000 ==
                                                            (undefined1 *)0xffffffff ||
                                                 bVar7 && unaff_ESI == (char *)0x0) << 6 |
                                                 in_AF << 4 | bVar20 << 2 | 2U |
                                                 (!bVar8 && (CARRY1(bVar16,bVar5) ||
                                                            CARRY1(bVar6,in_CF)) ||
                                                 bVar8 && ((uint)pcVar18 >> bVar9 - 1 & 1) != 0),
                                                 cVar10)) + -0x202be9af);
      *piVar19 = *piVar19 - (int)piVar12;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    cVar10 = cVar10 + 'H';
    iVar13 = CONCAT31((int3)((uint)unaff_EDI >> 8),cVar10);
    puVar1 = (uint *)(iVar13 + 7);
    uVar3 = *puVar1;
    *puVar1 = *puVar1 - 0x27;
    piVar19 = piVar12 + (uint)bVar21 * -2 + 1;
    *piVar12 = iVar13;
    *(int *)((int)piVar19 + 0x3b) = iVar13;
    uVar11 = (ushort)(byte)(cVar10 + (char)((uint)unaff_EDI >> 8) * -9);
    piVar12 = (int *)CONCAT22(uVar14,uVar11);
    uVar22 = CONCAT44(param_2,piVar12);
    bVar21 = 1;
    param_1 = param_1 - 1;
    if (param_1 != 0 && uVar11 != 0) break;
    unaff_EBP[-0x305980c] = (int)unaff_EBP + (uint)(0x26 < uVar3) + unaff_EBP[-0x305980c];
    unaff_EBP = (undefined4 *)((int)unaff_EBP + -1);
    if (-1 < (int)unaff_EBP) {
      return;
    }
    piVar2 = (int *)((int)piVar12 + 0x16a88eef);
    in_CF = (int *)*piVar2 < piVar19;
    *piVar2 = *piVar2 - (int)piVar19;
    unaff_EDI = piVar19;
  }
  while( true ) {
    *piVar19 = (int)uVar22;
    cVar10 = -0x65;
    pcVar18 = (char *)((int)(piVar19 + (uint)bVar21 * -2 + 1) + (uint)bVar21 * -2 + 1);
    uVar14 = (undefined2)((ulonglong)uVar22 >> 0x20);
    if (SBORROW1((char)uVar22,(char)piVar19[(uint)bVar21 * -2 + 1])) break;
    piVar12 = (int *)(pcVar18 + (uint)bVar21 * -8 + 4);
    uVar4 = in(uVar14);
    *(undefined4 *)pcVar18 = uVar4;
code_r0x005053fc:
    pcVar18 = (char *)((int)((ulonglong)uVar22 >> 0x20) + -0x452b2c56);
    *pcVar18 = *pcVar18 - cVar10;
    piVar19 = piVar12;
  }
  out(uVar14,(int)uVar22);
  *(undefined4 *)pcVar18 = *(undefined4 *)unaff_ESI;
  puVar17 = auStack_c + 1;
  cVar10 = '\x19';
  do {
    unaff_EBP = unaff_EBP + -1;
    puVar17 = puVar17 + -1;
    *puVar17 = *unaff_EBP;
    cVar10 = cVar10 + -1;
  } while ('\0' < cVar10);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


