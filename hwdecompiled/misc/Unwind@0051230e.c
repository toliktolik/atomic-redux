/*
 * Function: Unwind@0051230e
 * Address: 0051230e
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005122d1) overlaps instruction at (ram,0x005122cf)
    */
/* WARNING: Removing unreachable block (ram,0x005122d1) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int * __fastcall Unwind_0051230e(int param_1,int param_2)

{
  uint *puVar1;
  undefined2 *puVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  byte bVar7;
  int *piVar8;
  byte bVar9;
  undefined1 uVar10;
  int *piVar11;
  undefined4 in_EAX;
  int extraout_ECX;
  uint uVar12;
  int iVar13;
  int unaff_EBX;
  int *piVar14;
  uint *unaff_ESI;
  int unaff_EDI;
  undefined2 in_CS;
  undefined2 uVar15;
  bool bVar16;
  bool bVar17;
  bool bVar18;
  byte bVar19;
  byte in_AF;
  byte in_TF;
  byte in_IF;
  byte in_NT;
  byte in_AC;
  byte in_VIF;
  byte in_VIP;
  byte in_ID;
  undefined8 uVar20;
  int *unaff_retaddr;
  
  do {
    if (param_1 != 0) {
      *(char *)(unaff_EDI + 0x43fad9d8) =
           *(char *)(unaff_EDI + 0x43fad9d8) << ((byte)param_1 & 0x1f);
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    out((short)param_2,(char)in_EAX);
    bVar16 = *unaff_ESI < *(uint *)(unaff_EDI + -1);
    bVar9 = (char)in_EAX + (char)((uint)in_EAX >> 8) * -0x1f;
    bVar7 = bVar9 - 0x23;
    bVar17 = 0x22 < bVar9 || CARRY1(bVar7,bVar16);
    bVar9 = (byte)unaff_EBX + *(byte *)((int)unaff_ESI + 0x4291f9db);
    bVar18 = CARRY1((byte)unaff_EBX,*(byte *)((int)unaff_ESI + 0x4291f9db)) || CARRY1(bVar9,bVar17);
    unaff_EBX = CONCAT31((int3)((uint)unaff_EBX >> 8),bVar9 + bVar17);
    LOCK();
    puVar2 = *(undefined2 **)(unaff_EBX + 0x78);
    *(undefined1 **)(unaff_EBX + 0x78) = &stack0x00000004;
    UNLOCK();
    uVar15 = *puVar2;
    piVar11 = (int *)0xfc3888cb;
    piVar8 = (int *)(CONCAT31((int3)((uint)in_EAX >> 8),bVar7 + bVar16) & 0xffff00ff);
    do {
      piVar14 = piVar8;
      bVar16 = SBORROW4(param_2,*unaff_retaddr);
      iVar13 = param_2 - *unaff_retaddr;
      param_2 = iVar13 - (uint)bVar18;
      if (param_2 != 0 && (bVar16 != SBORROW4(iVar13,(uint)bVar18)) == param_2 < 0) {
        out(unaff_ESI[1],(short)param_2);
        return piVar11;
      }
      iVar13 = CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(0xf9,(char)unaff_EBX));
      puVar1 = (uint *)segment(uVar15,0xf3a1);
      *puVar1 = *puVar1 & 0xda50424e;
      bVar18 = false;
      unaff_EBX = iVar13 + -1;
      piVar11 = piVar14;
      piVar8 = unaff_retaddr;
    } while (SBORROW4(iVar13,1));
    bRamf0e8502b = bRamf0e8502b ^ (byte)piVar14;
                    /* WARNING: Bad instruction - Truncating control flow here */
    uVar12 = param_2 - 1;
    bVar16 = 9 < ((byte)unaff_retaddr & 0xf);
    bVar19 = bVar16 | in_AF;
    bVar7 = in_NT & 1;
    bVar9 = in_TF & 1;
    bVar3 = in_ID & 1;
    bVar4 = in_VIP & 1;
    bVar5 = in_VIF & 1;
    bVar6 = in_AC & 1;
    LOCK();
    *(uint *)((int)unaff_ESI + 6) = uVar12;
    UNLOCK();
    uVar15 = 0x9468;
    uVar20 = func_0x46b48ec7(in_CS);
    _DAT_1c6e2b14 = (undefined4)uVar20;
    unaff_ESI = (uint *)(((uint)bVar7 * 0x4000 | (uint)SBORROW4(param_2,1) * 0x800 |
                          (uint)(in_IF & 1) * 0x200 | (uint)bVar9 * 0x100 |
                          (uint)((int)uVar12 < 0) * 0x80 | (uint)(uVar12 == 0) * 0x40 |
                          (uint)(bVar16 | in_AF & 1) * 0x10 |
                          (uint)((POPCOUNT(uVar12 & 0xff) & 1U) == 0) * 4 |
                          (uint)(bVar16 | in_AF & 1) | (uint)bVar3 * 0x200000 |
                          (uint)bVar4 * 0x100000 | (uint)bVar5 * 0x80000 | (uint)bVar6 * 0x40000) +
                        1);
    uVar10 = in(0x29);
    in_EAX = CONCAT31((int3)((ulonglong)uVar20 >> 8),uVar10);
    in_IF = 0;
    param_2 = CONCAT31((int3)((ulonglong)uVar20 >> 0x28),0x96);
    unaff_EDI = (int)unaff_retaddr + 1;
    param_1 = extraout_ECX;
    in_CS = uVar15;
    in_AF = bVar19;
    unaff_retaddr = (int *)0x2;
  } while( true );
}


