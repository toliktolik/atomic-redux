/*
 * Function: Network_ProcessClientMessages
 * Address: 004af130
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Network_ProcessClientMessages(undefined4 *param_1)

{
  uint uVar1;
  uint *puVar2;
  int iVar3;
  uint uVar4;
  char ****ppppcVar5;
  long lVar6;
  _String_base *p_Var7;
  uint *puVar8;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff8c;
  undefined4 *in_stack_ffffff90;
  uint local_5c;
  _String_base local_58 [20];
  uint local_44;
  uint local_40;
  _String_base local_3c [4];
  char ***local_38 [4];
  uint local_28;
  uint local_24;
  int local_20;
  undefined4 *local_1c;
  char local_18 [4];
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined1 local_8;
  undefined3 uStack_7;
  
  local_8 = 0xff;
  uStack_7 = 0xffffff;
  uStack_c = 0x516828;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_1c = param_1;
  if (*(char *)(param_1 + 0x13d) == '\0') {
    ExceptionList = &local_10;
    iVar3 = Network_GetClientState((int)(param_1 + 2));
    if (iVar3 == 0) {
      *(undefined1 *)((int)param_1 + 0x4f6) = 1;
      STL_Map_AssignOperator(local_1c + 0x148,param_1 + 0x145);
      puVar2 = (uint *)param_1[0x146];
      if (puVar2 == (uint *)0x0) {
        puVar8 = (uint *)0x0;
      }
      else {
        puVar8 = (uint *)*puVar2;
      }
      STL_Map_EraseRange(param_1 + 0x145,&local_20,puVar8,puVar2);
      puVar2 = (uint *)local_1c[0x14c];
      if (puVar2 == (uint *)0x0) {
        puVar8 = (uint *)0x0;
      }
      else {
        puVar8 = (uint *)*puVar2;
      }
      Image_DrawCircle(local_1c + 0x14b,&local_20,puVar8,puVar2);
      local_20 = 0;
      Network_GetClientMessage(param_1 + 2,local_58);
      uStack_7 = 0;
      while (local_44 != 0) {
        local_8 = 0;
        local_18[0] = '\n';
        uVar4 = UI_Widget_ResetTransform(local_58,local_18,0,1);
        if (uVar4 == 0xffffffff) {
          uVar4 = local_44;
        }
        GameMenu_ProcessRegistrationScreen(local_58,local_3c,0,uVar4);
        local_8 = 1;
        while (local_28 != 0) {
          ppppcVar5 = (char ****)local_38[0];
          if (local_24 < 0x10) {
            ppppcVar5 = local_38;
          }
          if (*(char *)((int)ppppcVar5 + (local_28 - 1)) != '\r') {
            ppppcVar5 = (char ****)local_38[0];
            if (local_24 < 0x10) {
              ppppcVar5 = local_38;
            }
            if (*(char *)((int)ppppcVar5 + (local_28 - 1)) != ' ') {
              if (local_28 != 0) {
                if (local_20 == 0) {
                  ppppcVar5 = (char ****)local_38[0];
                  if (local_24 < 0x10) {
                    ppppcVar5 = local_38;
                  }
                  lVar6 = _atol((char *)ppppcVar5);
                  *(bool *)((int)local_1c + 0x4f5) = lVar6 != 0;
                }
                else if (local_20 == 1) {
                  PowerUp_ProcessThunderstrike
                            ((_String_base *)(local_1c + 0x13e),local_24,local_3c,0,0xffffffff);
                }
                else {
                  (**(code **)*local_1c)(local_3c,1);
                }
                local_20 = local_20 + 1;
              }
              break;
            }
          }
          uVar1 = local_28 - 1;
          if (local_28 < uVar1) {
            Memory_AllocateSound(local_3c,uVar1 - local_28,(_String_base)0x0);
          }
          else {
            PowerUp_ProcessFlakCannon(local_3c,uVar1,0xffffffff);
          }
        }
        if ((int)local_44 <= (int)(uVar4 + 1)) {
          local_8 = 0;
          if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(local_44,local_24);
          }
          break;
        }
        p_Var7 = GameMenu_ProcessRegistrationScreen
                           (local_58,(_String_base *)&stack0xffffff8c,uVar4 + 1,0xffffffff);
        local_8 = 2;
        PowerUp_ProcessThunderstrike(local_58,extraout_EDX,p_Var7,0,0xffffffff);
        if (0xf < local_5c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler((int)in_stack_ffffff90,extraout_EDX_00);
        }
        local_5c = 0xf;
        in_stack_ffffff90 = (undefined4 *)((uint)in_stack_ffffff90 & 0xffffff00);
        local_8 = 0;
        if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,(uint)local_38[0]);
        }
        local_24 = 0xf;
        local_28 = 0;
        local_38[0] = (char ***)((uint)local_38[0] & 0xffffff00);
      }
      local_8 = 0;
      Game_ProcessQueuedCommands((int)local_1c);
      if (0xf < local_40) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,extraout_EDX_01);
      }
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff8c,in_stack_ffffff90);
  return;
}


