/*
 * Function: Unwind@005170e0
 * Address: 005170e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005170bd) overlaps instruction at (ram,0x005170bc)
    */

void Unwind_005170e0(void)

{
  uint *puVar1;
  uint uVar2;
  char *pcVar4;
  uint *puVar5;
  longlong lVar6;
  code *pcVar7;
  char cVar8;
  int iVar9;
  int iVar10;
  uint unaff_EBX;
  uint unaff_EBP;
  int unaff_ESI;
  uint uVar11;
  int unaff_EDI;
  undefined2 in_CS;
  undefined2 in_DS;
  char cVar12;
  bool bVar13;
  undefined8 uVar14;
  uint unaff_retaddr;
  uint uStack_4;
  uint uVar3;
  
  puVar5 = (uint *)(unaff_EDI + 4);
  bVar13 = (unaff_retaddr & 0x80) != 0;
  cVar12 = (unaff_retaddr & 0x10) != 0;
  uVar11 = unaff_ESI + 1 + (uint)((unaff_retaddr & 0x400) != 0) * -2;
  uStack_4 = 0x5170e9;
  func_0xe7eb093b();
  if (!bVar13) {
    puVar5 = (uint *)(uVar11 + 0x41);
    *puVar5 = *puVar5 | uVar11;
    pcVar7 = (code *)swi(3);
    (*pcVar7)();
    return;
  }
  uStack_4 = CONCAT22(uStack_4._2_2_,in_CS);
  uVar14 = func_0xf17a0c06();
  iVar10 = (int)((ulonglong)uVar14 >> 0x20);
  puVar1 = (uint *)(iVar10 + -0x36);
  *puVar1 = *puVar1 ^ unaff_EBX;
  cVar8 = in(0x66);
  iVar9 = (CONCAT22((short)((ulonglong)uVar14 >> 0x10),
                    CONCAT11(((int)*puVar1 < 0) << 7 | (*puVar1 == 0) << 6 | cVar12 << 4 |
                             ((POPCOUNT(*puVar1 & 0xff) & 1U) == 0) << 2,(char)uVar14)) | 0x200) - 1
  ;
  if (iVar9 == 0) {
    if (*(int *)(iVar10 + (unaff_EBP ^ unaff_EBX) * 4) * 0x3ee1a83 == 1 || cVar8 != '\x12') {
      pcVar7 = (code *)swi(1);
      (*pcVar7)();
      return;
    }
  }
  else {
    *puVar5 = *puVar5 - iVar9;
    uVar11 = *puVar5;
    uVar2 = *puVar5;
    uVar3 = *puVar5;
    while ((POPCOUNT(uVar3 & 0xff) & 1U) != 0) {
      if (iVar9 == 1 || uVar2 == 0) goto code_r0x005170cf;
      lVar6 = (longlong)iRame0553abe * 0x7c2c80f9;
      if (((int)lVar6 != lVar6) != (int)uVar11 < 0) goto code_r0x005170df;
      iVar9 = CONCAT31((int3)((ulonglong)lVar6 >> 8),0x29);
      uStack_4 = unaff_EBP ^ unaff_EBX;
      pcVar4 = (char *)segment(in_DS,0xf19);
      *pcVar4 = cVar8;
    }
    in(0x9e);
    puVar1 = (uint *)((iVar9 - (int)&uStack_4) + -0x7d5c301f);
    *puVar1 = *puVar1 & unaff_EBX;
code_r0x005170cf:
    pcVar4 = (char *)((int)&uStack_4 + (int)puVar5 * 2);
    *pcVar4 = *pcVar4 + -0x7d;
  }
code_r0x005170df:
  do {
                    /* WARNING: Do nothing block with infinite loop */
  } while( true );
}


