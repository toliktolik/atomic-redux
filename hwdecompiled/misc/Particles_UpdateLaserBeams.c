/*
 * Function: Particles_UpdateLaserBeams
 * Address: 0041add0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Particles_UpdateLaserBeams(void *param_1)

{
  double dVar1;
  double dVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 uVar5;
  double *pdVar6;
  uint uVar7;
  int *piVar8;
  int *piVar9;
  int iVar10;
  ulonglong uVar11;
  int iVar12;
  char cVar13;
  undefined4 uVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  int iVar18;
  int iVar19;
  char cVar20;
  undefined1 uVar21;
  char cVar22;
  
  *(undefined4 *)((int)param_1 + 0x1e8) = *(undefined4 *)((int)param_1 + 0x1e4);
LAB_0041ade9:
  iVar10 = *(int *)(*(int *)((int)param_1 + 0x1e8) + 4);
  if (iVar10 != 0) {
    *(int *)((int)param_1 + 0x1e8) = iVar10;
    if (*(int *)((int)param_1 + 0x1f0) == 0) {
      pdVar6 = (double *)0x0;
    }
    else {
      pdVar6 = (double *)**(undefined4 **)((int)param_1 + 0x1e8);
    }
    if (pdVar6[3] < _DAT_0052c560 != (NAN(pdVar6[3]) || NAN(_DAT_0052c560))) {
      pdVar6[3] = pdVar6[4] + pdVar6[3];
    }
    dVar1 = pdVar6[2] + *pdVar6;
    *pdVar6 = dVar1;
    dVar2 = pdVar6[3] + pdVar6[1];
    pdVar6[1] = dVar2;
    if (((dVar1 < _DAT_0052c860 == (NAN(dVar1) || NAN(_DAT_0052c860))) && (dVar1 <= _DAT_0052c858))
       && (dVar2 < _DAT_0052a0c0 == (NAN(dVar2) || NAN(_DAT_0052a0c0)))) goto code_r0x0041ae6c;
    if (_DAT_0052c958 < dVar2) goto LAB_0041ae90;
    goto LAB_0041aef6;
  }
  *(undefined4 *)((int)param_1 + 0x1e8) = *(undefined4 *)((int)param_1 + 0x1e4);
LAB_0041af9b:
  do {
    piVar8 = (int *)((int)param_1 + 0x1e4);
    iVar10 = *(int *)(*(int *)((int)param_1 + 0x1e8) + 4);
    if (iVar10 == 0) {
      *(int *)((int)param_1 + 0x1e8) = *piVar8;
      do {
        do {
          iVar10 = *(int *)(*(int *)((int)param_1 + 0x1e8) + 4);
          if (iVar10 == 0) {
            return;
          }
          *(int *)((int)param_1 + 0x1e8) = iVar10;
          if (*(int *)((int)param_1 + 0x1f0) == 0) {
            iVar10 = 0;
          }
          else {
            iVar10 = **(int **)((int)param_1 + 0x1e8);
          }
        } while (*(char *)(iVar10 + 0x30) != '\0');
        uVar5 = *(undefined4 *)(iVar10 + 0x2c);
        uVar14 = *(undefined4 *)(iVar10 + 0x28);
        iVar15 = *(int *)(iVar10 + 0x38);
        iVar17 = 0;
        uVar11 = Math_FloatToUInt64();
        iVar16 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        uVar5 = Projectile_HitDetectionSystem
                          (param_1,*(void **)(iVar10 + 0x34),(int)uVar11,iVar16,iVar15,iVar17,
                           (double)CONCAT44(uVar5,uVar14));
      } while ((char)uVar5 == '\0');
      LinkedList_PopNode(piVar8);
      return;
    }
    *(int *)((int)param_1 + 0x1e8) = iVar10;
    if (*(int *)((int)param_1 + 0x1f0) == 0) {
      piVar9 = (int *)0x0;
    }
    else {
      piVar9 = (int *)**(undefined4 **)((int)param_1 + 0x1e8);
    }
    if ((char)piVar9[0xc] == '\0') {
      *(undefined4 *)((int)param_1 + 0x1f8) = *(undefined4 *)((int)param_1 + 500);
      do {
        do {
          iVar10 = *(int *)(*(int *)((int)param_1 + 0x1f8) + 4);
          if (iVar10 == 0) goto LAB_0041af9b;
          *(int *)((int)param_1 + 0x1f8) = iVar10;
          if (*(int *)((int)param_1 + 0x200) == 0) {
            piVar8 = (int *)0x0;
          }
          else {
            piVar8 = (int *)**(undefined4 **)((int)param_1 + 0x1f8);
          }
        } while ((char)piVar8[0x12] == '\0');
        cVar20 = (char)piVar8[0xc];
        cVar22 = '\x01';
        iVar18 = 0;
        uVar11 = Math_FloatToUInt64();
        iVar15 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        iVar16 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        iVar17 = (int)uVar11;
        iVar4 = Boss_ProcessHeadBustczar((int)piVar8);
        iVar10 = piVar9[0xe];
        cVar13 = '\0';
        iVar12 = 0;
        uVar11 = Math_FloatToUInt64();
        iVar19 = (int)uVar11;
        uVar11 = Math_FloatToUInt64();
        uVar5 = Collision_PixelPerfectDetection
                          ((void *)piVar9[0xd],(int)uVar11,iVar19,iVar10,iVar12,cVar13,iVar4,iVar17,
                           iVar16,iVar15,iVar18,cVar20,cVar22);
      } while ((char)uVar5 == '\0');
      dVar1 = *(double *)(piVar9 + 10);
      piVar8[0xd] = 0xff;
      *(double *)(piVar8 + 0x16) = *(double *)(piVar8 + 0x16) - dVar1;
      if (*(double *)(piVar8 + 0x16) < _DAT_0052a0c0 ==
          (NAN(*(double *)(piVar8 + 0x16)) || NAN(_DAT_0052a0c0))) {
        iVar10 = **(int **)((int)param_1 + 0x5c);
        uVar11 = Math_FloatToUInt64();
        (**(code **)(iVar10 + 0xb8))(9,(int)uVar11);
        iVar10 = *(int *)((int)param_1 + 0x5c);
        iVar12 = -1;
        uVar21 = 1;
        iVar19 = 0x1e;
        iVar4 = 0x40080000;
        iVar17 = 0;
        iVar16 = 0x3fa99999;
        iVar15 = -0x66666666;
        uVar14 = 0x40000000;
        uVar5 = 0;
        uVar11 = Math_FloatToUInt64();
        ParticleEffects_CreateParticles
                  ((int)param_1 + 0x2e8,*(int *)(iVar10 + 0x6e0),*piVar9,piVar9[1],piVar9[2],
                   piVar9[3],*(double *)(piVar8 + 6),*(double *)(piVar8 + 8),(int)uVar11,
                   (double)CONCAT44(uVar14,uVar5),iVar15,iVar16,iVar17,iVar4,iVar19,uVar21,iVar12);
      }
      else {
        (**(code **)(*piVar8 + 0x10))();
        if (piVar8 != *(int **)((int)param_1 + 0x2e4)) {
          Boss_BattleshipCannonSystem((int)piVar8);
          LinkedList_PopNode((int *)((int)param_1 + 0x1e4));
          goto LAB_0041af9b;
        }
      }
      LinkedList_PopNode((int *)((int)param_1 + 0x1e4));
      goto LAB_0041af9b;
    }
    if ((*(int *)(*(int *)((int)param_1 + 0x5c) + 0x96c) != 0) ||
       (_DAT_0052a0c0 < *(double *)((int)param_1 + 0x148))) {
      cVar22 = '\x01';
      cVar13 = '\0';
      iVar18 = 0;
      uVar11 = Math_FloatToUInt64();
      iVar16 = (int)uVar11;
      iVar19 = *(int *)((int)param_1 + 0x98) + 2;
      uVar11 = Math_FloatToUInt64();
      iVar17 = (int)uVar11;
      iVar10 = piVar9[0xe];
      iVar15 = *(int *)(*(int *)((int)param_1 + 0x5c) + 0x708);
      cVar20 = '\0';
      iVar12 = 0;
      uVar11 = Math_FloatToUInt64();
      iVar4 = (int)uVar11;
      uVar11 = Math_FloatToUInt64();
      uVar5 = Collision_PixelPerfectDetection
                        ((void *)piVar9[0xd],(int)uVar11,iVar4,iVar10,iVar12,cVar20,iVar15,iVar17,
                         iVar19,iVar16,iVar18,cVar13,cVar22);
      if ((char)uVar5 == '\0') goto LAB_0041b256;
      LinkedList_PopNode(piVar8);
      if (*(double *)((int)param_1 + 0x148) < _DAT_0052a0c0 !=
          (*(double *)((int)param_1 + 0x148) == _DAT_0052a0c0)) {
        *(int *)(*(int *)((int)param_1 + 0x5c) + 0x96c) =
             *(int *)(*(int *)((int)param_1 + 0x5c) + 0x96c) + -1;
        if ((*(int **)((int)param_1 + 0x5c))[0x25b] == 0) {
          iVar10 = **(int **)((int)param_1 + 0x5c);
          uVar11 = Math_FloatToUInt64();
          (**(code **)(iVar10 + 0xb8))(0x59,(int)uVar11);
        }
        *(undefined4 *)((int)param_1 + 0x148) = 0;
        *(undefined4 *)((int)param_1 + 0x14c) = 0x40220000;
        iVar10 = **(int **)((int)param_1 + 0x5c);
        uVar11 = Math_FloatToUInt64();
        (**(code **)(iVar10 + 0xb8))(0xe,(int)uVar11);
      }
    }
    else {
LAB_0041b256:
      cVar22 = '\x01';
      cVar13 = '\0';
      iVar18 = 0;
      uVar11 = Math_FloatToUInt64();
      iVar17 = (int)uVar11;
      iVar10 = *(int *)((int)param_1 + 0x98);
      uVar11 = Math_FloatToUInt64();
      iVar4 = (int)uVar11;
      iVar15 = piVar9[0xe];
      iVar16 = *(int *)(*(int *)((int)param_1 + 0x5c) + 0x6cc);
      cVar20 = '\0';
      iVar12 = 0;
      uVar11 = Math_FloatToUInt64();
      iVar19 = (int)uVar11;
      uVar11 = Math_FloatToUInt64();
      uVar5 = Collision_PixelPerfectDetection
                        ((void *)piVar9[0xd],(int)uVar11,iVar19,iVar15,iVar12,cVar20,iVar16,iVar4,
                         iVar10,iVar17,iVar18,cVar13,cVar22);
      if (((char)uVar5 != '\0') && (*(int *)((int)param_1 + 0x80) == 0)) {
        LinkedList_PopNode(piVar8);
        Particles_UpdateFire(param_1);
      }
    }
  } while( true );
code_r0x0041ae6c:
  if (_DAT_0052c958 < dVar2) {
LAB_0041ae90:
    cVar20 = *(char *)(pdVar6 + 6);
    uVar11 = Math_FloatToUInt64();
    pdVar6 = (double *)operator_new(0x10);
    *pdVar6 = (double)(int)uVar11;
    *(undefined4 *)(pdVar6 + 1) = 0xff;
    *(uint *)((int)pdVar6 + 0xc) = (uint)(cVar20 == '\0');
    puVar3 = (undefined4 *)operator_new(0xc);
    uVar5 = *(undefined4 *)((int)param_1 + 0x2dc);
    puVar3[1] = 0;
    puVar3[2] = uVar5;
    *(undefined4 **)(*(int *)((int)param_1 + 0x2dc) + 4) = puVar3;
    *puVar3 = pdVar6;
    *(undefined4 **)((int)param_1 + 0x2dc) = puVar3;
    *(int *)((int)param_1 + 0x2e0) = *(int *)((int)param_1 + 0x2e0) + 1;
LAB_0041aef6:
    iVar10 = *(int *)((int)param_1 + 0x1e8);
    if (iVar10 != *(int *)((int)param_1 + 0x1e4)) {
      if (iVar10 == *(int *)((int)param_1 + 0x1ec)) {
        *(undefined4 *)((int)param_1 + 0x1ec) = *(undefined4 *)(iVar10 + 8);
      }
      uVar7 = *(uint *)(iVar10 + 8);
      *(undefined4 *)(uVar7 + 4) = *(undefined4 *)(iVar10 + 4);
      iVar10 = *(int *)(*(int *)((int)param_1 + 0x1e8) + 4);
      if (iVar10 != 0) {
        uVar7 = *(uint *)(*(int *)((int)param_1 + 0x1e8) + 8);
        *(uint *)(iVar10 + 8) = uVar7;
      }
      if (**(int **)((int)param_1 + 0x1e8) != 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar10,uVar7);
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar10,uVar7);
    }
    *(int *)(*(int *)((int)param_1 + 0x5c) + 0xb1c) =
         *(int *)(*(int *)((int)param_1 + 0x5c) + 0xb1c) + 1;
    *(int *)((int)param_1 + 0x33c) = *(int *)((int)param_1 + 0x33c) + 1;
  }
  goto LAB_0041ade9;
}


