/*
 * Function: StringBuffer_FormattedExtraction
 * Address: 00414ca0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x00414dcf) */

void __thiscall StringBuffer_FormattedExtraction(void *this,_String_base *param_1)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb0;
  undefined4 *in_stack_ffffffb4;
  _String_base local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x510498;
  local_10 = ExceptionList;
  uVar1 = *(uint *)((int)this + 0x40);
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = 0;
  if (((uVar1 & 2) == 0) && (uVar3 = **(uint **)((int)this + 0x24), uVar3 != 0)) {
    if (uVar3 <= *(uint *)((int)this + 0x3c)) {
      uVar3 = *(uint *)((int)this + 0x3c);
    }
    local_1c = 0xf;
    local_20 = 0;
    local_30 = (uint)local_30._1_3_ << 8;
    ExceptionList = &local_10;
    String_Assign(local_34,(_String_base *)**(undefined4 **)((int)this + 0x14),
                  uVar3 - (int)**(undefined4 **)((int)this + 0x14));
    *(undefined4 *)(param_1 + 0x18) = 0xf;
    *(undefined4 *)(param_1 + 0x14) = 0;
    local_8 = 0;
    param_1[4] = (_String_base)0x0;
    PowerUp_ProcessThunderstrike(param_1,(uint)local_34,local_34,0,0xffffffff);
    iVar2 = extraout_ECX;
    uVar1 = extraout_EDX;
  }
  else {
    if (((uVar1 & 4) != 0) || (**(int **)((int)this + 0x20) == 0)) {
      in_stack_ffffffb4 = (undefined4 *)((uint)in_stack_ffffffb4 & 0xffffff00);
      ExceptionList = &local_10;
      *(undefined4 *)(param_1 + 0x18) = 0xf;
      *(undefined4 *)(param_1 + 0x14) = 0;
      local_8 = 2;
      param_1[4] = (_String_base)0x0;
      PowerUp_ProcessThunderstrike(param_1,uVar1,(_String_base *)&stack0xffffffb0,0,0xffffffff);
      goto LAB_00414ddb;
    }
    local_20 = 0;
    local_1c = 0xf;
    local_30 = (uint)local_30._1_3_ << 8;
    ExceptionList = &local_10;
    String_Assign(local_34,(_String_base *)**(undefined4 **)((int)this + 0x10),
                  (**(int **)((int)this + 0x30) - (int)**(undefined4 **)((int)this + 0x10)) +
                  **(int **)((int)this + 0x20));
    *(undefined4 *)(param_1 + 0x18) = 0xf;
    *(undefined4 *)(param_1 + 0x14) = 0;
    local_8 = 1;
    param_1[4] = (_String_base)0x0;
    PowerUp_ProcessThunderstrike(param_1,extraout_EDX_00,local_34,0,0xffffffff);
    iVar2 = extraout_ECX_00;
    uVar1 = local_30;
  }
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar2,uVar1);
  }
LAB_00414ddb:
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb0,in_stack_ffffffb4);
  return;
}


