/*
 * Function: Unwind@00511aa8
 * Address: 00511aa8
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00511ac5) overlaps instruction at (ram,0x00511ac4)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Removing unreachable block (ram,0x00511abd) */
/* WARNING: Removing unreachable block (ram,0x00511b7d) */

undefined4 __fastcall Unwind_00511aa8(int *param_1,uint param_2)

{
  uint *puVar1;
  byte *pbVar2;
  undefined4 uVar3;
  int iVar4;
  byte bVar5;
  uint uVar6;
  undefined6 uVar7;
  undefined1 uVar8;
  byte bVar9;
  byte bVar14;
  int *piVar11;
  undefined3 uVar15;
  uint in_EAX;
  uint uVar12;
  int *piVar13;
  int *piVar16;
  int iVar17;
  byte bVar19;
  undefined6 *unaff_EBX;
  undefined6 *puVar18;
  int *unaff_EBP;
  undefined4 *unaff_ESI;
  int *piVar20;
  int *unaff_EDI;
  undefined4 *puVar21;
  undefined2 in_CS;
  bool bVar22;
  byte in_AF;
  undefined2 in_FPUControlWord;
  undefined1 unaff_retaddr;
  undefined1 uStack00000004;
  int *piVar10;
  
  do {
    _uStack00000004 = unaff_EBX;
    out(*unaff_ESI,(short)param_2);
    puVar1 = (uint *)(param_2 + 0x9a4bd5c6);
    bVar9 = (byte)param_1 & 0x1f;
    *puVar1 = *puVar1 << bVar9 | *puVar1 >> 0x20 - bVar9;
    bVar9 = (byte)in_EAX;
    if (!SBORROW1(*(char *)(unaff_ESI + 1),(char)*unaff_EDI)) {
      *(undefined4 *)((int)param_1 + -0x55188152) = 0x5ef5610a;
      *(byte *)(in_EAX + 0x3e) = *(byte *)(in_EAX + 0x3e) | bVar9;
      *(char *)((int)unaff_EBP + -0x4de6167d) =
           *(char *)((int)unaff_EBP + -0x4de6167d) + (byte)param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    uVar7 = *_uStack00000004;
    in_AF = 9 < (bVar9 & 0xf) | in_AF;
    uVar12 = CONCAT31((int3)(in_EAX >> 8),bVar9 + in_AF * -6) & 0xffffff0f;
    swi(4);
    piVar13 = (int *)in(0x9a);
    puVar18 = _uStack00000004;
    while( true ) {
      bVar9 = (byte)piVar13;
      puVar21 = (undefined4 *)uVar7;
      if (-1 < (char)(bVar9 + 0x19)) {
        do {
          iVar17 = param_2 + 1;
          uVar12 = (uint)piVar13 >> 8;
          param_2 = (uint)unaff_EBP & 0xffff;
          *(undefined2 *)(puVar21 + 0x10) = in_FPUControlWord;
          iVar4 = *piVar13;
          uVar3 = in((short)unaff_EBP);
          *puVar21 = uVar3;
          piVar13 = param_1;
          param_1 = (int *)(iVar4 * 0x5d);
          puVar21 = puVar21 + 1;
        } while (-1 < (char)((byte)((uint)iVar17 >> 8) & (byte)uVar12));
        do {
                    /* WARNING: Do nothing block with infinite loop */
        } while( true );
      }
      if (bVar9 < 0xe7) break;
      puVar18 = (undefined6 *)(*(int *)((int)puVar18 + -0x32) * -0x651a67ea);
    }
    unaff_ESI = (undefined4 *)
                (CONCAT22((short)(uVar12 >> 0x10),CONCAT11((char)(in_EAX >> 8) - in_AF,(char)uVar12)
                         ) + 1);
    *(byte *)((int)param_1 + -0x77) = *(byte *)((int)param_1 + -0x77) << 1 | bVar9 < 0xe7;
    piVar20 = (int *)((int)(undefined4 *)uVar7 + -1);
    while( true ) {
      unaff_EDI = piVar20;
      piVar10 = piVar13;
      bVar9 = (byte)piVar10 + 0x93;
      unaff_EBX = (undefined6 *)CONCAT31((int3)((uint)piVar10 >> 8),bVar9);
      in_EAX = (int)puVar18 + 1;
      if (in_EAX == 0 || SCARRY4((int)puVar18,1) != (int)in_EAX < 0) break;
      param_2 = (int)in_EAX >> 0x1f;
      unaff_EBP = (int *)((int)unaff_EBP + 1);
      piVar20 = (int *)((int)unaff_EDI + 1);
      uVar12 = (uint)(0x6c < (byte)piVar10);
      uVar6 = (int)puVar18 + 0x51294c72;
      bVar22 = in_EAX < 0xaed6b38f || uVar6 < uVar12;
      piVar11 = (int *)(uVar6 - uVar12);
      piVar13 = piVar11;
      puVar18 = unaff_EBX;
      if (piVar11 == (int *)0x0 ||
          (SBORROW4(in_EAX,-0x51294c71) != SBORROW4(uVar6,uVar12)) != (int)piVar11 < 0) {
        bVar14 = (byte)((uint)piVar11 >> 8);
        bVar19 = (byte)((uint)piVar10 >> 8);
        bVar5 = bVar19 + bVar14;
        piVar16 = (int *)CONCAT31((int3)((uint)param_1 >> 8),
                                  ((char)param_1 - bVar14) -
                                  (CARRY1(bVar19,bVar14) || CARRY1(bVar5,bVar22)));
        in_AF = ((uint)unaff_EBP & 0x1000) != 0;
        param_2 = param_2 - 1;
        pbVar2 = (byte *)(param_2 + (int)piVar20);
        *pbVar2 = *pbVar2 | bVar9;
        uVar15 = (undefined3)((uint)unaff_EBP >> 8);
        if ((POPCOUNT(*pbVar2) & 1U) != 0) {
          *piVar20 = (*piVar20 - param_2) - (uint)((byte)unaff_EBP < 199);
          LOCK();
          *(char *)CONCAT31(uVar15,((byte)unaff_EBP + 0x39 ^ 0x54) + 0x9d) =
               (char)((uint)((int)piVar16 * 2) >> 8);
          UNLOCK();
          func_0x04437490();
          return CONCAT13(uStack00000004,CONCAT12(unaff_retaddr,in_CS));
        }
        unaff_retaddr = (undefined1)((uint)param_1 >> 0x18);
        *(int **)((int)unaff_EDI + 0x21) = piVar16;
        uVar8 = in(4);
        puVar18 = (undefined6 *)CONCAT31(uVar15,uVar8);
        piVar13 = (int *)CONCAT22((short)((uint)piVar10 >> 0x10),CONCAT11(bVar5 + bVar22,bVar9));
        param_1 = piVar16;
        unaff_EBP = piVar11;
      }
    }
  } while( true );
}


