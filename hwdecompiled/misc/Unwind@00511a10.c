/*
 * Function: Unwind@00511a10
 * Address: 00511a10
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005119b6) overlaps instruction at (ram,0x005119b1)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x005119f8) */
/* WARNING: Removing unreachable block (ram,0x00511a0a) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00511a10(undefined8 *param_1,undefined1 *param_2,undefined3 param_3)

{
  uint *puVar1;
  byte *pbVar2;
  int *piVar3;
  char cVar4;
  int iVar5;
  char cVar6;
  byte bVar7;
  undefined4 *puVar8;
  undefined4 uVar9;
  undefined1 *in_EAX;
  char *unaff_EBX;
  bool bVar10;
  char in_CF;
  byte in_AF;
  undefined8 in_MM6;
  undefined1 *unaff_retaddr;
  undefined8 *puStack_10;
  undefined1 *puStack_c;
  undefined1 *puStack_8;
  
  cVar4 = *unaff_EBX;
  cVar6 = *unaff_EBX - (char)param_2;
  *unaff_EBX = cVar6 - in_CF;
  if (*unaff_EBX == '\0' ||
      (SBORROW1(cVar4,(char)param_2) != SBORROW1(cVar6,in_CF)) != *unaff_EBX < '\0') {
    while( true ) {
      while( true ) {
        bVar7 = (byte)in_EAX;
        in_EAX = param_2 + -1;
        xabort(0x3b);
        piVar3 = (int *)(unaff_retaddr + (int)param_1 + -0x12);
        *piVar3 = (int)(in_EAX + *piVar3);
        iVar5 = *piVar3;
        in(0x2a);
        uVar9 = in((short)in_EAX);
        pbVar2 = unaff_retaddr + -0x7cab2;
        *pbVar2 = *pbVar2 >> 3 | *pbVar2 << 5;
        in_AF = 9 < ((byte)uVar9 & 0xf) | 9 < (bVar7 & 0xf) | in_AF;
        bVar7 = (byte)uVar9 + in_AF * '\x06';
        in_MM6 = psubsb(in_MM6,*param_1);
        if ((bool)(0x90 < (bVar7 & 0xf0) | (char)*pbVar2 < '\0' | in_AF * (0xf9 < bVar7)) ||
            iVar5 == 0) break;
        iVar5 = CONCAT31(param_3,(char)((uint)unaff_retaddr >> 0x18));
        *(undefined4 *)(iVar5 + -4) = 4;
        bVar10 = DAT_7f377050 < 0x4d;
        DAT_7f377050 = DAT_7f377050 + 0xb3;
        param_1 = (undefined8 *)
                  CONCAT22((short)((uint)param_1 >> 0x10),
                           CONCAT11((char)((uint)param_1 >> 8) + (char)((uint)in_EAX >> 8) + bVar10,
                                    (char)param_1));
        *(undefined1 **)(iVar5 + -8) = in_EAX;
        param_2 = (undefined1 *)CONCAT31((int3)(char)((uint)uVar9 >> 8),0xb9);
      }
      uVar9 = in(0x5c);
      bVar7 = (byte)uVar9 ^ 0x2f;
      puVar8 = (undefined4 *)
               CONCAT31((int3)(CONCAT22((short)((uint)uVar9 >> 0x10),
                                        CONCAT11(bVar7 / 0xf2,(byte)uVar9)) >> 8),bVar7 % 0xf2);
      if ((POPCOUNT((ushort)puVar8 & 0xff) & 1U) != 0) break;
      iVar5 = *(int *)(param_2 + 0x5f484c5b + (int)puStack_10);
      *puVar8 = 4;
      pbVar2 = (byte *)((int)puStack_10 + iVar5 * 0x70a0748 + 0x4c5c0bac);
      *pbVar2 = *pbVar2 >> ((byte)puStack_10 & 0x1f);
      *puStack_8 = *unaff_retaddr;
      in_EAX = (undefined1 *)(*(int *)(iVar5 * -0x7c7afc5c + 0x393b9783) + 2);
      param_1 = puStack_10;
      param_2 = puStack_c;
    }
    in((short)in_EAX);
    *(int *)(param_2 + -0x2c) = *(int *)(param_2 + -0x2c) - (int)in_EAX;
    puVar1 = (uint *)(unaff_retaddr + 0x11);
    *puVar1 = *puVar1 >> 1 | (uint)((*puVar1 & 1) != 0) << 0x1f;
    puVar8[-0x1a] = (uint)puVar8[-0x1a] >> 1;
    do {
                    /* WARNING: Do nothing block with infinite loop */
    } while( true );
  }
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


