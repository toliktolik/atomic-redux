/*
 * Function: D3D_SetViewport
 * Address: 00483390
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall D3D_SetViewport(void *this,int param_1)

{
  _String_base *p_Var1;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb4;
  undefined4 *in_stack_ffffffb8;
  uint local_34;
  undefined1 local_30 [24];
  uint local_18;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  int local_8;
  
  local_8 = -1;
  puStack_c = &LAB_005148f0;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (*(int *)((int)this + 0xc) != 0) {
    ExceptionList = &local_10;
    Background_ProcessBackgroundLayer
              ((int)this + 0x154,(uint)local_30,(_String_base *)local_30,
               (_String_base *)((int)this + 0x154),param_1);
    local_8 = 0;
    if (*(int *)((int)this + 0x184) != 0) {
      p_Var1 = Survival_LoadConfiguration
                         ((_String_base *)&stack0xffffffb4,(_String_base *)&DAT_005333f4,
                          (int)this + 0x170);
      local_8._0_1_ = 1;
      Enemy_UpdateAI(local_30,(int)p_Var1,0,0xffffffff);
      local_8 = (uint)local_8._1_3_ << 8;
      if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,(uint)in_stack_ffffffb8);
      }
    }
    (**(code **)(**(int **)((int)this + 0xc) + 0x70))(local_30);
    if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_00,extraout_EDX);
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb4,in_stack_ffffffb8);
  return;
}


