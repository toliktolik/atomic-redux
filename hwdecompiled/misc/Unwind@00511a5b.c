/*
 * Function: Unwind@00511a5b
 * Address: 00511a5b
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00511a5a) overlaps instruction at (ram,0x00511a59)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Removing unreachable block (ram,0x00511abd) */
/* WARNING: Removing unreachable block (ram,0x00511b7d) */

undefined4 __fastcall Unwind_00511a5b(int *param_1,uint param_2,undefined6 *param_3)

{
  uint *puVar1;
  byte *pbVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  undefined6 uVar6;
  undefined1 uVar7;
  byte bVar8;
  byte bVar9;
  byte bVar12;
  undefined6 *in_EAX;
  int *piVar10;
  undefined3 uVar13;
  uint uVar11;
  int *piVar14;
  int iVar15;
  byte bVar16;
  byte bVar18;
  undefined6 *unaff_EBX;
  uint uVar17;
  int *unaff_EBP;
  undefined4 *unaff_ESI;
  int *unaff_EDI;
  int *piVar19;
  undefined4 *puVar20;
  undefined2 in_CS;
  byte in_CF;
  bool bVar21;
  byte in_AF;
  undefined2 in_FPUControlWord;
  undefined1 unaff_retaddr;
  
  do {
    while( true ) {
      uVar17 = (int)in_EAX + 1;
      bVar9 = (byte)param_1;
      if (uVar17 != 0 && SCARRY4((int)in_EAX,1) == (int)uVar17 < 0) break;
      out(*unaff_ESI,(short)param_2);
      puVar1 = (uint *)(param_2 + 0x9a4bd5c6);
      *puVar1 = *puVar1 << (bVar9 & 0x1f) | *puVar1 >> 0x20 - (bVar9 & 0x1f);
      bVar8 = (byte)uVar17;
      if (!SBORROW1(*(char *)(unaff_ESI + 1),(char)*unaff_EDI)) {
        *(undefined4 *)((int)param_1 + -0x55188152) = 0x5ef5610a;
        *(byte *)((int)in_EAX + 0x3f) = *(byte *)((int)in_EAX + 0x3f) | bVar8;
        *(char *)((int)unaff_EBP + -0x4de6167d) = *(char *)((int)unaff_EBP + -0x4de6167d) + bVar9;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      uVar6 = *unaff_EBX;
      in_AF = 9 < (bVar8 & 0xf) | in_AF;
      uVar11 = CONCAT31((int3)(uVar17 >> 8),bVar8 + in_AF * -6) & 0xffffff0f;
      swi(4);
      piVar10 = (int *)in(0x9a);
      in_EAX = unaff_EBX;
      while( true ) {
        bVar9 = (byte)piVar10;
        puVar20 = (undefined4 *)uVar6;
        if (-1 < (char)(bVar9 + 0x19)) {
          do {
            iVar15 = param_2 + 1;
            uVar17 = (uint)piVar10 >> 8;
            param_2 = (uint)unaff_EBP & 0xffff;
            *(undefined2 *)(puVar20 + 0x10) = in_FPUControlWord;
            iVar4 = *piVar10;
            uVar3 = in((short)unaff_EBP);
            *puVar20 = uVar3;
            piVar10 = param_1;
            param_1 = (int *)(iVar4 * 0x5d);
            puVar20 = puVar20 + 1;
          } while (-1 < (char)((byte)((uint)iVar15 >> 8) & (byte)uVar17));
          do {
                    /* WARNING: Do nothing block with infinite loop */
          } while( true );
        }
        if (bVar9 < 0xe7) break;
        in_EAX = (undefined6 *)(*(int *)((int)in_EAX + -0x32) * -0x651a67ea);
      }
      unaff_ESI = (undefined4 *)
                  (CONCAT22((short)(uVar11 >> 0x10),
                            CONCAT11((char)(uVar17 >> 8) - in_AF,(char)uVar11)) + 1);
      *(byte *)((int)param_1 + -0x77) = *(byte *)((int)param_1 + -0x77) << 1 | bVar9 < 0xe7;
      piVar19 = (int *)((int)(undefined4 *)uVar6 + -1);
      param_3 = unaff_EBX;
LAB_00511a59_1:
      in_CF = 0x6c < (byte)piVar10;
      unaff_EBX = (undefined6 *)CONCAT31((int3)((uint)piVar10 >> 8),(byte)piVar10 + 0x93);
      unaff_EDI = piVar19;
    }
    param_2 = (int)uVar17 >> 0x1f;
    unaff_EBP = (int *)((int)unaff_EBP + 1);
    piVar19 = (int *)((int)unaff_EDI + 1);
    uVar11 = (uint)in_CF;
    uVar5 = (int)in_EAX + 0x51294c72;
    bVar21 = uVar17 < 0xaed6b38f || uVar5 < uVar11;
    piVar10 = (int *)(uVar5 - uVar11);
    in_EAX = unaff_EBX;
    if (piVar10 != (int *)0x0 &&
        (SBORROW4(uVar17,-0x51294c71) != SBORROW4(uVar5,uVar11)) == (int)piVar10 < 0)
    goto LAB_00511a59_1;
    bVar12 = (byte)((uint)piVar10 >> 8);
    bVar18 = (byte)((uint)unaff_EBX >> 8);
    bVar8 = bVar18 + bVar12;
    bVar16 = (byte)unaff_EBX;
    unaff_EBX = (undefined6 *)
                CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(bVar8 + bVar21,bVar16));
    piVar14 = (int *)CONCAT31((int3)((uint)param_1 >> 8),
                              (bVar9 - bVar12) - (CARRY1(bVar18,bVar12) || CARRY1(bVar8,bVar21)));
    in_AF = ((uint)unaff_EBP & 0x1000) != 0;
    param_2 = param_2 - 1;
    pbVar2 = (byte *)(param_2 + (int)piVar19);
    in_CF = 0;
    *pbVar2 = *pbVar2 | bVar16;
    uVar13 = (undefined3)((uint)unaff_EBP >> 8);
    if ((POPCOUNT(*pbVar2) & 1U) != 0) {
      *piVar19 = (*piVar19 - param_2) - (uint)((byte)unaff_EBP < 199);
      LOCK();
      *(char *)CONCAT31(uVar13,((byte)unaff_EBP + 0x39 ^ 0x54) + 0x9d) =
           (char)((uint)((int)piVar14 * 2) >> 8);
      UNLOCK();
      func_0x04437490();
      return CONCAT13(param_3._0_1_,CONCAT12(unaff_retaddr,in_CS));
    }
    unaff_retaddr = (undefined1)((uint)param_1 >> 0x18);
    *(int **)((int)unaff_EDI + 0x21) = piVar14;
    uVar7 = in(4);
    in_EAX = (undefined6 *)CONCAT31(uVar13,uVar7);
    unaff_EBP = piVar10;
    unaff_EDI = piVar19;
    param_1 = piVar14;
  } while( true );
}


