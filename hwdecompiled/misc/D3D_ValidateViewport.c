/*
 * Function: D3D_ValidateViewport
 * Address: 004835f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall D3D_ValidateViewport(void *this,int param_1,_String_base *param_2)

{
  char *pcVar1;
  char *pcVar2;
  int iVar3;
  int extraout_ECX;
  uint extraout_EDX;
  byte *extraout_EDX_00;
  uint extraout_EDX_01;
  undefined8 uVar4;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb4;
  undefined4 *in_stack_ffffffb8;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00514aa8;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  pcVar1 = "";
  do {
    pcVar2 = pcVar1;
    pcVar1 = pcVar2 + 1;
  } while (*pcVar2 != '\0');
  ExceptionList = &local_10;
  String_Assign(param_2,(_String_base *)&DAT_0052c7cf,(uint)(pcVar2 + -0x52c7cf));
  if (*(char *)(param_1 + 4) == '\0') {
    local_18 = 0xf;
    local_1c = 0;
    local_2c = local_2c & 0xffffff00;
    PowerUp_ProcessThunderstrike(local_30,extraout_EDX,(_String_base *)(param_1 + 8),0,0xffffffff);
    local_8 = 0;
    uVar4 = Database_CommitTransaction((int)this,extraout_EDX_00,(int)local_30);
    iVar3 = (int)uVar4;
    if (iVar3 == 0) {
      uVar4 = Database_RollbackTransaction((_String_base *)&stack0xffffffb4,(uint)local_30);
      local_8 = CONCAT31(local_8._1_3_,2);
    }
    else {
      if (*(char *)(iVar3 + 4) != '\0') {
        if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_2c,(uint)((ulonglong)uVar4 >> 0x20));
        }
        goto LAB_004836f9;
      }
      uVar4 = Database_RollbackTransaction((_String_base *)&stack0xffffffb4,iVar3 + 8);
      local_8 = CONCAT31(local_8._1_3_,1);
    }
    PowerUp_ProcessThunderstrike
              (param_2,(uint)((ulonglong)uVar4 >> 0x20),(_String_base *)uVar4,0,0xffffffff);
    if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
    }
    if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_2c,extraout_EDX_01);
    }
  }
LAB_004836f9:
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb4,in_stack_ffffffb8);
  return;
}


