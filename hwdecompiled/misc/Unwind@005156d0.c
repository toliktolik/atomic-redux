/*
 * Function: Unwind@005156d0
 * Address: 005156d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x005156fd) overlaps instruction at (ram,0x005156fc)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_005156d0(uint param_1,double *param_2)

{
  char *pcVar1;
  double dVar2;
  undefined2 *puVar3;
  byte bVar4;
  char cVar5;
  code *pcVar6;
  byte bVar7;
  int3 iVar8;
  uint *puVar9;
  undefined1 *puVar10;
  undefined1 uVar11;
  uint in_EAX;
  uint uVar12;
  uint uVar13;
  undefined1 *puVar14;
  uint extraout_ECX;
  uint uVar15;
  short sVar16;
  int unaff_EBX;
  int iVar17;
  undefined4 *puVar18;
  undefined4 *unaff_EBP;
  undefined1 *puVar19;
  int unaff_ESI;
  uint *puVar20;
  undefined4 *puVar21;
  int unaff_EDI;
  uint *puVar22;
  undefined2 in_SS;
  bool bVar23;
  byte in_AF;
  bool bVar24;
  bool bVar25;
  float10 in_ST0;
  undefined8 uVar26;
  uint uStack_53a9;
  uint *puStack_53a5;
  int iStack_53a1;
  undefined1 *puStack_539d;
  int iStack_5395;
  undefined4 uStack_5391;
  uint uStack_538d;
  undefined4 uStack_5389;
  undefined1 *puStack_5c;
  undefined4 uStack_c;
  undefined4 uStack_4;
  
  uStack_4 = *(undefined4 *)(unaff_EDI + 1);
  puVar14 = (undefined1 *)(unaff_EDI + 4);
  puVar21 = (undefined4 *)(unaff_ESI + 4);
  puStack_5c = &stack0xfffffff8;
  puVar18 = (undefined4 *)&stack0xfffffff8;
  puVar19 = &stack0xfffffff8;
  cVar5 = '\x14';
  do {
    unaff_EBP = unaff_EBP + -1;
    puVar18 = puVar18 + -1;
    *puVar18 = *unaff_EBP;
    cVar5 = cVar5 + -1;
  } while ('\0' < cVar5);
  bVar23 = false;
  uVar12 = in_EAX & 0xffffff70;
  bVar25 = false;
  bVar24 = (in_EAX & 0x70) == 0;
  bVar4 = POPCOUNT((byte)in_EAX & 0x70);
  uStack_53a9 = param_1;
  iVar17 = unaff_EBX;
  puVar10 = &stack0xfffffff8;
  if (!bVar24) goto code_r0x005156dc;
  uVar15 = CONCAT31((int3)(param_1 >> 8),0x8c);
  puVar22 = (uint *)&DAT_dee5628f;
  do {
    bVar7 = in_AF << 4;
    iVar8 = (int3)(uVar12 >> 8);
    uVar15 = (CONCAT22((short)(uVar15 >> 0x10),CONCAT11((char)(uVar15 >> 8) + '\x01',(char)uVar15))
             - *(int *)(puVar19 + (int)puVar21 + 0x62)) - (uint)bVar23;
    in_AF = 9 < ((byte)uVar12 & 0xf) | in_AF;
    uVar13 = CONCAT31(iVar8,(byte)uVar12 + in_AF * '\x06') & 0xffff000f;
    *(byte *)(puVar22 + unaff_EBX * 2) = (byte)puVar22[unaff_EBX * 2] & 0xaf;
    uVar26 = CONCAT44(CONCAT31(iVar8 >> 0x17,(byte)((int)uVar12 >> 0x1f) | DAT_e9760be3),
                      CONCAT22((short)(uVar13 >> 0x10),
                               CONCAT11((bVar25 << 7 | bVar24 << 6 | bVar7 | ((bVar4 & 1) == 0) << 2
                                         | 2 | bVar23) + in_AF,(char)uVar13)));
    do {
      puVar14 = (undefined1 *)uVar26;
      *(int *)(puVar14 + -6) = *(int *)(puVar14 + -6) - (int)puVar14;
      param_2 = (double *)((int)((ulonglong)uVar26 >> 0x20) + 1);
      *(char *)puVar22 = (char)*puVar22 - (char)((uint)puVar22 >> 8);
      uVar11 = in((short)param_2);
      uVar12 = CONCAT31((int3)((uint)puVar22 >> 8),uVar11);
      uStack_53a9 = uVar15;
      iVar17 = unaff_EBX;
      puVar10 = puStack_5c;
      if ((POPCOUNT(DAT_5a6d5cc5 & 0xfa) & 1U) != 0) {
        return;
      }
code_r0x005156dc:
      puStack_5c = puVar10;
      unaff_EBX = iStack_5395;
      puVar19 = puStack_539d;
      dVar2 = *param_2;
      *puVar14 = (char)uVar12;
      *(uint *)(puVar14 + -0x22) = *(uint *)(puVar14 + -0x22) & 0x3ab62884;
      iVar17 = uVar12 + *(int *)((int)puVar21 + iVar17 * 8 + -0x54e23639);
      out(*puVar21,(short)((int)uVar12 >> 0x1f));
      _DAT_79eee2f0 = iVar17;
      *(char *)((int)(puVar21 + 1) + iVar17) = (char)((uint)iVar17 >> 8);
      sVar16 = (short)(iVar17 >> 0x1f);
      uVar12 = in(sVar16);
      puVar20 = (uint *)((uint)(puVar21 + 1) | *(uint *)(uVar12 + 0x6a0f12c1));
      puVar3 = (undefined2 *)segment(in_SS,(short)&uStack_53a9 + -2);
      *puVar3 = in_SS;
      *(int *)((uVar12 | 0x45) + 0x16f6dbc2) = (int)ROUND(in_ST0 + (float10)dVar2);
      out(0x42,(uVar12 | 0x45) + 0x13c0cd38);
      uVar11 = in(sVar16);
      *(undefined1 *)((uint)(puVar14 + 1) ^ uStack_53a9) = uVar11;
      *puVar20 = *puVar20 & 0x74;
      puVar22 = puVar20 + 1;
      uVar26 = CONCAT44(CONCAT31((int3)((uint)uStack_5391 >> 8),
                                 (char)uStack_5391 << 1 | (char)uStack_5391 < '\0'),uStack_5389);
      puVar21 = (undefined4 *)(iStack_53a1 + 1);
      pcVar6 = (code *)swi(4);
      uVar15 = uStack_538d;
      in_SS = puStack_53a5._0_2_;
      puVar9 = puVar22;
      if (SCARRY4(iStack_53a1,1)) {
        puStack_53a5 = puVar22;
        uVar26 = (*pcVar6)();
        uVar15 = extraout_ECX;
        puVar9 = puStack_53a5;
      }
      puStack_53a5 = puVar9;
      pcVar1 = (char *)(uVar15 + 0x628fbf8c);
      cVar5 = *pcVar1;
      *pcVar1 = *pcVar1 << 5;
      bVar23 = (char)(cVar5 << 4) < '\0';
      bVar25 = (int)&puStack_53a5 < 0;
      bVar24 = &stack0x00000000 == (undefined1 *)0x53a5;
      bVar4 = POPCOUNT((uint)&puStack_53a5 & 0xff);
      in_ST0 = (float10)*(longlong *)((int)puVar20 + 0xbe3150e);
    } while (!bVar23 && !bVar24);
    uVar12 = in(0xde);
  } while( true );
}


