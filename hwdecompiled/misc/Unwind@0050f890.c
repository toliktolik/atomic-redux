/*
 * Function: Unwind@0050f890
 * Address: 0050f890
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0050f957) overlaps instruction at (ram,0x0050f952)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_0050f890(uint param_1,int param_2)

{
  int iVar1;
  char cVar2;
  longlong lVar3;
  code *pcVar4;
  byte bVar5;
  uint in_EAX;
  uint uVar6;
  uint uVar7;
  uint *puVar8;
  undefined4 *puVar9;
  int *piVar10;
  undefined2 uVar11;
  uint uVar13;
  uint unaff_EBX;
  undefined4 *unaff_EBP;
  undefined4 *puVar14;
  undefined4 *puVar15;
  int unaff_ESI;
  undefined4 *puVar16;
  byte *unaff_EDI;
  byte *pbVar17;
  undefined2 in_CS;
  byte in_CF;
  bool bVar18;
  byte in_AF;
  bool bVar19;
  undefined2 in_FPUControlWord;
  undefined2 in_FPUStatusWord;
  undefined2 in_FPUTagWord;
  undefined2 in_FPULastInstructionOpcode;
  undefined4 in_FPUDataPointer;
  undefined4 in_FPUInstructionPointer;
  undefined4 *unaff_retaddr;
  undefined1 uStack_b1;
  undefined1 uStack_b0;
  byte bVar12;
  
  do {
    puVar14 = unaff_EBP;
    uVar6 = (in_EAX + 0x5a51bca7) - (uint)in_CF ^ *(uint *)(unaff_ESI + 0x7b);
    unaff_EBX = CONCAT31((int3)(unaff_EBX >> 8),(byte)unaff_EBX | (byte)param_1);
    pbVar17 = unaff_EDI + -1;
    puVar16 = (undefined4 *)0x4;
    lVar3 = (longlong)*(int *)(uVar6 + 0x21) * -0x37bcd2e0;
    bVar18 = (int)lVar3 != lVar3;
    unaff_EBP = (undefined4 *)CONCAT31((int3)((ulonglong)lVar3 >> 8),-bVar18);
    cVar2 = '\x1d';
    puVar15 = (undefined4 *)register0x00000010;
    puVar9 = puVar14;
    do {
      puVar9 = puVar9 + -1;
      puVar15 = puVar15 + -1;
      *puVar15 = *puVar9;
      cVar2 = cVar2 + -1;
    } while ('\0' < cVar2);
    uStack_b1 = SUB41(unaff_retaddr,0);
    uStack_b0 = (undefined1)((uint)unaff_retaddr >> 8);
    param_1 = uVar6 - 1;
    _DAT_3e20e58c = in_FPUControlWord;
    _DAT_3e20e590 = in_FPUStatusWord;
    _DAT_3e20e594 = in_FPUTagWord;
    _DAT_3e20e598 = in_FPUInstructionPointer;
    _DAT_3e20e59e = in_FPULastInstructionOpcode;
    _DAT_3e20e5a0 = in_FPUDataPointer;
    if (param_1 == 0 || pbVar17 != (byte *)0x0) {
      bVar18 = &stack0x00000000 < (undefined1 *)0x2b853d1;
      piVar10 = (int *)register0x00000010;
      puVar15 = unaff_EBP;
      goto LAB_0050f923_4;
    }
    uVar6 = CONCAT31((int3)((uint)&stack0x00000000 >> 8),in_AF * '\x06') & 0xffffff0f;
    bVar5 = (byte)uVar6;
    in_EAX = CONCAT22((short)(uVar6 >> 0x10),
                      CONCAT11((char)((uint)&stack0x00000000 >> 8) + in_AF,bVar5));
    uVar6 = param_1;
    uVar13 = unaff_EBX;
    bVar12 = in_AF;
    if (bVar18) {
      unaff_EBX = unaff_EBX + 1;
      in_CF = bVar5 < *pbVar17;
      pbVar17 = unaff_EDI;
    }
    else {
      while (unaff_EBX = in_EAX, param_1 = uVar6 - 1, param_1 == 0 || (int)uVar6 < 1) {
        uVar6 = (uint)bVar12;
        bVar12 = 0xda8fc86b < uVar13 || CARRY4(uVar13 + 0x25703794,uVar6);
        in_EAX = uVar13 + 0x25703794 + uVar6;
        uVar6 = param_1;
        uVar13 = unaff_EBX;
      }
      bVar18 = SBORROW4(param_2,1);
      param_2 = param_2 + -1;
      if (!bVar18) {
        pcVar4 = (code *)swi(3);
        (*pcVar4)();
        return;
      }
      uVar7 = CONCAT31((int3)(uVar13 >> 8),-bVar12);
      if (param_1 == 0) {
        cRam700985c6 = cRam700985c6 - (char)(uVar13 >> 8);
      }
      else {
        unaff_EBX = 0x6412b285;
        unaff_EBP = (undefined4 *)0x285188e8;
        uVar7 = (uint)&uStack_b1 & 0x700985c6;
        param_1 = uVar6;
      }
      in_CF = CARRY1((byte)uVar7,bRamffffff86);
      in_EAX = CONCAT31((int3)(uVar7 >> 8),(byte)uVar7 + bRamffffff86);
      if (!(bool)in_CF) break;
    }
    unaff_EDI = pbVar17 + 4;
    unaff_ESI = 8;
    *(undefined4 *)pbVar17 = uRam00000004;
    unaff_retaddr = puVar14;
  } while( true );
code_r0x0050f914:
  in_AF = 9 < ((byte)in_EAX & 0xf) | in_AF;
  bVar12 = (byte)in_EAX + in_AF * '\x06';
  puVar15 = (undefined4 *)
            ((int)unaff_EBP +
            (-(uint)(byte)(0x90 < (bVar12 & 0xf0) | in_CF | in_AF * (0xf9 < bVar12)) -
            *(int *)((int)unaff_EBP + param_2 * 2 + 0x53)));
  puVar16 = (undefined4 *)((int)puVar16 + -1);
  unaff_EDI[0x1f] = unaff_EDI[0x1f] << 3;
  puVar8 = (uint *)(CONCAT31((int3)(in_EAX >> 8),0x25) | 0x11246af4);
  unaff_EDI[0x7e] = unaff_EDI[0x7e] - 0x39;
  bVar18 = CARRY4(param_1,*puVar8);
  param_1 = param_1 + *puVar8;
  piVar10 = (int *)CONCAT31((int3)((uint)puVar8 >> 8),-bVar18);
LAB_0050f923_4:
  *(int *)(param_2 + 0x3c77f47) = (int)piVar10 + (uint)bVar18 + *(int *)(param_2 + 0x3c77f47);
  bVar12 = (byte)((uint)param_2 >> 8) | (byte)param_2;
  uVar11 = CONCAT11(bVar12,(byte)param_2);
  param_2 = CONCAT22((short)((uint)param_2 >> 0x10),uVar11);
  if (bVar12 == 0) goto code_r0x0050f965;
  out(*puVar16,uVar11);
  unaff_EBX = CONCAT22((short)(unaff_EBX >> 0x10),CONCAT11(0x3f,(char)unaff_EBX));
  unaff_EBP = (undefined4 *)CONCAT31((int3)((uint)piVar10 >> 8),0xff);
  puVar9 = unaff_EBP;
  if (((int)&uStack_b1 < 1) || (puVar9 = puVar15, &stack0x00000000 == (undefined1 *)0xb1)) {
    pbVar17 = unaff_EDI + 0x273f176a;
    iVar1 = *(int *)pbVar17;
    *(int *)pbVar17 = *(int *)pbVar17 << 0x1d;
    bVar18 = (byte)puVar9 < *(byte *)(param_1 + 0x51) ||
             (byte)((byte)puVar9 - *(byte *)(param_1 + 0x51)) < (iVar1 << 0x1c < 0);
    cVar2 = '?' - *(char *)(unaff_EBX + 0x8f6963fb);
    bVar19 = (char)(cVar2 - bVar18) < '\0';
    if (!bVar19) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    if ((bool)cVar2 != bVar18 &&
        (SBORROW1('?',*(char *)(unaff_EBX + 0x8f6963fb)) != SBORROW1(cVar2,bVar18)) == bVar19) {
      pcVar4 = (code *)swi(0x60);
      (*pcVar4)();
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    uStack_b1 = (undefined1)((ushort)in_CS >> 8);
    piVar10 = (int *)func_0xea514202();
code_r0x0050f965:
    *piVar10 = *piVar10 + (int)piVar10;
    return;
  }
  puVar16 = (undefined4 *)((int)puVar16 + 5);
  *(byte *)(param_2 + -0x7d) = *(byte *)(param_2 + -0x7d) ^ 0xc5;
  in_CF = false;
  in_EAX = (uint)puVar15 & 0xffffffaf;
  goto code_r0x0050f914;
}


