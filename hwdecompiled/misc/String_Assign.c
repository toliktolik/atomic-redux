/*
 * Function: String_Assign
 * Address: 00403230
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


_String_base * __thiscall String_Assign(void *this,_String_base *param_1,uint param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  _String_base *p_Var3;
  undefined4 *puVar4;
  uint uVar5;
  
  uVar5 = *(uint *)((int)this + 0x18);
  if (uVar5 < 0x10) {
    p_Var3 = (_String_base *)((int)this + 4);
  }
  else {
    p_Var3 = *(_String_base **)((int)this + 4);
  }
  if (p_Var3 <= param_1) {
    puVar2 = (undefined4 *)((int)this + 4);
    puVar4 = puVar2;
    if (0xf < uVar5) {
      puVar4 = (undefined4 *)*puVar2;
    }
    if (param_1 < (_String_base *)(*(int *)((int)this + 0x14) + (int)puVar4)) {
      if (0xf < uVar5) {
        puVar2 = (undefined4 *)*puVar2;
      }
      p_Var3 = PowerUp_ProcessThunderstrike
                         ((_String_base *)this,uVar5,(_String_base *)this,(int)param_1 - (int)puVar2
                          ,param_2);
      return p_Var3;
    }
  }
  bVar1 = Level_ProcessWaveSpawning((_String_base *)this,param_2,param_2,'\x01');
  if (bVar1) {
    if (*(uint *)((int)this + 0x18) < 0x10) {
      p_Var3 = (_String_base *)((int)this + 4);
    }
    else {
      p_Var3 = *(_String_base **)((int)this + 4);
    }
    for (uVar5 = param_2 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
      *(undefined4 *)p_Var3 = *(undefined4 *)param_1;
      param_1 = param_1 + 4;
      p_Var3 = p_Var3 + 4;
    }
    for (uVar5 = param_2 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
      *p_Var3 = *param_1;
      param_1 = param_1 + 1;
      p_Var3 = p_Var3 + 1;
    }
    *(uint *)((int)this + 0x14) = param_2;
    if (0xf < *(uint *)((int)this + 0x18)) {
      *(undefined1 *)(*(int *)((int)this + 4) + param_2) = 0;
      return (_String_base *)this;
    }
    *(undefined1 *)((int)this + param_2 + 4) = 0;
  }
  return (_String_base *)this;
}


