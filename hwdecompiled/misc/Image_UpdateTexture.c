/*
 * Function: Image_UpdateTexture
 * Address: 0049d360
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __fastcall Image_UpdateTexture(int param_1,undefined2 param_2,int param_3)

{
  _String_base _Var1;
  int iVar2;
  _String_base *p_Var3;
  _String_base *p_Var4;
  undefined4 uVar5;
  uint extraout_EDX;
  undefined8 uVar6;
  _String_base local_2c [4];
  int local_28;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x516088;
  local_10 = ExceptionList;
  p_Var3 = (_String_base *)(param_3 + 4);
  ExceptionList = &local_10;
  iVar2 = String_AllocateBuffer(param_1,param_2);
  *(int *)(param_1 + 0x40) = iVar2;
  if (iVar2 != 0) {
    if (0xf < *(uint *)(param_3 + 0x18)) {
      p_Var3 = *(_String_base **)p_Var3;
    }
    p_Var4 = p_Var3;
    do {
      _Var1 = *p_Var4;
      p_Var4 = p_Var4 + 1;
    } while (_Var1 != (_String_base)0x0);
    String_Assign((void *)(param_1 + 4),p_Var3,(int)p_Var4 - (int)(p_Var3 + 1));
    uVar5 = Image_CreateTexture(param_1);
    ExceptionList = local_10;
    return CONCAT31((int3)((uint)uVar5 >> 8),1);
  }
  *(undefined4 *)(param_1 + 0x3c) = 0;
  p_Var3 = Survival_LoadConfiguration(local_2c,(_String_base *)"Unable to open file ",param_3);
  local_8 = 0;
  uVar6 = Image_UnlockSurface(param_1,extraout_EDX,p_Var3);
  if (0xf < local_14) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_28,(uint)((ulonglong)uVar6 >> 0x20));
  }
  ExceptionList = local_10;
  return (uint)uVar6 & 0xffffff00;
}


