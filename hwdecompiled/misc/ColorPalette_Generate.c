/*
 * Function: ColorPalette_Generate
 * Address: 00475720
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl
ColorPalette_Generate
          (undefined4 *param_1,int param_2,int param_3,undefined1 *param_4,undefined4 *param_5)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  uint unaff_retaddr;
  undefined4 *in_stack_fffffaec;
  undefined4 *in_stack_fffffaf0;
  undefined1 local_114 [256];
  undefined1 *local_14;
  int local_10;
  int local_c;
  uint local_8;
  
  local_10 = param_2 * param_3;
  local_8 = DAT_00569f5c ^ unaff_retaddr;
  if (0 < local_10) {
    in_stack_fffffaec = (undefined4 *)*param_1;
    *param_5 = in_stack_fffffaec;
    local_114[0] = 0;
    *param_4 = 0;
  }
  uVar3 = (uint)(0 < local_10);
  param_3 = 1;
  if (1 < local_10) {
    local_c = uVar3 - 1;
    do {
      uVar1 = param_1[param_3];
      iVar4 = 0;
      iVar2 = local_c;
      iVar5 = local_c;
      while( true ) {
        iVar2 = iVar2 / 2;
        if (uVar1 < *(uint *)(&stack0xfffffaec + iVar2 * 4)) {
          iVar5 = iVar2 + -1;
        }
        else {
          if (uVar1 <= *(uint *)(&stack0xfffffaec + iVar2 * 4)) {
            param_4[param_3] = local_114[iVar2];
            goto LAB_00475852;
          }
          iVar4 = iVar2 + 1;
        }
        if (iVar5 < iVar4) break;
        iVar2 = iVar5 + iVar4;
      }
      if (0xfe < local_c) {
        Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_fffffaec,in_stack_fffffaf0);
        return;
      }
      if ((iVar4 < (int)uVar3) && (*(uint *)(&stack0xfffffaec + iVar4 * 4) < uVar1)) {
        iVar4 = iVar4 + 1;
      }
      STL_MemoryCopy(&stack0xfffffaf0 + iVar4 * 4,&stack0xfffffaec + iVar4 * 4,(uVar3 - iVar4) * 4);
      *(uint *)(&stack0xfffffaec + iVar4 * 4) = uVar1;
      local_14 = local_114 + iVar4;
      STL_MemoryCopy(local_114 + iVar4 + 1,local_14,uVar3 - iVar4);
      param_5[uVar3] = uVar1;
      *local_14 = (char)uVar3;
      param_4[param_3] = (char)uVar3;
      uVar3 = uVar3 + 1;
      local_c = local_c + 1;
LAB_00475852:
      param_3 = param_3 + 1;
    } while (param_3 < local_10);
  }
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_fffffaec,in_stack_fffffaf0);
  return;
}


