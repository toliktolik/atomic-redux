/*
 * Function: Polygon_AddEdge
 * Address: 00471620
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall Polygon_AddEdge(void *this,int param_1,int param_2)

{
  int *piVar1;
  double dVar2;
  int *piVar3;
  int iVar4;
  int *piVar5;
  
  if (param_1 < *(int *)((int)this + 0x54) + -1) {
    iVar4 = param_1 + 1;
  }
  else {
    iVar4 = 0;
  }
  piVar1 = (int *)(DAT_0056df30 + iVar4 * 8);
  piVar5 = (int *)(DAT_0056df30 + param_1 * 8);
  piVar3 = piVar1;
  if (piVar5[1] < *(int *)(DAT_0056df30 + 4 + iVar4 * 8)) {
    piVar3 = piVar5;
    piVar5 = piVar1;
  }
  dVar2 = (double)(*piVar5 - *piVar3) / (double)(piVar5[1] - piVar3[1]);
  *(double *)(*(int *)((int)this + 0x4c) + 8 + *(int *)((int)this + 0x50) * 0x18) = dVar2;
  *(double *)(*(int *)((int)this + 0x4c) + *(int *)((int)this + 0x50) * 0x18) =
       ((((double)param_2 + _DAT_0052a0e8) - (double)piVar3[1]) -
       (double)*(float *)((int)this + 0xc)) * dVar2 + (double)*(float *)((int)this + 8) +
       (double)*piVar3;
  *(int *)(*(int *)((int)this + 0x4c) + 0x10 + *(int *)((int)this + 0x50) * 0x18) = param_1;
  *(int *)((int)this + 0x50) = *(int *)((int)this + 0x50) + 1;
  return;
}


