/*
 * Function: JPEG_ProcessScanHeaders
 * Address: 004da5f0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void JPEG_ProcessScanHeaders(void)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  uint uVar4;
  int *piVar5;
  int *piVar6;
  int *unaff_ESI;
  char *pcVar7;
  undefined4 *puVar8;
  int iVar9;
  uint unaff_retaddr;
  undefined4 *in_stack_fffff5cc;
  undefined4 *in_stack_fffff5d0;
  char local_34 [12];
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  int *local_18;
  int *local_14;
  int *local_10;
  int local_c;
  uint local_8;
  
  local_8 = DAT_00569f5c ^ unaff_retaddr;
  if (unaff_ESI[0x2a] < 1) {
    *(undefined4 *)(*unaff_ESI + 0x14) = 0x13;
    *(undefined4 *)(*unaff_ESI + 0x18) = 0;
    (**(code **)*unaff_ESI)();
  }
  piVar6 = (int *)unaff_ESI[0x2b];
  local_14 = piVar6;
  if ((piVar6[5] == 0) && (piVar6[6] == 0x3f)) {
    uVar4 = unaff_ESI[0xf];
    *(undefined1 *)(unaff_ESI + 0x35) = 0;
    if (0 < (int)uVar4) {
      pcVar7 = local_34;
      for (uVar3 = uVar4 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
        pcVar7[0] = '\0';
        pcVar7[1] = '\0';
        pcVar7[2] = '\0';
        pcVar7[3] = '\0';
        pcVar7 = pcVar7 + 4;
      }
      for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
        *pcVar7 = '\0';
        pcVar7 = pcVar7 + 1;
      }
    }
  }
  else {
    *(undefined1 *)(unaff_ESI + 0x35) = 1;
    if (0 < unaff_ESI[0xf]) {
      puVar8 = (undefined4 *)&stack0xfffff5cc;
      for (iVar9 = (unaff_ESI[0xf] & 0xffffffU) << 6; iVar9 != 0; iVar9 = iVar9 + -1) {
        *puVar8 = 0xffffffff;
        puVar8 = puVar8 + 1;
      }
    }
  }
  local_c = 1;
  if (0 < unaff_ESI[0x2a]) {
    do {
      local_10 = (int *)*piVar6;
      if (((int)local_10 < 1) || (4 < (int)local_10)) {
        *(undefined4 *)(*unaff_ESI + 0x14) = 0x1a;
        *(int **)(*unaff_ESI + 0x18) = local_10;
        *(undefined4 *)(*unaff_ESI + 0x1c) = 4;
        (**(code **)*unaff_ESI)();
      }
      iVar9 = 0;
      if (0 < (int)local_10) {
        do {
          iVar1 = piVar6[iVar9 + 1];
          if ((iVar1 < 0) || (unaff_ESI[0xf] <= iVar1)) {
            *(undefined4 *)(*unaff_ESI + 0x14) = 0x13;
            *(int *)(*unaff_ESI + 0x18) = local_c;
            (**(code **)*unaff_ESI)();
          }
          if ((0 < iVar9) && (iVar1 <= local_14[iVar9])) {
            *(undefined4 *)(*unaff_ESI + 0x14) = 0x13;
            *(int *)(*unaff_ESI + 0x18) = local_c;
            (**(code **)*unaff_ESI)();
          }
          iVar9 = iVar9 + 1;
          piVar6 = local_14;
        } while (iVar9 < (int)local_10);
      }
      iVar9 = piVar6[5];
      local_1c = piVar6[6];
      local_24 = piVar6[7];
      local_28 = piVar6[8];
      local_20 = iVar9;
      piVar5 = piVar6;
      if ((char)unaff_ESI[0x35] == '\0') {
        if ((((iVar9 != 0) || (local_1c != 0x3f)) || (local_24 != 0)) || (local_28 != 0)) {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
          *(int *)(*unaff_ESI + 0x18) = local_c;
          (**(code **)*unaff_ESI)();
        }
        if (0 < (int)local_10) {
          local_18 = local_10;
          do {
            piVar6 = piVar6 + 1;
            iVar9 = *piVar6;
            if (local_34[iVar9] != '\0') {
              *(undefined4 *)(*unaff_ESI + 0x14) = 0x13;
              *(int *)(*unaff_ESI + 0x18) = local_c;
              (**(code **)*unaff_ESI)();
            }
            piVar2 = (int *)((int)local_18 + -1);
            local_34[iVar9] = '\x01';
            local_18 = piVar2;
            piVar5 = local_14;
          } while (piVar2 != (int *)0x0);
        }
      }
      else {
        if (((((iVar9 < 0) || (0x3f < iVar9)) ||
             ((local_1c < iVar9 || ((0x3f < local_1c || (local_24 < 0)))))) || (10 < local_24)) ||
           ((local_28 < 0 || (10 < local_28)))) {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
          *(int *)(*unaff_ESI + 0x18) = local_c;
          (**(code **)*unaff_ESI)();
        }
        if (iVar9 == 0) {
          if (local_1c != 0) {
            *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
            *(int *)(*unaff_ESI + 0x18) = local_c;
            (**(code **)*unaff_ESI)();
          }
        }
        else if (local_10 != (int *)0x1) {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
          *(int *)(*unaff_ESI + 0x18) = local_c;
          (**(code **)*unaff_ESI)();
        }
        piVar2 = local_10;
        if (0 < (int)local_10) {
          local_10 = piVar6 + 1;
          local_18 = piVar2;
          do {
            piVar6 = (int *)(&stack0xfffff5cc + *local_10 * 0x100);
            if ((iVar9 != 0) && (*piVar6 < 0)) {
              *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
              *(int *)(*unaff_ESI + 0x18) = local_c;
              (**(code **)*unaff_ESI)();
            }
            if (local_20 <= local_1c) {
              do {
                if (piVar6[iVar9] < 0) {
                  if (local_24 != 0) {
                    *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
                    *(int *)(*unaff_ESI + 0x18) = local_c;
                    (**(code **)*unaff_ESI)();
                  }
                }
                else if ((local_24 != piVar6[iVar9]) || (local_28 != local_24 + -1)) {
                  *(undefined4 *)(*unaff_ESI + 0x14) = 0x11;
                  *(int *)(*unaff_ESI + 0x18) = local_c;
                  (**(code **)*unaff_ESI)();
                }
                piVar6[iVar9] = local_28;
                iVar9 = iVar9 + 1;
              } while (iVar9 <= local_1c);
            }
            local_10 = local_10 + 1;
            local_18 = (int *)((int)local_18 + -1);
            piVar5 = local_14;
            iVar9 = local_20;
          } while (local_18 != (int *)0x0);
        }
      }
      piVar6 = piVar5 + 9;
      local_c = local_c + 1;
      local_14 = piVar6;
    } while (local_c <= unaff_ESI[0x2a]);
  }
  iVar9 = 0;
  if ((char)unaff_ESI[0x35] == '\0') {
    if (0 < unaff_ESI[0xf]) {
      do {
        if (local_34[iVar9] == '\0') {
          *(undefined4 *)(*unaff_ESI + 0x14) = 0x2d;
          (**(code **)*unaff_ESI)();
        }
        iVar9 = iVar9 + 1;
      } while (iVar9 < unaff_ESI[0xf]);
    }
  }
  else if (0 < unaff_ESI[0xf]) {
    piVar6 = (int *)&stack0xfffff5cc;
    do {
      if (*piVar6 < 0) {
        *(undefined4 *)(*unaff_ESI + 0x14) = 0x2d;
        (**(code **)*unaff_ESI)();
      }
      iVar9 = iVar9 + 1;
      piVar6 = piVar6 + 0x40;
    } while (iVar9 < unaff_ESI[0xf]);
    Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_fffff5cc,in_stack_fffff5d0);
    return;
  }
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),in_stack_fffff5cc,in_stack_fffff5d0);
  return;
}


