/*
 * Function: ImageFormat_LoadDDS
 * Address: 004bbde0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __cdecl ImageFormat_LoadDDS(undefined4 *param_1,undefined4 *param_2,int *param_3)

{
  undefined4 *in_EAX;
  undefined4 uVar1;
  int iVar2;
  void *this;
  void *extraout_ECX;
  void *extraout_ECX_00;
  void *extraout_ECX_01;
  void *this_00;
  void *this_01;
  void *this_02;
  int extraout_ECX_02;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int unaff_EBX;
  int iVar3;
  longlong lVar4;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  int local_18 [5];
  
  local_18[0] = 0;
  local_18[1] = 0;
  local_18[2] = 0;
  local_18[3] = 0;
  local_38 = 0;
  local_34 = 0;
  local_30 = 0;
  local_2c = 0;
  local_28 = 0;
  local_24 = 0;
  local_20 = 0;
  local_1c = 0;
  if (param_3 == (int *)0x0) {
    lVar4 = ImageFormat_LoadJPEG(local_18,0x400,0);
    if (lVar4 == -0x80) {
      return (int)lVar4;
    }
    if ((lVar4 < 0x100000000) && (lVar4 < 0)) {
      return -0x84;
    }
    param_3 = local_18;
  }
  uVar1 = CPU_ExecuteInstruction14();
  CPU_InitializeWithParam(this,*(undefined4 **)(unaff_EBX + 0x60),uVar1);
  if (in_EAX != (undefined4 *)0x0) {
    *in_EAX = *(undefined4 *)(*(int *)(unaff_EBX + 0x60) + 0x18);
  }
  *(undefined4 *)(unaff_EBX + 0x40) = 3;
  CPU_ProcessData3(param_1);
  CPU_ProcessData1(param_2);
  iVar3 = 0;
  local_18[4] = 0;
LAB_004bbe97:
  CPU_ValidateAndProcess(*(int **)(unaff_EBX + 0x60),param_3);
  this_00 = extraout_ECX;
  if (iVar3 < 3) {
    while (iVar2 = CPU_ExecuteWithBufferWrapper(&local_38), iVar3 = local_18[4], iVar2 != 0) {
      if (iVar2 == -1) goto LAB_004bbf3a;
      iVar3 = CPU_ProcessData8((int)param_1,(int)param_2,&local_38);
      if (iVar3 != 0) goto LAB_004bbf3f;
      local_18[4] = local_18[4] + 1;
      this_00 = extraout_ECX_01;
      if (2 < local_18[4]) goto LAB_004bbeef;
    }
    this_00 = extraout_ECX_00;
    if (local_18[4] < 3) goto code_r0x004bbf14;
  }
LAB_004bbeef:
  CPU_ClearContext8(this_00,&local_38);
  CPU_ClearContext4(this_01,local_18);
  return 0;
code_r0x004bbf14:
  lVar4 = ImageFormat_LoadJPEG(param_3,0x400,0);
  if (lVar4 < 0) {
LAB_004bbf3a:
    iVar3 = -0x85;
LAB_004bbf3f:
    CPU_ClearContext8(&local_38,&local_38);
    CPU_ClearContext4(this_02,local_18);
    CPU_ProcessData4(extraout_ECX_02,extraout_EDX,param_1);
    CPU_ProcessData2((int)param_2,extraout_EDX_00,param_2);
    *(undefined4 *)(unaff_EBX + 0x40) = 2;
    return iVar3;
  }
  goto LAB_004bbe97;
}


