/*
 * Function: D3D_SetTransform
 * Address: 00483720
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall D3D_SetTransform(void *param_1,byte *param_2,int param_3,undefined4 *param_4)

{
  undefined4 *puVar1;
  char *pcVar2;
  char *pcVar3;
  int extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb4;
  undefined4 *in_stack_ffffffb8;
  uint local_34;
  undefined1 local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  puVar1 = param_4;
  local_8 = 0xffffffff;
  uStack_c = 0x514ad0;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  *param_4 = 0;
  if (*(char *)(param_3 + 4) == '\0') {
    Image_LoadFromFile(CONCAT31((int3)((uint)param_1 >> 8),*(char *)(param_3 + 4)),param_2,
                       (_String_base *)&stack0xffffffb4,param_3 + 8);
    local_8 = 0;
    Database_ReconnectIfNeeded((void *)((int)param_1 + 300),&param_4,&stack0xffffffb4);
    if (param_4 == *(undefined4 **)((int)param_1 + 0x130)) {
      local_18 = 0xf;
      local_1c = 0;
      local_2c = local_2c & 0xffffff00;
      pcVar2 = "Undefined Layer";
      do {
        pcVar3 = pcVar2;
        pcVar2 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      String_Assign(local_30,(_String_base *)"Undefined Layer",(uint)(pcVar3 + -0x533408));
      local_8 = CONCAT31(local_8._1_3_,1);
      D3D_SetViewport(param_1,(int)local_30);
      if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_2c,extraout_EDX_00);
      }
      if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,(uint)in_stack_ffffffb8);
      }
    }
    else {
      *puVar1 = param_4[10];
      if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler((int)in_stack_ffffffb8,extraout_EDX);
      }
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb4,in_stack_ffffffb8);
  return;
}


