/*
 * Function: Exception_VectorSingleElementCleanup
 * Address: 0041e681
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Exception_VectorSingleElementCleanup(undefined4 *param_1)

{
  _String_base *p_Var1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int extraout_ECX;
  uint extraout_EDX;
  _String_base *unaff_EBX;
  int unaff_EBP;
  int unaff_ESI;
  int unaff_EDI;
  uint uVar5;
  undefined4 *unaff_retaddr;
  
  iVar2 = *(int *)(unaff_EBP + 0xc) * 0x20;
  Vector_DestroyElements32Byte
            (*(int *)(unaff_EBP + -0x18),*(uint *)(unaff_EBP + 8),iVar2 + *(uint *)(unaff_EBP + 8),
             *(int *)(*(int *)(unaff_EBP + -0x18) + 8) + iVar2);
  uVar3 = CRuntime_CxxThrowException(0,0);
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff8;
  uVar5 = uVar3 + unaff_EDI * -0x20;
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff4;
  *(int *)(unaff_EBP + 0x10) = unaff_EDI * 0x20;
  uVar4 = Vector_MoveElements(uVar5,uVar3,(_String_base *)uVar3);
  p_Var1 = *(_String_base **)(unaff_EBP + -0x1c);
  *(undefined4 *)(unaff_ESI + 8) = uVar4;
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffffc;
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff8;
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff4;
  Campaign_ProcessLoseCondition((int *)(unaff_EBP + 8),unaff_EBX,uVar5,p_Var1);
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff8;
  *(undefined1 **)(unaff_EBP + 8) = &stack0xfffffff4;
  Campaign_ProcessWinCondition
            (unaff_EBX + *(int *)(unaff_EBP + 0x10),extraout_EDX,unaff_EBX,
             unaff_EBX + *(int *)(unaff_EBP + 0x10),(_String_base *)(unaff_EBP + -0x3c));
  if (0xf < *(uint *)(unaff_EBP + -0x24)) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,*(uint *)(unaff_EBP + -0x38));
  }
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  Exception_SetMessage
            ((void *)(*(uint *)(unaff_EBP + -0x14) ^ *(uint *)(unaff_EBP + 4)),unaff_retaddr,param_1
            );
  return;
}


