/*
 * Function: Unwind@00514f80
 * Address: 00514f80
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0051502c) overlaps instruction at (ram,0x0051502b)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00515104) */
/* WARNING: Removing unreachable block (ram,0x0051510e) */
/* WARNING: Removing unreachable block (ram,0x00515195) */
/* WARNING: Removing unreachable block (ram,0x0051511f) */
/* WARNING: Removing unreachable block (ram,0x0051512d) */
/* WARNING: Removing unreachable block (ram,0x0051502c) */
/* WARNING: Removing unreachable block (ram,0x00515085) */
/* WARNING: Removing unreachable block (ram,0x00515155) */
/* WARNING: Removing unreachable block (ram,0x0051507c) */
/* WARNING: Removing unreachable block (ram,0x005150ca) */
/* WARNING: Removing unreachable block (ram,0x005150da) */
/* WARNING: Removing unreachable block (ram,0x00515100) */
/* WARNING: Removing unreachable block (ram,0x005150c5) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1  [10] __fastcall Unwind_00514f80(int param_1,uint param_2)

{
  byte *pbVar1;
  int iVar2;
  uint uVar3;
  byte bVar4;
  uint uVar5;
  char cVar6;
  longlong lVar7;
  byte bVar8;
  uint in_EAX;
  int *piVar9;
  int iVar11;
  int iVar12;
  uint *puVar13;
  uint *unaff_EBP;
  uint uVar14;
  uint unaff_ESI;
  char *unaff_EDI;
  undefined2 in_DS;
  bool bVar15;
  bool bVar16;
  char in_AF;
  undefined1 auVar17 [10];
  undefined1 *puVar18;
  uint uStack_6;
  undefined3 uVar10;
  
  do {
    unaff_EDI[0x6e] = (char)((uint)puVar18 >> 8);
    *unaff_EDI = *unaff_EDI + (char)param_2;
    *(uint *)(param_2 + 4) = *(uint *)(param_2 + 4) ^ unaff_ESI;
    bVar8 = *(byte *)(in_EAX | 0x81);
    *(char *)((int)unaff_EBP + 0x31) =
         (*(char *)((int)unaff_EBP + 0x31) - (char)(in_EAX >> 8)) -
         ((byte)puVar18 < *(byte *)(in_EAX | 0x81));
    lVar7 = (longlong)*(int *)((int)unaff_EBP * 9 + -0x77) * -0x5f872555;
    iVar11 = (int)lVar7;
    out(0xa3,CONCAT31((int3)(in_EAX >> 8),
                      *(undefined1 *)
                       (CONCAT31((int3)((uint)puVar18 >> 8),(byte)puVar18 - bVar8) +
                       (in_EAX & 0xff | 0x81))));
    in_EAX = CONCAT13(puVar18._1_1_,CONCAT42(&stack0x00000004,0x26f1));
    iVar12 = iVar11 + -1;
    piVar9 = (int *)(in_EAX + 0xb913b5e3 + param_2 * 4);
    uVar14 = (uint)(iVar11 != lVar7);
    iVar11 = *piVar9;
    iVar2 = *piVar9;
    *piVar9 = (iVar2 - iVar12) - uVar14;
    if ((SBORROW4(iVar11,iVar12) != SBORROW4(iVar2 - iVar12,uVar14)) != *piVar9 < 0) {
      out(0x7d,0xf1);
      if (*piVar9 >= 0) {
        auVar17 = (undefined1  [10])from_bcd(*(unkbyte10 *)(unaff_EDI + -0x3a7e05d3));
        return auVar17;
      }
      iVar11 = -0x45ea60f7;
      uVar14 = *unaff_EBP;
      bVar15 = false;
      while( true ) {
        pbVar1 = (byte *)(in_EAX + 0x46f7e46);
        bVar8 = *pbVar1;
        bVar4 = *pbVar1 + (byte)iVar11;
        *pbVar1 = bVar4 + bVar15;
        uVar3 = (uint)(CARRY1(bVar8,(byte)iVar11) || CARRY1(bVar4,bVar15));
        bVar15 = CARRY4(uVar14,unaff_ESI);
        uVar5 = uVar14 + unaff_ESI;
        bVar16 = bVar15 || CARRY4(uVar5,uVar3);
        uVar14 = uVar5 + uVar3;
        uVar10 = (undefined3)((uint)(iVar11 + -1) >> 8);
        bVar8 = in(0x26);
        piVar9 = (int *)CONCAT31(uVar10,bVar8);
        if ((bVar15 || CARRY4(uVar5,uVar3)) || uVar14 == 0) break;
        bVar15 = bVar8 < 0xf7 || (byte)(bVar8 + 9) < bVar16;
        iVar11 = CONCAT31(uVar10,(bVar8 + 9) - bVar16);
      }
      *piVar9 = *piVar9 + 1;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    puVar18 = &stack0x00000004;
  } while (0x842fd70d < in_EAX);
  bVar8 = in_AF * '\x06' - 0xf;
  *(byte *)(param_1 + 0x4cedb65e) = *(byte *)(param_1 + 0x4cedb65e) ^ 0x89;
  iVar11 = CONCAT31((int3)(in_EAX >> 8),
                    bVar8 + (0x90 < (bVar8 & 0xf0) | in_EAX < 0x842fd70d | in_AF * (0xf9 < bVar8)) *
                            '`') + -1;
  *(uint *)unaff_EDI = CONCAT22((short)((uint)iVar11 >> 0x10),CONCAT11(0xe9,(char)iVar11));
  puVar13 = (uint *)&stack0xfffffffe;
  cVar6 = '\r';
  do {
    unaff_EBP = unaff_EBP + -1;
    puVar13 = puVar13 + -1;
    *puVar13 = *unaff_EBP;
    cVar6 = cVar6 + -1;
  } while ('\0' < cVar6);
  segment(in_DS,(short)iVar12 + (short)unaff_EDI + 3);
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


