/*
 * Function: PNG_CleanupStructures
 * Address: 004c4190
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall PNG_CleanupStructures(int param_1,uint param_2,undefined4 *param_3,int *param_4)

{
  int iVar1;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar2;
  int extraout_ECX_03;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint uVar3;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  int iVar4;
  undefined4 *puVar5;
  
  puVar5 = (undefined4 *)0x0;
  if (param_3 != (undefined4 *)0x0) {
    puVar5 = (undefined4 *)*param_3;
  }
  if ((param_4 != (int *)0x0) && (iVar1 = *param_4, iVar1 != 0)) {
    CPU_Instruction13(param_1,param_2,(int)puVar5,*(int *)(iVar1 + 0x38));
    CPU_Instruction13(*(int *)(iVar1 + 0xa0),extraout_EDX,(int)puVar5,*(int *)(iVar1 + 0xa0));
    CPU_Instruction13(extraout_ECX,*(uint *)(iVar1 + 0xac),(int)puVar5,*(uint *)(iVar1 + 0xac));
    iVar2 = extraout_ECX_00;
    uVar3 = extraout_EDX_00;
    if (*(int *)(iVar1 + 0xb0) != 0) {
      iVar4 = 0;
      if (*(char *)(iVar1 + 0xb5) != '\0') {
        do {
          iVar2 = *(int *)(*(int *)(iVar1 + 0xb0) + iVar4 * 4);
          CPU_Instruction13(iVar2,uVar3,(int)puVar5,iVar2);
          uVar3 = (uint)*(byte *)(iVar1 + 0xb5);
          iVar4 = iVar4 + 1;
          iVar2 = extraout_ECX_01;
        } while (iVar4 < (int)uVar3);
      }
      CPU_Instruction13(iVar2,uVar3,(int)puVar5,*(int *)(iVar1 + 0xb0));
      iVar2 = extraout_ECX_02;
      uVar3 = extraout_EDX_01;
    }
    CPU_Instruction11(iVar2,uVar3,iVar1);
    *param_4 = 0;
  }
  if (puVar5 != (undefined4 *)0x0) {
    PNG_InitializeImageStructure(puVar5);
    CPU_Instruction11(extraout_ECX_03,extraout_EDX_02,(int)puVar5);
    *param_3 = 0;
  }
  return;
}


