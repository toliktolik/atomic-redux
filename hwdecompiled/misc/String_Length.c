/*
 * Function: String_Length
 * Address: 004991e0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __cdecl String_Length(undefined4 param_1,char *param_2)

{
  char cVar1;
  int *piVar2;
  uint in_EAX;
  char **ppcVar3;
  char **ppcVar4;
  char **ppcVar5;
  int iVar6;
  char **in_stack_00000018;
  uint in_stack_0000001c;
  int *in_stack_00000020;
  
  piVar2 = in_stack_00000020;
  *in_stack_00000020 = 0;
  if (in_stack_00000018 == (char **)0x0) {
    if (0xf < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(0,(uint)in_stack_00000020);
    }
    return in_EAX & 0xffffff00;
  }
  iVar6 = 10;
  in_stack_00000020 = (int *)((uint)in_stack_00000020 & 0xffffff);
  ppcVar3 = (char **)param_2;
  if (in_stack_0000001c < 0x10) {
    ppcVar3 = &param_2;
  }
  if (*(char *)ppcVar3 == '-') {
    in_stack_00000020 = (int *)CONCAT13(1,(int3)piVar2);
  }
  ppcVar5 = (char **)(uint)(*(char *)ppcVar3 == '-');
  ppcVar4 = in_stack_00000018;
  do {
    if (in_stack_00000018 <= ppcVar5) {
      iVar6 = CONCAT31((int3)((uint)ppcVar3 >> 8),in_stack_00000020._3_1_);
      if (in_stack_00000020._3_1_ != '\0') {
        iVar6 = -*piVar2;
        *piVar2 = iVar6;
      }
      if (0xf < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler((int)param_2,(uint)piVar2);
      }
      return CONCAT31((int3)((uint)iVar6 >> 8),1);
    }
    ppcVar3 = (char **)param_2;
    if (in_stack_0000001c < 0x10) {
      ppcVar3 = &param_2;
    }
    cVar1 = *(char *)((int)ppcVar3 + (int)ppcVar5);
    if (iVar6 == 10) {
      if ((cVar1 < '0') || ('9' < cVar1)) {
LAB_004992b9:
        if (((cVar1 != 'x') && (cVar1 != 'X')) || ((ppcVar5 != (char **)0x1 || (*piVar2 != 0)))) {
          *piVar2 = 0;
          if (0xf < in_stack_0000001c) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler((int)ppcVar4,(uint)param_2);
          }
          return (uint)ppcVar3 & 0xffffff00;
        }
        iVar6 = 0x10;
      }
      else {
        ppcVar4 = (char **)(cVar1 + -0x30 + *piVar2 * 10);
        *piVar2 = (int)ppcVar4;
      }
    }
    else {
      if (iVar6 != 0x10) goto LAB_004992b9;
      if ((cVar1 < '0') || ('9' < cVar1)) {
        if (((cVar1 < 'A') || ('F' < cVar1)) && ((cVar1 < 'a' || ('f' < cVar1)))) goto LAB_004992b9;
        if ('9' < cVar1) {
          if (cVar1 < 'G') {
            ppcVar4 = (char **)(*piVar2 * 0x10 + -0x37 + (int)cVar1);
            *piVar2 = (int)ppcVar4;
          }
          else {
            ppcVar4 = (char **)(*piVar2 * 0x10 + -0x57 + (int)cVar1);
            *piVar2 = (int)ppcVar4;
          }
          goto LAB_004992d0;
        }
      }
      ppcVar4 = (char **)((*piVar2 + -3) * 0x10 + (int)cVar1);
      *piVar2 = (int)ppcVar4;
    }
LAB_004992d0:
    ppcVar5 = (char **)((int)ppcVar5 + 1);
    ppcVar3 = in_stack_00000018;
  } while( true );
}


