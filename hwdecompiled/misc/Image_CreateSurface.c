/*
 * Function: Image_CreateSurface
 * Address: 0049b020
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x0049b0ca) */

void __cdecl Image_CreateSurface(_String_base *param_1,int param_2)

{
  void *this;
  void **ppvVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined4 *in_stack_ffffffcc;
  uint in_stack_ffffffd0;
  undefined4 *puVar4;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  this = DAT_00569f5c;
  uStack_c = 0x515e68;
  local_10 = ExceptionList;
  puVar4 = (undefined4 *)(in_stack_ffffffd0 & 0xffffff00);
  uVar2 = 0;
  local_8 = 0;
  ExceptionList = &local_10;
  ppvVar1 = &local_10;
  if (*(int *)(param_2 + 0x14) != 0) {
    do {
      uVar3 = Memory_FreeBlock();
      Memory_AllocateSound((_String_base *)&stack0xffffffcc,1,SUB81(uVar3,0));
      uVar2 = uVar2 + 1;
      ppvVar1 = (void **)ExceptionList;
    } while (uVar2 < *(uint *)(param_2 + 0x14));
  }
  ExceptionList = ppvVar1;
  *(undefined4 *)(param_1 + 0x18) = 0xf;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike
            (param_1,(uint)&stack0xffffffcc,(_String_base *)&stack0xffffffcc,0,0xffffffff);
  ExceptionList = local_10;
  Exception_SetMessage(this,in_stack_ffffffcc,puVar4);
  return;
}


