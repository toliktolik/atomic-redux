/*
 * Function: Assembly_StackManipulation
 * Address: 004ff334
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x004ff2fc) overlaps instruction at (ram,0x004ff2f9)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x004ff29f) */
/* WARNING: Removing unreachable block (ram,0x004ff2e0) */
/* WARNING: Removing unreachable block (ram,0x004ff2a1) */
/* WARNING: Removing unreachable block (ram,0x004ff26a) */
/* WARNING: Removing unreachable block (ram,0x004ff2a3) */

void Assembly_StackManipulation(void)

{
  char *pcVar1;
  ushort *puVar2;
  code *pcVar3;
  uint uVar4;
  byte bVar5;
  int *piVar6;
  uint *puVar7;
  uint uVar8;
  int iVar9;
  int extraout_ECX;
  byte bVar10;
  uint unaff_EBX;
  int iVar11;
  int *piVar12;
  int *unaff_EBP;
  uint unaff_ESI;
  uint unaff_EDI;
  undefined2 in_ES;
  undefined2 in_CS;
  char cVar13;
  undefined1 in_PF;
  byte in_AF;
  bool bVar14;
  undefined1 in_ZF;
  char in_SF;
  bool bVar15;
  char in_OF;
  undefined8 uVar16;
  uint *puStack_4;
  
  puStack_4 = (uint *)CONCAT22(puStack_4._2_2_,in_CS);
  uVar16 = func_0xcfd807fe();
  piVar6 = (int *)((ulonglong)uVar16 >> 0x20);
  uVar8 = (uint)uVar16;
  if ((bool)in_ZF || in_OF != in_SF) {
    *(char *)(unaff_EBX + 0x44) = -*(char *)(unaff_EBX + 0x44);
  }
  else {
    if ((bool)in_PF) {
      bVar15 = SCARRY4(uVar8,(int)unaff_EBP);
      uVar8 = uVar8 + (int)unaff_EBP;
      bVar14 = uVar8 == 0;
      iVar9 = extraout_ECX;
      piVar12 = unaff_EBP;
      uVar4 = uVar8;
      goto code_r0x004ff2e1;
    }
    uVar8 = CONCAT22((short)(unaff_EBX >> 0x10),
                     (ushort)(byte)unaff_EBX * (ushort)*(byte *)((int)unaff_EBP + 2)) + 1;
    iVar11 = *piVar6 * 0x23;
    if (extraout_ECX != 0) {
      return;
    }
    piVar12 = (int *)*unaff_EBP;
    iVar9 = -1;
    if (uVar8 != 0) {
      *unaff_EBP = iVar11;
      unaff_EBP[-1] = 0xffffffff;
      unaff_EBP[-2] = (int)piVar6;
      unaff_EBP[-3] = uVar8;
      unaff_EBP[-4] = (int)&puStack_4;
      unaff_EBP[-5] = (int)piVar12;
      unaff_EBP[-6] = unaff_ESI;
      unaff_EBP[-7] = unaff_EDI;
      *(int *)(unaff_ESI + 0x34) = *(int *)(unaff_ESI + 0x34) + (int)piVar6;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
code_r0x004ff2f1:
    bVar5 = (byte)iVar11 ^ 0x5a;
    in_AF = 9 < (bVar5 & 0xf) | in_AF;
    bVar5 = bVar5 + in_AF * '\x06';
    puVar7 = (uint *)CONCAT31((int3)(char)((uint)iVar11 >> 8),
                              bVar5 + (0x90 < (bVar5 & 0xf0) | in_AF * (0xf9 < bVar5)) * '`');
    *(int *)(&stack0x3d14b328 + unaff_ESI * 8) =
         *(int *)(&stack0x3d14b328 + unaff_ESI * 8) - (int)&puStack_4;
    bVar5 = (byte)((uint)piVar6 ^ *puVar7);
    bVar10 = (byte)uVar8 ^ bVar5;
    uVar8 = (uint)bVar10;
    cVar13 = bVar5 + (char)((uint)iVar9 >> 8);
    iVar11 = CONCAT31((int3)(((uint)piVar6 ^ *puVar7) >> 8),cVar13);
    if (cVar13 < '\0') {
      do {
        iVar9 = iVar9 + -1;
        piVar6 = (int *)CONCAT22((short)((uint)iVar11 >> 0x10),
                                 CONCAT11((byte)((uint)iVar11 >> 8) ^ (byte)*puVar7,(char)iVar11));
        in_AF = ((uint)puVar7 & 0x1000) != 0;
        unaff_EBX = 0x3f3ed9c7;
        *(uint *)((int)piVar6 + 0xf8c35e5) = *(uint *)((int)piVar6 + 0xf8c35e5) & unaff_ESI;
        puStack_4 = puVar7;
        while( true ) {
          unaff_ESI = unaff_ESI + 1;
          bVar5 = (byte)(unaff_EBX + 1);
          in_AF = 9 < (bVar5 & 0xf) | in_AF;
          unaff_EBX = (uint)(CONCAT11((char)(unaff_EBX + 1 >> 8) + in_AF,bVar5 + in_AF * '\x06') &
                            0xff0f);
          bVar15 = SBORROW4(unaff_EDI + 1,1);
          puVar2 = (ushort *)(unaff_EDI + 0xdd039c79);
          bVar14 = false;
          *puVar2 = *puVar2 + (ushort)in_AF * -(*puVar2 & 3);
          uVar4 = unaff_EDI;
code_r0x004ff2e1:
          if ((int)uVar4 < 0) {
            if (!bVar14) {
                    /* WARNING: Bad instruction - Truncating control flow here */
              halt_baddata();
            }
            iVar11 = CONCAT31((int3)(unaff_EBX >> 8),
                              (byte)unaff_EBX + 0x8a + ((byte)unaff_EBX < 0xb3));
            goto code_r0x004ff2f1;
          }
          iVar9 = iVar9 + -1;
          if (iVar9 != 0) break;
          if (bVar15) {
            cVar13 = '\0';
            uVar16 = func_0x7b4f6d96();
            iVar9 = (int)((ulonglong)uVar16 >> 0x20);
            out((short)((ulonglong)uVar16 >> 0x20),(uint)uVar16);
            pcVar1 = (char *)(iVar9 + 0x25);
            *pcVar1 = (*pcVar1 - (char)((ulonglong)uVar16 >> 0x20)) - cVar13;
            uVar8 = (uint)uVar16 ^ 0x992491d0;
            piVar6 = (int *)CONCAT22((short)(uVar8 >> 0x10),
                                     (ushort)(byte)((char)uVar8 + (char)(uVar8 >> 8) * -0x7b));
            *piVar6 = *piVar6 - iVar9;
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
        }
        unaff_ESI = unaff_ESI + 1;
        iVar11 = (int)piVar6 + 1;
        puVar7 = (uint *)in(2);
      } while( true );
    }
    uVar8 = (uint)puVar7 & 0xe91029af;
    *(char *)(iVar9 + -2) = *(char *)(iVar9 + -2) - bVar10;
    puStack_4 = (uint *)CONCAT22(puStack_4._2_2_,in_ES);
    if (piVar12 != (int *)0x1) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
  }
  DAT_fb445bf6 = (undefined1)uVar8;
                    /* WARNING: Does not return */
  pcVar3 = (code *)invalidInstructionException();
  (*pcVar3)();
}


