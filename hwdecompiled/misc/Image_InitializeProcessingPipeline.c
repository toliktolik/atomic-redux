/*
 * Function: Image_InitializeProcessingPipeline
 * Address: 004d9b90
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Image_InitializeProcessingPipeline(int *param_1)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  undefined4 *puVar4;
  int *piVar5;
  undefined4 *puVar6;
  int local_10;
  
  bVar3 = true;
  puVar4 = (undefined4 *)(**(code **)param_1[1])(param_1,1,0x34);
  param_1[0x55] = (int)puVar4;
  *puVar4 = Utility_EmptyFunction;
  puVar4[1] = Image_ProcessChannelData;
  *(undefined1 *)(puVar4 + 2) = 0;
  if (*(char *)((int)param_1 + 0xb3) != '\0') {
    *(undefined4 *)(*param_1 + 0x14) = 0x19;
    (**(code **)*param_1)(param_1);
  }
  local_10 = 0;
  if (0 < param_1[0xf]) {
    piVar5 = (int *)(param_1[0x11] + 0xc);
    puVar6 = puVar4 + 3;
    do {
      iVar1 = piVar5[-1];
      iVar2 = param_1[0x36];
      if ((iVar1 == iVar2) && (*piVar5 == param_1[0x37])) {
        if (param_1[0x2d] == 0) {
          *puVar6 = Image_CopyDirectPixels;
        }
        else {
          *puVar6 = Image_ApplyVerticalFilter;
          *(undefined1 *)(puVar4 + 2) = 1;
        }
      }
      else if (iVar1 * 2 == iVar2) {
        if (*piVar5 == param_1[0x37]) {
          bVar3 = false;
          *puVar6 = Image_Downsample2x1;
        }
        else {
          if ((iVar1 * 2 != iVar2) || (*piVar5 * 2 - param_1[0x37] != 0)) goto LAB_004d9c91;
          if (param_1[0x2d] == 0) {
            *puVar6 = Image_Downsample2x2;
          }
          else {
            *puVar6 = Image_ApplyHorizontalFilter;
            *(undefined1 *)(puVar4 + 2) = 1;
          }
        }
      }
      else {
LAB_004d9c91:
        if ((iVar2 % iVar1 == 0) && (param_1[0x37] % *piVar5 == 0)) {
          bVar3 = false;
          *puVar6 = Image_DownsamplePixelData;
        }
        else {
          *(undefined4 *)(*param_1 + 0x14) = 0x26;
          (**(code **)*param_1)(param_1);
        }
      }
      local_10 = local_10 + 1;
      piVar5 = piVar5 + 0x15;
      puVar6 = puVar6 + 1;
    } while (local_10 < param_1[0xf]);
  }
  if ((param_1[0x2d] != 0) && (!bVar3)) {
    *(undefined4 *)(*param_1 + 0x14) = 99;
    (**(code **)(*param_1 + 4))(param_1,0);
  }
  return;
}


