/*
 * Function: Unwind@00514690
 * Address: 00514690
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005146f2) overlaps instruction at (ram,0x005146ef)
    */
/* WARNING: Type propagation algorithm not settling */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514690(undefined4 param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  undefined4 uVar3;
  char cVar4;
  uint in_EAX;
  uint uVar5;
  uint uVar6;
  byte bVar8;
  int *piVar7;
  uint unaff_EBX;
  int unaff_EBP;
  undefined4 *puVar9;
  undefined1 *unaff_ESI;
  undefined1 *puVar10;
  uint unaff_EDI;
  undefined4 *puVar11;
  undefined2 in_DS;
  bool bVar12;
  byte in_AF;
  byte in_TF;
  byte in_IF;
  byte in_NT;
  byte in_AC;
  byte in_VIF;
  byte in_VIP;
  byte in_ID;
  float10 in_ST0;
  uint unaff_retaddr;
  undefined4 uStack_8;
  undefined1 auStack_4 [4];
  
  uVar6 = CONCAT31((int3)((uint)param_1 >> 8),0xa5);
  if ((POPCOUNT((in_EAX | 0xbec48a6e) & 0xff) & 1U) == 0) {
    piVar7 = (int *)CONCAT31((int3)((uint)param_2 >> 8),(char)param_2 - *(char *)(param_2 + 0x12));
    iVar2 = *piVar7;
    *(char *)(unaff_EBX + 0x7e) = *(char *)(unaff_EBX + 0x7e) + '\x01';
    puVar11 = (undefined4 *)0x8b078a65;
    puVar10 = unaff_ESI + 1;
    *(short *)((int)piVar7 + -0x32c15d07) = (short)ROUND(in_ST0 / (float10)iVar2);
    uVar5 = in(0xd7);
    uVar5 = uVar5 | 0xfe;
    bVar12 = CARRY4(_DAT_16e7ff7e,uVar5);
    _DAT_16e7ff7e = _DAT_16e7ff7e + uVar5;
    if (!bVar12) {
      unaff_ESI[-0x6391dba4] = unaff_ESI[-0x6391dba4] ^ (byte)uVar5;
      goto code_r0x005146f9;
    }
    puVar9 = (undefined4 *)CONCAT22((short)((uint)unaff_EBP >> 0x10),in_DS);
    unaff_EDI = 0x53f1f231;
    puVar11 = (undefined4 *)auStack_4;
    unaff_EBP = (int)auStack_4;
    cVar4 = '\x02';
    do {
      puVar9 = puVar9 + -1;
      puVar11 = puVar11 + -1;
      *puVar11 = *puVar9;
      cVar4 = cVar4 + -1;
    } while ('\0' < cVar4);
    *(undefined1 *)(unaff_retaddr + 0x9613e99e) = 0;
    piVar7 = (int *)(uVar6 - 0x5c);
    *piVar7 = *piVar7 << 1;
    bVar8 = (byte)((uint)param_2 >> 8);
    param_2 = (uint)(byte)(bVar8 << 1 | bVar8 >> 7) << 8;
    unaff_EBX = unaff_retaddr;
    unaff_ESI = puVar10;
  }
  piVar7 = (int *)CONCAT31((int3)((uint)param_2 >> 8),0x84);
  puVar1 = (uint *)(unaff_EBP + 0x2e);
  puVar11 = (undefined4 *)(unaff_EDI + *puVar1);
  puVar10 = unaff_ESI + 1;
  out(*unaff_ESI,(short)piVar7);
  unaff_retaddr =
       (uint)(in_NT & 1) * 0x4000 | (uint)SCARRY4(unaff_EDI,*puVar1) * 0x800 |
       (uint)(in_IF & 1) * 0x200 | (uint)(in_TF & 1) * 0x100 | (uint)((int)puVar11 < 0) * 0x80 |
       (uint)(puVar11 == (undefined4 *)0x0) * 0x40 | (uint)(in_AF & 1) * 0x10 |
       (uint)((POPCOUNT((uint)puVar11 & 0xff) & 1U) == 0) * 4 | (uint)CARRY4(unaff_EDI,*puVar1) |
       (uint)(in_ID & 1) * 0x200000 | (uint)(in_VIP & 1) * 0x100000 | (uint)(in_VIF & 1) * 0x80000 |
       (uint)(in_AC & 1) * 0x40000;
  uVar5 = uVar6;
code_r0x005146f9:
  while (uVar5 != 0) {
    uVar5 = uVar5 - 1;
    uVar3 = in((short)piVar7);
    *puVar11 = uVar3;
    puVar11 = puVar11 + 1;
  }
  out(puVar10[4],(short)piVar7);
  if ((char)unaff_EBX < *(char *)(unaff_retaddr + 0x10b1e478)) {
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  out(0xc6,(char)*(undefined4 *)(puVar10 + 5));
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


