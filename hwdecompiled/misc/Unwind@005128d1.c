/*
 * Function: Unwind@005128d1
 * Address: 005128d1
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x0051292e) overlaps instruction at (ram,0x0051292b)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall
Unwind_005128d1(int param_1,uint param_2,undefined4 param_3,undefined4 param_4,int *param_5,
               uint param_6,int param_7)

{
  byte *pbVar1;
  undefined4 *puVar2;
  longlong lVar3;
  uint in_EAX;
  int iVar4;
  char *pcVar5;
  uint uVar6;
  int iVar7;
  int unaff_EBX;
  int unaff_EBP;
  byte *unaff_ESI;
  uint *unaff_EDI;
  uint *puVar8;
  undefined1 in_CF;
  bool bVar9;
  bool in_OF;
  
  if (in_OF) {
    param_7 = CONCAT22((short)((uint)param_1 >> 0x10),
                       (ushort)(byte)((char)param_1 + (char)((uint)param_1 >> 8) * -0x5c));
    param_6 = in_EAX;
code_r0x00512931:
    param_5 = *(int **)((int)unaff_EDI + 7);
    if ((bool)in_CF) {
      *(int *)(param_6 + 0x63cc678f) =
           (*(int *)(param_6 + 0x63cc678f) - (int)&stack0x00000000) - (uint)(byte)in_CF;
      *(char *)(unaff_EBP + -0x17c398c6) =
           *(char *)(unaff_EBP + -0x17c398c6) << ((byte)param_6 & 0x1f);
      lVar3 = (longlong)*(int *)(param_7 + -0x6addd72c) * 0x5f;
      pcVar5 = (char *)lVar3;
      if ((POPCOUNT((byte)(param_6 >> 8) ^ *(byte *)((int)unaff_EDI + 0x35)) & 1U) == 0) {
        return;
      }
      LOCK();
      puVar2 = *(undefined4 **)(unaff_EBP + -0x197a542f);
      *(int *)(unaff_EBP + -0x197a542f) = unaff_EBX;
      UNLOCK();
      *pcVar5 = *pcVar5 + 'Z' + ((int)pcVar5 != lVar3);
                    /* WARNING: Could not recover jumptable at 0x0051295d. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (*(code *)*puVar2)();
      return;
    }
    bVar9 = (byte)param_7 < (byte)*unaff_EDI;
    puVar8 = unaff_EDI;
  }
  else {
    iVar7 = param_2 + in_EAX;
    if (iVar7 < 0) {
      return;
    }
    iVar4 = CONCAT31((int3)(in_EAX >> 8),*(undefined1 *)(unaff_EBX + (in_EAX & 0xff)));
    unaff_EBX = unaff_EBX + -1;
    uVar6 = param_1 - 1;
    puVar8 = *(uint **)(unaff_ESI + -0x55477b3b);
    out((short)iVar7,iVar4);
    if (uVar6 != 0 && 0 < param_1) {
      param_7 = (iVar4 + -0x5f3366d) - (uint)CARRY4(param_2,in_EAX);
      unaff_ESI[0x2e6c204a] = unaff_ESI[0x2e6c204a] + (char)(uVar6 >> 8);
      in_CF = false;
      unaff_EBP = -0x2a6e637e;
      *(byte *)unaff_EDI = *unaff_ESI;
      param_6 = uVar6;
      unaff_EDI = (uint *)((int)unaff_EDI + 1);
      goto code_r0x00512931;
    }
    if ((POPCOUNT(uVar6 & 0xff) & 1U) == 0) {
      out(0x30,iVar4);
      goto LAB_00512966;
    }
    in((short)iVar7);
    bVar9 = (byte)param_7 < (byte)*puVar8;
  }
  unaff_EDI = (uint *)((int)puVar8 + 1);
  iVar7 = (int)param_5 + *param_5 + (uint)bVar9;
  iVar4 = param_7;
  uVar6 = param_6;
  if (SCARRY4((int)param_5,*param_5) != SCARRY4((int)param_5 + *param_5,(uint)bVar9)) {
    return;
  }
LAB_00512966:
  pbVar1 = (byte *)((int)unaff_EDI + uVar6 + 4);
  _DAT_6bf01d05 = iVar4;
  *pbVar1 = (*pbVar1 - (char)iVar7) - (CONCAT31((int3)((uint)iVar4 >> 8),DAT_bfaa5f7b) < *unaff_EDI)
  ;
  return;
}


