/*
 * Function: D3DTexture_CreateSurface
 * Address: 004815d0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl
D3DTexture_CreateSurface
          (_String_base *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  char cVar1;
  int iVar2;
  uint extraout_EDX;
  int *unaff_ESI;
  undefined4 *puVar3;
  uint unaff_retaddr;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 local_a0 [18];
  undefined4 local_58 [8];
  undefined4 local_38;
  undefined4 local_34;
  undefined1 local_24 [4];
  int local_20;
  uint local_c;
  uint local_8;
  
  local_8 = DAT_00569f5c ^ unaff_retaddr;
  puVar5 = (undefined4 *)0x0;
  puVar4 = (undefined4 *)0x0;
  iVar2 = (**(code **)(*(int *)param_1 + 0x8c))();
  cVar1 = Threading_LockMutex(iVar2,param_1);
  if (cVar1 == '\0') {
    puVar3 = local_a0;
    for (iVar2 = 0x1f; iVar2 != 0; iVar2 = iVar2 + -1) {
      *puVar3 = 0;
      puVar3 = puVar3 + 1;
    }
    local_a0[3] = param_2;
    local_a0[0] = 0x7c;
    local_a0[1] = 0x1007;
    local_38 = 0x1000;
    local_34 = 0x20000;
    local_a0[2] = param_3;
    local_58[0] = 0x20;
    SexyWidget_GetTexture(param_4,local_58);
    iVar2 = (**(code **)(*unaff_ESI + 0x18))();
    if (-1 < iVar2) {
      Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),puVar4,puVar5);
      return;
    }
    Image_Clone(local_24,iVar2);
    if (0xf < local_c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_20,extraout_EDX);
    }
  }
  Exception_SetMessage((void *)(local_8 ^ unaff_retaddr),puVar4,puVar5);
  return;
}


