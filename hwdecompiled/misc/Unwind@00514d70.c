/*
 * Function: Unwind@00514d70
 * Address: 00514d70
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dee) overlaps instruction at (ram,0x00514de8)
    */
/* WARNING: Unable to track spacebase fully for stack */

void __fastcall Unwind_00514d70(undefined4 param_1,int param_2)

{
  undefined1 uVar1;
  undefined1 *puVar2;
  char cVar3;
  code *pcVar4;
  byte bVar5;
  undefined4 uVar6;
  undefined1 *puVar7;
  undefined3 uVar8;
  int extraout_ECX;
  int extraout_ECX_00;
  int iVar9;
  undefined2 *puVar10;
  undefined4 unaff_EBX;
  undefined4 *puVar11;
  undefined4 *puVar12;
  undefined1 *puVar13;
  int unaff_EBP;
  uint uVar14;
  int *unaff_ESI;
  undefined1 *unaff_EDI;
  uint *puVar15;
  uint *puVar16;
  undefined2 in_ES;
  bool bVar17;
  byte bVar18;
  bool bVar19;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar20;
  undefined1 auStack_5ef7 [24311];
  
  uVar14 = unaff_EBP + 1;
  uVar6 = in((short)param_2);
  bVar19 = (uVar14 & 0x400) != 0;
  bVar17 = (uVar14 & 0x10) != 0;
  if ((uVar14 & 0x800) == 0) {
    *(int *)((int)unaff_ESI + -0x7f) =
         *(int *)((int)unaff_ESI + -0x7f) +
         CONCAT31((int3)((uint)param_1 >> 8),(char)((uint)unaff_EBX >> 8)) +
         (uint)((uVar14 & 1) != 0);
    puVar15 = (uint *)(unaff_EDI + param_2 * 4 + -0x2e);
    puVar7 = (undefined1 *)*puVar15;
    *puVar15 = *puVar15 - (int)unaff_EDI;
    puVar2 = &stack0x00000004 + -(int)unaff_EDI;
    iVar9 = -(int)(uint)(puVar7 < unaff_EDI);
    *(char *)((int)unaff_ESI + 0x6472ad46) = *(char *)((int)unaff_ESI + 0x6472ad46) + '\x01';
    out((short)param_2 + 1,(byte)unaff_EBX + (9 < ((byte)unaff_EBX & 0xf) || bVar17) * -6 & 0xf);
    *(uint *)((int)unaff_ESI +
             (int)(puVar2 + (uint)(&stack0x00000004 < unaff_EDI ||
                                  puVar2 < (undefined1 *)(uint)(puVar7 < unaff_EDI)) + iVar9)) =
         *(uint *)((int)unaff_ESI +
                  (int)(puVar2 + (uint)(&stack0x00000004 < unaff_EDI ||
                                       puVar2 < (undefined1 *)(uint)(puVar7 < unaff_EDI)) + iVar9))
         ^ (int)puVar2 + iVar9;
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  bVar18 = 9 < ((byte)uVar6 & 0xf) || bVar17;
  pcVar4 = (code *)swi(0x43);
  uVar20 = (*pcVar4)();
  puVar10 = (undefined2 *)((ulonglong)uVar20 >> 0x20);
  puVar15 = (uint *)((int)unaff_EDI * 0x200000);
  puVar11 = (undefined4 *)*(undefined6 *)(extraout_ECX + 0x14d442a4 + (int)unaff_EDI * 0x800000);
  uVar14 = (uint)((int)unaff_EDI << 0x14 < 0);
  puVar7 = &stack0xa5aa28f6 + uVar14;
  iVar9 = *(int *)uVar20;
  puVar13 = (undefined1 *)(iVar9 + -4);
  *(undefined2 *)(iVar9 + -4) = in_ES;
  if (auStack_5ef7 < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28f6,uVar14)) {
    if ((int)((uint)puVar11 & (uint)puVar15) < 1) {
      bVar19 = false;
      iVar9 = extraout_ECX;
      puVar12 = puVar11;
    }
    else {
      bVar17 = *(uint *)(extraout_ECX + 0x19) < 0x6383ea3e;
      puVar13 = (undefined1 *)(iVar9 + -8);
      *(undefined4 *)(iVar9 + -8) = 0x514db1;
      uVar20 = func_0x8f4910b7();
      puVar10 = (undefined2 *)((ulonglong)uVar20 >> 0x20);
      if (bVar17) {
        puVar12 = (undefined4 *)(puVar13 + -4);
        *(undefined4 **)(puVar13 + -4) = puVar11;
        cVar3 = '\x1d';
        do {
          puVar11 = puVar11 + -1;
          puVar12 = puVar12 + -1;
          *puVar12 = *puVar11;
          cVar3 = cVar3 + -1;
        } while ('\0' < cVar3);
        *(undefined1 **)(puVar13 + -0x7c) = puVar13 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      *unaff_ESI = (*unaff_ESI - (int)unaff_ESI) - (uint)bVar17;
      bVar18 = 9 < ((byte)uVar20 & 0xf) | bVar18;
      uVar8 = (undefined3)((ulonglong)uVar20 >> 8);
      bVar5 = (byte)uVar20 + bVar18 * '\x06';
      puVar12 = (undefined4 *)
                (puVar7 + (-(uint)(CONCAT31(uVar8,bVar5 + (0x90 < (bVar5 & 0xf0) |
                                                          puVar11 < *(undefined4 **)
                                                                     (puVar10 + (int)puVar7 * 4) |
                                                          bVar18 * (0xf9 < bVar5)) * '`') <
                                  0xb79e35cb) - *(int *)((int)unaff_ESI + 0xf)));
      puVar7 = (undefined1 *)CONCAT31(uVar8,uRamf0a18cd1);
      puVar16 = puVar15 + (uint)bVar19 * -2 + 1;
      puVar2 = (undefined1 *)*puVar15;
      iVar9 = extraout_ECX_00;
      do {
        iVar9 = iVar9 + -1;
        register0x00000010 = (BADSPACEBASE *)puVar11;
        puVar15 = puVar16;
      } while (iVar9 != 0 && puVar7 == puVar2);
    }
    *(undefined4 *)((int)register0x00000010 + -0x3f3251b) = in_XMM1_Da;
    *(undefined4 *)((int)register0x00000010 + -0x3f32517) = in_XMM1_Db;
    *(undefined4 *)((int)register0x00000010 + -0x3f32513) = in_XMM1_Dc;
    *(undefined4 *)((int)register0x00000010 + -0x3f3250f) = in_XMM1_Dd;
    *(uint *)(puVar13 + -4) = (uint)puVar7 | 0xee99e10d;
    *(int *)(puVar13 + -8) = iVar9;
    *(undefined2 **)(puVar13 + -0xc) = puVar10;
    *(undefined4 **)(puVar13 + -0x10) = puVar12;
    *(undefined1 **)(puVar13 + -0x14) = puVar13;
    *(int *)(puVar13 + -0x18) = (int)register0x00000010 + 1;
    *(int **)(puVar13 + -0x1c) = unaff_ESI;
    *(uint **)(puVar13 + -0x20) = puVar15;
    while (iVar9 != 0) {
      iVar9 = iVar9 + -1;
      uVar1 = in((short)puVar10);
      *(undefined1 *)puVar15 = uVar1;
      puVar15 = (uint *)((int)puVar15 + (uint)bVar19 * -2 + 1);
    }
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  *puVar10 = in_ES;
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


