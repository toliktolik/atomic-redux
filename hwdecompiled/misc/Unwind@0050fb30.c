/*
 * Function: Unwind@0050fb30
 * Address: 0050fb30
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x0050fb34) overlaps instruction at (ram,0x0050fb33)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float10 __fastcall Unwind_0050fb30(char *param_1,undefined2 param_2)

{
  byte *pbVar1;
  char *pcVar2;
  byte bVar3;
  code *pcVar4;
  byte bVar5;
  undefined1 uVar6;
  undefined4 in_EAX;
  undefined1 *puVar7;
  int iVar8;
  undefined3 uVar10;
  uint uVar9;
  char cVar11;
  char *extraout_ECX;
  char *unaff_EBX;
  int unaff_EBP;
  uint unaff_ESI;
  int unaff_EDI;
  byte in_CF;
  bool bVar12;
  undefined1 in_ZF;
  char in_SF;
  float10 fVar13;
  float10 in_ST0;
  float10 extraout_ST0;
  undefined6 uVar14;
  
  puVar7 = (undefined1 *)
           CONCAT31((int3)(CONCAT22((short)((uint)in_EAX >> 0x10),0x4f00) >> 8),-in_CF);
  bVar12 = (char)DAT_2e104c89 < '\0';
  DAT_2e104c89 = DAT_2e104c89 << 1 | in_CF;
  bVar12 = bVar12 != (char)DAT_2e104c89 < '\0';
LAB_0050fb39:
  uVar14 = CONCAT24(param_2,puVar7);
  if ((bool)in_ZF) goto code_r0x0050fb3b;
  goto code_r0x0050fb9d;
code_r0x0050fb3b:
  if ((bool)in_ZF || bVar12 != (bool)in_SF) {
    if ((bool)in_ZF) {
      pcVar4 = (code *)swi(3);
      fVar13 = (float10)(*pcVar4)();
      return fVar13;
    }
    pcVar4 = (code *)swi(4);
    if (SBORROW1((char)unaff_EBX,(char)param_2)) {
      uVar14 = (*pcVar4)();
      param_1 = extraout_ECX;
      in_ST0 = extraout_ST0;
    }
    param_2 = (undefined2)((uint6)uVar14 >> 0x20);
    unaff_EBP = -0x21f810d0;
    iVar8 = (uint)uVar14 + 0xeb3dc430;
    uVar10 = (undefined3)((uint)iVar8 >> 8);
    bVar5 = (char)iVar8 + -0x19 + ((uint)uVar14 < 0x14c23bd0);
    unaff_EDI = CONCAT22((short)((uint)unaff_EDI >> 0x10),(short)unaff_EDI + 1);
    in_ST0 = in_ST0 * (float10)*(int *)(CONCAT31(uVar10,bVar5) + -0x33);
    uVar6 = in(param_2);
    cVar11 = (char)param_1 + *param_1 +
             (bVar5 < 0xc4 || (byte)(bVar5 + 0x3c) < (param_1 < unaff_EBX));
    param_1 = (char *)(CONCAT31((int3)((uint)param_1 >> 8),cVar11) + -1);
    if (param_1 == (char *)0x0 || cVar11 == '\0') {
      return in_ST0;
    }
    uVar9 = (CONCAT31(uVar10,uVar6) + -0x1fb98c84) - (uint)(unaff_ESI < *(uint *)(unaff_ESI + 4));
    puVar7 = (undefined1 *)
             CONCAT22((short)(unaff_ESI >> 0x10),
                      CONCAT11((byte)(unaff_ESI >> 8) & *(byte *)(uVar9 - 0x40),(char)unaff_ESI));
    do {
      unaff_ESI = uVar9;
    } while (SBORROW4(unaff_EDI,_DAT_de07ef72));
  }
  else {
    *(char *)(unaff_EBP + -0x80) = *(char *)(unaff_EBP + -0x80) + -1;
    puVar7 = (undefined1 *)((uint)puVar7 ^ 2);
  }
  iVar8 = unaff_EBP + -1;
  pcVar2 = (char *)(unaff_EBP + 0x33 + (int)unaff_EBX * 4);
  bVar12 = SCARRY1(*pcVar2,'\x02');
  *pcVar2 = *pcVar2 + '\x02';
  in_SF = *pcVar2 < '\0';
  in_ZF = *pcVar2 == '\0';
  unaff_EBP = iVar8;
  if (!bVar12) {
code_r0x0050fb9d:
    out(param_2,puVar7);
    pbVar1 = (byte *)(unaff_EDI + 0x13);
    bVar5 = *pbVar1;
    bVar3 = *pbVar1;
    *pbVar1 = *pbVar1 + 0x25;
    if (!SBORROW1(bVar3,-0x25)) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    bVar12 = SCARRY4((int)puVar7,0x2e104c89) !=
             SCARRY4((int)(&DAT_2e104c89 + (int)puVar7),(uint)(bVar5 < 0xdb));
    puVar7 = &DAT_2e104c89 + (int)puVar7 + (bVar5 < 0xdb);
    in_SF = (int)puVar7 < 0;
    in_ZF = puVar7 == (undefined1 *)0x0;
  }
  goto LAB_0050fb39;
}


