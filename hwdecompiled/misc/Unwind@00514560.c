/*
 * Function: Unwind@00514560
 * Address: 00514560
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x005146f2) overlaps instruction at (ram,0x005146ef)
    */
/* WARNING: Stack frame is not setup normally: Input value of stackpointer is not used */
/* WARNING: Removing unreachable block (ram,0x00514631) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Unwind_00514560(int param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  longlong lVar3;
  char cVar4;
  code *pcVar5;
  byte bVar6;
  byte bVar13;
  int in_EAX;
  undefined3 uVar14;
  uint uVar8;
  uint uVar9;
  undefined4 uVar10;
  undefined4 *puVar11;
  uint uVar12;
  int *piVar15;
  int *piVar16;
  char *pcVar17;
  undefined2 uVar18;
  byte *unaff_EBX;
  undefined4 uVar19;
  int iVar20;
  undefined1 *puVar21;
  int *piVar22;
  int *piVar23;
  undefined1 *puVar24;
  undefined1 *puVar25;
  int *piVar26;
  int *unaff_EBP;
  int iVar27;
  undefined1 *puVar28;
  undefined4 *unaff_ESI;
  undefined1 *puVar29;
  undefined1 *puVar30;
  undefined4 *unaff_EDI;
  undefined4 *puVar31;
  undefined4 *puVar32;
  undefined2 in_ES;
  undefined2 in_CS;
  undefined2 in_SS;
  undefined2 in_DS;
  bool bVar33;
  bool bVar34;
  byte bVar35;
  byte bVar36;
  byte bVar37;
  bool bVar38;
  byte bVar39;
  byte bVar40;
  byte bVar41;
  byte bVar42;
  byte bVar43;
  uint uVar44;
  unkbyte10 in_ST6;
  unkbyte10 in_ST7;
  int *piVar7;
  
  do {
    iVar27 = *unaff_EBP;
    *unaff_EBP = in_EAX;
    unaff_EBP[-1] = param_1;
    unaff_EBP[-2] = param_2;
    unaff_EBP[-3] = (int)unaff_EBX;
    unaff_EBP[-4] = (int)(unaff_EBP + 1);
    unaff_EBP[-5] = iVar27;
    unaff_EBP[-6] = (int)unaff_ESI;
    unaff_EBP[-7] = (int)unaff_EDI;
    *unaff_EBX = *unaff_EBX ^ 0x4a;
    iVar27 = CONCAT22((short)((uint)in_EAX >> 0x10),CONCAT11(0x4a,(char)in_EAX)) + -0x26001079;
    uVar44 = unaff_EBP[-7];
    bVar39 = (uVar44 & 0x4000) != 0;
    bVar38 = (uVar44 & 0x400) != 0;
    bVar37 = (uVar44 & 0x200) != 0;
    bVar36 = (uVar44 & 0x100) != 0;
    bVar35 = (uVar44 & 0x10) != 0;
    bVar43 = (uVar44 & 0x200000) != 0;
    bVar40 = (uVar44 & 0x40000) != 0;
    bVar42 = 0;
    bVar41 = 0;
    unaff_EBX = (byte *)unaff_EBP[-6];
    piVar22 = unaff_EBP + -5;
    piVar23 = unaff_EBP + -5;
    uVar14 = (undefined3)((uint)iVar27 >> 8);
    bVar6 = (char)iVar27 + 0x24;
    piVar7 = (int *)CONCAT31(uVar14,bVar6);
    iVar27 = param_2 + -1;
    if (iVar27 == 0 || param_2 < 1) {
LAB_005145de_3:
      in(0xe2);
      pcVar5 = (code *)swi(3);
      (*pcVar5)();
      return;
    }
    puVar1 = (uint *)((int)piVar7 + 0x3a05bbf3);
    *puVar1 = *puVar1 | (uint)unaff_ESI;
    piVar15 = (int *)(param_1 + -1);
    piVar16 = piVar15;
    if (piVar15 != (int *)0x0 && *puVar1 != 0) {
LAB_005145d1:
      bVar35 = ((uint)piVar7 & 0x1000) != 0;
      bVar37 = false;
      LOCK();
      iVar20 = *(int *)((int)unaff_ESI + 0x438f8d42);
      *(int *)((int)unaff_ESI + 0x438f8d42) = iVar27;
      UNLOCK();
      in_ES = *(undefined2 *)piVar22;
      piVar23 = (int *)((int)piVar22 + 4);
      piVar15 = piVar7;
      piVar7 = piVar16;
      iVar27 = iVar20;
LAB_005145e6:
      out(0xb6,piVar15);
      iVar20 = *piVar23;
      ffree(in_ST6);
      out(*(undefined1 *)((int)unaff_ESI + 1),
          (short)iVar27 + (short)*(undefined4 *)((int)unaff_ESI + -0x570d3a95));
      if ((char)unaff_EBX < -0x12) {
        if (piVar7 == (int *)0x1 || (byte)((byte)piVar15 | 0xd2) != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
      }
      else {
        *(int **)(iVar20 + -4) = piVar7;
        *(undefined2 *)(iVar20 + -8) = in_CS;
        puVar24 = (undefined1 *)(iVar20 + -0xc);
        *(undefined4 *)(iVar20 + -0xc) = 0x514606;
        func_0xfdae8ffb();
        iVar27 = in(0xd7);
        lVar3 = *(longlong *)(iVar27 + -0x352402a6);
        out(0x34,(char)iVar27);
        puVar31 = *(undefined4 **)(puVar24 + 1);
        puVar29 = *(undefined1 **)(puVar24 + 5);
        uVar19 = *(undefined4 *)(puVar24 + 0x11);
        iVar27 = *(int *)(puVar24 + 0x15);
        pcVar17 = *(char **)(puVar24 + 0x19);
        uVar10 = *(undefined4 *)(puVar24 + 0x1d);
        puVar25 = puVar24 + 0x21;
        piVar26 = (int *)(puVar24 + 0x21);
        *(undefined4 *)(puVar24 + 0x1d) = 0x60;
        bVar6 = DAT_bbe0d3d7;
        if (puVar24 != (undefined1 *)0xffffffff) goto LAB_005145de_3;
        puVar32 = (undefined4 *)CONCAT31((int3)((uint)uVar10 >> 8),DAT_bbe0d3d7);
        if (SCARRY4((int)puVar24,1) == (int)puVar24 + 1 < 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        puVar28 = *(undefined1 **)(puVar24 + 0x1d);
        if ((POPCOUNT((int)puVar24 + 1U & 0xff) & 1U) == 0) {
          pcVar17[(int)puVar31 * 2 + 0x7e] = pcVar17[(int)puVar31 * 2 + 0x7e] ^ (byte)iVar27;
          *pcVar17 = *pcVar17 << 5;
          swi(4);
          puVar11 = puVar32;
          puVar32 = puVar31;
          if (-1 < *pcVar17) {
            iVar20 = CONCAT22((short)((uint)uVar19 >> 0x10),
                              CONCAT11((byte)((uint)uVar19 >> 8) | (byte)((uint)pcVar17 >> 8),0x9a))
            ;
            uVar44 = CONCAT31((int3)((uint)pcVar17 >> 8),0xa5);
            if ((POPCOUNT(bVar6 | 0x6e) & 1U) != 0) goto LAB_005146ea;
            piVar7 = (int *)CONCAT31((int3)((uint)iVar27 >> 8),
                                     (byte)iVar27 - *(char *)(iVar27 + 0x12));
            iVar2 = *piVar7;
            *(char *)(iVar20 + 0x7e) = *(char *)(iVar20 + 0x7e) + '\x01';
            puVar32 = (undefined4 *)((uint)bVar38 * -2 + -0x74f8759b);
            puVar30 = puVar29 + (uint)bVar38 * -2 + 1;
            *(short *)((int)piVar7 + -0x32c15d07) = (short)ROUND((float10)lVar3 / (float10)iVar2);
            uVar12 = in(0xd7);
            uVar12 = uVar12 | 0xfe;
            puVar1 = (uint *)((int)puVar32 * 9 + 0x33a421f1);
            uVar9 = *puVar1;
            *puVar1 = *puVar1 + uVar12;
            if (CARRY4(uVar9,uVar12)) {
              iVar20 = *(int *)(puVar24 + 0x21);
              puVar11 = (undefined4 *)CONCAT22((short)((uint)puVar28 >> 0x10),in_DS);
              puVar31 = (undefined4 *)0x53f1f231;
              *(undefined2 *)(puVar24 + 0x21) = in_ES;
              puVar32 = (undefined4 *)0x1c;
              puVar28 = (undefined1 *)0x1c;
              cVar4 = '\x02';
              puRam0000001c = puVar11;
              do {
                puVar11 = puVar11 + -1;
                puVar32 = puVar32 + -1;
                *puVar32 = *puVar11;
                cVar4 = cVar4 + -1;
              } while ('\0' < cVar4);
              uRam00000010 = 0x1c;
              puVar25 = (undefined1 *)0xffffb044;
              *(undefined1 *)(iVar20 + -0x69ec1662) = 0;
              piVar7 = (int *)(uVar44 - 0x5c);
              *piVar7 = *piVar7 << 1;
              bVar6 = (byte)((uint)iVar27 >> 8);
              iVar27 = (uint)(byte)(bVar6 << 1 | bVar6 >> 7) << 8;
              puVar29 = puVar30;
LAB_005146ea:
              piVar7 = (int *)CONCAT31((int3)((uint)iVar27 >> 8),0x84);
              puVar1 = (uint *)(puVar28 + 0x2e);
              puVar32 = (undefined4 *)((int)puVar31 + *puVar1);
              puVar30 = puVar29 + (uint)bVar38 * -2 + 1;
              out(*puVar29,(short)piVar7);
              piVar26 = (int *)(puVar25 + -4);
              *(uint *)(puVar25 + -4) =
                   (uint)(bVar39 & 1) * 0x4000 | (uint)SCARRY4((int)puVar31,*puVar1) * 0x800 |
                   (uint)bVar38 * 0x400 | (uint)(bVar37 & 1) * 0x200 | (uint)(bVar36 & 1) * 0x100 |
                   (uint)((int)puVar32 < 0) * 0x80 | (uint)(puVar32 == (undefined4 *)0x0) * 0x40 |
                   (uint)(bVar35 & 1) * 0x10 |
                   (uint)((POPCOUNT((uint)puVar32 & 0xff) & 1U) == 0) * 4 |
                   (uint)CARRY4((uint)puVar31,*puVar1) | (uint)(bVar43 & 1) * 0x200000 |
                   (uint)(bVar42 & 1) * 0x100000 | (uint)(bVar41 & 1) * 0x80000 |
                   (uint)(bVar40 & 1) * 0x40000;
              uVar12 = uVar44;
            }
            else {
              puVar30[-0x6391dba5] = puVar30[-0x6391dba5] ^ (byte)uVar12;
            }
            while (uVar12 != 0) {
              uVar12 = uVar12 - 1;
              uVar10 = in((short)piVar7);
              *puVar32 = uVar10;
              puVar32 = puVar32 + (uint)bVar38 * -2 + 1;
            }
            out(puVar30[(uint)bVar38 * -8 + 4],(short)piVar7);
            if (*(char *)(*piVar26 + 0x10b1e478) <= (char)iVar20) {
              out(0xc6,(char)*(undefined4 *)
                              (puVar30 + (uint)bVar38 * -8 + 4 + (uint)bVar38 * -2 + 1));
                    /* WARNING: Bad instruction - Truncating control flow here */
              halt_baddata();
            }
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
        }
        else {
          puVar11 = (undefined4 *)CONCAT31((int3)((uint)puVar31 >> 8),(char)puVar31 + '(');
        }
        uRam0000000c = 0x20;
        _DAT_00000000 = puVar32;
        puRam00000004 = puVar29;
        puRam00000008 = puVar28;
        uRam00000010 = uVar19;
        iRam00000014 = iVar27;
        pcRam00000018 = pcVar17;
        puRam0000001c = puVar11;
        *(char *)(puVar32 + 0x113c2a82) = *(char *)(puVar32 + 0x113c2a82) + '\x01';
        uRamfffffffb = in_SS;
      }
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    uVar18 = (undefined2)iVar27;
    if ((POPCOUNT(*puVar1 & 0xff) & 1U) != 0) {
      out(uVar18,(char)piVar15);
      goto LAB_005145e6;
    }
    out(uVar18,(char)piVar15);
    unaff_EBP[-6] = 0xbbb7ba86;
    LOCK();
    *(char *)(unaff_ESI + 1) = (char)(param_1 + 0x62a8ae9aU);
    uVar44 = param_1 + 0x62a8ae9aU & 0xffffff00;
    UNLOCK();
    *(undefined2 *)(unaff_EBP + -7) = in_SS;
    puVar21 = (undefined1 *)((int)unaff_EBP + -0x1d);
    bVar13 = bVar6 - *(byte *)((int)piVar7 + 0x35);
    bVar33 = bVar6 < *(byte *)((int)piVar7 + 0x35) || bVar13 < ((int *)0x9d575164 < piVar15);
    param_1 = CONCAT31(uVar14,bVar13 - ((int *)0x9d575164 < piVar15));
    puVar31 = unaff_ESI + (uint)bVar38 * -2 + 1;
    *unaff_EDI = *unaff_ESI;
    while( true ) {
      bVar13 = (byte)(uVar44 >> 8);
      bVar6 = bVar13 + *(byte *)((int)puVar31 + 0x5c9d970d);
      uVar8 = CONCAT31(CONCAT21((short)(uVar44 >> 0x10),bVar6 + bVar33),0xbf);
      uVar9 = (uint)(CARRY1(bVar13,*(byte *)((int)puVar31 + 0x5c9d970d)) || CARRY1(bVar6,bVar33));
      uVar12 = uVar8 + 0xfdc4ea76;
      uVar44 = uVar12 - uVar9;
      puVar1 = (uint *)(param_1 * 3 + -0x5888d3fc);
      uVar9 = (uint)(uVar8 < 0x23b158a || uVar12 < uVar9);
      puVar29 = puVar21 + *puVar1;
      bVar33 = CARRY4((uint)puVar21,*puVar1) || CARRY4((uint)puVar29,uVar9);
      puVar21 = puVar29 + uVar9;
      piVar23 = (int *)(puVar29 + uVar9);
      piVar22 = (int *)(puVar29 + uVar9);
      bVar34 = (POPCOUNT((uint)(puVar29 + uVar9) & 0xff) & 1U) != 0;
      if (bVar34) break;
      in_ST6 = in_ST7;
      if (bVar34) {
        cVar4 = (char)uVar44 + 'F';
        uVar14 = (undefined3)(uVar44 >> 8);
        bVar6 = cVar4 + bVar33;
        piVar16 = (int *)(param_1 + -1);
        if (piVar16 != (int *)0x0 && bVar6 == 0) {
          halt_baddata();
        }
        unaff_ESI = puVar31 + (uint)bVar38 * -2 + 1;
        out(*puVar31,uVar18);
        piVar15 = (int *)CONCAT31(uVar14,bVar6);
        piVar7 = piVar16;
        if (bVar6 == 0 || (SCARRY1((char)uVar44,'F') != SCARRY1(cVar4,bVar33)) != (char)bVar6 < '\0'
           ) goto LAB_005145e6;
        *(undefined4 **)(puVar29 + (uVar9 - 4)) = unaff_ESI;
        bVar38 = 9 < (bVar6 & 0xf) || (bool)bVar35;
        uVar9 = CONCAT31(uVar14,bVar6 + bVar38 * -6) & 0xffffff0f;
        piVar7 = (int *)CONCAT22((short)(uVar9 >> 0x10),
                                 CONCAT11((char)(uVar44 >> 8) - bVar38,(char)uVar9));
        piVar16 = (int *)((int)piVar16 - *piVar7);
        bVar38 = false;
        unaff_EBX = (byte *)((uint)unaff_EBX & 0xff);
        out(uVar18,piVar7);
        puVar1 = (uint *)(iVar27 * 3 + 0x6b915b41);
        *puVar1 = *puVar1 | (uint)unaff_ESI;
        goto LAB_005145d1;
      }
    }
    in_EAX = uVar44 - 1;
    param_2 = iVar27;
    unaff_EBP = (int *)0xbbb7ba86;
    unaff_ESI = puVar31;
    unaff_EDI = unaff_EDI + (uint)bVar38 * -2 + 1;
  } while( true );
}


