/*
 * Function: Assembly_BitShiftLocking
 * Address: 004ff720
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Unable to track spacebase fully for stack */

undefined4 Assembly_BitShiftLocking(void)

{
  char *pcVar1;
  uint *puVar2;
  int iVar3;
  bool bVar4;
  byte bVar5;
  uint uVar6;
  int iVar7;
  uint extraout_ECX;
  undefined4 unaff_EBX;
  int unaff_EBP;
  int *unaff_EDI;
  undefined2 in_CS;
  undefined2 in_SS;
  undefined2 in_DS;
  byte in_AF;
  undefined8 uVar8;
  int *unaff_retaddr;
  undefined1 uStack00000004;
  undefined1 uStack00000005;
  
  uStack00000004 = (undefined1)in_CS;
  uStack00000005 = (undefined1)((ushort)in_CS >> 8);
  uVar8 = func_0x8f159cee();
  iVar7 = (int)uVar8;
  pcVar1 = (char *)(unaff_EBP + 0x1443f2a7);
  bVar5 = (byte)extraout_ECX & 0x1f;
  *pcVar1 = *pcVar1 >> bVar5;
  bVar4 = (extraout_ECX & 0x1f) != 0;
  if (((bVar4 || &stack0x00000000 != (undefined1 *)0xfffffffb) && (!bVar4 || *pcVar1 != '\0')) &&
      (bVar5 != 1 && SCARRY4((int)&stack0x00000004,1)) ==
      (!bVar4 && (int)&stack0x00000005 < 0 || bVar4 && *pcVar1 < '\0')) {
    iVar3 = *unaff_retaddr;
    if (!bVar4 && (int)&stack0x00000005 < 0 || bVar4 && *pcVar1 < '\0') {
      uVar6 = iVar7 - 1U ^ 0x35c9688c;
      bVar5 = (byte)uVar6;
      in_AF = 9 < (bVar5 & 0xf) | in_AF;
      bVar5 = bVar5 + in_AF * '\x06';
      return CONCAT31((int3)(uVar6 >> 8),-(0x90 < (bVar5 & 0xf0) | in_AF * (0xf9 < bVar5)));
    }
    LOCK();
    *(char *)(iVar7 + -0x2eb60e38) = (char)((uint)unaff_EBX >> 8);
    UNLOCK();
    *(undefined2 *)(iVar3 * 0x1e) = in_SS;
    ((undefined2 *)(iVar3 * 0x1e))[-2] = in_DS;
    puVar2 = (uint *)(extraout_ECX + 0xe32848ab + unaff_EBP * 4);
    *puVar2 = *puVar2 >> ((byte)extraout_ECX & 0x1f);
    *unaff_EDI = *unaff_EDI << 0x17;
    iVar7 = 0x788206ba;
  }
  return CONCAT22((short)((uint)iVar7 >> 0x10),
                  CONCAT11((byte)((uint)iVar7 >> 8) | *(byte *)((ulonglong)uVar8 >> 0x20),
                           (char)iVar7));
}


