/*
 * Function: D3D_TranslateMatrix
 * Address: 00484a50
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
D3D_TranslateMatrix(void *this,_String_base *param_1,int param_2,int param_3,int param_4,int param_5
                   )

{
  int iVar1;
  uint uVar2;
  uint *puVar3;
  uint *puVar4;
  ushort *puVar5;
  int iVar6;
  _String_base *p_Var7;
  undefined4 local_84 [2];
  int local_7c;
  int local_74;
  ushort *local_60;
  void *local_8;
  
  iVar6 = param_4;
  local_84[0] = 0x7c;
  p_Var7 = param_1;
  local_8 = this;
  iVar1 = (**(code **)(*(int *)param_1 + 100))(param_1,0,local_84,0x21,0,"Lock Texture");
  D3D_ValidateRenderTarget(iVar1,p_Var7);
  iVar1 = *(int *)((int)this + 8) - param_2;
  if (param_4 < iVar1) {
    iVar1 = param_4;
  }
  param_4 = iVar1;
  iVar1 = *(int *)((int)this + 0xc) - param_3;
  if (param_5 < iVar1) {
    iVar1 = param_5;
  }
  if ((param_4 < iVar6) || (iVar1 < param_5)) {
    puVar5 = local_60;
    for (uVar2 = (uint)(local_7c * local_74) >> 2; uVar2 != 0; uVar2 = uVar2 - 1) {
      puVar5[0] = 0;
      puVar5[1] = 0;
      puVar5 = puVar5 + 2;
    }
    for (uVar2 = local_7c * local_74 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
      *(undefined1 *)puVar5 = 0;
      puVar5 = (ushort *)((int)puVar5 + 1);
    }
  }
  if (((0 < param_4) && (0 < iVar1)) &&
     (puVar3 = (uint *)(*(int *)((int)this + 4) + (*(int *)((int)this + 8) * param_3 + param_2) * 4)
     , param_5 = iVar1, 0 < iVar1)) {
    do {
      puVar4 = puVar3;
      puVar5 = local_60;
      iVar6 = param_4;
      if (0 < param_4) {
        do {
          uVar2 = *puVar4;
          *puVar5 = (ushort)(uVar2 >> 0x10) & 0xf000 | (ushort)(uVar2 >> 0xc) & 0xf00 |
                    (ushort)(uVar2 >> 8) & 0xf0 | (ushort)(uVar2 >> 4) & 0xf;
          iVar6 = iVar6 + -1;
          puVar4 = puVar4 + 1;
          puVar5 = puVar5 + 1;
          this = local_8;
        } while (iVar6 != 0);
      }
      puVar3 = puVar3 + *(int *)((int)this + 8);
      local_60 = (ushort *)((int)local_60 + local_74);
      param_5 = param_5 + -1;
    } while (param_5 != 0);
  }
  iVar6 = (**(code **)(*(int *)param_1 + 0x80))(param_1,0,"Texture Unlock");
  D3D_ValidateRenderTarget(iVar6,param_1);
  return;
}


