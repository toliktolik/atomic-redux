/*
 * Function: Image_EdgeDetection
 * Address: 0049c710
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Image_EdgeDetection(undefined4 param_1,uint *param_2)

{
  int *piVar1;
  uint uVar2;
  char *pcVar3;
  char *pcVar4;
  uint *puVar5;
  uint *puVar6;
  uint *extraout_ECX;
  uint *extraout_ECX_00;
  uint extraout_EDX;
  uint uVar7;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint *puVar8;
  uint *puVar9;
  uint *puVar10;
  bool bVar11;
  undefined8 uVar12;
  undefined **local_5c [10];
  undefined1 local_34 [4];
  undefined1 local_30;
  undefined4 local_20;
  undefined4 local_1c;
  void *local_18;
  uint *local_14;
  void *pvStack_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  puVar5 = param_2;
  local_8 = 0xffffffff;
  uStack_c = 0x515e68;
  pvStack_10 = ExceptionList;
  ExceptionList = &pvStack_10;
  if (*(char *)((int)param_2 + 0x29) != '\0') {
    local_1c = 0xf;
    local_20 = 0;
    local_30 = 0;
    pcVar3 = "invalid map/set<T> iterator";
    do {
      pcVar4 = pcVar3;
      pcVar3 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    ExceptionList = &pvStack_10;
    String_Assign(local_34,(_String_base *)"invalid map/set<T> iterator",(uint)(pcVar4 + -0x52a114))
    ;
    local_8 = 0;
    Level_InitializeFrigistan(local_5c,local_34);
    local_5c[0] = &PTR_Level_InitializePetrovakia_00531574;
    CRuntime_CxxThrowException(local_5c,&DAT_0054f69c);
  }
  local_14 = puVar5;
  Collision_HandlePlayerHit((int *)&param_2);
  puVar8 = (uint *)*puVar5;
  puVar6 = puVar5 + 2;
  uVar7 = extraout_EDX;
  puVar10 = puVar5;
  if (*(char *)((int)puVar8 + 0x29) == '\0') {
    uVar7 = *puVar6;
    if (*(char *)(uVar7 + 0x29) != '\0') goto LAB_0049c7b8;
    puVar6 = param_2 + 2;
    puVar10 = param_2;
  }
  puVar8 = (uint *)*puVar6;
LAB_0049c7b8:
  if (puVar10 == puVar5) {
    puVar9 = (uint *)puVar5[1];
    uVar12 = CONCAT44(uVar7,puVar9);
    if (*(char *)((int)puVar8 + 0x29) == '\0') {
      puVar8[1] = (uint)puVar9;
    }
    if (*(uint **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(uint **)(*(int *)((int)local_18 + 4) + 4) = puVar8;
    }
    else if ((uint *)*puVar9 == local_14) {
      *puVar9 = (uint)puVar8;
    }
    else {
      puVar9[2] = (uint)puVar8;
    }
    if ((uint *)**(int **)((int)local_18 + 4) == local_14) {
      if (*(char *)((int)puVar8 + 0x29) == '\0') {
        uVar12 = Collision_CheckRectangle((int *)puVar8);
      }
      uVar7 = (uint)((ulonglong)uVar12 >> 0x20);
      **(undefined4 **)((int)local_18 + 4) = (int)uVar12;
    }
    puVar5 = local_14;
    if (*(uint **)(*(int *)((int)local_18 + 4) + 8) == local_14) {
      if (*(char *)((int)puVar8 + 0x29) == '\0') {
        uVar12 = Animation_SetOffset((int)puVar8);
        uVar7 = (uint)((ulonglong)uVar12 >> 0x20);
        puVar5 = *(uint **)((int)local_18 + 4);
        puVar5[2] = (uint)uVar12;
      }
      else {
        puVar5 = *(uint **)((int)local_18 + 4);
        puVar5[2] = (uint)puVar9;
      }
    }
  }
  else {
    *(uint **)(*puVar5 + 4) = puVar10;
    *puVar10 = *puVar5;
    puVar9 = puVar10;
    if (puVar10 != (uint *)puVar5[2]) {
      puVar9 = (uint *)puVar10[1];
      if (*(char *)((int)puVar8 + 0x29) == '\0') {
        puVar8[1] = (uint)puVar9;
      }
      *puVar9 = (uint)puVar8;
      *puVar6 = local_14[2];
      *(uint **)(local_14[2] + 4) = puVar10;
    }
    if (*(uint **)(*(int *)((int)local_18 + 4) + 4) == local_14) {
      *(uint **)(*(int *)((int)local_18 + 4) + 4) = puVar10;
    }
    else {
      piVar1 = (int *)local_14[1];
      if ((uint *)*piVar1 == local_14) {
        *piVar1 = (int)puVar10;
      }
      else {
        piVar1[2] = (int)puVar10;
      }
    }
    uVar7 = local_14[1];
    puVar10[1] = uVar7;
    uVar2 = puVar10[10];
    puVar5 = (uint *)CONCAT31((int3)(uVar7 >> 8),(char)uVar2);
    uVar7 = CONCAT31((int3)((uint)local_18 >> 8),(char)local_14[10]);
    *(char *)(puVar10 + 10) = (char)local_14[10];
    *(char *)(local_14 + 10) = (char)uVar2;
  }
  if ((char)local_14[10] == '\x01') {
    if (puVar8 != *(uint **)(*(int *)((int)local_18 + 4) + 4)) {
      do {
        if ((char)puVar8[10] != '\x01') break;
        puVar5 = (uint *)*puVar9;
        if (puVar8 == puVar5) {
          puVar5 = (uint *)puVar9[2];
          if ((char)puVar5[10] == '\0') {
            *(undefined1 *)(puVar5 + 10) = 1;
            *(undefined1 *)(puVar9 + 10) = 0;
            Vector_Scale(local_18,(int)puVar9);
            puVar5 = (uint *)puVar9[2];
            uVar7 = extraout_EDX_00;
          }
          if (*(char *)((int)puVar5 + 0x29) == '\0') {
            if ((*(char *)(*puVar5 + 0x28) != '\x01') ||
               (uVar7 = puVar5[2], *(char *)(uVar7 + 0x28) != '\x01')) {
              if (*(char *)(puVar5[2] + 0x28) == '\x01') {
                *(undefined1 *)(*puVar5 + 0x28) = 1;
                *(undefined1 *)(puVar5 + 10) = 0;
                Vector_Lerp(local_18,(int *)puVar5);
                puVar5 = (uint *)puVar9[2];
              }
              *(char *)(puVar5 + 10) = (char)puVar9[10];
              *(undefined1 *)(puVar9 + 10) = 1;
              *(undefined1 *)(puVar5[2] + 0x28) = 1;
              Vector_Scale(local_18,(int)puVar9);
              puVar5 = extraout_ECX;
              uVar7 = extraout_EDX_01;
              break;
            }
LAB_0049c96c:
            *(undefined1 *)(puVar5 + 10) = 0;
          }
        }
        else {
          if ((char)puVar5[10] == '\0') {
            *(undefined1 *)(puVar5 + 10) = 1;
            *(undefined1 *)(puVar9 + 10) = 0;
            Vector_Lerp(local_18,(int *)puVar9);
            puVar5 = (uint *)*puVar9;
            uVar7 = extraout_EDX_02;
          }
          if (*(char *)((int)puVar5 + 0x29) == '\0') {
            if ((*(char *)(puVar5[2] + 0x28) == '\x01') &&
               (uVar7 = *puVar5, *(char *)(uVar7 + 0x28) == '\x01')) goto LAB_0049c96c;
            if (*(char *)(*puVar5 + 0x28) == '\x01') {
              *(undefined1 *)(puVar5[2] + 0x28) = 1;
              *(undefined1 *)(puVar5 + 10) = 0;
              Vector_Scale(local_18,(int)puVar5);
              puVar5 = (uint *)*puVar9;
            }
            *(char *)(puVar5 + 10) = (char)puVar9[10];
            *(undefined1 *)(puVar9 + 10) = 1;
            *(undefined1 *)(*puVar5 + 0x28) = 1;
            Vector_Lerp(local_18,(int *)puVar9);
            puVar5 = extraout_ECX_00;
            uVar7 = extraout_EDX_03;
            break;
          }
        }
        puVar5 = *(uint **)(*(int *)((int)local_18 + 4) + 4);
        bVar11 = puVar9 != puVar5;
        puVar8 = puVar9;
        puVar9 = (uint *)puVar9[1];
      } while (bVar11);
    }
    *(undefined1 *)(puVar8 + 10) = 1;
  }
  if (local_14[9] < 0x10) {
    local_14[9] = 0xf;
    local_14[8] = 0;
    *(undefined1 *)(local_14 + 4) = 0;
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler((int)puVar5,uVar7);
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler((int)puVar5,uVar7);
}


