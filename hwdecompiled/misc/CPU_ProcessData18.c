/*
 * Function: CPU_ProcessData18
 * Address: 004c6fa0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall CPU_ProcessData18(undefined4 param_1,uint param_2,undefined4 *param_3)

{
  int iVar1;
  int extraout_ECX;
  int iVar2;
  uint extraout_EDX;
  int *piVar3;
  int iVar4;
  int iVar5;
  
  if (param_3 != (undefined4 *)0x0) {
    iVar2 = param_3[1];
    if (iVar2 == 0) {
      iVar4 = 0;
    }
    else {
      iVar4 = *(int *)(iVar2 + 0x1c);
    }
    iVar1 = param_3[0x12];
    if (param_3[2] != 0) {
      iVar4 = 0;
      if (0 < *(int *)(iVar2 + 4)) {
        do {
          param_2 = param_3[2];
          if (*(int *)(param_2 + iVar4 * 4) != 0) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(iVar2,param_2);
          }
          iVar4 = iVar4 + 1;
        } while (iVar4 < *(int *)(iVar2 + 4));
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar2,param_2);
    }
    if ((iVar4 != 0) && (iVar5 = 0, 0 < *(int *)(iVar4 + 8))) {
      piVar3 = (int *)(iVar4 + 0x20);
      do {
        if ((iVar1 != 0) && (*(int *)(iVar1 + 0xc) != 0)) {
          (**(code **)((&PTR_PTR_Process_WaitForExit_005682c8)
                       [*(int *)(iVar4 + 0x120 + *(int *)(*piVar3 + 0xc) * 4)] + 0xc))
                    (*(undefined4 *)(*(int *)(iVar1 + 0xc) + iVar5 * 4));
          iVar2 = extraout_ECX;
          param_2 = extraout_EDX;
        }
        iVar5 = iVar5 + 1;
        piVar3 = piVar3 + 1;
      } while (iVar5 < *(int *)(iVar4 + 8));
    }
    if (iVar1 != 0) {
      if (*(int *)(iVar1 + 0xc) == 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar1,param_2);
      }
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar2,param_2);
    }
    for (iVar2 = 0x14; iVar2 != 0; iVar2 = iVar2 + -1) {
      *param_3 = 0;
      param_3 = param_3 + 1;
    }
  }
  return;
}


