/*
 * Function: Unwind@00511a71
 * Address: 00511a71
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00511a5a) overlaps instruction at (ram,0x00511a59)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Removing unreachable block (ram,0x00511abd) */
/* WARNING: Removing unreachable block (ram,0x00511b7d) */

undefined2 __fastcall Unwind_00511a71(int *param_1,int *param_2)

{
  uint *puVar1;
  byte *pbVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  undefined6 uVar6;
  undefined1 uVar7;
  byte bVar8;
  byte bVar9;
  byte bVar12;
  int *in_EAX;
  undefined3 uVar13;
  uint uVar11;
  int iVar14;
  byte bVar16;
  uint uVar15;
  undefined6 *unaff_EBX;
  int *unaff_EBP;
  undefined4 *unaff_ESI;
  int *unaff_EDI;
  undefined4 *puVar17;
  undefined2 in_CS;
  bool bVar18;
  bool bVar19;
  undefined2 in_FPUControlWord;
  undefined6 *puVar10;
  
code_r0x00511a71:
  bVar19 = ((uint)in_EAX & 0x1000) != 0;
  param_2 = (int *)((int)param_2 + -1);
  pbVar2 = (byte *)((int)param_2 + (int)unaff_EDI);
  bVar18 = false;
  *pbVar2 = *pbVar2 | (byte)unaff_EBX;
  uVar13 = (undefined3)((uint)in_EAX >> 8);
  if ((POPCOUNT(*pbVar2) & 1U) != 0) {
    *unaff_EDI = (*unaff_EDI - (int)param_2) - (uint)((byte)in_EAX < 199);
    LOCK();
    *(char *)CONCAT31(uVar13,((byte)in_EAX + 0x39 ^ 0x54) + 0x9d) =
         (char)((uint)((int)param_1 * 2) >> 8);
    UNLOCK();
    func_0x04437490();
    return in_CS;
  }
  unaff_EDI[8] = (int)param_1;
  uVar7 = in(4);
  puVar10 = (undefined6 *)CONCAT31(uVar13,uVar7);
  in_EAX = unaff_EBP;
  do {
    uVar15 = (int)puVar10 + 1;
    bVar9 = (byte)param_1;
    if (uVar15 == 0 || SCARRY4((int)puVar10,1) != (int)uVar15 < 0) {
      out(*unaff_ESI,(short)param_2);
      puVar1 = (uint *)((int)param_2 + -0x65b42a3a);
      *puVar1 = *puVar1 << (bVar9 & 0x1f) | *puVar1 >> 0x20 - (bVar9 & 0x1f);
      bVar8 = (byte)uVar15;
      if (!SBORROW1(*(char *)(unaff_ESI + 1),(char)*unaff_EDI)) {
        *(undefined4 *)((int)param_1 + -0x55188152) = 0x5ef5610a;
        *(byte *)((int)puVar10 + 0x3f) = *(byte *)((int)puVar10 + 0x3f) | bVar8;
        *(char *)((int)in_EAX + -0x4de6167d) = *(char *)((int)in_EAX + -0x4de6167d) + bVar9;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      uVar6 = *unaff_EBX;
      bVar19 = (bool)(9 < (bVar8 & 0xf) | bVar19);
      uVar11 = CONCAT31((int3)(uVar15 >> 8),bVar8 + bVar19 * -6) & 0xffffff0f;
      swi(4);
      unaff_EBP = (int *)in(0x9a);
      while( true ) {
        bVar9 = (byte)unaff_EBP;
        puVar17 = (undefined4 *)uVar6;
        if (-1 < (char)(bVar9 + 0x19)) {
          do {
            iVar14 = (int)param_2 + 1;
            uVar15 = (uint)unaff_EBP >> 8;
            *(undefined2 *)(puVar17 + 0x10) = in_FPUControlWord;
            iVar4 = *unaff_EBP;
            uVar3 = in((short)in_EAX);
            *puVar17 = uVar3;
            unaff_EBP = param_1;
            param_1 = (int *)(iVar4 * 0x5d);
            puVar17 = puVar17 + 1;
            param_2 = in_EAX;
          } while (-1 < (char)((byte)((uint)iVar14 >> 8) & (byte)uVar15));
          do {
                    /* WARNING: Do nothing block with infinite loop */
          } while( true );
        }
        if (bVar9 < 0xe7) break;
        unaff_EBX = (undefined6 *)(*(int *)((int)unaff_EBX + -0x32) * -0x651a67ea);
      }
      unaff_ESI = (undefined4 *)
                  (CONCAT22((short)(uVar11 >> 0x10),
                            CONCAT11((char)(uVar15 >> 8) - bVar19,(char)uVar11)) + 1);
      *(byte *)((int)param_1 + -0x77) = *(byte *)((int)param_1 + -0x77) << 1 | bVar9 < 0xe7;
      unaff_EDI = (int *)((int)(undefined4 *)uVar6 + -1);
      puVar10 = unaff_EBX;
    }
    else {
      param_2 = (int *)((int)uVar15 >> 0x1f);
      in_EAX = (int *)((int)in_EAX + 1);
      unaff_EDI = (int *)((int)unaff_EDI + 1);
      uVar11 = (uint)bVar18;
      uVar5 = (int)puVar10 + 0x51294c72;
      bVar18 = uVar15 < 0xaed6b38f || uVar5 < uVar11;
      unaff_EBP = (int *)(uVar5 - uVar11);
      puVar10 = unaff_EBX;
      if (unaff_EBP == (int *)0x0 ||
          (SBORROW4(uVar15,-0x51294c71) != SBORROW4(uVar5,uVar11)) != (int)unaff_EBP < 0) break;
    }
    bVar18 = 0x6c < (byte)unaff_EBP;
    unaff_EBX = (undefined6 *)CONCAT31((int3)((uint)unaff_EBP >> 8),(byte)unaff_EBP + 0x93);
  } while( true );
  bVar12 = (byte)((uint)unaff_EBP >> 8);
  bVar16 = (byte)((uint)unaff_EBX >> 8);
  bVar8 = bVar16 + bVar12;
  unaff_EBX = (undefined6 *)
              CONCAT22((short)((uint)unaff_EBX >> 0x10),CONCAT11(bVar8 + bVar18,(char)unaff_EBX));
  param_1 = (int *)CONCAT31((int3)((uint)param_1 >> 8),
                            (bVar9 - bVar12) - (CARRY1(bVar16,bVar12) || CARRY1(bVar8,bVar18)));
  goto code_r0x00511a71;
}


