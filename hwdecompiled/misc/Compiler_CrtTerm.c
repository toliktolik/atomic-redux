/*
 * Function: Compiler_CrtTerm
 * Address: 004f6973
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void Compiler_CrtTerm(void)

{
  char cVar1;
  ushort uVar2;
  int *this;
  undefined4 *puVar3;
  bool bVar4;
  undefined2 uVar5;
  wint_t wVar6;
  facet *this_00;
  uint uVar7;
  char *pcVar8;
  _String_base *p_Var9;
  int iVar10;
  undefined2 extraout_var;
  undefined4 uVar11;
  undefined2 extraout_var_00;
  ushort *puVar12;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  uint extraout_EDX_07;
  uint uVar13;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  uint extraout_EDX_10;
  uint extraout_EDX_11;
  int unaff_EBP;
  undefined4 *unaff_EDI;
  uint uVar14;
  int iVar15;
  undefined4 *puVar16;
  
  Assembly_BitShiftLocking();
  *(uint *)(unaff_EBP + -0x10) = DAT_00569f5c ^ *(uint *)(unaff_EBP + 4);
  *(undefined4 *)(unaff_EBP + -4) = 0;
  SexyWidget_ProcessInput(*(void **)(unaff_EBP + 0x18),(int *)(unaff_EBP + -0x24));
  if (*(char *)(unaff_EBP + 0x14) == '\0') {
    *(undefined1 *)(unaff_EBP + -4) = 2;
    this_00 = Timer_GetElapsed();
  }
  else {
    *(undefined1 *)(unaff_EBP + -4) = 1;
    this_00 = Timer_SetInterval();
  }
  *(undefined1 *)(unaff_EBP + -4) = 0;
  *(facet **)(unaff_EBP + -0x14) = this_00;
  SmartPointer_Destructor((uint *)(unaff_EBP + -0x24));
  uVar7 = (**(code **)(*(int *)this_00 + 0x1c))();
  *(uint *)(unaff_EBP + 0x14) = uVar7;
  Runtime_FreeBlock(this_00,unaff_EBP + -0xbc);
  *(undefined1 *)(unaff_EBP + -4) = 3;
  uVar14 = extraout_EDX;
  if (uVar7 < *(uint *)(unaff_EBP + 0x38)) {
    pcVar8 = *(char **)(unaff_EBP + -0xb8);
    if (*(uint *)(unaff_EBP + -0xa4) < 0x10) {
      pcVar8 = (char *)(unaff_EBP + -0xb8);
    }
    if ('\0' < *pcVar8) {
      uVar5 = (**(code **)(*(int *)this_00 + 8))();
      pcVar8 = *(char **)(unaff_EBP + -0xb8);
      if (*(uint *)(unaff_EBP + -0xa4) < 0x10) {
        pcVar8 = (char *)(unaff_EBP + -0xb8);
      }
      uVar7 = *(int *)(unaff_EBP + 0x38) - *(int *)(unaff_EBP + 0x14);
      uVar14 = extraout_EDX_00;
      while (((cVar1 = *pcVar8, cVar1 != '\x7f' && ('\0' < cVar1)) && ((uint)(int)cVar1 < uVar7))) {
        uVar7 = uVar7 - (int)cVar1;
        Compiler_UnexpectedHandler((_String_base *)(unaff_EBP + 0x24),uVar14,uVar7,1,uVar5);
        uVar14 = extraout_EDX_01;
        if ('\0' < pcVar8[1]) {
          pcVar8 = pcVar8 + 1;
        }
      }
    }
  }
  Collision_ClosestPoint(unaff_EBP + -0x84,uVar14,'\0');
  this = *(int **)(unaff_EBP + -0x14);
  iVar10 = *this;
  puVar16 = (undefined4 *)(unaff_EBP + 0x20);
  *(undefined1 *)(unaff_EBP + -4) = 4;
  if (*(char *)(unaff_EBP + 0x20) == '\0') {
    (**(code **)(iVar10 + 0x20))();
    *(undefined4 *)(unaff_EBP + -0x20) = *(undefined4 *)(unaff_EBP + 0x20);
    p_Var9 = (_String_base *)STL_String_Insert(this,unaff_EBP + -0xd8);
    *(undefined1 *)(unaff_EBP + -4) = 6;
    uVar14 = extraout_EDX_03;
  }
  else {
    (**(code **)(iVar10 + 0x24))();
    *(undefined4 *)(unaff_EBP + -0x20) = *(undefined4 *)(unaff_EBP + 0x20);
    p_Var9 = (_String_base *)Runtime_ReallocBlock(this,unaff_EBP + -0xd8);
    *(undefined1 *)(unaff_EBP + -4) = 5;
    uVar14 = extraout_EDX_02;
  }
  UI_ShowWeaponDisplay((_String_base *)(unaff_EBP + -0x84),uVar14,p_Var9,0,0xffffffff);
  Collision_ClosestPoint(unaff_EBP + -0xd8,extraout_EDX_04,'\x01');
  Collision_ClosestPoint(unaff_EBP + -0xa0,extraout_EDX_05,'\0');
  uVar14 = *(uint *)(*(int *)(unaff_EBP + 0x18) + 0xc);
  *(undefined1 *)(unaff_EBP + -4) = 7;
  if ((uVar14 & 8) != 0) {
    p_Var9 = (_String_base *)Resource_FreeResource(this,unaff_EBP + -0xd8);
    *(undefined1 *)(unaff_EBP + -4) = 8;
    UI_ShowWeaponDisplay((_String_base *)(unaff_EBP + -0xa0),extraout_EDX_06,p_Var9,0,0xffffffff);
    *(undefined1 *)(unaff_EBP + -4) = 7;
    Collision_ClosestPoint(unaff_EBP + -0xd8,extraout_EDX_07,'\x01');
  }
  uVar14 = *(uint *)(unaff_EBP + 0x38);
  bVar4 = false;
  uVar13 = 0;
  uVar7 = 0;
  do {
    cVar1 = *(char *)(unaff_EBP + -0x20 + uVar7);
    if (cVar1 == ' ') {
      bVar4 = true;
    }
    else if (cVar1 == '$') {
      uVar13 = uVar13 + *(int *)(unaff_EBP + -0x8c);
    }
    else if (cVar1 == '+') {
      uVar13 = uVar13 + *(int *)(unaff_EBP + -0x70);
    }
    else if (cVar1 == 'v') {
      if (*(uint *)(unaff_EBP + 0x14) < uVar14) {
        iVar10 = 0;
      }
      else {
        iVar10 = (*(int *)(unaff_EBP + 0x14) - uVar14) + 1;
      }
      uVar14 = *(uint *)(unaff_EBP + 0x38);
      uVar13 = uVar13 + (*(int *)(unaff_EBP + 0x14) != 0) + uVar14 + iVar10;
    }
    uVar7 = uVar7 + 1;
  } while (uVar7 < 4);
  uVar7 = *(uint *)(*(int *)(unaff_EBP + 0x18) + 0x14);
  if (((int)uVar7 < 1) || (uVar7 <= uVar13)) {
    iVar10 = 0;
  }
  else {
    iVar10 = uVar7 - uVar13;
  }
  uVar7 = *(uint *)(*(int *)(unaff_EBP + 0x18) + 0xc) & 0x1c0;
  *(int *)(unaff_EBP + 0x20) = iVar10;
  *(uint *)(unaff_EBP + -0x68) = uVar7;
  if ((uVar7 != 0x40) && ((uVar7 != 0x100 || (!bVar4)))) {
    *(undefined4 *)(unaff_EBP + -0x1c) = *(undefined4 *)(unaff_EBP + 0xc);
    *(undefined4 *)(unaff_EBP + -0x18) = *(undefined4 *)(unaff_EBP + 0x10);
    for (; iVar10 != 0; iVar10 = iVar10 + -1) {
      Timer_Create((void *)(unaff_EBP + -0x1c),*(undefined4 *)(unaff_EBP + 0x1c));
    }
    *(undefined4 *)(unaff_EBP + 0x20) = 0;
    uVar14 = *(uint *)(unaff_EBP + 0x38);
    *(undefined4 *)(unaff_EBP + 0xc) = *(undefined4 *)(unaff_EBP + -0x1c);
    *(undefined4 *)(unaff_EBP + 0x10) = *(undefined4 *)(unaff_EBP + -0x18);
  }
  *(undefined4 *)(unaff_EBP + -0x18) = 0;
  uVar7 = *(uint *)(unaff_EBP + 0x10);
  uVar11 = *(undefined4 *)(unaff_EBP + 0xc);
  do {
    cVar1 = *(char *)(unaff_EBP + -0x20 + *(int *)(unaff_EBP + -0x18));
    if (cVar1 == ' ') {
      if (*(int *)(unaff_EBP + -0x68) != 0x100) goto LAB_004f6e0f;
      iVar10 = *(int *)(unaff_EBP + 0x20);
      *(undefined4 *)(unaff_EBP + -0x4c) = uVar11;
      *(uint *)(unaff_EBP + -0x48) = uVar7;
      for (; iVar10 != 0; iVar10 = iVar10 + -1) {
        Timer_Create((void *)(unaff_EBP + -0x4c),*(undefined4 *)(unaff_EBP + 0x1c));
      }
      uVar11 = *(undefined4 *)(unaff_EBP + -0x4c);
      uVar7 = *(uint *)(unaff_EBP + -0x48);
      *(undefined4 *)(unaff_EBP + 0x20) = 0;
LAB_004f6e09:
      *(undefined4 *)(unaff_EBP + 0xc) = uVar11;
      *(uint *)(unaff_EBP + 0x10) = uVar7;
    }
    else {
      if (cVar1 == '$') {
        puVar12 = *(ushort **)(unaff_EBP + -0x9c);
        if (*(uint *)(unaff_EBP + -0x88) < 8) {
          puVar12 = (ushort *)(unaff_EBP + -0x9c);
        }
        iVar10 = *(int *)(unaff_EBP + -0x8c);
        *(undefined4 *)(unaff_EBP + -0x3c) = uVar11;
        *(uint *)(unaff_EBP + -0x38) = uVar7;
        for (; iVar10 != 0; iVar10 = iVar10 + -1) {
          Timer_Create((void *)(unaff_EBP + -0x3c),(uint)*puVar12);
          puVar12 = puVar12 + 1;
        }
        uVar11 = *(undefined4 *)(unaff_EBP + -0x3c);
        uVar7 = *(uint *)(unaff_EBP + -0x38);
        goto LAB_004f6e09;
      }
      if (cVar1 == '+') {
        if (*(int *)(unaff_EBP + -0x70) != 0) {
          puVar12 = *(ushort **)(unaff_EBP + -0x80);
          if (*(uint *)(unaff_EBP + -0x6c) < 8) {
            puVar12 = (ushort *)(unaff_EBP + -0x80);
          }
          uVar2 = *puVar12;
          *(undefined4 *)(unaff_EBP + -0x34) = uVar11;
          *(uint *)(unaff_EBP + -0x30) = uVar7;
          Timer_Create((void *)(unaff_EBP + -0x34),(uint)uVar2);
          uVar11 = *(undefined4 *)(unaff_EBP + -0x34);
          uVar7 = *(uint *)(unaff_EBP + -0x30);
          goto LAB_004f6e09;
        }
      }
      else if (cVar1 == 'v') {
        if (*(int *)(unaff_EBP + 0x14) == 0) {
          puVar12 = *(ushort **)(unaff_EBP + 0x28);
          if (*(uint *)(unaff_EBP + 0x3c) < 8) {
            puVar12 = (ushort *)(unaff_EBP + 0x28);
          }
          *(undefined4 *)(unaff_EBP + -0x54) = uVar11;
          *(uint *)(unaff_EBP + -0x50) = uVar7;
          for (; uVar14 != 0; uVar14 = uVar14 - 1) {
            Timer_Create((void *)(unaff_EBP + -0x54),(uint)*puVar12);
            puVar12 = puVar12 + 1;
          }
          uVar11 = *(undefined4 *)(unaff_EBP + -0x54);
          uVar7 = *(uint *)(unaff_EBP + -0x50);
        }
        else if (*(uint *)(unaff_EBP + 0x14) < uVar14) {
          puVar12 = *(ushort **)(unaff_EBP + 0x28);
          if (*(uint *)(unaff_EBP + 0x3c) < 8) {
            puVar12 = (ushort *)(unaff_EBP + 0x28);
          }
          iVar10 = *(int *)(unaff_EBP + 0x14);
          *(undefined4 *)(unaff_EBP + -0x2c) = uVar11;
          *(uint *)(unaff_EBP + -0x28) = uVar7;
          for (iVar15 = uVar14 - iVar10; iVar15 != 0; iVar15 = iVar15 + -1) {
            Timer_Create((void *)(unaff_EBP + -0x2c),(uint)*puVar12);
            puVar12 = puVar12 + 1;
          }
          *(undefined4 *)(unaff_EBP + 0xc) = *(undefined4 *)(unaff_EBP + -0x2c);
          *(undefined4 *)(unaff_EBP + 0x10) = *(undefined4 *)(unaff_EBP + -0x28);
          uVar11 = (**(code **)(**(int **)(unaff_EBP + -0x14) + 4))();
          Timer_Create((void *)(unaff_EBP + 0xc),uVar11);
          iVar15 = *(int *)(unaff_EBP + 0x28);
          if (*(uint *)(unaff_EBP + 0x3c) < 8) {
            iVar15 = unaff_EBP + 0x28;
          }
          puVar12 = (ushort *)(iVar15 + (*(int *)(unaff_EBP + 0x38) - iVar10) * 2);
          *(undefined4 *)(unaff_EBP + -0x5c) = *(undefined4 *)(unaff_EBP + 0xc);
          *(undefined4 *)(unaff_EBP + -0x58) = *(undefined4 *)(unaff_EBP + 0x10);
          for (; iVar10 != 0; iVar10 = iVar10 + -1) {
            Timer_Create((void *)(unaff_EBP + -0x5c),(uint)*puVar12);
            puVar12 = puVar12 + 1;
          }
          uVar11 = *(undefined4 *)(unaff_EBP + -0x5c);
          uVar7 = *(uint *)(unaff_EBP + -0x58);
        }
        else {
          wVar6 = _btowc(0x30);
          Timer_Create((void *)(unaff_EBP + 0xc),CONCAT22(extraout_var,wVar6));
          uVar11 = (**(code **)(**(int **)(unaff_EBP + -0x14) + 4))();
          Timer_Create((void *)(unaff_EBP + 0xc),uVar11);
          iVar10 = *(int *)(unaff_EBP + 0x14);
          iVar15 = *(int *)(unaff_EBP + 0x38);
          wVar6 = _btowc(0x30);
          *(undefined4 *)(unaff_EBP + -0x44) = *(undefined4 *)(unaff_EBP + 0xc);
          *(undefined4 *)(unaff_EBP + -0x40) = *(undefined4 *)(unaff_EBP + 0x10);
          for (iVar10 = iVar10 - iVar15; iVar10 != 0; iVar10 = iVar10 + -1) {
            Timer_Create((void *)(unaff_EBP + -0x44),CONCAT22(extraout_var_00,wVar6));
          }
          puVar12 = *(ushort **)(unaff_EBP + 0x28);
          if (*(uint *)(unaff_EBP + 0x3c) < 8) {
            puVar12 = (ushort *)(unaff_EBP + 0x28);
          }
          iVar10 = *(int *)(unaff_EBP + 0x38);
          *(undefined4 *)(unaff_EBP + -100) = *(undefined4 *)(unaff_EBP + -0x44);
          *(undefined4 *)(unaff_EBP + -0x60) = *(undefined4 *)(unaff_EBP + -0x40);
          for (; iVar10 != 0; iVar10 = iVar10 + -1) {
            Timer_Create((void *)(unaff_EBP + -100),(uint)*puVar12);
            puVar12 = puVar12 + 1;
          }
          uVar11 = *(undefined4 *)(unaff_EBP + -100);
          uVar7 = *(uint *)(unaff_EBP + -0x60);
        }
        goto LAB_004f6e09;
      }
    }
LAB_004f6e0f:
    *(int *)(unaff_EBP + -0x18) = *(int *)(unaff_EBP + -0x18) + 1;
    if (3 < *(uint *)(unaff_EBP + -0x18)) {
      uVar14 = *(uint *)(unaff_EBP + -0x70);
      if (1 < uVar14) {
        puVar12 = *(ushort **)(unaff_EBP + -0x80);
        if (*(uint *)(unaff_EBP + -0x6c) < 8) {
          puVar12 = (ushort *)(unaff_EBP + -0x80);
        }
        *(undefined4 *)(unaff_EBP + 0xc) = uVar11;
        *(uint *)(unaff_EBP + 0x10) = uVar7;
        while (uVar14 = uVar14 - 1, uVar14 != 0) {
          puVar12 = puVar12 + 1;
          Timer_Create((void *)(unaff_EBP + 0xc),(uint)*puVar12);
        }
        uVar11 = *(undefined4 *)(unaff_EBP + 0xc);
        uVar7 = *(uint *)(unaff_EBP + 0x10);
      }
      iVar10 = *(int *)(unaff_EBP + 0x20);
      *(undefined4 *)(*(int *)(unaff_EBP + 0x18) + 0x14) = 0;
      *(undefined4 *)(unaff_EBP + 0xc) = uVar11;
      *(uint *)(unaff_EBP + 0x10) = uVar7;
      for (; iVar10 != 0; iVar10 = iVar10 + -1) {
        Timer_Create((void *)(unaff_EBP + 0xc),*(undefined4 *)(unaff_EBP + 0x1c));
        uVar7 = extraout_EDX_08;
      }
      puVar3 = *(undefined4 **)(unaff_EBP + 8);
      *puVar3 = *(undefined4 *)(unaff_EBP + 0xc);
      puVar3[1] = *(undefined4 *)(unaff_EBP + 0x10);
      Collision_ClosestPoint(unaff_EBP + -0xa0,uVar7,'\x01');
      Collision_ClosestPoint(unaff_EBP + -0x84,extraout_EDX_09,'\x01');
      String_Reset(unaff_EBP + -0xbc,extraout_EDX_10,'\x01');
      Collision_ClosestPoint(unaff_EBP + 0x24,extraout_EDX_11,'\x01');
      ExceptionList = *(void **)(unaff_EBP + -0xc);
      Exception_SetMessage
                ((void *)(*(uint *)(unaff_EBP + -0x10) ^ *(uint *)(unaff_EBP + 4)),puVar16,unaff_EDI
                );
      return;
    }
    uVar14 = *(uint *)(unaff_EBP + 0x38);
  } while( true );
}


