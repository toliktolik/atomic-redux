/*
 * Function: Unwind@00512e90
 * Address: 00512e90
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Instruction at (ram,0x00512eee) overlaps instruction at (ram,0x00512eec)
    */
/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00512fc2) */
/* WARNING: Removing unreachable block (ram,0x00512fc6) */
/* WARNING: Removing unreachable block (ram,0x00512fc8) */
/* WARNING: Removing unreachable block (ram,0x00512fd3) */
/* WARNING: Removing unreachable block (ram,0x00512fd7) */
/* WARNING: Removing unreachable block (ram,0x00512fcb) */
/* WARNING: Removing unreachable block (ram,0x00512ff9) */
/* WARNING: Removing unreachable block (ram,0x00512ffa) */
/* WARNING: Removing unreachable block (ram,0x00512ffb) */
/* WARNING: Removing unreachable block (ram,0x0051300c) */
/* WARNING: Removing unreachable block (ram,0x00512fb4) */
/* WARNING: Removing unreachable block (ram,0x00512fe9) */
/* WARNING: Removing unreachable block (ram,0x00512fea) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1 * __fastcall Unwind_00512e90(undefined4 param_1,char *param_2)

{
  uint *puVar1;
  int *piVar2;
  char *pcVar3;
  undefined1 *puVar4;
  int iVar5;
  undefined4 uVar6;
  char cVar7;
  int iVar8;
  longlong lVar9;
  code *pcVar10;
  byte bVar11;
  undefined1 uVar12;
  undefined2 uVar13;
  int in_EAX;
  undefined1 *puVar14;
  uint uVar15;
  undefined1 *puVar16;
  undefined4 extraout_ECX;
  uint uVar18;
  int extraout_EDX;
  char cVar19;
  int *unaff_EBX;
  int unaff_EBP;
  undefined1 *unaff_ESI;
  undefined1 *puVar20;
  undefined4 *unaff_EDI;
  undefined2 in_CS;
  bool bVar21;
  float10 extraout_ST0;
  undefined1 uStack_15;
  undefined1 uStack_14;
  undefined1 uStack_13;
  undefined1 *puStack_10;
  undefined1 *puStack_c;
  undefined4 *puStack_4;
  undefined3 uVar17;
  
  do {
    puStack_4 = unaff_EDI;
    puVar20 = unaff_ESI;
    uVar15 = CONCAT31((int3)((uint)param_1 >> 8),10);
    puVar16 = puVar20 + 1;
    *(undefined1 *)puStack_4 = *puVar20;
    cVar19 = (char)unaff_EBX;
    unaff_EBX = (int *)CONCAT22((short)((uint)unaff_EBX >> 0x10),
                                CONCAT11((char)((uint)unaff_EBX >> 8) >> 10,cVar19));
    cVar7 = *(char *)((int)param_2 * 5 + 0x52);
    *(uint *)(puVar20 + -0x4f76d0b7) = *(uint *)(puVar20 + -0x4f76d0b7) >> 1;
    bVar21 = CARRY4(uVar15,*(uint *)((int)puStack_4 + 0x7b69d3b6));
    if (SCARRY4(uVar15,*(uint *)((int)puStack_4 + 0x7b69d3b6))) {
      uRamcca4f6e7 = (undefined1)(CONCAT11(bVar21,uRamcca4f6e7) >> 1);
      goto code_r0x00512f08;
    }
    bVar11 = (byte)param_2;
    param_2 = (char *)CONCAT22((short)((uint)param_2 >> 0x10),CONCAT11(0xfd,bVar11));
    in_EAX = CONCAT31((int3)((uint)in_EAX >> 8),((byte)in_EAX ^ 0xa0) + cVar7 + -3 + bVar21);
    *(char *)(in_EAX + -0x1b95e7a) = *(char *)(in_EAX + -0x1b95e7a) + -0x45;
    param_1 = 0x9d2f8a20;
    unaff_EDI = (undefined4 *)((int)puStack_4 + 5);
    _DAT_b47af302 = param_2;
    *param_2 = *param_2 - cVar19;
    unaff_ESI = (undefined1 *)((uint)(puVar20 + 5) | 0x45241cd7);
    puStack_10 = puVar16;
    puStack_c = puVar16;
  } while ((param_2[0x7b161771] & bVar11) != 0);
  lVar9 = (longlong)*unaff_EBX * 0x5d;
  if ((int)lVar9 == lVar9) {
    uVar17 = (undefined3)((uint)param_2 >> 8);
    puVar14 = (undefined1 *)CONCAT31(uVar17,0xdd);
    puVar4 = (undefined1 *)(unaff_EBP + 0x5c + (int)lVar9);
    *puVar4 = 0;
    if ((POPCOUNT(*puVar4) & 1U) == 0) {
      bVar21 = puVar14 < &DAT_14091534;
      if ((int)puVar14 < 0x14091534) {
        uVar12 = in(0xf8);
        puVar14 = (undefined1 *)CONCAT31(uVar17,uVar12);
        unaff_EDI = (undefined4 *)((int)unaff_EDI + (-(uint)bVar21 - (int)puVar16));
      }
      puVar16 = puVar14 + -0x8e6071c;
      piVar2 = (int *)(puVar20 + 0x65e6be2b);
      iVar8 = *piVar2;
      iVar5 = *piVar2;
      *piVar2 = (iVar5 + 0x7b5733fa) - (uint)((undefined1 *)0x8e6071b < puVar14);
      if ((SBORROW4(iVar8,-0x7b5733fa) !=
          SBORROW4(iVar5 + 0x7b5733fa,(uint)((undefined1 *)0x8e6071b < puVar14))) == *piVar2 < 0) {
        return puVar16;
      }
      LOCK();
      iVar8 = unaff_EDI[-0xc091316];
      unaff_EDI[-0xc091316] = unaff_EDI;
      UNLOCK();
      pcVar3 = (char *)(iVar8 + 0x470434e3);
      *pcVar3 = (*pcVar3 + -0x5c) -
                (0xb5767d37 < (CONCAT31((int3)((uint)puVar16 >> 8),(char)puVar16 + '\'') ^ 0x13));
      do {
                    /* WARNING: Do nothing block with infinite loop */
      } while( true );
    }
    uVar6 = in((short)lVar9);
    *unaff_EDI = uVar6;
    puVar1 = (uint *)((int)unaff_EBX + 0x644b7643);
    *puVar1 = *puVar1 >> 4 | *puVar1 << 0x1c;
code_r0x00512f08:
    pcVar10 = (code *)swi(0xe2);
    (*pcVar10)();
  }
  else {
    *(byte *)(unaff_EBP + 0x2b9b0b67) = *(byte *)(unaff_EBP + 0x2b9b0b67) & 0x21;
  }
  do {
    uStack_15 = (undefined1)in_CS;
    uStack_14 = (undefined1)((ushort)in_CS >> 8);
    in_CS = 0xf2fd;
    uVar13 = func_0x55551f31();
    bVar11 = *(byte *)(extraout_EDX + -0x2725cacd);
    *(int *)(unaff_EBP + 3) = *(int *)(unaff_EBP + 3) - unaff_EBP;
    *(longlong *)(unaff_EBP + -0x53) = (longlong)extraout_ST0;
    *(byte *)(unaff_EBP + 0x2b9b0b67) = *(byte *)(unaff_EBP + 0x2b9b0b67) & (byte)extraout_ECX;
    uVar18 = CONCAT22((short)((uint)extraout_ECX >> 0x10),CONCAT11(0x66,(byte)extraout_ECX));
    puVar1 = (uint *)(uVar18 + 0x53);
    *puVar1 = *puVar1 ^ (uint)&uStack_14;
    uVar15 = CONCAT31((int3)(char)((byte)((ushort)uVar13 >> 8) | bVar11),(char)uVar13) | 0x7ff17bae;
    bVar21 = -1 < (int)(uVar18 & *(uint *)(CONCAT13(uStack_15,0x512f) + 0xd));
    if (bVar21) {
      if (!bVar21) {
        pcVar10 = (code *)swi(1);
        puVar16 = (undefined1 *)(*pcVar10)();
        return puVar16;
      }
      uStack_14 = (undefined1)in_CS;
      uStack_13 = (undefined1)((ushort)in_CS >> 8);
      puVar16 = (undefined1 *)func_0xbaa29bee();
      out(0x68,(char)puVar16);
      return puVar16;
    }
    iVar8 = uVar15 + 0x7a5ed65c;
  } while ((SCARRY4(uVar15,0x7a5ed65c) != SCARRY4(iVar8,0)) != iVar8 < 0);
  pcVar10 = (code *)swi(3);
  puVar16 = (undefined1 *)(*pcVar10)();
  return puVar16;
}


