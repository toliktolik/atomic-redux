/*
 * Function: Unwind@00514ba8
 * Address: 00514ba8
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x00514dd2) overlaps instruction at (ram,0x00514dce)
    */
/* WARNING: Unable to track spacebase fully for stack */
/* WARNING: Removing unreachable block (ram,0x00514d0a) */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall
Unwind_00514ba8(char *param_1,char *param_2,undefined4 param_3,undefined2 param_4,char *param_5,
               char *param_6)

{
  byte *pbVar1;
  undefined1 uVar2;
  undefined1 *puVar3;
  char cVar4;
  bool bVar5;
  code *pcVar6;
  undefined6 uVar7;
  byte bVar8;
  ushort uVar9;
  int in_EAX;
  char *pcVar10;
  uint uVar11;
  uint uVar12;
  undefined1 *puVar14;
  uint *extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar16;
  undefined2 uVar17;
  char *extraout_EDX;
  undefined2 *puVar18;
  char *pcVar19;
  undefined4 *puVar20;
  undefined4 *puVar21;
  undefined1 *puVar22;
  undefined4 *unaff_EBP;
  char *unaff_ESI;
  char *pcVar23;
  int *piVar25;
  byte *pbVar26;
  char *unaff_EDI;
  char *pcVar27;
  char *pcVar28;
  byte *pbVar29;
  uint *puVar30;
  uint *puVar31;
  undefined2 uVar32;
  undefined2 in_CS;
  byte in_CF;
  byte bVar33;
  undefined1 in_PF;
  bool bVar34;
  byte in_AF;
  bool bVar35;
  bool bVar36;
  byte bVar37;
  bool bVar38;
  float10 in_ST0;
  unkbyte10 in_ST7;
  undefined4 in_XMM1_Da;
  undefined4 in_XMM1_Db;
  undefined4 in_XMM1_Dc;
  undefined4 in_XMM1_Dd;
  undefined8 uVar39;
  undefined1 unaff_retaddr;
  undefined1 unaff_retaddr_00;
  undefined2 unaff_retaddr_01;
  undefined1 auStack_5ef7 [17498];
  char *pcStack_1a9d;
  char acStack_49 [21];
  char *pcVar13;
  undefined3 uVar15;
  char *pcVar24;
  
  bVar37 = 0;
  do {
    uVar11 = (uint)bVar37;
    *unaff_EDI = *unaff_ESI;
    bVar37 = 1;
    puVar14 = (undefined1 *)CONCAT22(unaff_retaddr_01,CONCAT11(unaff_retaddr_00,unaff_retaddr));
    if (!(bool)in_PF) {
      DAT_28bdda20 = DAT_28bdda20 & (byte)param_2;
      pcRamf775c62f = param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    LOCK();
    uVar2 = *puVar14;
    *puVar14 = (char)((uint)param_1 >> 8);
    param_1 = (char *)CONCAT22((short)((uint)param_1 >> 0x10),CONCAT11(uVar2,(char)param_1));
    UNLOCK();
    pcVar19 = puVar14 + -1;
    pcVar10 = (char *)((in_EAX + 0x762820d6) - (uint)in_CF);
    *(int *)(param_1 + 0x4108dc58) = *(int *)(param_1 + 0x4108dc58) + 0x5f;
    pcVar24 = (char *)0x9cea6bd8;
    pcVar28 = unaff_EDI + uVar11 * -2 + 1;
    while( true ) {
      pcVar27 = pcVar28;
      pcVar23 = pcVar24 + -1;
      bVar8 = (byte)pcVar10;
      uVar32 = (undefined2)((uint)pcVar10 >> 0x10);
      uVar15 = (undefined3)(CONCAT22(uVar32,CONCAT11(bVar8 / 0x66,bVar8)) >> 8);
      uVar9 = (ushort)CONCAT31(uVar15,bVar8 % 0x66);
      if (uVar9 != 0) break;
      pcVar28 = pcVar27 + -4;
      *(uint *)pcVar27 = CONCAT31(uVar15,0x26);
      pcVar10 = (char *)(CONCAT31((int3)(CONCAT22(uVar32,0x9026) >> 8),0x26) | 0x25);
      *(uint *)(pcVar19 + -0xf) = *(uint *)(pcVar19 + -0xf) | (uint)pcVar10;
      uVar11 = (int)pcVar28 - (int)pcVar19;
      bVar34 = (POPCOUNT(uVar11 & 0xff) & 1U) == 0;
      if (bVar34) {
        pcVar6 = (code *)swi(0x53);
        (*pcVar6)();
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
      pcVar24 = (char *)(unaff_EBP + 0x1ef2490e);
      bVar8 = (byte)param_1 & 0x1f;
      cVar4 = *pcVar24;
      *pcVar24 = *pcVar24 << bVar8;
      bVar5 = ((uint)param_1 & 0x1f) != 0;
      bVar33 = !bVar5 && pcVar28 < pcVar19 || bVar5 && (char)(cVar4 << bVar8 - 1) < '\0';
      bVar38 = bVar8 != 1 && SBORROW4((int)pcVar28,(int)pcVar19) ||
               bVar8 == 1 && (bool)bVar33 != *pcVar24 < '\0';
      bVar5 = ((uint)param_1 & 0x1f) != 0;
      bVar36 = !bVar5 && (int)uVar11 < 0 || bVar5 && *pcVar24 < '\0';
      bVar35 = !bVar5 && uVar11 == 0 || bVar5 && *pcVar24 == '\0';
      bVar34 = !bVar5 && bVar34 || bVar5 && (POPCOUNT(*pcVar24) & 1U) == 0;
      param_2 = pcVar28;
code_r0x00514c19:
      pcVar24 = pcVar23;
      if (!bVar35 && bVar38 == bVar36) {
        if (bVar38) {
          piVar25 = (int *)CONCAT22((short)((uint)pcVar10 >> 0x10),CONCAT11(0xa3,(char)pcVar10));
          if (!bVar35 && bVar38 == bVar36) {
            *piVar25 = *piVar25 >> 1;
            return;
          }
          *(int *)(pcVar27 + -0x2e) = *(int *)(pcVar27 + -0x2e) - (int)param_1;
                    /* WARNING: Bad instruction - Truncating control flow here */
          halt_baddata();
        }
        do {
          pcVar13 = param_1;
          pcVar24 = pcVar10;
          if (!bVar34) {
            pcVar23 = (char *)*(undefined6 *)(param_2 + 0x7b);
            break;
          }
          puVar30 = (uint *)(pcVar24 + 0x5b25e658);
          uVar11 = *puVar30;
          uVar12 = *puVar30;
          *puVar30 = (int)&param_3 + uVar12 + (uint)bVar33;
          *pcVar24 = *pcVar24 + -0x42 +
                     (CARRY4(uVar11,(uint)&param_3) || CARRY4((int)&param_3 + uVar12,(uint)bVar33));
          param_2 = (char *)(*(int *)(pcVar13 + 0x12) * -0x32);
          cVar4 = '\f';
          puVar20 = (undefined4 *)register0x00000010;
          do {
            unaff_EBP = unaff_EBP + -1;
            puVar20 = puVar20 + -1;
            *puVar20 = *unaff_EBP;
            cVar4 = cVar4 + -1;
          } while ('\0' < cVar4);
          pcVar19 = (char *)CONCAT31((int3)((uint)pcVar19 >> 8),
                                     (char)pcVar19 - acStack_49[(int)param_2]);
          param_1 = (char *)CONCAT22((short)((uint)pcVar13 >> 0x10),CONCAT11(0x38,(char)pcVar13));
          bVar33 = false;
          bVar38 = false;
          pcVar10 = (char *)((uint)pcVar24 & 0xffffffc9);
          bVar36 = false;
          bVar35 = ((uint)pcVar24 & 0xc9) == 0;
          bVar34 = (POPCOUNT((byte)pcVar24 & 0xc9) & 1U) == 0;
          do {
            unaff_EBP = (undefined4 *)register0x00000010;
            pcStack_1a9d = pcVar24;
            if (bVar34) goto code_r0x00514c19;
            param_1 = param_1 + -1;
            pcVar13 = pcVar23;
            if (param_1 == (char *)0x0) {
              out(*(undefined4 *)pcVar23,(short)param_2);
              pcVar13 = (char *)CONCAT22(param_3._2_2_,CONCAT11(param_3._1_1_,(undefined1)param_3));
            }
            pcVar23 = pcVar13 + -1;
            out(*pcVar13,(short)param_2);
            param_6 = pcVar23;
            param_5 = pcVar28;
          } while (!bVar35);
          param_3._0_1_ = SUB41(pcVar28,0);
          param_3._1_1_ = (undefined1)((uint)pcVar28 >> 8);
          param_3._2_2_ = (undefined2)((uint)pcVar28 >> 0x10);
          uVar11 = (uint)pcVar24 & 0x27f02f00;
          bVar34 = true;
          param_6 = (char *)CONCAT22((short)ROUND(in_ST0),(short)pcVar23);
          uVar12 = CONCAT31((int3)(uVar11 >> 8),in_AF * '\x06') & 0xffffff0f;
          pcVar13 = (char *)CONCAT22((short)(uVar12 >> 0x10),
                                     CONCAT11((char)(uVar11 >> 8) + in_AF,(char)uVar12));
          pcVar10 = pcVar13;
          bVar33 = in_AF;
          param_4 = in_CS;
        } while (uVar11 == 0);
        uVar7 = *(undefined6 *)(pcVar13 + 0x1b5c9807);
        uVar32 = (undefined2)((uint6)uVar7 >> 0x20);
        out(0xec,pcVar13);
        pcVar10 = pcVar23 + 0x325f871d;
        cVar4 = *pcVar10;
        *pcVar10 = *pcVar10 - (char)param_2;
        piVar25 = (int *)(pcVar23 + -1);
        out(*pcVar23,(short)param_2);
        pcVar6 = (code *)swi(4);
        if (SBORROW1(cVar4,(char)param_2)) {
          (*pcVar6)();
          param_2 = extraout_EDX;
        }
        param_3._0_1_ = (undefined1)in_CS;
        param_3._1_1_ = (undefined1)((ushort)in_CS >> 8);
        uVar39 = (*(code *)(param_2 + 0x1d))();
        pcVar10 = pcVar27 + -5;
        bVar8 = (byte)uVar39;
        if (SBORROW1(bVar8,*pcVar28)) {
          uVar11 = CONCAT22((short)((uint6)uVar7 >> 0x10),
                            CONCAT11((char)((uint6)uVar7 >> 8) +
                                     *(char *)((ulonglong)uVar39 >> 0x20),(char)uVar7));
          pbVar29 = (byte *)(pcVar27 + -10);
          *(int *)(pcVar27 + -6) = *piVar25;
          pbVar26 = (byte *)(uVar11 - 0x2e);
          *pbVar26 = *pbVar26 << 1 | *pbVar26 >> 7;
          bVar37 = *pbVar26;
          cVar4 = *(char *)((int)uVar39 + -0x2a0e4518);
          *extraout_ECX = *extraout_ECX ^ uVar11;
          bVar37 = 0xf < (byte)(bVar8 + cVar4 + ((bVar37 & 1) != 0));
          *pbVar29 = *pbVar29 - 1;
          ffree(in_ST7);
          uVar39 = func_0x11b54bd3();
          puVar18 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
          uVar11 = (uint)bVar37;
          pcVar10 = pcVar23 + 0x29f53f8d;
          pbVar26 = (byte *)(pcVar10 + uVar11);
          uVar17 = (undefined2)((ulonglong)uVar39 >> 0x20);
          if ((SCARRY4((int)(pcVar23 + -6),0x29f53f93) != SCARRY4((int)pcVar10,uVar11)) !=
              (int)pbVar26 < 0) {
            bVar37 = 9 < ((byte)uVar39 & 0xf) | in_AF;
            bVar8 = (byte)uVar39 + bVar37 * -6;
            *(uint *)(puVar18 + -0x3fbcdc63) =
                 *(uint *)(puVar18 + -0x3fbcdc63) ^
                 CONCAT31((int3)((ulonglong)uVar39 >> 8),
                          bVar8 + (0x9f < bVar8 |
                                  ((char *)0xd60ac06c < pcVar23 + -6 || CARRY4((uint)pcVar10,uVar11)
                                  ) | bVar37 * (bVar8 < 6)) * -0x60 +
                          (char)((ulonglong)uVar39 >> 8) * '~' + 'P') & 0xffff00ff;
            _DAT_a21d64f1 = in(uVar17);
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          pbVar1 = (byte *)((int)puVar18 + 0x1b);
          bVar37 = (byte)extraout_ECX_00 & 7;
          *pbVar1 = *pbVar1 << bVar37 | *pbVar1 >> 8 - bVar37;
          out(0xfe,(int)uVar39);
          if (*pbVar26 >= *pbVar29) {
            out(uVar17,(char)*(undefined4 *)pbVar26);
            *(uint *)(pbVar26 + -4 + (int)register0x00000010 + (*pbVar26 < *pbVar29)) =
                 *(uint *)(pbVar26 + -4 + (int)register0x00000010 + (*pbVar26 < *pbVar29)) ^
                 (uint)&stack0x00000000;
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
          if (extraout_ECX_00 == 0) {
            cVar4 = in(uVar17);
            pcVar27[-0xb] = cVar4;
            halt_baddata();
          }
        }
        else {
          bVar8 = 9 < (bVar8 & 0xf) | in_AF;
          pcVar6 = (code *)swi(0x43);
          uVar39 = (*pcVar6)();
          puVar18 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
          puVar30 = (uint *)((int)pcVar10 * 0x200000);
          puVar20 = (undefined4 *)
                    *(undefined6 *)(extraout_ECX_01 + 0x14d442a4 + (int)pcVar10 * 0x800000);
          uVar11 = (uint)((int)pcVar10 * 0x100000 < 0);
          puVar14 = &stack0xa5aa28f6 + uVar11;
          iVar16 = *(int *)uVar39;
          puVar22 = (undefined1 *)(iVar16 + -4);
          *(undefined2 *)(iVar16 + -4) = uVar32;
          if (auStack_5ef7 < (undefined1 *)0x5a557813 && !CARRY4((uint)&stack0xa5aa28f6,uVar11)) {
            if ((int)((uint)puVar20 & (uint)puVar30) < 1) {
              bVar37 = 0;
              iVar16 = extraout_ECX_01;
              puVar21 = puVar20;
            }
            else {
              bVar34 = *(uint *)(extraout_ECX_01 + 0x19) < 0x6383ea3e;
              puVar22 = (undefined1 *)(iVar16 + -8);
              *(undefined4 *)(iVar16 + -8) = 0x514db1;
              uVar39 = func_0x8f4910b7();
              puVar18 = (undefined2 *)((ulonglong)uVar39 >> 0x20);
              if (bVar34) {
                puVar21 = (undefined4 *)(puVar22 + -4);
                *(undefined4 **)(puVar22 + -4) = puVar20;
                cVar4 = '\x1d';
                do {
                  puVar20 = puVar20 + -1;
                  puVar21 = puVar21 + -1;
                  *puVar21 = *puVar20;
                  cVar4 = cVar4 + -1;
                } while ('\0' < cVar4);
                *(undefined1 **)(puVar22 + -0x7c) = puVar22 + -4;
                    /* WARNING: Bad instruction - Truncating control flow here */
                halt_baddata();
              }
              *piVar25 = (*piVar25 - (int)piVar25) - (uint)bVar34;
              bVar8 = 9 < ((byte)uVar39 & 0xf) | bVar8;
              uVar15 = (undefined3)((ulonglong)uVar39 >> 8);
              bVar33 = (byte)uVar39 + bVar8 * '\x06';
              puVar21 = (undefined4 *)
                        (puVar14 +
                        (-(uint)(CONCAT31(uVar15,bVar33 + (0x90 < (bVar33 & 0xf0) |
                                                          puVar20 < *(undefined4 **)
                                                                     (puVar18 + (int)puVar14 * 4) |
                                                          bVar8 * (0xf9 < bVar33)) * '`') <
                                0xb79e35cb) - *(int *)(pcVar23 + 0xe)));
              puVar14 = (undefined1 *)CONCAT31(uVar15,uRamf0a18cd1);
              puVar31 = puVar30 + -1;
              puVar3 = (undefined1 *)*puVar30;
              iVar16 = extraout_ECX_02;
              do {
                iVar16 = iVar16 + -1;
                register0x00000010 = (BADSPACEBASE *)puVar20;
                puVar30 = puVar31;
              } while (iVar16 != 0 && puVar14 == puVar3);
            }
            *(undefined4 *)((int)register0x00000010 + -0x3f3251b) = in_XMM1_Da;
            *(undefined4 *)((int)register0x00000010 + -0x3f32517) = in_XMM1_Db;
            *(undefined4 *)((int)register0x00000010 + -0x3f32513) = in_XMM1_Dc;
            *(undefined4 *)((int)register0x00000010 + -0x3f3250f) = in_XMM1_Dd;
            *(uint *)(puVar22 + -4) = (uint)puVar14 | 0xee99e10d;
            *(int *)(puVar22 + -8) = iVar16;
            *(undefined2 **)(puVar22 + -0xc) = puVar18;
            *(undefined4 **)(puVar22 + -0x10) = puVar21;
            *(undefined1 **)(puVar22 + -0x14) = puVar22;
            *(int *)(puVar22 + -0x18) = (int)register0x00000010 + 1;
            *(int **)(puVar22 + -0x1c) = piVar25;
            *(uint **)(puVar22 + -0x20) = puVar30;
            while (iVar16 != 0) {
              iVar16 = iVar16 + -1;
              uVar2 = in((short)puVar18);
              *(undefined1 *)puVar30 = uVar2;
              puVar30 = (uint *)((int)puVar30 + (uint)bVar37 * -2 + 1);
            }
                    /* WARNING: Bad instruction - Truncating control flow here */
            halt_baddata();
          }
        }
        *puVar18 = uVar32;
                    /* WARNING: Bad instruction - Truncating control flow here */
        halt_baddata();
      }
    }
    in_EAX = in(0x5a);
    if ((POPCOUNT(uVar9 & 0xff) & 1U) != 0) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    unaff_EDI = pcVar27 + -1;
    unaff_ESI = pcVar24 + -2;
    *pcVar27 = *pcVar23;
    puVar30 = (uint *)(param_2 + -0x15);
    in_CF = (*puVar30 & 1) != 0;
    *puVar30 = (int)*puVar30 >> 1;
    in_PF = (POPCOUNT(*puVar30 & 0xff) & 1U) == 0;
    unaff_retaddr = SUB41(param_2,0);
    unaff_retaddr_00 = (undefined1)((uint)param_2 >> 8);
    unaff_retaddr_01 = (undefined2)((uint)param_2 >> 0x10);
    param_2 = (char *)CONCAT22(unaff_retaddr_01,CONCAT11(0x6d,unaff_retaddr));
  } while( true );
}


