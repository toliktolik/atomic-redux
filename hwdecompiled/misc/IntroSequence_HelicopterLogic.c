/*
 * Function: IntroSequence_HelicopterLogic
 * Address: 00421160
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall IntroSequence_HelicopterLogic(int param_1)

{
  int iVar1;
  void *this;
  undefined4 *puVar2;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x510f1b;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  if (*(int *)(param_1 + 0x378) == 1) {
    ExceptionList = &local_10;
    this = operator_new(0x98);
    local_8 = 0;
    if (this == (void *)0x0) {
      puVar2 = (undefined4 *)0x0;
    }
    else {
      puVar2 = Particle_InitializeSparks(this,param_1,0);
    }
    *(undefined4 **)(param_1 + 0x394) = puVar2;
    puVar2[4] = 0;
    puVar2[5] = 0x40618000;
    *(undefined1 *)(*(int *)(param_1 + 0x394) + 0x30) = 0;
    iVar1 = *(int *)(param_1 + 0x394);
    *(undefined4 *)(iVar1 + 0x18) = 0;
    *(undefined4 *)(iVar1 + 0x1c) = 0x40000000;
    iVar1 = *(int *)(param_1 + 0x394);
    *(undefined4 *)(iVar1 + 8) = 0;
    *(undefined4 *)(iVar1 + 0xc) = 0xc0804000;
  }
  local_8 = 0xffffffff;
  iVar1 = *(int *)(param_1 + 0x394);
  if (iVar1 != 0) {
    if ((_DAT_0052a0c0 <= *(double *)(iVar1 + 8)) && (*(char *)(iVar1 + 0x74) == '\0')) {
      TextEffect_CreateFloatingText
                (*(void **)(param_1 + 0x2fc),*(undefined4 *)(iVar1 + 8),*(undefined4 *)(iVar1 + 0xc)
                 ,*(undefined4 *)(iVar1 + 0x10),*(undefined4 *)(iVar1 + 0x14),
                 *(undefined4 *)(iVar1 + 0x18),*(undefined4 *)(iVar1 + 0x1c),
                 *(undefined4 *)(iVar1 + 0x20),*(undefined4 *)(iVar1 + 0x24),0);
      *(undefined1 *)(*(int *)(param_1 + 0x394) + 0x74) = 1;
    }
    if (_DAT_0052d4f0 < *(double *)(*(int *)(param_1 + 0x394) + 8)) {
      Boss_BattleshipCannonSystem(*(int *)(param_1 + 0x394));
      *(undefined4 *)(param_1 + 0x394) = 0;
      *(undefined4 *)(param_1 + 0x378) = 0;
      *(undefined4 *)(param_1 + 0x374) = 3;
    }
  }
  if (0 < *(int *)(param_1 + 0x250)) {
    *(undefined4 *)(param_1 + 0x388) = 1;
  }
  ExceptionList = local_10;
  return;
}


