/*
 * Function: Animation_ProcessTankylvaniaTanks
 * Address: 00430760
 * Category: animation
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall Animation_ProcessTankylvaniaTanks(void *this,int param_1)

{
  char *pcVar1;
  undefined4 *puVar2;
  void *pvVar3;
  char *pcVar4;
  int *piVar5;
  int extraout_ECX;
  uint extraout_EDX;
  _String_base local_78 [4];
  uint local_74;
  undefined4 local_64;
  uint local_60;
  undefined1 local_5c [4];
  uint local_58;
  undefined4 local_48;
  uint local_44;
  _String_base local_40 [4];
  uint local_3c;
  undefined4 local_2c;
  uint local_28;
  undefined1 local_24 [16];
  void *local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00511f22;
  local_10 = ExceptionList;
  local_60 = 0xf;
  local_64 = 0;
  local_74 = local_74 & 0xffffff00;
  pcVar1 = "";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  ExceptionList = &local_10;
  local_14 = this;
  String_Assign(local_78,(_String_base *)&DAT_0052c7cf,(uint)(pcVar4 + -0x52c7cf));
  local_44 = 0xf;
  local_8 = 0;
  local_48 = 0;
  local_58 = local_58 & 0xffffff00;
  pcVar1 = "";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign(local_5c,(_String_base *)&DAT_0052c7cf,(uint)(pcVar4 + -0x52c7cf));
  local_8._0_1_ = 1;
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  pcVar1 = "WHO ARE YOU?";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign(local_40,(_String_base *)"WHO ARE YOU?",(uint)(pcVar4 + -0x530128));
  local_8._0_1_ = 2;
  SexyWidget_ProcessScale
            (this,*(int *)(*(int *)(param_1 + 0x714) + 8),0,0x15,1,local_40,(uint)local_5c,local_78,
             0);
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_3c);
  }
  local_28 = 0xf;
  local_2c = 0;
  local_3c = local_3c & 0xffffff00;
  if (0xf < local_44) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,extraout_EDX);
  }
  local_44 = 0xf;
  local_48 = 0;
  local_58 = local_58 & 0xffffff00;
  local_8._0_1_ = 4;
  if (0xf < local_60) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_74,extraout_EDX);
  }
  *(undefined ***)((int)this + 0x114) = &PTR_LAB_00530018;
  *(undefined ***)this = &PTR_Animation_ProcessBlastnyaExplosions_00530040;
  *(undefined ***)((int)this + 0x58) = &PTR_EmptyFunction_NoOp_00530020;
  *(undefined ***)((int)this + 0x114) = &PTR_Animation_ProcessPetrovakiaFactories_0053001c;
  *(int *)((int)this + 0x11c) = param_1;
  local_60 = 0xf;
  local_64 = 0;
  local_74 = local_74 & 0xffffff00;
  UI_InitializeWidgetManager(this,*(undefined4 *)(param_1 + 0x92c));
  UI_Widget_SetCallback(this,*(int **)(param_1 + 0x928));
  UI_Widget_ProcessCallback(this,*(int **)(param_1 + 0x92c));
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xff,0xff,0);
  SexyWidget_GetAnimationFrame(this,0,puVar2);
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0x80,0xc0,0);
  SexyWidget_GetAnimationFrame(this,1,puVar2);
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0,0,0);
  SexyWidget_GetAnimationFrame(this,3,puVar2);
  puVar2 = (undefined4 *)CreateColor(local_24,0x19,0x19,0x19,0x19);
  *(undefined4 *)((int)this + 0xe0) = *puVar2;
  *(undefined4 *)((int)this + 0xe4) = puVar2[1];
  *(undefined4 *)((int)this + 0xe8) = puVar2[2];
  *(undefined4 *)((int)this + 0xec) = puVar2[3];
  pvVar3 = operator_new(0x108);
  local_8._0_1_ = 7;
  if (pvVar3 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = UIButton_Constructor(pvVar3,*(int *)((int)this + 0x11c),(int)this + 0x58,0x16);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 0x120) = puVar2;
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0x40,0xc0,0x40);
  UIButton_SetColor(*(void **)((int)this + 0x120),puVar2);
  pcVar1 = "OK";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign((void *)(*(int *)((int)this + 0x120) + 0x5c),(_String_base *)&DAT_0052d4f8,
                (uint)(pcVar4 + -0x52d4f8));
  pvVar3 = operator_new(0x108);
  local_8._0_1_ = 8;
  if (pvVar3 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = UIButton_Constructor(pvVar3,*(int *)((int)this + 0x11c),(int)this + 0x58,0x17);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 0x124) = puVar2;
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xc0,0x40,0x40);
  UIButton_SetColor(*(void **)((int)this + 0x124),puVar2);
  pcVar1 = "CANCEL";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign((void *)(*(int *)((int)this + 0x124) + 0x5c),(_String_base *)"CANCEL",
                (uint)(pcVar4 + -0x52ccb8));
  pvVar3 = operator_new(0x108);
  local_8._0_1_ = 9;
  if (pvVar3 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = UIButton_Constructor(pvVar3,*(int *)((int)this + 0x11c),(int)this + 0x58,0x18);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 0x128) = puVar2;
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0x40,0x80,0xff);
  UIButton_SetColor(*(void **)((int)this + 0x128),puVar2);
  pcVar1 = "RENAME";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign((void *)(*(int *)((int)this + 0x128) + 0x5c),(_String_base *)"RENAME",
                (uint)(pcVar4 + -0x530120));
  pvVar3 = operator_new(0x108);
  local_8._0_1_ = 10;
  if (pvVar3 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = UIButton_Constructor(pvVar3,*(int *)((int)this + 0x11c),(int)this + 0x58,0x19);
  }
  local_8._0_1_ = 4;
  *(undefined4 **)((int)this + 300) = puVar2;
  puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0x40,0x80,0xff);
  UIButton_SetColor(*(void **)((int)this + 300),puVar2);
  pcVar1 = "DELETE";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign((void *)(*(int *)((int)this + 300) + 0x5c),(_String_base *)"DELETE",
                (uint)(pcVar4 + -0x530118));
  pvVar3 = operator_new(0xc0);
  local_8._0_1_ = 0xb;
  if (pvVar3 == (void *)0x0) {
    piVar5 = (int *)0x0;
  }
  else {
    piVar5 = SexyWidget_UpdateColors
                       (pvVar3,0x1a,*(int **)(*(int *)((int)this + 0x11c) + 0x92c),(int)this + 0x114
                       );
  }
  local_8._0_1_ = 4;
  *(int **)((int)this + 0x130) = piVar5;
  pvVar3 = operator_new(0xb0);
  local_8._0_1_ = 0xc;
  if (pvVar3 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else if (*(int *)((int)this + 0x130) == 0) {
    puVar2 = SexyWidget_FinishTransition(pvVar3,0,0);
  }
  else {
    puVar2 = SexyWidget_FinishTransition(pvVar3,0,*(int *)((int)this + 0x130) + 0x58);
  }
  *(undefined4 **)((int)this + 0x134) = puVar2;
  *(undefined1 *)(puVar2 + 0x19) = 1;
  local_8 = CONCAT31(local_8._1_3_,4);
  *(undefined4 *)(*(int *)((int)this + 0x130) + 0x60) =
       *(undefined4 *)(*(int *)((int)this + 0x11c) + 0x92c);
  (**(code **)(**(int **)((int)this + 0x130) + 0x18))(&DAT_00563498,6);
  *(undefined4 *)(*(int *)((int)this + 0x130) + 0x68) = 1;
  *(undefined4 *)(*(int *)((int)this + 0x130) + 100) = *(undefined4 *)((int)this + 0x134);
  *(undefined4 *)((int)this + 0x138) = *(undefined4 *)(*(int *)((int)this + 0x11c) + 0xb40);
  *(undefined4 *)((int)this + 0x10) = 0x136;
  *(undefined4 *)((int)this + 0x14) = 400;
  Level_InitializeRedStarHQ(this,0xa5,0x28,0x136,400);
  ExceptionList = local_10;
  return (undefined4 *)this;
}


