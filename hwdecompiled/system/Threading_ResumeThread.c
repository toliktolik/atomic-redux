/*
 * Function: Threading_ResumeThread
 * Address: 004fdae0
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Control flow encountered bad instruction data */
/* WARNING: Instruction at (ram,0x004fdb35) overlaps instruction at (ram,0x004fdb34)
    */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Threading_ResumeThread(int param_1,uint param_2)

{
  ushort *puVar1;
  uint uVar2;
  short sVar3;
  float10 fVar4;
  float10 fVar5;
  float10 fVar6;
  undefined1 uVar7;
  byte bVar8;
  double *in_EAX;
  char *pcVar9;
  undefined3 uVar11;
  char *pcVar10;
  int extraout_ECX;
  int iVar12;
  int unaff_EBX;
  uint unaff_EBP;
  char *unaff_ESI;
  char *pcVar13;
  char *unaff_EDI;
  char *pcVar14;
  byte in_CF;
  byte in_AF;
  bool bVar15;
  float10 extraout_ST0;
  float10 in_ST0;
  float10 extraout_ST1;
  float10 in_ST1;
  float10 in_ST2;
  float10 fVar16;
  float10 in_ST3;
  float10 in_ST4;
  float10 in_ST5;
  float10 in_ST6;
  float10 in_ST7;
  undefined8 uVar17;
  undefined4 unaff_retaddr;
  
  do {
    puVar1 = (ushort *)(unaff_EBP + 0x1e + param_2 * 8);
    sVar3 = ((ushort)in_EAX & 3) - (*puVar1 & 3);
    bVar15 = 0 < sVar3;
    *puVar1 = *puVar1 + (ushort)in_CF * sVar3;
    out(0x94,in_EAX);
    out(0x9d,(char)in_EAX);
    pcVar9 = (char *)(int)(short)(ushort)in_EAX;
    pcVar13 = unaff_ESI + 1;
    *unaff_EDI = *unaff_ESI;
    pcVar14 = (char *)*(undefined6 *)(unaff_EBP + 0x1de39d3f);
    iVar12 = param_1 + -1;
    fVar16 = in_ST2;
    fVar4 = in_ST3;
    fVar5 = in_ST4;
    fVar6 = in_ST5;
    if (iVar12 == 0 || bVar15) {
                    /* WARNING: Bad instruction - Truncating control flow here */
      halt_baddata();
    }
    do {
      in_ST5 = in_ST6;
      in_ST4 = fVar6;
      in_ST3 = fVar5;
      in_ST2 = fVar4;
      pcVar10 = pcVar9;
      if (iVar12 == 0) goto code_r0x004fdb42;
      while( true ) {
        if (!bVar15) {
          return;
        }
        bVar15 = unaff_EBP < param_2;
        uVar2 = unaff_EBP - param_2;
        unaff_EBP = uVar2 - in_CF;
        *(int *)(unaff_EBX + 0x62) =
             (*(int *)(unaff_EBX + 0x62) - unaff_EBP) - (uint)(bVar15 || uVar2 < in_CF);
        pcVar10 = (char *)register0x00000010;
        pcVar13 = pcVar9;
code_r0x004fdb42:
        LOCK();
        uVar7 = *(undefined1 *)(iVar12 + -0x28be7347);
        *(undefined1 *)(iVar12 + -0x28be7347) = (char)((uint)iVar12 >> 8);
        UNLOCK();
        if (CONCAT22((short)((uint)iVar12 >> 0x10),CONCAT11(uVar7,(char)iVar12)) != 0) {
          return;
        }
        bVar8 = (byte)pcVar10;
        uVar11 = (undefined3)((uint)pcVar10 >> 8);
        if (SBORROW1(bVar8,*pcVar14)) break;
        in_CF = 0x1c < bVar8;
        pcVar9 = (char *)CONCAT31(uVar11,bVar8 - 0x1d);
        bVar15 = (byte)(bVar8 - 0x1d) == '\0';
        iVar12 = 0;
      }
      uVar7 = in((short)param_2);
      unaff_EBX = unaff_EBX + 1;
      _DAT_ae2e1365 = pcVar10;
      *(longlong *)(param_2 - 0x7f) = (longlong)ROUND(in_ST0);
      bVar15 = (CONCAT31(uVar11,uVar7) | 0x85c507f0) == 0;
      in_AF = 9 < ((byte)unaff_retaddr & 0xf) | in_AF;
      bVar8 = (byte)unaff_retaddr + in_AF * '\x06';
      in_CF = 0x90 < (bVar8 & 0xf0) | in_AF * (0xf9 < bVar8);
      pcVar9 = (char *)CONCAT31((int3)((uint)unaff_retaddr >> 8),bVar8 + in_CF * '`');
      iVar12 = -1;
      in_ST0 = in_ST1;
      in_ST1 = fVar16;
      fVar16 = in_ST2;
      fVar4 = in_ST3;
      fVar5 = in_ST4;
      fVar6 = in_ST5;
      in_ST6 = in_ST7;
    } while (!bVar15);
    fVar16 = in_ST7;
    uVar17 = func_0xc9ead6cd();
    param_2 = (uint)((ulonglong)uVar17 >> 0x20);
    bVar8 = (byte)uVar17;
    in_CF = bVar8 < 0xfd;
    in_EAX = (double *)CONCAT31((int3)((ulonglong)uVar17 >> 8),bVar8 + 3);
    unaff_EDI = pcVar14 + 4;
    unaff_ESI = pcVar13 + 4;
    *(undefined4 *)pcVar14 = *(undefined4 *)pcVar13;
    unaff_retaddr = 0xffffffd0;
    in_ST0 = extraout_ST0 / (float10)*in_EAX;
    in_ST1 = extraout_ST1;
    in_ST6 = in_ST7;
    in_ST7 = fVar16;
    if ((char)bVar8 < -3) {
      in_EAX = (double *)
               CONCAT22((short)((ulonglong)uVar17 >> 0x10),
                        (ushort)(byte)(bVar8 + 3 + (char)((ulonglong)uVar17 >> 8) * '\x1e'));
      param_1 = extraout_ECX;
    }
    else {
      out(*(undefined4 *)unaff_ESI,(short)((ulonglong)uVar17 >> 0x20));
      bVar8 = (byte)((uint)extraout_ECX >> 8);
      in_CF = bVar8 < *(byte *)(unaff_EBP + 0x2b6d898a);
      param_1 = CONCAT22((short)((uint)extraout_ECX >> 0x10),
                         CONCAT11(bVar8 - *(byte *)(unaff_EBP + 0x2b6d898a),(char)extraout_ECX));
      unaff_retaddr = 0xd6f97434;
      unaff_ESI = pcVar13 + 8;
    }
  } while( true );
}


