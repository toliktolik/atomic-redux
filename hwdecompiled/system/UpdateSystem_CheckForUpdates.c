/*
 * Function: UpdateSystem_CheckForUpdates
 * Address: 00405130
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall UpdateSystem_CheckForUpdates(void *this,char param_1)

{
  char *pcVar1;
  char *pcVar2;
  _String_base *p_Var3;
  void *this_00;
  undefined4 *puVar4;
  undefined4 extraout_ECX;
  undefined4 extraout_ECX_00;
  undefined4 extraout_ECX_01;
  int extraout_ECX_02;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint uVar5;
  ulonglong uVar6;
  _String_base local_10c [4];
  uint local_108;
  undefined4 local_f8;
  uint local_f4;
  undefined1 local_f0 [4];
  uint local_ec;
  undefined4 local_dc;
  uint local_d8;
  undefined1 local_d4 [4];
  uint local_d0;
  undefined4 local_c0;
  uint local_bc;
  _String_base local_b8 [4];
  uint local_b4;
  undefined4 local_a4;
  uint local_a0;
  _String_base local_9c [4];
  uint local_98;
  undefined4 local_88;
  uint local_84;
  undefined1 local_80 [4];
  uint local_7c;
  undefined4 local_6c;
  uint local_68;
  _String_base local_64 [4];
  uint local_60;
  undefined4 local_50;
  uint local_4c;
  undefined1 local_48 [4];
  uint local_44;
  undefined4 local_34;
  uint local_30;
  undefined1 local_2c [4];
  uint local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x50f742;
  local_10 = ExceptionList;
                    /* WARNING: Load size is inaccurate */
  ExceptionList = &local_10;
  (**(code **)(*this + 0x108))(0x20);
  if (*(char *)((int)this + 0xb3d) == '\0') {
    local_34 = 0;
    local_30 = 0xf;
    local_44 = local_44 & 0xffffff00;
    pcVar1 = "http://www.popcap.com/win32updatecheck.php";
    do {
      pcVar2 = pcVar1;
      pcVar1 = pcVar2 + 1;
    } while (*pcVar2 != '\0');
    String_Assign(local_48,(_String_base *)"http://www.popcap.com/win32updatecheck.php",
                  (uint)(pcVar2 + -0x52a410));
    local_14 = 0xf;
    local_8 = 0;
    local_18 = 0;
    local_28 = local_28 & 0xffffff00;
    pcVar1 = "VersionCheckURL";
    do {
      pcVar2 = pcVar1;
      pcVar1 = pcVar2 + 1;
    } while (*pcVar2 != '\0');
    String_Assign(local_2c,(_String_base *)"VersionCheckURL",(uint)(pcVar2 + -0x52a400));
    local_8._0_1_ = 1;
    p_Var3 = HTTP_AddHeader(this,local_10c,local_2c,(uint)local_48);
    local_8._0_1_ = 2;
    p_Var3 = Intel_DisplayPopulationData
                       (local_d4,extraout_EDX,(_String_base *)local_d4,p_Var3,
                        (_String_base *)"?prod=");
    local_8._0_1_ = 3;
    p_Var3 = Background_ProcessBackgroundLayer
                       (extraout_ECX,(int)this + 0x24U,local_9c,p_Var3,(int)this + 0x24U);
    local_8._0_1_ = 4;
    p_Var3 = Intel_DisplayPopulationData
                       (local_80,extraout_EDX_00,(_String_base *)local_80,p_Var3,
                        (_String_base *)"&ver=");
    local_8._0_1_ = 5;
    p_Var3 = Background_ProcessBackgroundLayer
                       (extraout_ECX_00,(int)this + 0x354U,local_64,p_Var3,(int)this + 0x354U);
    local_8._0_1_ = 6;
    p_Var3 = Intel_DisplayPopulationData
                       (local_f0,extraout_EDX_01,(_String_base *)local_f0,p_Var3,
                        (_String_base *)"&referid=");
    local_8._0_1_ = 7;
    p_Var3 = Background_ProcessBackgroundLayer
                       (extraout_ECX_01,(int)this + 0x5a0U,local_b8,p_Var3,(int)this + 0x5a0U);
    local_8 = CONCAT31(local_8._1_3_,8);
    uVar6 = Network_SetClientURL(*(void **)((int)this + 0x598),p_Var3);
    uVar5 = (uint)(uVar6 >> 0x20);
    if (0xf < local_a0) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_b4,uVar5);
    }
    local_a0 = 0xf;
    local_a4 = 0;
    local_b4 = local_b4 & 0xffffff00;
    if (0xf < local_d8) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,local_ec);
    }
    local_d8 = 0xf;
    local_dc = 0;
    local_ec = local_ec & 0xffffff00;
    if (0xf < local_4c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,uVar5);
    }
    local_4c = 0xf;
    local_50 = 0;
    local_60 = local_60 & 0xffffff00;
    if (0xf < local_68) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_7c,uVar5);
    }
    local_68 = 0xf;
    local_6c = 0;
    local_7c = local_7c & 0xffffff00;
    if (0xf < local_84) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,local_98);
    }
    local_84 = 0xf;
    local_88 = 0;
    local_98 = local_98 & 0xffffff00;
    if (0xf < local_bc) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,uVar5);
    }
    local_bc = 0xf;
    local_c0 = 0;
    local_d0 = local_d0 & 0xffffff00;
    if (0xf < local_f4) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_108,uVar5);
    }
    local_f4 = 0xf;
    local_f8 = 0;
    local_108 = local_108 & 0xffffff00;
    if (0xf < local_14) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,local_28);
    }
    local_14 = 0xf;
    local_18 = 0;
    local_28 = local_28 & 0xffffff00;
    local_8 = 0xffffffff;
    if (0xf < local_30) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,uVar5);
    }
    local_30 = 0xf;
    local_34 = 0;
    local_44 = local_44 & 0xffffff00;
    if (param_1 == '\0') {
      this_00 = operator_new(0x120);
      local_8 = 9;
      if (this_00 == (void *)0x0) {
        puVar4 = (undefined4 *)0x0;
      }
      else {
        puVar4 = Enemy_ProcessFragBomb(this_00,(int)this);
      }
                    /* WARNING: Load size is inaccurate */
      local_8 = 0xffffffff;
      (**(code **)(*this + 0x100))(0x3a,puVar4);
      ExceptionList = local_10;
      return;
    }
    *(undefined1 *)((int)this + 0xb3d) = 1;
  }
  ExceptionList = local_10;
  return;
}


