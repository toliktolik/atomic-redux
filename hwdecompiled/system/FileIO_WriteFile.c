/*
 * Function: FileIO_WriteFile
 * Address: 00481d10
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall
FileIO_WriteFile(void *this,int *param_1,void *param_2,int *param_3,uint *param_4,int *param_5)

{
  float fVar1;
  bool bVar2;
  float *pfVar3;
  float *pfVar4;
  int iVar5;
  uint extraout_EDX;
  int iVar6;
  uint *puVar7;
  uint uVar8;
  uint *puVar9;
  char *pcVar10;
  float local_ddc [8];
  uint local_dbc [8];
  uint local_d9c [8];
  uint local_d7c [776];
  float *local_15c;
  undefined4 local_158;
  undefined4 local_154;
  float local_150 [3];
  float local_144 [3];
  uint local_138;
  undefined4 local_134;
  uint local_12c;
  undefined4 local_128;
  uint local_120;
  undefined4 local_11c;
  uint *local_114;
  float local_110;
  undefined4 local_10c;
  uint *local_108;
  float local_104;
  undefined4 local_100;
  uint *local_fc;
  float local_f8;
  undefined4 local_f4;
  uint *local_f0;
  float local_ec;
  undefined4 local_e8;
  float local_e4 [4];
  uint local_d4;
  undefined4 local_d0;
  float local_cc;
  float local_c8;
  uint local_c4 [5];
  undefined4 local_b0;
  float local_ac;
  float local_a8;
  uint local_a4 [5];
  undefined4 local_90;
  float local_8c;
  float local_88;
  uint local_84 [5];
  undefined4 local_70;
  float local_6c;
  float local_68;
  int local_64;
  int local_60;
  int local_5c;
  int local_58;
  void *local_54;
  undefined4 local_50;
  int local_4c;
  float local_48;
  uint local_44;
  float local_40;
  float local_3c;
  uint *local_38;
  float local_34;
  int local_30;
  float local_2c;
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  int local_18;
  float local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51499b;
  local_10 = ExceptionList;
  local_58 = *param_3;
  local_18 = param_3[1];
  local_24 = param_3[2] + local_58;
  uVar8 = ((param_4[3] << 8 | *param_4) << 8 | param_4[1]) << 8 | param_4[2];
  local_30 = param_3[3] + local_18;
  local_14 = 0.0;
  if ((local_58 < local_24) &&
     (ExceptionList = &local_10, local_54 = this, local_44 = uVar8, local_18 < local_30)) {
    do {
      local_60 = local_30 - local_18;
      param_4 = (uint *)0x0;
      local_28 = local_58;
      do {
        local_20 = local_24 - local_28;
        local_1c = local_60;
        local_50 = System_ValidateSystemState
                             (local_54,local_28,local_18,&local_20,&local_1c,&local_40,&local_34,
                              &local_48,&local_3c);
        local_104 = (float)local_1c + local_14;
        local_114 = param_4;
        local_110 = local_14;
        local_108 = param_4;
        local_10c = 0x3f800000;
        local_100 = 0x3f800000;
        local_fc = (uint *)((float)local_20 + (float)param_4);
        local_f8 = local_14;
        local_f4 = 0x3f800000;
        local_e8 = 0x3f800000;
        iVar5 = 4;
        pfVar3 = local_144 + 2;
        local_f0 = local_fc;
        local_ec = local_104;
        local_38 = local_fc;
        do {
          pfVar3[-2] = 0.0;
          pfVar3[-1] = 0.0;
          *pfVar3 = 0.0;
          pfVar3 = pfVar3 + 3;
          iVar5 = iVar5 + -1;
        } while (iVar5 != 0);
        iVar5 = 0;
        do {
          pfVar4 = (float *)Font_GetDescent(param_2,local_150,(float *)((int)&local_114 + iVar5));
          pfVar3 = (float *)((int)local_144 + iVar5);
          *pfVar3 = *pfVar4;
          fVar1 = pfVar4[2];
          *(float *)((int)local_144 + iVar5 + 4) = pfVar4[1];
          *(float *)((int)local_144 + iVar5 + 8) = fVar1;
          iVar6 = iVar5 + 0xc;
          *pfVar3 = *pfVar3 - _DAT_005332ec;
          *(float *)((int)local_144 + iVar5 + 4) =
               *(float *)((int)local_144 + iVar5 + 4) - _DAT_005332ec;
          iVar5 = iVar6;
        } while (iVar6 < 0x30);
        bVar2 = false;
        if (param_5 != (int *)0x0) {
          local_2c = (float)*param_5;
          local_4c = param_5[2] + *param_5;
          local_64 = param_5[1];
          local_5c = param_5[3] + local_64;
          iVar5 = 0;
          pfVar3 = local_144 + 1;
          do {
            if ((((pfVar3[-1] < local_2c != (NAN(pfVar3[-1]) || NAN(local_2c))) ||
                 (fVar1 = (float)local_4c, fVar1 < pfVar3[-1] != (fVar1 == pfVar3[-1]))) ||
                (*pfVar3 < (float)local_64)) ||
               (fVar1 = (float)(param_5[3] + local_64), fVar1 < *pfVar3 != (fVar1 == *pfVar3))) {
              bVar2 = true;
              break;
            }
            iVar5 = iVar5 + 1;
            pfVar3 = pfVar3 + 3;
          } while (iVar5 < 4);
        }
        local_cc = local_40;
        local_c4[1] = local_134;
        local_e4[0] = local_144[0];
        local_e4[1] = local_144[1];
        local_a4[0] = local_12c;
        local_c8 = local_34;
        local_c4[0] = local_138;
        local_88 = local_34;
        local_ac = local_40;
        local_a8 = local_3c;
        pcVar10 = "SetTexture gTexture";
        local_6c = local_48;
        local_a4[1] = local_128;
        local_8c = local_48;
        local_84[0] = local_120;
        local_84[1] = local_11c;
        local_e4[2] = 0.0;
        local_e4[3] = 1.0;
        local_d0 = 0;
        local_c4[2] = 0;
        local_c4[3] = 0x3f800000;
        local_b0 = 0;
        local_a4[2] = 0;
        local_a4[3] = 0x3f800000;
        local_90 = 0;
        local_84[2] = 0;
        local_84[3] = 0x3f800000;
        local_70 = 0;
        local_68 = local_3c;
        local_d4 = uVar8;
        local_c4[4] = uVar8;
        local_a4[4] = uVar8;
        local_84[4] = uVar8;
        iVar5 = (**(code **)(*param_1 + 0x8c))(param_1,0,local_50);
        Threading_LockMutex(iVar5,(_String_base *)pcVar10);
        if (bVar2) {
          local_15c = local_ddc;
          local_154 = 100;
          local_8 = 0;
          pfVar3 = local_e4;
          pfVar4 = local_ddc;
          for (iVar5 = 8; iVar5 != 0; iVar5 = iVar5 + -1) {
            *pfVar4 = *pfVar3;
            pfVar3 = pfVar3 + 1;
            pfVar4 = pfVar4 + 1;
          }
          puVar7 = local_c4;
          puVar9 = local_dbc;
          for (iVar5 = 8; iVar5 != 0; iVar5 = iVar5 + -1) {
            *puVar9 = *puVar7;
            puVar7 = puVar7 + 1;
            puVar9 = puVar9 + 1;
          }
          puVar7 = local_84;
          puVar9 = local_d9c;
          for (iVar5 = 8; iVar5 != 0; iVar5 = iVar5 + -1) {
            *puVar9 = *puVar7;
            puVar7 = puVar7 + 1;
            puVar9 = puVar9 + 1;
          }
          puVar7 = local_a4;
          puVar9 = local_d7c;
          for (iVar5 = 8; iVar5 != 0; iVar5 = iVar5 + -1) {
            *puVar9 = *puVar7;
            puVar7 = puVar7 + 1;
            puVar9 = puVar9 + 1;
          }
          local_158 = 4;
          FileIO_ReadFile(local_ddc,param_1);
          local_8 = 0xffffffff;
          uVar8 = local_44;
          if (local_15c != local_ddc) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler((int)local_ddc,extraout_EDX);
          }
        }
        else {
          pcVar10 = "DrawPrimitive (Tri) 3";
          iVar5 = (**(code **)(*param_1 + 100))(param_1,5,0x1c4,local_e4,4,0);
          Threading_LockMutex(iVar5,(_String_base *)pcVar10);
        }
        local_28 = local_28 + local_20;
        param_4 = local_38;
      } while (local_28 < local_24);
      local_14 = (float)local_1c + local_14;
      local_18 = local_18 + local_1c;
    } while (local_18 < local_30);
  }
  ExceptionList = local_10;
  return;
}


