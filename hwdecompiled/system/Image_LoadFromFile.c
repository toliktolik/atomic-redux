/*
 * Function: Image_LoadFromFile
 * Address: 0049af40
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall
Image_LoadFromFile(undefined4 param_1,byte *param_2,_String_base *param_3,int param_4)

{
  void **ppvVar1;
  uint uVar2;
  int iVar3;
  int extraout_ECX;
  int extraout_ECX_00;
  byte *extraout_EDX;
  uint extraout_EDX_00;
  uint uVar4;
  uint unaff_retaddr;
  undefined4 *in_stack_0000214e;
  undefined4 *in_stack_00002152;
  _String_base local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  uStack_c = 0x515e68;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = 0;
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  iVar3 = *(int *)(param_4 + 0x14);
  uVar4 = 0;
  local_8 = 0;
  ExceptionList = &local_10;
  ppvVar1 = &local_10;
  if (iVar3 != 0) {
    do {
      uVar2 = Assembly_BitwiseShiftOperation((byte)iVar3,param_2);
      Memory_AllocateSound(local_34,1,SUB41(uVar2,0));
      uVar4 = uVar4 + 1;
      iVar3 = extraout_ECX;
      param_2 = extraout_EDX;
      ppvVar1 = (void **)ExceptionList;
    } while (uVar4 < *(uint *)(param_4 + 0x14));
  }
  ExceptionList = ppvVar1;
  *(undefined4 *)(param_3 + 0x18) = 0xf;
  *(undefined4 *)(param_3 + 0x14) = 0;
  param_3[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike(param_3,(uint)local_34,local_34,0,0xffffffff);
  if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_0000214e,in_stack_00002152);
  return;
}


