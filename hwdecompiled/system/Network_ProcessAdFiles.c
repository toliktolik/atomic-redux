/*
 * Function: Network_ProcessAdFiles
 * Address: 004abdf0
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Network_ProcessAdFiles(int param_1)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  undefined4 *****pppppuVar4;
  LPCSTR lpOutputString;
  _String_base *p_Var5;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  undefined4 extraout_ECX_04;
  int extraout_ECX_05;
  int extraout_ECX_06;
  undefined2 extraout_DX;
  uint extraout_EDX;
  int extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  int *piVar6;
  void *pvVar7;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff18;
  undefined4 *in_stack_ffffff1c;
  uint local_d0;
  undefined1 local_cc [4];
  uint local_c8;
  undefined4 local_b8;
  uint local_b4;
  _String_base local_b0 [4];
  uint local_ac;
  undefined4 local_9c;
  uint local_98;
  _String_base local_94 [4];
  undefined4 ****local_90 [4];
  undefined4 local_80;
  uint local_7c;
  _String_base local_78 [4];
  uint local_74;
  undefined4 local_64;
  uint local_60;
  _String_base local_5c [4];
  uint local_58;
  undefined4 local_48;
  uint local_44;
  _String_base local_40 [4];
  uint local_3c;
  undefined4 local_2c;
  uint local_28;
  int local_24;
  int local_20;
  void *local_1c;
  char local_18 [4];
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51653b;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_20 = param_1;
  if (*(char *)(param_1 + 0x4f6) != '\0') {
    pvVar7 = (void *)(param_1 + 0x104);
    local_24 = 4;
    ExceptionList = &local_10;
    do {
      local_1c = pvVar7;
      iVar2 = Network_GetClientState((int)pvVar7);
      if (iVar2 == 0) {
        local_28 = 0xf;
        local_2c = 0;
        local_3c = local_3c & 0xffffff00;
        PowerUp_ProcessThunderstrike
                  (local_40,extraout_EDX,(_String_base *)((int)pvVar7 + 0x44),0,0xffffffff);
        local_8 = 0;
        local_18[0] = '/';
        for (uVar3 = UI_Widget_ResetTransform(local_40,local_18,0,1); uVar3 != 0xffffffff;
            uVar3 = UI_Widget_ResetTransform(local_40,local_18,uVar3 + 1,1)) {
          GameMenu_ProcessRegistrationScreen(local_40,local_94,0,uVar3);
          pppppuVar4 = (undefined4 *****)local_90[0];
          if (local_7c < 0x10) {
            pppppuVar4 = local_90;
          }
          func_0x0050f21a(pppppuVar4);
          if (0xf < local_7c) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(extraout_ECX,(uint)local_90[0]);
          }
          local_7c = 0xf;
          local_80 = 0;
          local_90[0] = (undefined4 ****)((uint)local_90[0] & 0xffffff00);
          local_18[0] = '/';
        }
        iVar2 = Sound_SetPosition(local_b0,"AdFile: %s\r\n");
        if (*(uint *)(iVar2 + 0x18) < 0x10) {
          lpOutputString = (LPCSTR)(iVar2 + 4);
        }
        else {
          lpOutputString = *(LPCSTR *)(iVar2 + 4);
        }
        OutputDebugStringA(lpOutputString);
        if (0xf < local_98) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,local_ac);
        }
        local_98 = 0xf;
        local_9c = 0;
        local_ac = local_ac & 0xffffff00;
        iVar2 = String_AllocateBuffer(extraout_ECX_00,extraout_DX);
        if (iVar2 != 0) {
          Network_GetClientMessage(local_1c,local_5c);
          String_CopyData((char)local_48);
          Memory_AllocateBlock(extraout_ECX_01,extraout_EDX_00);
          if (0xf < local_44) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(extraout_ECX_02,local_58);
          }
          local_44 = 0xf;
          local_48 = 0;
          local_58 = local_58 & 0xffffff00;
        }
        Game_InitializeNewGame((int)local_1c);
        local_8 = 0xffffffff;
        if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_03,extraout_EDX_01);
        }
        local_28 = 0xf;
        local_2c = 0;
        local_3c = local_3c & 0xffffff00;
        uVar3 = extraout_EDX_01;
        param_1 = local_20;
LAB_004ac0d1:
        pvVar7 = local_1c;
        if (*(int *)(param_1 + 0x534) != 0) {
          if (*(int **)(param_1 + 0x530) == (int *)0x0) {
            iVar2 = 0;
          }
          else {
            iVar2 = **(int **)(param_1 + 0x530);
          }
          local_60 = 0xf;
          local_64 = 0;
          local_74 = local_74 & 0xffffff00;
          PowerUp_ProcessThunderstrike(local_78,uVar3,(_String_base *)(iVar2 + 8),0,0xffffffff);
          piVar1 = *(int **)(param_1 + 0x530);
          local_8 = 2;
          if (piVar1 == (int *)0x0) {
            piVar6 = (int *)0x0;
          }
          else {
            piVar6 = (int *)*piVar1;
          }
          if (piVar6 != piVar1) {
            *(int *)piVar6[1] = *piVar6;
            piVar1 = piVar6 + 2;
            *(int *)(*piVar6 + 4) = piVar6[1];
            if (0xf < (uint)piVar6[8]) {
              String_GetDataPointer((int)piVar1);
              Memory_ThunkWrapper((int)piVar1,extraout_EDX_04);
            }
            piVar6[8] = 0xf;
            String_SetLength(piVar1,0);
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(extraout_ECX_06,extraout_EDX_05);
          }
          HTTP_SetRequestParams(local_1c,(uint)local_78,(_String_base *)(local_20 + 0x68),local_78);
          local_8 = 0xffffffff;
          if (0xf < local_60) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(local_74,extraout_EDX_06);
          }
          local_60 = 0xf;
          local_64 = 0;
          local_74 = local_74 & 0xffffff00;
          param_1 = local_20;
          pvVar7 = local_1c;
        }
      }
      else if (iVar2 != 2) {
        uVar3 = extraout_EDX;
        if (iVar2 != 1) {
          p_Var5 = Survival_LoadConfiguration
                             ((_String_base *)&stack0xffffff18,(_String_base *)"Error on AdFile: ",
                              (int)pvVar7 + 0x44);
          local_8 = 1;
          p_Var5 = Intel_DisplayPopulationData
                             (extraout_ECX_04,(uint)local_cc,(_String_base *)local_cc,p_Var5,
                              (_String_base *)&DAT_00531704);
          if (*(uint *)(p_Var5 + 0x18) < 0x10) {
            p_Var5 = p_Var5 + 4;
          }
          else {
            p_Var5 = *(_String_base **)(p_Var5 + 4);
          }
          OutputDebugStringA((LPCSTR)p_Var5);
          if (0xf < local_b4) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(extraout_ECX_05,extraout_EDX_02);
          }
          local_b4 = 0xf;
          local_b8 = 0;
          local_c8 = local_c8 & 0xffffff00;
          local_8 = 0xffffffff;
          if (0xf < local_d0) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler((int)in_stack_ffffff1c,extraout_EDX_02);
          }
          local_d0 = 0xf;
          in_stack_ffffff1c = (undefined4 *)((uint)in_stack_ffffff1c & 0xffffff00);
          Game_InitializeNewGame((int)local_1c);
          uVar3 = extraout_EDX_03;
          param_1 = local_20;
        }
        goto LAB_004ac0d1;
      }
      pvVar7 = (void *)((int)pvVar7 + 0xfc);
      local_24 = local_24 + -1;
    } while (local_24 != 0);
    local_24 = 0;
    local_1c = pvVar7;
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff18,in_stack_ffffff1c);
  return;
}


