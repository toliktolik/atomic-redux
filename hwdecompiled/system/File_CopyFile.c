/*
 * Function: File_CopyFile
 * Address: 004d7270
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl File_CopyFile(uint param_1,int param_2)

{
  char cVar1;
  int in_EAX;
  int iVar2;
  uint uVar3;
  uint uVar4;
  
  iVar2 = *(int *)(in_EAX + 0x1c);
  if (param_2 == 0) {
    *(undefined4 *)(**(int **)(in_EAX + 0x20) + 0x14) = 0x28;
    (**(code **)**(undefined4 **)(in_EAX + 0x20))(*(undefined4 **)(in_EAX + 0x20));
  }
  if (*(char *)(in_EAX + 0xc) == '\0') {
    uVar3 = iVar2 + param_2;
    uVar4 = ((1 << ((byte)param_2 & 0x1f)) - 1U & param_1) << (0x18U - (char)uVar3 & 0x1f) |
            *(uint *)(in_EAX + 0x18);
    if (7 < (int)uVar3) {
      param_1 = uVar3 >> 3;
      uVar3 = uVar3 + param_1 * -8;
      do {
        cVar1 = (char)(uVar4 >> 0x10);
        **(char **)(in_EAX + 0x10) = cVar1;
        iVar2 = *(int *)(in_EAX + 0x14) + -1;
        *(int *)(in_EAX + 0x10) = *(int *)(in_EAX + 0x10) + 1;
        *(int *)(in_EAX + 0x14) = iVar2;
        if (iVar2 == 0) {
          File_DeleteFile();
        }
        if (cVar1 == -1) {
          **(undefined1 **)(in_EAX + 0x10) = 0;
          iVar2 = *(int *)(in_EAX + 0x14) + -1;
          *(int *)(in_EAX + 0x10) = *(int *)(in_EAX + 0x10) + 1;
          *(int *)(in_EAX + 0x14) = iVar2;
          if (iVar2 == 0) {
            File_DeleteFile();
          }
        }
        uVar4 = uVar4 << 8;
        param_1 = param_1 - 1;
      } while (param_1 != 0);
    }
    *(uint *)(in_EAX + 0x18) = uVar4;
    *(uint *)(in_EAX + 0x1c) = uVar3;
  }
  return;
}


