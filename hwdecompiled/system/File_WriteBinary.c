/*
 * Function: File_WriteBinary
 * Address: 004d7060
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl File_WriteBinary(int *param_1,char param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined4 *local_10;
  int local_c;
  int *local_8;
  
  iVar1 = param_1[0x57];
  if (param_2 == '\0') {
    *(code **)(iVar1 + 4) = String_ParseBool;
    *(code **)(iVar1 + 8) = String_ToString;
  }
  else {
    *(code **)(iVar1 + 4) = File_Exists;
    *(code **)(iVar1 + 8) = File_ReadBinary;
  }
  local_c = 0;
  if (0 < param_1[0x39]) {
    local_10 = (undefined4 *)(iVar1 + 0x14);
    local_8 = param_1 + 0x3a;
    do {
      iVar5 = *(int *)(*local_8 + 0x14);
      iVar2 = *(int *)(*local_8 + 0x18);
      if (param_2 == '\0') {
        String_Replace(param_1,'\x01',iVar5,(int *)(iVar1 + 0x2c + iVar5 * 4));
        String_Replace(param_1,'\0',iVar2,(int *)(iVar1 + 0x3c + iVar2 * 4));
      }
      else {
        if ((iVar5 < 0) || (3 < iVar5)) {
          *(undefined4 *)(*param_1 + 0x14) = 0x32;
          *(int *)(*param_1 + 0x18) = iVar5;
          (**(code **)*param_1)(param_1);
        }
        if ((iVar2 < 0) || (3 < iVar2)) {
          *(undefined4 *)(*param_1 + 0x14) = 0x32;
          *(int *)(*param_1 + 0x18) = iVar2;
          (**(code **)*param_1)(param_1);
        }
        if (*(int *)(iVar1 + 0x4c + iVar5 * 4) == 0) {
          uVar3 = (**(code **)param_1[1])(param_1,1,0x404);
          *(undefined4 *)(iVar1 + 0x4c + iVar5 * 4) = uVar3;
        }
        puVar6 = *(undefined4 **)(iVar1 + 0x4c + iVar5 * 4);
        for (iVar4 = 0x101; iVar4 != 0; iVar4 = iVar4 + -1) {
          *puVar6 = 0;
          puVar6 = puVar6 + 1;
        }
        if (*(int *)(iVar1 + 0x5c + iVar2 * 4) == 0) {
          uVar3 = (**(code **)param_1[1])(param_1,1,0x404);
          *(undefined4 *)(iVar1 + 0x5c + iVar2 * 4) = uVar3;
        }
        puVar6 = *(undefined4 **)(iVar1 + 0x5c + iVar2 * 4);
        for (iVar5 = 0x101; iVar5 != 0; iVar5 = iVar5 + -1) {
          *puVar6 = 0;
          puVar6 = puVar6 + 1;
        }
      }
      *local_10 = 0;
      local_10 = local_10 + 1;
      local_c = local_c + 1;
      local_8 = local_8 + 1;
    } while (local_c < param_1[0x39]);
  }
  *(undefined4 *)(iVar1 + 0xc) = 0;
  *(undefined4 *)(iVar1 + 0x10) = 0;
  *(int *)(iVar1 + 0x24) = param_1[0x2f];
  *(undefined4 *)(iVar1 + 0x28) = 0;
  return;
}


