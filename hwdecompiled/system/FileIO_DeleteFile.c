/*
 * Function: FileIO_DeleteFile
 * Address: 004827a0
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall FileIO_DeleteFile(undefined4 param_1)

{
  void *this;
  uint uVar1;
  LSTATUS LVar2;
  int extraout_ECX;
  undefined4 *unaff_EBP;
  int *piVar3;
  int *piVar4;
  bool bVar5;
  undefined4 *unaff_retaddr;
  _String_base local_102c [4096];
  int local_2c;
  int iVar6;
  DWORD DVar7;
  
  System_LoadLibrary(param_1);
  this = DAT_00569f5c;
  uVar1 = (uint)DAT_00569f5c ^ (uint)unaff_retaddr;
  *(undefined1 *)(extraout_ECX + 0x82) = 1;
  if (*(HKEY *)(extraout_ECX + 0x1c) == (HKEY)0x0) {
    Exception_SetMessage(this,unaff_EBP,unaff_retaddr);
    return;
  }
  iVar6 = 0;
  local_2c = 0x48280b;
  LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"Version",(LPDWORD)0x0,(LPDWORD)0x0,
                           &stack0xffffffe4,(LPDWORD)&stack0xfffffff4);
  if ((LVar2 == 0) && (iVar6 == 2)) {
    iVar6 = 0;
    local_2c = 0x48284f;
    LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"MinVidMemory",(LPDWORD)0x0,
                             (LPDWORD)&stack0xfffffff0,&stack0xffffffec,(LPDWORD)0x0);
    if ((LVar2 == 0) && (iVar6 == *(int *)(extraout_ECX + 0x78))) {
      iVar6 = 0;
      local_2c = 0x482881;
      LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"RecVidMemory",(LPDWORD)0x0,
                               (LPDWORD)&stack0xfffffff0,(LPBYTE)0x0,(LPDWORD)&stack0xfffffff4);
      if ((LVar2 == 0) && (iVar6 == *(int *)(extraout_ECX + 0x7c))) {
        DVar7 = 0x10;
        local_2c = 0x4828b4;
        LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"DisplayGUID",(LPDWORD)0x0,
                                 (LPDWORD)&stack0xfffffff0,(LPBYTE)&local_2c,
                                 (LPDWORD)&stack0xfffffff4);
        if ((LVar2 == 0) && (DVar7 == 0x10)) {
          iVar6 = 4;
          bVar5 = true;
          piVar3 = &local_2c;
          piVar4 = (int *)(extraout_ECX + 0x20);
          do {
            if (iVar6 == 0) break;
            iVar6 = iVar6 + -1;
            bVar5 = *piVar3 == *piVar4;
            piVar3 = piVar3 + 1;
            piVar4 = piVar4 + 1;
          } while (bVar5);
          if (bVar5) {
            local_2c = 0x482909;
            LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"FailureReason",(LPDWORD)0x0,
                                     (LPDWORD)&stack0xfffffff0,(LPBYTE)local_102c,
                                     (LPDWORD)&stack0xfffffff4);
            if (LVar2 == 0) {
              Background_UpdateParallaxLayers((void *)(extraout_ECX + 0x40),local_102c);
              local_2c = 0x482946;
              LVar2 = RegQueryValueExA(*(HKEY *)(extraout_ECX + 0x1c),"Warning",(LPDWORD)0x0,
                                       (LPDWORD)&stack0xfffffff0,(LPBYTE)local_102c,
                                       (LPDWORD)&stack0xfffffff4);
              if (LVar2 == 0) {
                Background_UpdateParallaxLayers((void *)(extraout_ECX + 0x5c),local_102c);
                *(undefined1 *)(extraout_ECX + 0x82) = 0;
                Exception_SetMessage((void *)(uVar1 ^ (uint)unaff_retaddr),unaff_EBP,unaff_retaddr);
                return;
              }
            }
          }
        }
      }
    }
  }
  Exception_SetMessage((void *)(uVar1 ^ (uint)unaff_retaddr),unaff_EBP,unaff_retaddr);
  return;
}


