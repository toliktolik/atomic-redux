/*
 * Function: FileIO_FindNextFile
 * Address: 00486750
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


uint __thiscall FileIO_FindNextFile(void *this,undefined4 param_1)

{
  int iVar1;
  undefined4 *puVar2;
  void *this_00;
  uint uVar3;
  
  uVar3 = *(uint *)((int)this + 0x34);
  if ((uVar3 == 0) &&
     ((uVar3 = *(uint *)((int)this + 0x2c), *(char *)(uVar3 + 0x548) != '\0' ||
      (*(char *)(uVar3 + 0x547) != '\0')))) {
    puVar2 = (undefined4 *)operator_new(0x84);
    if (puVar2 == (undefined4 *)0x0) {
      this_00 = (void *)0x0;
    }
    else {
      this_00 = (void *)System_ProcessPowerManagement(puVar2);
    }
    *(void **)((int)this + 0x34) = this_00;
    SexyWidget_SetUVCoordinates
              (this_00,*(undefined4 *)(*(int *)((int)this + 0x2c) + 0x54c),
               *(undefined4 *)(*(int *)((int)this + 0x2c) + 0x550));
    D3D_SetupLighting(*(void **)((int)this + 0x34),param_1,*(int **)((int)this + 0x5c));
    if (((*(char *)(*(int *)((int)this + 0x2c) + 0x547) != '\0') &&
        (*(int *)(*(int *)((int)this + 0x34) + 0x54) == 0)) &&
       (*(int *)(*(int *)((int)this + 0x34) + 0x70) == 0)) {
      *(undefined1 *)((int)this + 0x38) = 1;
    }
    iVar1 = *(int *)((int)this + 0x34);
    if (*(int *)(iVar1 + 0x54) != 0) {
      *(undefined1 *)((int)this + 0x38) = 0;
    }
    if ((*(char *)(iVar1 + 0x82) != '\0') &&
       ((*(int *)(iVar1 + 0x54) != 0 || (*(int *)(iVar1 + 0x70) != 0)))) {
      *(undefined1 *)((int)this + 0x38) = 0;
    }
    return CONCAT31((int3)((uint)iVar1 >> 8),1);
  }
  return uVar3 & 0xffffff00;
}


