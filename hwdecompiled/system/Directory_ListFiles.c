/*
 * Function: Directory_ListFiles
 * Address: 004d7450
 * Category: system
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Directory_ListFiles(char param_1)

{
  int in_EAX;
  int iVar1;
  undefined4 *puVar2;
  
  File_GetDirectory();
  if (*(char *)(in_EAX + 0xc) == '\0') {
    File_MoveFile();
    **(undefined1 **)(in_EAX + 0x10) = 0xff;
    iVar1 = *(int *)(in_EAX + 0x14) + -1;
    *(int *)(in_EAX + 0x10) = *(int *)(in_EAX + 0x10) + 1;
    *(int *)(in_EAX + 0x14) = iVar1;
    if (iVar1 == 0) {
      File_DeleteFile();
    }
    **(char **)(in_EAX + 0x10) = param_1 + -0x30;
    iVar1 = *(int *)(in_EAX + 0x14) + -1;
    *(int *)(in_EAX + 0x10) = *(int *)(in_EAX + 0x10) + 1;
    *(int *)(in_EAX + 0x14) = iVar1;
    if (iVar1 == 0) {
      File_DeleteFile();
    }
  }
  if (*(int *)(*(int *)(in_EAX + 0x20) + 300) == 0) {
    iVar1 = 0;
    if (0 < *(int *)(*(int *)(in_EAX + 0x20) + 0xe4)) {
      puVar2 = (undefined4 *)(in_EAX + 0x24);
      do {
        *puVar2 = 0;
        iVar1 = iVar1 + 1;
        puVar2 = puVar2 + 1;
      } while (iVar1 < *(int *)(*(int *)(in_EAX + 0x20) + 0xe4));
      return;
    }
  }
  else {
    *(undefined4 *)(in_EAX + 0x38) = 0;
    *(undefined4 *)(in_EAX + 0x3c) = 0;
  }
  return;
}


