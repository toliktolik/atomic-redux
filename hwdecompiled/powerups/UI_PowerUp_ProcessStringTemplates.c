/*
 * Function: UI_PowerUp_ProcessStringTemplates
 * Address: 004a4720
 * Category: powerups
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall
UI_PowerUp_ProcessStringTemplates
          (undefined4 param_1,uint param_2,_String_base *param_3,_String_base *param_4,void *param_5
          )

{
  char *pcVar1;
  uint uVar2;
  uint uVar3;
  _String_base *p_Var4;
  uint uVar5;
  undefined4 **ppuVar6;
  char *pcVar7;
  uint uVar8;
  undefined4 *****pppppuVar9;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  uint extraout_EDX_00;
  int iVar10;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  undefined4 *unaff_ESI;
  _String_base *p_Var11;
  undefined4 *unaff_EDI;
  uint unaff_retaddr;
  _String_base local_74 [4];
  uint local_70;
  uint local_60;
  uint local_5c;
  _String_base local_58 [4];
  _String_base *local_54 [4];
  int local_44;
  uint local_40;
  _String_base local_3c [4];
  undefined4 ****local_38 [4];
  undefined4 local_28;
  uint local_24;
  undefined4 *local_20;
  undefined4 *local_1c;
  char local_18 [4];
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  uint local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x515b08;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_20 = (undefined4 *)0x0;
  local_24 = 0xf;
  local_28 = 0;
  local_38[0] = (undefined4 ****)((uint)local_38[0] & 0xffffff00);
  ExceptionList = &local_10;
  PowerUp_ProcessThunderstrike(local_3c,param_2,param_4,0,0xffffffff);
  local_8 = 0;
  local_18[0] = '%';
  uVar2 = UI_Widget_ResetTransform(local_3c,local_18,0,1);
  while (uVar2 != 0xffffffff) {
    local_18[0] = '%';
    uVar3 = UI_Widget_ResetTransform(local_3c,local_18,uVar2 + 1,1);
    if (uVar3 == 0xffffffff) break;
    GameMenu_ProcessRegistrationScreen(local_3c,local_74,uVar2 + 1,(uVar3 - uVar2) - 1);
    local_40 = 0xf;
    local_44 = 0;
    local_54[0] = (_String_base *)((uint)local_54[0] & 0xffffff00);
    local_8 = CONCAT31(local_8._1_3_,2);
    local_1c = DataStructure_FindNode(param_5,(int)local_74);
    uVar8 = extraout_EDX;
    if (local_1c == *(undefined4 **)((int)param_5 + 4)) {
LAB_004a4818:
      local_20 = *(undefined4 **)((int)param_5 + 4);
      ppuVar6 = &local_20;
    }
    else {
      if ((uint)local_1c[9] < 0x10) {
        p_Var4 = (_String_base *)(local_1c + 4);
      }
      else {
        p_Var4 = (_String_base *)local_1c[4];
      }
      uVar5 = String_Compare(local_74,0,local_60,p_Var4,local_1c[8]);
      uVar8 = extraout_EDX_00;
      if ((int)uVar5 < 0) goto LAB_004a4818;
      ppuVar6 = &local_1c;
    }
    if (*ppuVar6 == *(undefined4 **)((int)param_5 + 4)) {
      pcVar1 = "";
      do {
        pcVar7 = pcVar1;
        pcVar1 = pcVar7 + 1;
      } while (*pcVar7 != '\0');
      String_Assign(local_58,(_String_base *)&DAT_0052c7cf,(uint)(pcVar7 + -0x52c7cf));
    }
    else {
      PowerUp_ProcessThunderstrike(local_58,uVar8,(_String_base *)(*ppuVar6 + 10),0,0xffffffff);
    }
    pppppuVar9 = (undefined4 *****)local_38[0];
    if (local_24 < 0x10) {
      pppppuVar9 = local_38;
    }
    uVar3 = (int)pppppuVar9 + uVar3 + 1;
    pppppuVar9 = (undefined4 *****)local_38[0];
    if (local_24 < 0x10) {
      pppppuVar9 = local_38;
    }
    iVar10 = (int)pppppuVar9 + uVar2;
    pppppuVar9 = (undefined4 *****)local_38[0];
    if (local_24 < 0x10) {
      pppppuVar9 = local_38;
    }
    if (iVar10 == 0) {
      uVar8 = 0;
    }
    else {
      uVar8 = iVar10 - (int)pppppuVar9;
    }
    if (uVar3 != 0) {
      uVar3 = uVar3 - iVar10;
    }
    PowerUp_ProcessFlakCannon(local_3c,uVar8,uVar3);
    p_Var4 = local_54[0];
    if (local_40 < 0x10) {
      p_Var4 = (_String_base *)local_54;
    }
    p_Var11 = local_54[0];
    if (local_40 < 0x10) {
      p_Var11 = (_String_base *)local_54;
    }
    pppppuVar9 = (undefined4 *****)local_38[0];
    if (local_24 < 0x10) {
      pppppuVar9 = local_38;
    }
    Image_LockSurface(local_3c,(int)pppppuVar9 + uVar2,(int)pppppuVar9 + uVar2,p_Var11,
                      p_Var4 + local_44);
    if (0xf < local_40) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,(uint)local_54[0]);
    }
    local_40 = 0xf;
    local_44 = 0;
    local_54[0] = (_String_base *)((uint)local_54[0] & 0xffffff00);
    local_8 = local_8 & 0xffffff00;
    if (0xf < local_5c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
    }
    local_5c = 0xf;
    local_60 = 0;
    local_70 = local_70 & 0xffffff00;
    local_18[0] = '%';
    uVar2 = UI_Widget_ResetTransform(local_3c,local_18,0,1);
  }
  *(undefined4 *)(param_3 + 0x18) = 0xf;
  *(undefined4 *)(param_3 + 0x14) = 0;
  param_3[4] = (_String_base)0x0;
  PowerUp_ProcessThunderstrike(param_3,(uint)local_3c,local_3c,0,0xffffffff);
  if (0xf < local_24) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,extraout_EDX_02);
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),unaff_EDI,unaff_ESI);
  return;
}


