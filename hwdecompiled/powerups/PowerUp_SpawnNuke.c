/*
 * Function: PowerUp_SpawnNuke
 * Address: 00488450
 * Category: powerups
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall PowerUp_SpawnNuke(void *this,int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  undefined4 local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00514ec3;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  Graphics_PixelFormat_Constructor((undefined4 *)this);
  *(undefined ***)this = &PTR_D3D_EnableTexturing_005333ec;
  *(undefined4 *)((int)this + 0xc) = 0;
  *(undefined4 *)((int)this + 0x10) = 0;
  *(undefined4 *)((int)this + 0x14) = 0;
  local_8 = 1;
  *(undefined1 *)((int)this + 4) = 1;
  uVar3 = 0;
  while ((iVar1 = *(int *)(param_1 + 0xc), iVar1 != 0 &&
         (uVar3 < (uint)(*(int *)(param_1 + 0x10) - iVar1 >> 2)))) {
    local_14 = (**(code **)(**(int **)(iVar1 + uVar3 * 4) + 4))();
    iVar1 = *(int *)((int)this + 0xc);
    if ((iVar1 == 0) ||
       ((uint)(*(int *)((int)this + 0x14) - iVar1 >> 2) <=
        (uint)(*(int *)((int)this + 0x10) - iVar1 >> 2))) {
      D3D_SetModelViewMatrix
                ((void *)((int)this + 8),*(undefined4 **)((int)this + 0x10),(undefined4 *)0x1,
                 &local_14);
      uVar3 = uVar3 + 1;
    }
    else {
      puVar2 = *(undefined4 **)((int)this + 0x10);
      ArrayInit_4ByteObjects(puVar2,1,&local_14);
      *(undefined4 **)((int)this + 0x10) = puVar2 + 1;
      uVar3 = uVar3 + 1;
    }
  }
  ExceptionList = local_10;
  return (undefined4 *)this;
}


