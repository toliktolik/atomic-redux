/*
 * Function: Tank_RenderWithPowerUps
 * Address: 00401b80
 * Category: powerups
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall
Tank_RenderWithPowerUps(void *this,void *param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  undefined4 *puVar2;
  int *this_00;
  ulonglong uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int local_34 [4];
  int local_24 [5];
  undefined4 local_10;
  undefined8 local_c;
  
  DrawSprite(*(void **)((int)this + 0x6d0),param_1,param_2,param_3 + 0x16,'\x01',0,0,'\0');
  DrawSprite(*(void **)((int)this + 0x6cc),param_1,param_2,param_3,'\x01',param_4,0,'\0');
  uVar3 = Math_FloatToUInt64();
  iVar1 = (int)uVar3;
  DrawSprite(*(void **)((int)this + 0x6d4),param_1,param_2 + -0x28,param_3 + -0x34,'\0',iVar1,
             *(int *)((int)this + 0x97c),'\0');
  if (*(int *)((int)this + 0x958) != 0) {
    return;
  }
  if (0 < *(int *)((int)this + 0x988)) {
    DrawSprite(*(void **)((int)this + 0x860),param_1,param_2 + -0x28,param_3 + -0x2a,'\0',iVar1,
               *(int *)((int)this + 0x988) + -1,'\0');
  }
  if (0 < *(int *)((int)this + 0x990)) {
    DrawSprite(*(void **)((int)this + 0x85c),param_1,param_2 + -0x28,param_3 + -0x34,'\0',iVar1,
               *(int *)((int)this + 0x990) + -1,'\0');
  }
  if (0 < *(int *)((int)this + 0x984)) {
    DrawSprite(*(void **)((int)this + 0x868),param_1,param_2,param_3 + -2,'\x01',
               *(int *)((int)this + 0x984) + -1,0,'\0');
  }
  if (0 < *(int *)((int)this + 0x994)) {
    DrawSprite(*(void **)((int)this + 0x864),param_1,param_2,param_3 + 4,'\x01',0,
               *(int *)((int)this + 0x994) + -1,'\0');
  }
  PowerUpEffects_Render(this,param_1,3,param_2,param_3);
  PowerUpEffects_Render(this,param_1,0,param_2,param_3);
  iVar1 = *(int *)((int)this + 0x96c);
  if (iVar1 == 0) {
    return;
  }
  if (*(int *)((int)this + 0x920) == 0) {
    return;
  }
  if (iVar1 == 1) {
    uVar5 = 0x40;
    this_00 = local_34;
LAB_00401d2f:
    uVar4 = 0xff;
  }
  else {
    if (iVar1 == 2) {
      uVar5 = 0xff;
      this_00 = local_24 + 4;
      goto LAB_00401d2f;
    }
    if (iVar1 != 3) goto LAB_00401d41;
    uVar5 = 0xff;
    uVar4 = 0;
    this_00 = local_24;
  }
  puVar2 = (undefined4 *)CreateColor(this_00,uVar4,uVar5,0,0x80);
  SexyWidget_SetRectangle(param_1,puVar2);
LAB_00401d41:
  SexyWidget_SetColorizeFlag2(param_1,1);
  SexyWidget_SetDrawMode(param_1,1);
  DrawSprite(*(void **)((int)this + 0x708),param_1,param_2,param_3 + 2,'\x01',
             (*(int *)((int)this + 0x414) % 100) / 10,0,'\0');
  iVar1 = *(int *)(*(int *)((int)this + 0x920) + 0x160);
  if (iVar1 != 0) {
    puVar2 = (undefined4 *)SexyWidget_ApplyMatrix(local_34,iVar1,iVar1,iVar1);
    SexyWidget_SetRectangle(param_1,puVar2);
    local_c = (double)*(int *)(*(int *)((int)this + 0x920) + 0x160) * _DAT_0052a0f8 + _DAT_0052a0f0;
    SexyWidget_GetTextureId(*(int *)((int)this + 0x708));
    Level_InitializePetrovakia(*(int *)((int)this + 0x708));
    local_24[1] = 0;
    local_24[2] = 0x50;
    local_24[3] = 0x46;
    local_24[0] = ((*(int *)((int)this + 0x414) % 100) / 10) * 0x50;
    uVar3 = Math_FloatToUInt64();
    local_24[4] = (int)uVar3;
    uVar3 = Math_FloatToUInt64();
    local_10 = (undefined4)uVar3;
    uVar3 = Math_FloatToUInt64();
    local_c = (double)CONCAT44(local_c._4_4_,(int)uVar3);
    uVar3 = Math_FloatToUInt64();
    local_c = (double)CONCAT44((int)uVar3,(undefined4)local_c);
    Graphics_SetImageAlpha
              (param_1,*(undefined4 *)(*(int *)((int)this + 0x708) + 8),(int)(local_24 + 4),local_24
              );
  }
  SexyWidget_SetDrawMode(param_1,0);
  SexyWidget_SetColorizeFlag2(param_1,0);
  return;
}


