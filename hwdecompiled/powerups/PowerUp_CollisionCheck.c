/*
 * Function: PowerUp_CollisionCheck
 * Address: 00489590
 * Category: powerups
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall PowerUp_CollisionCheck(void *this,int *param_1)

{
  void *pvVar1;
  undefined4 *puVar2;
  uint uVar3;
  int iVar4;
  undefined4 extraout_EDX;
  uint extraout_EDX_00;
  uint uVar5;
  undefined4 *puVar6;
  bool bVar7;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x514fb8;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  PowerUp_InitializeSystem(this,(int)param_1);
  *(undefined ***)this = &PTR_PowerUp_DrawSystem_005338ac;
  *(undefined4 *)((int)this + 0x20) = 0;
  *(undefined1 *)((int)this + 0x31) = *(undefined1 *)((int)param_1 + 0x31);
  *(undefined1 *)((int)this + 0x32) = *(undefined1 *)((int)param_1 + 0x32);
  uVar5 = CONCAT31((int3)((uint)extraout_EDX >> 8),*(undefined1 *)((int)param_1 + 0x33));
  *(undefined1 *)((int)this + 0x33) = *(undefined1 *)((int)param_1 + 0x33);
  *(char *)((int)this + 0x40) = (char)param_1[0x10];
  *(int *)((int)this + 0x44) = param_1[0x11];
  local_8 = 0;
  bVar7 = false;
  if (param_1[6] == 0) {
    bVar7 = param_1[10] == 0;
    if (bVar7) {
      (**(code **)(*param_1 + 100))();
      uVar5 = extraout_EDX_00;
    }
    if (param_1[6] == 0) {
      *(undefined4 *)((int)this + 0x18) = 0;
      goto LAB_0048965a;
    }
  }
  pvVar1 = operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4) * 4 + 4);
  uVar5 = *(int *)((int)this + 8) * *(int *)((int)this + 4);
  *(void **)((int)this + 0x18) = pvVar1;
  *(undefined4 *)((int)pvVar1 + uVar5 * 4) = 0x4beefade;
  puVar6 = (undefined4 *)param_1[6];
  puVar2 = *(undefined4 **)((int)this + 0x18);
  for (uVar3 = *(int *)((int)this + 8) * *(int *)((int)this + 4) * 4 + 4U >> 2; uVar3 != 0;
      uVar3 = uVar3 - 1) {
    *puVar2 = *puVar6;
    puVar6 = puVar6 + 1;
    puVar2 = puVar2 + 1;
  }
  for (iVar4 = 0; iVar4 != 0; iVar4 = iVar4 + -1) {
    *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
    puVar6 = (undefined4 *)((int)puVar6 + 1);
    puVar2 = (undefined4 *)((int)puVar2 + 1);
  }
LAB_0048965a:
  if (!bVar7) {
    if (param_1[10] == 0) {
      *(undefined4 *)((int)this + 0x28) = 0;
    }
    else {
      puVar2 = (undefined4 *)operator_new(0x400);
      *(undefined4 **)((int)this + 0x28) = puVar2;
      puVar6 = (undefined4 *)param_1[10];
      for (iVar4 = 0x100; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
    }
    if (param_1[0xb] == 0) {
      *(undefined4 *)((int)this + 0x2c) = 0;
    }
    else {
      puVar2 = (undefined4 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4));
      uVar3 = *(int *)((int)this + 8) * *(int *)((int)this + 4);
      *(undefined4 **)((int)this + 0x2c) = puVar2;
      puVar6 = (undefined4 *)param_1[0xb];
      for (uVar5 = uVar3 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
        puVar6 = (undefined4 *)((int)puVar6 + 1);
        puVar2 = (undefined4 *)((int)puVar2 + 1);
      }
    }
    if (param_1[0xd] == 0) {
      *(undefined4 *)((int)this + 0x34) = 0;
    }
    else if (param_1[10] == 0) {
      puVar2 = (undefined4 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4) * 4);
      *(undefined4 **)((int)this + 0x34) = puVar2;
      puVar6 = (undefined4 *)param_1[0xd];
      for (uVar5 = *(int *)((int)this + 8) * *(int *)((int)this + 4) & 0x3fffffff; uVar5 != 0;
          uVar5 = uVar5 - 1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
      for (iVar4 = 0; iVar4 != 0; iVar4 = iVar4 + -1) {
        *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
        puVar6 = (undefined4 *)((int)puVar6 + 1);
        puVar2 = (undefined4 *)((int)puVar2 + 1);
      }
    }
    else {
      puVar2 = (undefined4 *)operator_new(0x400);
      *(undefined4 **)((int)this + 0x34) = puVar2;
      puVar6 = (undefined4 *)param_1[0xd];
      for (iVar4 = 0x100; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
    }
    if (param_1[0xe] == 0) {
      *(undefined4 *)((int)this + 0x38) = 0;
    }
    else {
      puVar2 = (undefined4 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4));
      uVar3 = *(int *)((int)this + 8) * *(int *)((int)this + 4);
      *(undefined4 **)((int)this + 0x38) = puVar2;
      puVar6 = (undefined4 *)param_1[0xe];
      for (uVar5 = uVar3 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
        puVar6 = (undefined4 *)((int)puVar6 + 1);
        puVar2 = (undefined4 *)((int)puVar2 + 1);
      }
    }
    if (param_1[0xf] == 0) {
      *(undefined4 *)((int)this + 0x3c) = 0;
    }
    else {
      puVar2 = (undefined4 *)operator_new(*(int *)((int)this + 8) * *(int *)((int)this + 4));
      uVar3 = *(int *)((int)this + 8) * *(int *)((int)this + 4);
      *(undefined4 **)((int)this + 0x3c) = puVar2;
      puVar6 = (undefined4 *)param_1[0xf];
      for (uVar5 = uVar3 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *puVar2 = *puVar6;
        puVar6 = puVar6 + 1;
        puVar2 = puVar2 + 1;
      }
      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(undefined1 *)puVar2 = *(undefined1 *)puVar6;
        puVar6 = (undefined4 *)((int)puVar6 + 1);
        puVar2 = (undefined4 *)((int)puVar2 + 1);
      }
    }
    STL_String_AssignmentOperator(*(int *)((int)this + 0x44));
    ExceptionList = local_10;
    return (undefined4 *)this;
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(param_1[6],uVar5);
}


