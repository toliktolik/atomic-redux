/*
 * Function: BackgroundSystem_LoadLevelImages
 * Address: 00403e20
 * Category: levels
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall BackgroundSystem_LoadLevelImages(int param_1)

{
  int iVar1;
  int *piVar2;
  _String_base *p_Var3;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  undefined4 extraout_ECX_01;
  int extraout_ECX_02;
  undefined4 extraout_ECX_03;
  int extraout_ECX_04;
  int extraout_ECX_05;
  undefined4 extraout_ECX_06;
  int extraout_ECX_07;
  int iVar4;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  _String_base local_84 [4];
  int local_80;
  uint local_6c;
  _String_base local_68 [4];
  uint local_64;
  uint local_50;
  undefined1 local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  void *local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x50f4ab;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(undefined4 *)(param_1 + 0x964) = 3;
  local_14 = operator_new(0x368);
  local_8 = 0;
  if (local_14 == (void *)0x0) {
    piVar2 = (int *)0x0;
  }
  else {
    piVar2 = GameEngine_Constructor(local_14,param_1,0);
  }
  local_8 = 0xffffffff;
  *(int **)(param_1 + 0x920) = piVar2;
  SexyWidget_GetColor(*(void **)(param_1 + 0x2dc),piVar2);
  UI_ValidateChildBinding(*(void **)(param_1 + 0x2dc),*(int **)(param_1 + 0x920));
  UI_Widget_ApplyBlending(*(void **)(param_1 + 0x2dc),*(int **)(param_1 + 0x920));
  (**(code **)(**(int **)(param_1 + 0x920) + 0xbc))();
  if ((*(int *)(param_1 + 0x920) == 0) || (*(char *)(*(int *)(param_1 + 0x920) + 0x327) == '\0')) {
    if (*(int *)(param_1 + 0x960) == 0x12) {
      iVar4 = 9;
    }
    else {
      iVar4 = *(int *)(param_1 + 0x960) % 9;
    }
  }
  else {
    iVar4 = 10;
  }
  iVar4 = iVar4 * 0x30;
  p_Var3 = Survival_LoadConfiguration
                     (local_68,(_String_base *)"images\\backgrounds\\",
                      *(int *)(param_1 + 0x145c) + iVar4);
  local_8 = 1;
  p_Var3 = Intel_DisplayPopulationData
                     (extraout_ECX,extraout_EDX,local_30,p_Var3,(_String_base *)&DAT_0052a14c);
  local_8 = CONCAT31(local_8._1_3_,2);
  Sprite_GetHeight(*(void **)(param_1 + 0x6b8),p_Var3,1,1);
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_2c,extraout_EDX_00);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_00,local_64);
  }
  iVar1 = *(int *)(*(int *)(param_1 + 0x6b8) + 8);
  *(uint *)(iVar1 + 0x24) = *(uint *)(iVar1 + 0x24) | 8;
  p_Var3 = Survival_LoadConfiguration
                     (local_68,(_String_base *)"images\\backgrounds\\",
                      *(int *)(param_1 + 0x145c) + iVar4);
  local_8 = 3;
  p_Var3 = Intel_DisplayPopulationData
                     (extraout_ECX_01,(uint)local_30,local_30,p_Var3,(_String_base *)&DAT_0052a148);
  local_8 = CONCAT31(local_8._1_3_,4);
  Sprite_GetHeight(*(void **)(param_1 + 0x6bc),p_Var3,1,1);
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_02,extraout_EDX_01);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_64,extraout_EDX_01);
  }
  p_Var3 = Survival_LoadConfiguration
                     (local_68,(_String_base *)"images\\backgrounds\\",
                      *(int *)(param_1 + 0x145c) + iVar4);
  local_8 = 5;
  p_Var3 = Intel_DisplayPopulationData
                     (extraout_ECX_03,extraout_EDX_02,local_30,p_Var3,(_String_base *)&DAT_0052a140)
  ;
  local_8 = CONCAT31(local_8._1_3_,6);
  Sprite_GetHeight(*(void **)(param_1 + 0x6c0),p_Var3,1,1);
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_2c,extraout_EDX_03);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_04,local_64);
  }
  p_Var3 = Survival_LoadConfiguration
                     (local_68,(_String_base *)"images\\backgrounds\\",
                      *(int *)(param_1 + 0x145c) + iVar4);
  local_8 = 7;
  p_Var3 = Intel_DisplayPopulationData
                     (local_30,extraout_EDX_04,local_30,p_Var3,(_String_base *)&DAT_0052a138);
  local_8 = CONCAT31(local_8._1_3_,8);
  Sprite_GetHeight(*(void **)(param_1 + 0x6c4),p_Var3,1,1);
  if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_05,local_2c);
  }
  local_18 = 0xf;
  local_1c = 0;
  local_2c = local_2c & 0xffffff00;
  local_8 = 0xffffffff;
  if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_05,extraout_EDX_05);
  }
  p_Var3 = Survival_LoadConfiguration
                     (local_84,(_String_base *)"images\\backgrounds\\",
                      iVar4 + *(int *)(param_1 + 0x145c));
  local_8 = 9;
  p_Var3 = Intel_DisplayPopulationData
                     (extraout_ECX_06,(uint)local_4c,(_String_base *)local_4c,p_Var3,
                      (_String_base *)"_ground");
  local_8 = CONCAT31(local_8._1_3_,10);
  Sprite_GetHeight(*(void **)(param_1 + 0x6c8),p_Var3,1,1);
  if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_07,extraout_EDX_06);
  }
  local_34 = 0xf;
  local_38 = 0;
  local_48 = local_48 & 0xffffff00;
  if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(local_80,extraout_EDX_06);
  }
  ExceptionList = local_10;
  return;
}


