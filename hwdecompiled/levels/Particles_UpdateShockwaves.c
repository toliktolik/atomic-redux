/*
 * Function: Particles_UpdateShockwaves
 * Address: 0041b690
 * Category: levels
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Particles_UpdateShockwaves(int *param_1)

{
  uint uVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  undefined4 *puVar5;
  int iVar6;
  uint *extraout_EDX;
  uint *extraout_EDX_00;
  uint *puVar7;
  uint *extraout_EDX_01;
  char *pcVar8;
  undefined4 in_stack_ffffffb8;
  undefined4 in_stack_ffffffbc;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005109b5;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  Algorithm_CopyN((int)param_1);
  (**(code **)(*param_1 + 0xbc))();
  if (*(char *)((int)param_1 + 0x325) != '\0') {
    ExceptionList = local_10;
    return;
  }
  pvVar2 = (void *)param_1[0x17];
  if ((*(char *)((int)pvVar2 + 0x484) != '\0') && (param_1[0xc2] == 0)) {
    uVar1 = (int)(*(int *)((int)pvVar2 + 0x414) + (*(int *)((int)pvVar2 + 0x414) >> 0x1f & 3U)) >> 2
            & 0x80000007;
    if ((int)uVar1 < 0) {
      uVar1 = (uVar1 - 1 | 0xfffffff8) + 1;
    }
    System_GetSystemTime(pvVar2,0,*(int *)((int)pvVar2 + uVar1 * 4 + 0x8fc));
  }
  if (param_1[0x20] < 1) {
    *(undefined1 *)((int)param_1 + 0x326) = 1;
    if ((param_1[0x5f] != param_1[0x61]) || (*(char *)((int)param_1 + 0x327) != '\0')) {
      param_1[0x5f] = param_1[0x5f] + 1;
    }
    if (*(char *)((int)param_1 + 0x327) != '\0') {
      param_1[0x5f] = param_1[0x5f] + 1;
    }
    Weapon_MegalaserSystem(param_1);
  }
  else {
    if ((param_1[0x20] == 300) && (*(char *)((int)param_1 + 0x326) != '\0')) {
      iVar6 = *(int *)param_1[0x17];
      if (((int *)param_1[0x17])[0x259] < 1) {
        (**(code **)(iVar6 + 0xb8))();
        pvVar2 = operator_new(0x78);
        local_8 = 1;
        if (pvVar2 != (void *)0x0) {
          pcVar8 = "GAME OVER";
          goto LAB_0041b7aa;
        }
      }
      else {
        (**(code **)(iVar6 + 0xb8))();
        pvVar2 = operator_new(0x78);
        local_8 = 0;
        if (pvVar2 != (void *)0x0) {
          pcVar8 = "GET READY";
LAB_0041b7aa:
          Level_InitializeDictastroika(&stack0xffffffb8,pcVar8);
          DataStructure_InitializeBinaryTree
                    (pvVar2,(uint)param_1,*(int **)(param_1[0x17] + 0x924),in_stack_ffffffb8,
                     in_stack_ffffffbc);
        }
      }
      local_8 = 0xffffffff;
    }
    if (1 < param_1[0x20]) {
      param_1[0x20] = param_1[0x20] + -1;
    }
    if (((param_1[0x20] == 1) && (param_1[0x1f] == 0)) && (param_1[0x88] == 0)) {
      iVar6 = *(int *)(param_1[0x17] + 0x964);
      if (iVar6 == 0) {
        Physics_ProcessCollisions((int)param_1);
        pvVar2 = operator_new(0x124);
        local_8 = 2;
        if (pvVar2 != (void *)0x0) {
          GameOverDialog_Constructor(pvVar2,param_1[0x17]);
        }
        local_8 = 0xffffffff;
        (**(code **)(*(int *)param_1[0x17] + 0x100))();
        ExceptionList = local_10;
        return;
      }
      *(int *)(param_1[0x17] + 0x964) = iVar6 + -1;
      param_1[0x20] = 0;
    }
  }
  if (*(char *)((int)param_1 + 0x327) == '\0') {
    if (param_1[0x5f] == param_1[0x61] + -600) {
      iVar6 = 0;
      param_1[0x7a] = param_1[0x79];
      while (*(int *)(param_1[0x7a] + 4) != 0) {
        param_1[0x7a] = *(int *)(param_1[0x7a] + 4);
        if (param_1[0x7c] == 0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *(int *)param_1[0x7a];
        }
        if (*(char *)(iVar3 + 0x30) != '\0') {
          iVar6 = iVar6 + 1;
        }
      }
      param_1[0x86] = param_1[0x85];
      while (*(int *)(param_1[0x86] + 4) != 0) {
        param_1[0x86] = *(int *)(param_1[0x86] + 4);
        if (param_1[0x88] == 0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *(int *)param_1[0x86];
        }
        if (*(char *)(iVar3 + 0x41) != '\0') {
          iVar6 = iVar6 + 1;
        }
      }
      if ((param_1[0x1f] == 0) && (iVar6 == 0)) {
        pvVar2 = operator_new(0xfc);
        local_8 = 3;
        if (pvVar2 == (void *)0x0) {
          piVar4 = (int *)0x0;
        }
        else {
          piVar4 = Boss_Constructor(pvVar2,(int)param_1);
        }
        local_8 = 0xffffffff;
        param_1[0xc3] = (int)piVar4;
        LinkedList_ClearAllNodes(param_1 + 0xad);
        (**(code **)(**(int **)(param_1[0x17] + 0x330) + 0x20))();
      }
      else {
        param_1[0x5f] = param_1[0x5f] + -1;
      }
    }
    if (param_1[0x5f] == param_1[0x61] + -1) {
      switch(*(int *)(param_1[0x17] + 0x960) % 9) {
      case 0:
        if (*(int *)(param_1[0x17] + 0x960) == 0x12) {
          pvVar2 = operator_new(0xe0);
          local_8 = 4;
          if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
          puVar5 = Graphics_CleanupRenderer(pvVar2,(int)param_1);
        }
        else {
          pvVar2 = operator_new(200);
          local_8 = 5;
          if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
          puVar5 = Resource_GetSpriteHandle(pvVar2,(int)param_1);
        }
        break;
      case 1:
        pvVar2 = operator_new(200);
        local_8 = 6;
        if (pvVar2 == (void *)0x0) {
LAB_0041bb90:
          puVar5 = (undefined4 *)0x0;
        }
        else {
          puVar5 = Sound_PlayBackgroundMusic(pvVar2,(int)param_1);
        }
        break;
      case 2:
        pvVar2 = operator_new(0xb0);
        local_8 = 7;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = Debug_LogMessage(pvVar2,(int)param_1);
        break;
      case 3:
        pvVar2 = operator_new(0x110);
        local_8 = 8;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = String_Initialize(pvVar2,(int)param_1);
        break;
      case 4:
        pvVar2 = operator_new(0xa8);
        local_8 = 9;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = Physics_CalculateCollision(pvVar2,(int)param_1);
        break;
      case 5:
        pvVar2 = operator_new(0x4b8);
        local_8 = 10;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = GameState_LoadProgress(pvVar2,(int)param_1);
        break;
      case 6:
        pvVar2 = operator_new(0xc0);
        local_8 = 0xb;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = Resource_LoadTextures(pvVar2,(int)param_1);
        break;
      case 7:
        pvVar2 = operator_new(0x2e8);
        local_8 = 0xc;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = Dialog_Initialize(pvVar2,(int)param_1);
        break;
      case 8:
        pvVar2 = operator_new(0xf8);
        local_8 = 0xd;
        if (pvVar2 == (void *)0x0) goto LAB_0041bb90;
        puVar5 = Network_InitializeConnection(pvVar2,(int)param_1);
        break;
      default:
        goto switchD_0041b9e8_default;
      }
      local_8 = 0xffffffff;
      param_1[0xb9] = (int)puVar5;
    }
switchD_0041b9e8_default:
    if (param_1[0x5f] == param_1[0x61] + 500) {
      pvVar2 = operator_new(0x9c);
      local_8 = 0xe;
      if (pvVar2 == (void *)0x0) {
        piVar4 = (int *)0x0;
      }
      else {
        piVar4 = Settings_ProcessResolutionOptions(pvVar2,param_1[0x17]);
      }
      local_8 = 0xffffffff;
      param_1[0xc2] = (int)piVar4;
      SexyWidget_GetColor((void *)param_1[9],piVar4);
      UI_Widget_ApplyBlending((void *)param_1[9],(int *)param_1[0xc2]);
      (**(code **)(**(int **)(param_1[0x17] + 0x330) + 0x20))();
    }
    iVar6 = param_1[0x5f];
    if ((((NAN((double)(iVar6 / 5000)) || NAN((double)iVar6 * _DAT_0052c970)) !=
          ((double)(iVar6 / 5000) == (double)iVar6 * _DAT_0052c970)) && (0 < iVar6)) &&
       (iVar6 < param_1[0x61])) {
      param_1[0x71] = param_1[0x71] + -1;
    }
  }
  *(int *)(param_1[0x17] + 0xb34) = *(int *)(param_1[0x17] + 0xb34) + 1;
  if (param_1[0x21] != 0) {
    SexyWidget_UpdateAnimation(param_1);
  }
  if ((NAN(*(double *)(param_1 + 0x22)) || NAN(_DAT_0052a0c0)) ==
      (*(double *)(param_1 + 0x22) == _DAT_0052a0c0)) {
    *(double *)(param_1 + 0x22) = *(double *)(param_1 + 0x22) - _DAT_0052c968;
  }
  if (*(double *)(param_1 + 0x22) < _DAT_0052a0c0 !=
      (NAN(*(double *)(param_1 + 0x22)) || NAN(_DAT_0052a0c0))) {
    param_1[0x22] = 0;
    param_1[0x23] = 0;
  }
  if (param_1[0x5e] != 0) {
    param_1[0x5e] = param_1[0x5e] + -1;
  }
  if (param_1[0x6b] != 0) {
    param_1[0x6b] = param_1[0x6b] + -1;
  }
  if (param_1[0x70] != 0) {
    param_1[0x70] = param_1[0x70] + -1;
  }
  if (param_1[0x77] != 0) {
    param_1[0x77] = param_1[0x77] + -1;
  }
  if (param_1[0x6c] != 0) {
    param_1[0x6c] = param_1[0x6c] + -1;
  }
  if (param_1[0x6d] != 0) {
    param_1[0x6d] = param_1[0x6d] + -1;
  }
  if (param_1[0x58] != 0) {
    param_1[0x58] = param_1[0x58] + -4;
  }
  if (param_1[0x58] < 0) {
    param_1[0x58] = 0;
  }
  if (param_1[0xc0] != 0) {
    Level_ProcessProgression((int)param_1);
  }
  if ((int *)param_1[0xc3] != (int *)0x0) {
    GameMenu_ProcessUserProfileScreen((int *)param_1[0xc3]);
  }
  SexyAppFramework_HandleMinimize((int)param_1);
  Particles_UpdateLaserBeams(param_1);
  SexyAppFramework_HandleResizing((int)param_1);
  SexyAppFramework_ShutdownDirectX((int)param_1);
  SexyAppFramework_CleanupResources((int)param_1);
  ParticleEffects_Update((int)(param_1 + 0xba));
  PowerUpSystem_ProcessDroppedPowerUps((int *)param_1[0xbf]);
  GameObject_CollisionDetectionSystem((int)param_1);
  AI_TrackPlayerPosition((int)param_1);
  UpdateLoop_ProcessLinkedList((int)param_1);
  Weapon_PlayerLaserSystem(param_1);
  if (param_1[0x4c] != 0) {
    param_1[0x4c] = param_1[0x4c] + -1;
  }
  if ((char)param_1[0x4a] != '\0') {
    if (param_1[0x4b] == 0) goto LAB_0041bdfc;
    param_1[0x4c] = 10;
  }
  if (param_1[0x4b] != 0) {
    param_1[0x74] = 0;
  }
LAB_0041bdfc:
  puVar7 = extraout_EDX;
  if (param_1[0x4c] != 0) {
    Weapon_SpreadshotSystem(param_1);
    puVar7 = extraout_EDX_00;
  }
  PowerUp_ProcessMegalaser((int)param_1,puVar7);
  Physics_UpdateWithGravity((int)param_1);
  Physics_UpdateWithTimer((int)param_1);
  ParticleEffect_UpdateRandomized((int)param_1);
  SexyAppFramework_InitializeDirectSound((int)param_1);
  PowerUp_SpawningSystem((int)param_1);
  if (param_1[0x72] != 0) {
    param_1[0x72] = param_1[0x72] + 1;
  }
  if (400 < param_1[0x72]) {
    param_1[0x72] = 0;
  }
  if (_DAT_0052a0c0 < *(double *)(param_1 + 0x52)) {
    *(double *)(param_1 + 0x52) = *(double *)(param_1 + 0x52) - _DAT_0052c580;
  }
  if (((param_1[0x20] == 0) && (Player_UpdateTank(param_1,extraout_EDX_01), param_1[0x20] == 0)) &&
     ((param_1[0x5f] < param_1[0x61] + -800 || (*(char *)((int)param_1 + 0x327) != '\0')))) {
    Particles_UpdateRocketExhaust(param_1);
  }
  if (param_1[0x71] < 0) {
    param_1[0x71] = param_1[0x71] + -1;
  }
  if (param_1[0x71] < -0x2c1) {
    param_1[0x71] = 0;
  }
  ExceptionList = local_10;
  return;
}


