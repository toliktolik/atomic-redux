/*
 * Function: Sound_GetPosition
 * Address: 0049fb10
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl Sound_GetPosition(void *param_1,undefined4 param_2,undefined2 param_3)

{
  char cVar1;
  _String_base _Var2;
  char *pcVar3;
  int iVar4;
  _String_base *p_Var5;
  undefined4 extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  _String_base *p_Var6;
  int iVar7;
  undefined8 uVar8;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff28;
  undefined4 *in_stack_ffffff2c;
  undefined1 local_30 [4];
  undefined1 local_2c;
  undefined4 local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x516558;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  iVar7 = 0xa0;
  ExceptionList = &local_10;
  uVar8 = Assembly_PortIOOperations(param_2,(short)&stack0xffffff28);
  iVar4 = (int)uVar8;
  if ((-1 < iVar4) && (iVar4 < 0xa1)) {
    (&stack0xffffff28)[iVar4] = 0;
    pcVar3 = &stack0xffffff28;
    *(undefined4 *)((int)param_1 + 0x18) = 0xf;
    *(undefined4 *)((int)param_1 + 0x14) = 0;
    *(undefined1 *)((int)param_1 + 4) = 0;
    do {
      cVar1 = *pcVar3;
      pcVar3 = pcVar3 + 1;
    } while (cVar1 != '\0');
    String_Assign(param_1,(_String_base *)&stack0xffffff28,(int)pcVar3 - (int)&stack0xffffff29);
    ExceptionList = local_10;
    Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff28,in_stack_ffffff2c);
    return;
  }
  p_Var6 = (_String_base *)0x0;
  while (((iVar4 = (int)uVar8, iVar4 == -1 || (iVar7 < iVar4)) && (iVar7 < 1000000))) {
    iVar7 = iVar7 * 2;
    p_Var6 = (_String_base *)
             Assembly_ComplexControlFlow(iVar7 + 1,(double *)((ulonglong)uVar8 >> 0x20),p_Var6);
    uVar8 = Assembly_PortIOOperations(extraout_ECX,param_3);
  }
  p_Var6[iVar4] = (_String_base)0x0;
  local_18 = 0xf;
  local_1c = 0;
  local_2c = 0;
  p_Var5 = p_Var6;
  do {
    _Var2 = *p_Var5;
    p_Var5 = p_Var5 + 1;
  } while (_Var2 != (_String_base)0x0);
  String_Assign(local_30,p_Var6,(int)p_Var5 - (int)(p_Var6 + 1));
  local_8 = 0;
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(extraout_ECX_00,extraout_EDX);
}


