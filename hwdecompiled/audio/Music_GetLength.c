/*
 * Function: Music_GetLength
 * Address: 004a1050
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


int __thiscall Music_GetLength(void *this,void *param_1)

{
  code *pcVar1;
  int iVar2;
  _String_base *p_Var3;
  int extraout_ECX;
  uint extraout_EDX;
  undefined8 uVar4;
  undefined1 local_70 [40];
  _String_base local_48 [28];
  _String_base local_2c [4];
  uint local_28;
  uint local_14;
  void *local_10;
  undefined1 *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &LAB_00515910;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  Database_ReconnectIfNeeded((void *)((int)this + 0x10),&param_1,param_1);
  if (param_1 != *(void **)((int)this + 0x14)) {
    iVar2 = *(int *)(*(int *)((int)param_1 + 0x28) + 0x4c);
    if (iVar2 == -1) {
      if ((*(char *)((int)this + 0xb4) == '\0') ||
         (*(char *)(*(int *)((int)param_1 + 0x28) + 0x48) == '\0')) goto LAB_004a10ca;
      iVar2 = -1;
    }
    ExceptionList = local_10;
    return iVar2;
  }
LAB_004a10ca:
  uVar4 = Sound_SetPosition(local_2c,"Sound resource not found: %s");
  local_8 = 0;
  Sound_Release((int)this,(uint)((ulonglong)uVar4 >> 0x20),(_String_base *)uVar4);
  local_8 = 0xffffffff;
  if (0xf < local_14) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX,local_28);
  }
  p_Var3 = Image_ApplyTint((int)this,extraout_EDX,local_48);
  local_8 = 1;
  Image_SetAlpha(local_70,p_Var3);
  CRuntime_CxxThrowException(local_70,&DAT_00558780);
  pcVar1 = (code *)swi(3);
  iVar2 = (*pcVar1)();
  return iVar2;
}


