/*
 * Function: Sound_Release
 * Address: 004a03d0
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Sound_Release(int param_1,uint param_2,_String_base *param_3)

{
  _String_base *this;
  int iVar1;
  _String_base *p_Var2;
  int extraout_ECX;
  undefined4 extraout_ECX_00;
  int extraout_ECX_01;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff50;
  undefined4 *in_stack_ffffff54;
  uint local_98;
  undefined1 local_94 [16];
  undefined1 local_84 [4];
  int local_80;
  uint local_6c;
  undefined1 local_68 [4];
  uint local_64;
  undefined4 local_54;
  uint local_50;
  _String_base local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51583b;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  if (*(char *)(param_1 + 0x58) == '\0') {
    ExceptionList = &local_10;
    *(undefined1 *)(param_1 + 0x58) = 1;
    if (*(int *)(param_1 + 0x38) == 0) {
      PowerUp_ProcessThunderstrike((_String_base *)(param_1 + 0x3c),param_2,param_3,0,0xffffffff);
    }
    else {
      iVar1 = Font_GetLineHeight(*(int *)(param_1 + 0x38));
      Exception_Release(local_94,&DAT_00533e84);
      this = (_String_base *)(param_1 + 0x3c);
      PowerUp_ProcessThunderstrike(this,(uint)param_3,param_3,0,0xffffffff);
      if (0 < iVar1) {
        p_Var2 = (_String_base *)Level_InitializeDictastroika(local_84," on Line ");
        local_8 = 0;
        p_Var2 = Intel_DisplayPopulationData
                           (local_94,(uint)local_68,(_String_base *)local_68,p_Var2,
                            (_String_base *)local_94);
        local_8 = CONCAT31(local_8._1_3_,1);
        Enemy_UpdateAI(this,(int)p_Var2,0,0xffffffff);
        if (0xf < local_50) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,extraout_EDX);
        }
        local_50 = 0xf;
        local_54 = 0;
        local_64 = local_64 & 0xffffff00;
        local_8 = 0xffffffff;
        if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_80,extraout_EDX);
        }
      }
      p_Var2 = Config_GetSetting(*(int *)(param_1 + 0x38),(uint)local_84,(_String_base *)local_84);
      if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(*(int *)(p_Var2 + 0x14),extraout_EDX_00);
      }
      if (*(int *)(p_Var2 + 0x14) != 0) {
        p_Var2 = Config_GetSetting(*(int *)(param_1 + 0x38),extraout_EDX_00,
                                   (_String_base *)&stack0xffffff50);
        local_8 = 2;
        p_Var2 = Survival_LoadConfiguration(local_4c,(_String_base *)" in File \'",(int)p_Var2);
        local_8._0_1_ = 3;
        p_Var2 = Intel_DisplayPopulationData
                           (extraout_ECX_00,extraout_EDX_01,local_30,p_Var2,
                            (_String_base *)&DAT_00531760);
        local_8 = CONCAT31(local_8._1_3_,4);
        Enemy_UpdateAI(this,(int)p_Var2,0,0xffffffff);
        if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_2c,extraout_EDX_02);
        }
        local_18 = 0xf;
        local_1c = 0;
        local_2c = local_2c & 0xffffff00;
        if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_01,local_48);
        }
        local_34 = 0xf;
        local_38 = 0;
        local_48 = local_48 & 0xffffff00;
        if (0xf < local_98) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_01,extraout_EDX_02);
        }
      }
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff50,in_stack_ffffff54);
  return;
}


