/*
 * Function: AssetLoader_LoadImagesAndSounds
 * Address: 004041b0
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall AssetLoader_LoadImagesAndSounds(int *param_1)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  char cVar6;
  int iVar7;
  _String_base *p_Var8;
  undefined4 uVar9;
  char *pcVar10;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  int *piVar11;
  int *piVar12;
  undefined4 *puVar13;
  undefined1 local_8c [4];
  uint local_88;
  undefined4 local_78;
  uint local_74;
  undefined1 local_70 [4];
  uint local_6c;
  undefined4 local_5c;
  uint local_58;
  _String_base local_54 [4];
  uint local_50;
  undefined4 local_40;
  uint local_3c;
  undefined1 local_38 [4];
  uint local_34;
  undefined4 local_24;
  uint local_20;
  void *local_1c;
  int local_18;
  undefined1 local_11;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x50f50e;
  local_10 = ExceptionList;
  local_18 = 0xb;
  piVar12 = &DAT_00527a88;
  ExceptionList = &local_10;
  param_1[0x122] = 0xee;
  param_1[0x123] = 0;
  piVar11 = param_1 + 0x1ad;
  while( true ) {
    local_1c = operator_new(0x20);
    local_8 = 0;
    if (local_1c == (void *)0x0) {
      iVar7 = 0;
    }
    else {
      iVar7 = Sprite_GetWidth(local_1c,param_1);
    }
    *piVar11 = iVar7;
    local_8 = 0xffffffff;
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "images\\";
    do {
      pcVar10 = pcVar5;
      pcVar5 = pcVar10 + 1;
    } while (*pcVar10 != '\0');
    String_Assign(local_38,(_String_base *)"images\\",(uint)(pcVar10 + -0x52a1a0));
    local_8 = 1;
    p_Var8 = Intel_DisplayPopulationData
                       (local_38,(uint)local_70,(_String_base *)local_70,(_String_base *)local_38,
                        (_String_base *)(piVar12 + -0xb));
    local_8 = CONCAT31(local_8._1_3_,2);
    uVar9 = Sprite_GetHeight((void *)*piVar11,p_Var8,piVar12[-1],*piVar12);
    local_11 = (char)uVar9 == '\0';
    if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,extraout_EDX);
    }
    local_58 = 0xf;
    local_5c = 0;
    local_6c = local_6c & 0xffffff00;
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_34,local_20);
    }
    local_20 = 0xf;
    local_24 = 0;
    uVar2 = local_34 >> 8;
    local_34 = uVar2 << 8;
    if ((bool)local_11) break;
    if (((piVar12 == (int *)&DAT_005282a8) || (piVar12 == (int *)&DAT_00528754)) ||
       (piVar12 == (int *)&DAT_00528d38)) {
      puVar1 = (uint *)(*(int *)(*piVar11 + 8) + 0x24);
      *puVar1 = *puVar1 | 8;
    }
    if ((char)piVar12[1] != '\0') {
      Sprite_GetPixelData(*piVar11);
    }
    piVar12 = piVar12 + 0xd;
    local_18 = local_18 + 1;
    piVar11 = piVar11 + 1;
    param_1[0x123] = param_1[0x123] + 1;
    if (0x52982f < (int)piVar12) {
      cVar6 = (**(code **)(*(int *)param_1[0x10e] + 4))();
      if (cVar6 == '\0') {
        param_1[0x123] = param_1[0x123] + 0x5c;
        ExceptionList = local_10;
        return;
      }
      iVar7 = 1;
      puVar13 = &DAT_00529830;
      while( true ) {
        local_20 = 0xf;
        local_24 = 0;
        local_34 = local_34 & 0xffffff00;
        pcVar5 = "sounds\\";
        do {
          pcVar10 = pcVar5;
          pcVar5 = pcVar10 + 1;
        } while (*pcVar10 != '\0');
        String_Assign(local_38,(_String_base *)"sounds\\",(uint)(pcVar10 + -0x52a198));
        local_8 = 5;
        p_Var8 = Intel_DisplayPopulationData
                           (local_38,(uint)local_70,(_String_base *)local_70,
                            (_String_base *)local_38,(_String_base *)(puVar13 + -4));
        local_8 = CONCAT31(local_8._1_3_,6);
        cVar6 = (**(code **)(*(int *)param_1[0x10e] + 8))(iVar7,p_Var8);
        local_11 = cVar6 == '\0';
        if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX_00,extraout_EDX_00);
        }
        local_58 = 0xf;
        local_5c = 0;
        local_6c = local_6c & 0xffffff00;
        local_8 = 0xffffffff;
        if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(local_34,local_20);
        }
        local_20 = 0xf;
        local_24 = 0;
        local_34 = local_34 & 0xffffff00;
        if ((bool)local_11) break;
        (**(code **)(*(int *)param_1[0x10e] + 0x14))(iVar7,*puVar13,puVar13[1]);
        puVar13 = puVar13 + 6;
        iVar7 = iVar7 + 1;
        param_1[0x123] = param_1[0x123] + 1;
        if (0x52a0b7 < (int)puVar13) {
          ExceptionList = local_10;
          return;
        }
      }
      local_40 = 0;
      local_3c = 0xf;
      local_50 = local_50 & 0xffffff00;
      pcVar5 = "Failed to load sounds\\";
      do {
        pcVar10 = pcVar5;
        pcVar5 = pcVar10 + 1;
      } while (*pcVar10 != '\0');
      String_Assign(local_54,(_String_base *)"Failed to load sounds\\",(uint)(pcVar10 + -0x52a168));
      local_8 = 7;
      p_Var8 = Intel_DisplayPopulationData
                         (local_8c,(uint)("gunpowerup" + iVar7 * 0x18),(_String_base *)local_8c,
                          local_54,(_String_base *)("gunpowerup" + iVar7 * 0x18));
      local_8 = CONCAT31(local_8._1_3_,8);
      (**(code **)(*param_1 + 0x70))(p_Var8);
      if (0xf < local_74) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_02,extraout_EDX_02);
      }
      local_74 = 0xf;
      local_78 = 0;
      local_88 = local_88 & 0xffffff00;
      uVar2 = extraout_EDX_02;
      uVar3 = local_50;
      uVar4 = local_3c;
joined_r0x004044e0:
      if (0xf < uVar4) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(uVar3,uVar2);
      }
      *(undefined1 *)((int)param_1 + 0x481) = 1;
      ExceptionList = local_10;
      return;
    }
  }
  local_20 = 0xf;
  local_24 = 0;
  local_34 = uVar2 << 8;
  pcVar5 = "Failed to load images\\";
  do {
    pcVar10 = pcVar5;
    pcVar5 = pcVar10 + 1;
  } while (*pcVar10 != '\0');
  String_Assign(local_38,(_String_base *)"Failed to load images\\",(uint)(pcVar10 + -0x52a180));
  local_8 = 3;
  p_Var8 = Intel_DisplayPopulationData
                     (local_38,(uint)local_70,(_String_base *)local_70,(_String_base *)local_38,
                      (_String_base *)("title" + local_18 * 0x34));
  local_8 = CONCAT31(local_8._1_3_,4);
  (**(code **)(*param_1 + 0x70))(p_Var8);
  if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(extraout_ECX_01,extraout_EDX_01);
  }
  local_58 = 0xf;
  local_5c = 0;
  local_6c = local_6c & 0xffffff00;
  uVar2 = extraout_EDX_01;
  uVar3 = local_34;
  uVar4 = local_20;
  goto joined_r0x004044e0;
}


