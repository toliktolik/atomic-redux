/*
 * Function: DirectSoundManager_Constructor
 * Address: 004b41e0
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall DirectSoundManager_Constructor(void *this,int param_1,undefined1 param_2)

{
  int iVar1;
  FARPROC pFVar2;
  int iVar3;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined2 local_18;
  undefined4 *local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  uStack_c = 0x516f18;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  *(undefined ***)this = &PTR_Widget_Destructor_00536f34;
  *(undefined ***)this = &PTR_AudioCodec_Release_0053786c;
  *(undefined1 *)((int)this + 0x1498) = param_2;
  *(undefined4 *)((int)this + 0x1490) = 0;
  *(undefined4 *)((int)this + 0x404) = 0;
  local_8 = 0;
  iVar3 = 0;
  iVar1 = 0x808;
  do {
    *(undefined4 *)(iVar3 + 4 + (int)this) = 0;
    *(undefined4 *)(iVar1 + (int)this) = 0;
    *(undefined4 *)(iVar1 + 4 + (int)this) = 0x3ff00000;
    *(undefined4 *)(iVar3 + 0x1008 + (int)this) = 0;
    iVar1 = iVar1 + 8;
    iVar3 = iVar3 + 4;
  } while (iVar1 < 0x1008);
  iVar1 = 0x1408;
  do {
    *(undefined4 *)(iVar1 + (int)this) = 0;
    iVar1 = iVar1 + 4;
  } while (iVar1 < 0x1488);
  *(undefined4 *)((int)this + 0x1494) = 0;
  *(undefined4 *)((int)this + 0x1488) = 0;
  *(undefined4 *)((int)this + 0x148c) = 0x3ff00000;
  local_14 = (undefined4 *)this;
  if (((param_1 != 0) &&
      (pFVar2 = GetProcAddress(DAT_0056da18,"DirectSoundCreate"), pFVar2 != (FARPROC)0x0)) &&
     (iVar1 = (*pFVar2)(0,local_14 + 0x525,0), iVar1 == 0)) {
    if (*(char *)(local_14 + 0x526) != '\0') {
      Dialog_KeyDown();
      (**(code **)(DAT_005a4388 + 0xc))(param_1);
      (**(code **)(DAT_005a4388 + 8))(200);
      (**(code **)(DAT_005a4388 + 0x10))(0xac44,0x40,2);
    }
    iVar1 = (**(code **)(*(int *)local_14[0x525] + 0x18))((int *)local_14[0x525],param_1,2);
    if (iVar1 < 0) {
      (**(code **)(*(int *)local_14[0x525] + 0x18))((int *)local_14[0x525],param_1,1);
    }
    else {
      local_30 = 0;
      local_18 = 0x12;
      local_28 = 0x20001;
      local_24 = 0xac44;
      local_20 = 0x2b110;
      local_1c = 0x100004;
      local_3c = 0x14;
      local_38 = 1;
      local_34 = 0;
      local_2c = 0;
      iVar1 = (**(code **)(*(int *)local_14[0x525] + 0xc))
                        ((int *)local_14[0x525],&local_3c,local_14 + 0x101,0);
      if (iVar1 == 0) {
        (**(code **)(*(int *)local_14[0x101] + 0x38))((int *)local_14[0x101],&local_28);
        ExceptionList = local_10;
        return local_14;
      }
    }
  }
  ExceptionList = local_10;
  return local_14;
}


