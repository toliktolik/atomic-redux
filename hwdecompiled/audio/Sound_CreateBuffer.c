/*
 * Function: Sound_CreateBuffer
 * Address: 0049ef30
 * Category: audio
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall
Sound_CreateBuffer(undefined4 param_1,uint param_2,_String_base *param_3,int param_4)

{
  char *pcVar1;
  void **ppvVar2;
  char *pcVar3;
  _String_base *p_Var4;
  int iVar5;
  int extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  int iVar6;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffff94;
  undefined4 *in_stack_ffffff98;
  uint local_54;
  _String_base local_50 [4];
  uint local_4c;
  undefined4 local_3c;
  uint local_38;
  _String_base local_34 [4];
  uint local_30;
  undefined4 local_20;
  uint local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined1 local_8;
  undefined3 uStack_7;
  
  iVar6 = param_4;
  local_8 = 0xff;
  uStack_7 = 0xffffff;
  puStack_c = &DAT_00515778;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = 0;
  if (param_4 == 0) {
    ExceptionList = &local_10;
    *(undefined4 *)(param_3 + 0x18) = 0xf;
    *(undefined4 *)(param_3 + 0x14) = 0;
    param_3[4] = (_String_base)0x0;
    pcVar1 = "0";
    do {
      pcVar3 = pcVar1;
      pcVar1 = pcVar3 + 1;
    } while (*pcVar3 != '\0');
    String_Assign(param_3,(_String_base *)&DAT_0053296c,(uint)(pcVar3 + -0x53296c));
  }
  else {
    local_1c = 0xf;
    local_20 = 0;
    local_30 = local_30 & 0xffffff00;
    uStack_7 = 0;
    param_4 = 0;
    ExceptionList = &local_10;
    ppvVar2 = &local_10;
    if (0 < iVar6) {
      do {
        ExceptionList = ppvVar2;
        local_8 = 0;
        if ((param_4 != 0) && (param_4 % 3 == 0)) {
          p_Var4 = UI_HandleDialogInput(local_50,0x2c,(int)local_34);
          local_8 = 1;
          PowerUp_ProcessThunderstrike(local_34,extraout_EDX,p_Var4,0,0xffffffff);
          local_8 = 0;
          if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
            System_ShutdownHandler(local_4c,extraout_EDX_00);
          }
          local_38 = 0xf;
          local_3c = 0;
          local_4c = local_4c & 0xffffff00;
        }
        local_8 = 0;
        iVar5 = iVar6 / 10;
        p_Var4 = UI_HandleDialogInput
                           ((_String_base *)&stack0xffffff94,(char)(iVar6 % 10) + '0',(int)local_34)
        ;
        local_8 = 2;
        PowerUp_ProcessThunderstrike(local_34,extraout_EDX_01,p_Var4,0,0xffffffff);
        local_8 = 0;
        if (0xf < local_54) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(extraout_ECX,(uint)in_stack_ffffff98);
        }
        param_4 = param_4 + 1;
        local_54 = 0xf;
        in_stack_ffffff98 = (undefined4 *)((uint)in_stack_ffffff98 & 0xffffff00);
        param_2 = extraout_EDX_02;
        iVar6 = iVar5;
        ppvVar2 = (void **)ExceptionList;
      } while (0 < iVar5);
    }
    local_8 = 0;
    *(undefined4 *)(param_3 + 0x18) = 0xf;
    *(undefined4 *)(param_3 + 0x14) = 0;
    param_3[4] = (_String_base)0x0;
    PowerUp_ProcessThunderstrike(param_3,param_2,local_34,0,0xffffffff);
    if (0xf < local_1c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(local_30,extraout_EDX_03);
    }
  }
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffff94,in_stack_ffffff98);
  return;
}


