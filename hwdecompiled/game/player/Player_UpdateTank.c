/*
 * Function: Player_UpdateTank
 * Address: 00412dc0
 * Category: misc
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall Player_UpdateTank(void *param_1,uint *param_2)

{
  double dVar1;
  double dVar2;
  bool bVar3;
  double dVar4;
  double dVar5;
  undefined4 uVar6;
  int iVar7;
  double *pdVar8;
  undefined4 *puVar9;
  void *pvVar10;
  int *piVar11;
  uint extraout_ECX;
  uint extraout_ECX_00;
  uint extraout_ECX_01;
  uint extraout_ECX_02;
  uint uVar12;
  uint extraout_ECX_03;
  char *extraout_ECX_04;
  uint *extraout_ECX_05;
  uint *extraout_EDX;
  uint *extraout_EDX_00;
  uint *extraout_EDX_01;
  uint *extraout_EDX_02;
  uint *extraout_EDX_03;
  uint *extraout_EDX_04;
  int iVar13;
  int iVar14;
  int iVar15;
  float10 extraout_ST0;
  float10 fVar16;
  float10 fVar17;
  float10 extraout_ST1;
  ulonglong uVar18;
  double local_3c;
  double local_2c;
  undefined8 local_24;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51032c;
  local_10 = ExceptionList;
  if (((*(int *)((int)param_1 + 0x300) != 0) ||
      (ExceptionList = &local_10, *(int *)((int)param_1 + 0x184) < *(int *)((int)param_1 + 0x17c)))
     && (ExceptionList = &local_10, *(char *)((int)param_1 + 0x327) == '\0')) {
    ExceptionList = &local_10;
    *(undefined1 *)((int)param_1 + 0x128) = 0;
    *(undefined4 *)((int)param_1 + 0x60) = 0x140;
    *(undefined4 *)((int)param_1 + 100) = 0x140;
    *(undefined4 *)((int)param_1 + 0xb4) = 0;
  }
  if (_DAT_0052a0c0 < *(double *)((int)param_1 + 0x148)) {
    if (*(char *)((int)param_1 + 0x327) == '\0') {
      param_2 = (uint *)(*(int *)((int)param_1 + 0x184) >> 0x1f & 7);
      *(int *)((int)param_1 + 0x1b4) = *(int *)((int)param_1 + 0x184) + (int)param_2 >> 3;
    }
    else {
      *(undefined4 *)((int)param_1 + 0x1b4) = 1000;
    }
  }
  if (*(int *)((int)param_1 + 300) == 0) {
    if (*(int **)((int)param_1 + 0x310) != (int *)0x0) {
      (**(code **)(**(int **)((int)param_1 + 0x310) + 4))();
      param_2 = extraout_EDX_00;
    }
    *(undefined4 *)((int)param_1 + 0x310) = 0;
  }
  else {
    Timer_CountdownWithSounds(param_1,1);
    param_2 = extraout_EDX;
  }
  dVar1 = *(double *)((int)param_1 + 0x140) + _DAT_0052c5a0;
  bVar3 = _DAT_0052c568 <= dVar1;
  *(double *)((int)param_1 + 0x140) = dVar1;
  if (bVar3) {
    *(double *)((int)param_1 + 0x140) = dVar1 - _DAT_0052c568;
  }
  iVar14 = *(int *)((int)param_1 + 100);
  iVar7 = *(int *)((int)param_1 + 0x98);
  fVar17 = (float10)fpatan((float10)(*(int *)((int)param_1 + 0x60) + -0x140) -
                           (float10)*(double *)((int)param_1 + 0x90),
                           (float10)((iVar7 - iVar14) + -0xc));
  fVar17 = fVar17 * (float10)_DAT_0052c698;
  local_24 = (double)fVar17;
  if (fVar17 < (float10)_DAT_0052c690 == (NAN(fVar17) || NAN((float10)_DAT_0052c690))) {
    if (local_24 <= _DAT_0052c688) goto LAB_00412f26;
    local_24._4_4_ = 0x40568000;
  }
  else {
    local_24._4_4_ = 0xc0568000;
  }
  local_24 = (double)((ulonglong)local_24._4_4_ << 0x20);
LAB_00412f26:
  *(double *)((int)param_1 + 0x120) = (local_24 + _DAT_0052c680) * _DAT_0052c678;
  fVar17 = (float10)Math_ProcessFloatPrecision(*(uint *)((int)param_1 + 0x5c),param_2);
  dVar1 = (double)(fVar17 * (float10)_DAT_0052c668 + (float10)_DAT_0052c660);
  dVar2 = local_24 + _DAT_0052c688;
  local_24 = (dVar2 * _DAT_0052c678 - _DAT_0052c568) * _DAT_0052a0e8;
  if (iVar14 < iVar7) {
    Math_ProcessFloatPrecision(extraout_ECX,extraout_EDX_01);
    fVar17 = (float10)Math_ProcessFloatPrecision(extraout_ECX_00,extraout_EDX_02);
    fVar17 = SQRT(fVar17 + extraout_ST1);
    uVar12 = extraout_ECX_01;
    local_3c._0_4_ = extraout_EDX_03;
  }
  else {
    uVar18 = Math_FloatToUInt64();
    local_3c._0_4_ = (uint *)((int)(uint)uVar18 >> 0x1f);
    fVar17 = (float10)(int)(((uint)uVar18 ^ (uint)local_3c._0_4_) - (int)local_3c._0_4_);
    uVar12 = extraout_ECX_02;
  }
  dVar5 = _DAT_0052a0e0;
  if (fVar17 < (float10)_DAT_0052a0b0 == (NAN(fVar17) || NAN((float10)_DAT_0052a0b0))) {
    if (fVar17 < (float10)_DAT_0052c658 != (NAN(fVar17) || NAN((float10)_DAT_0052c658))) {
      local_24 = (double)((fVar17 - (float10)_DAT_0052a0b0) * (float10)local_24 *
                         (float10)_DAT_0052c650);
    }
  }
  else {
    local_24 = 0.0;
  }
  dVar4 = -dVar1;
  if (local_24 < dVar4 != (NAN(local_24) || NAN(dVar4))) {
    local_24 = dVar4;
  }
  if (dVar1 < local_24) {
    local_3c._0_4_ = SUB84(dVar1,0);
    local_24 = dVar1;
  }
  dVar1 = local_24 * _DAT_0052c648 + *(double *)((int)param_1 + 0x188) * _DAT_0052c580 +
          *(double *)((int)param_1 + 0x118);
  *(double *)((int)param_1 + 0x118) = dVar1;
  if (dVar5 < dVar1) {
    *(double *)((int)param_1 + 0x118) = dVar1 - _DAT_0052a0e0;
  }
  if (*(double *)((int)param_1 + 0x118) < _DAT_0052a0c0 !=
      (NAN(*(double *)((int)param_1 + 0x118)) || NAN(_DAT_0052a0c0))) {
    *(double *)((int)param_1 + 0x118) = *(double *)((int)param_1 + 0x118) + _DAT_0052a0e0;
  }
  if (((*(int *)((int)param_1 + 0x60) < 0x1e) ||
      (fVar17 < (float10)_DAT_0052c658 != (NAN(fVar17) || NAN((float10)_DAT_0052c658)))) &&
     (*(double *)((int)param_1 + 0x90) < _DAT_0052c640 !=
      (NAN(*(double *)((int)param_1 + 0x90)) || NAN(_DAT_0052c640)))) {
    *(double *)((int)param_1 + 0x90) = *(double *)((int)param_1 + 0x90) + _DAT_0052c5d8;
  }
  else {
    dVar1 = local_24 + *(double *)((int)param_1 + 0x90);
    *(double *)((int)param_1 + 0x90) = dVar1;
    dVar5 = (double)(int)((-(uint)(*(char *)((int)param_1 + 0x1b8) != '\0') & 0x5f) - 0x122);
    if ((dVar1 < dVar5 != (NAN(dVar1) || NAN(dVar5))) &&
       (local_24 < _DAT_0052a0c0 != (NAN(local_24) || NAN(_DAT_0052a0c0)))) {
      local_3c._0_4_ = SUB84(dVar5,0);
      *(double *)((int)param_1 + 0x90) = dVar5;
    }
    uVar12 = (-(uint)(*(char *)((int)param_1 + 0x1b9) != '\0') & 0xffffffa1) + 0x122;
    dVar1 = (double)(int)uVar12;
    if (dVar1 < *(double *)((int)param_1 + 0x90) !=
        (NAN(dVar1) || NAN(*(double *)((int)param_1 + 0x90)))) {
      *(double *)((int)param_1 + 0x90) = dVar1;
    }
  }
  if (*(int *)((int)param_1 + 0xa8) != 0) {
    *(int *)((int)param_1 + 0xa8) = *(int *)((int)param_1 + 0xa8) + -1;
  }
  if (*(int *)((int)param_1 + 0xac) != 0) {
    *(int *)((int)param_1 + 0xac) = *(int *)((int)param_1 + 0xac) + -1;
  }
  if (*(int *)((int)param_1 + 0xb0) != 0) {
    *(int *)((int)param_1 + 0xb0) = *(int *)((int)param_1 + 0xb0) + -1;
  }
  if (*(int *)((int)param_1 + 0xb4) != 0) {
    *(int *)((int)param_1 + 0xb4) = *(int *)((int)param_1 + 0xb4) + -1;
  }
  if (*(int *)((int)param_1 + 0xb8) != 0) {
    *(int *)((int)param_1 + 0xb8) = *(int *)((int)param_1 + 0xb8) + -1;
  }
  if (*(int *)((int)param_1 + 0xbc) != 0) {
    *(int *)((int)param_1 + 0xbc) = *(int *)((int)param_1 + 0xbc) + -1;
  }
  if (*(int *)((int)param_1 + 0xc0) != 0) {
    *(int *)((int)param_1 + 0xc0) = *(int *)((int)param_1 + 0xc0) + -1;
  }
  if ((*(char *)((int)param_1 + 0x128) != '\0') && (*(int *)((int)param_1 + 300) == 0)) {
    if (*(int *)((int)param_1 + 0xa8) == 0) {
      piVar11 = *(int **)((int)param_1 + 0x5c);
      if (piVar11[0x256] == 0) {
        local_2c = (double)piVar11[0x25f];
        fVar17 = (float10)Math_ProcessFloatPrecision(uVar12,local_3c._0_4_);
        local_3c = (double)fVar17;
        Math_ProcessFloatPrecision(extraout_ECX_03,extraout_EDX_04);
      }
      else {
        local_2c = 0.0;
        local_3c = 0.0;
      }
      uVar18 = Math_FloatToUInt64();
      dVar1 = local_3c - _DAT_0052a0f0;
      *(int *)((int)param_1 + 0xa8) = (int)uVar18;
      dVar1 = dVar1 * _DAT_0052c630;
      if (_DAT_0052a0f0 < dVar1) {
        dVar1 = _DAT_0052a0f0;
      }
      dVar1 = dVar1 * _DAT_0052c550;
      uVar18 = Math_FloatToUInt64();
      if ((NAN((float10)(int)uVar18) || NAN(extraout_ST0)) == ((float10)(int)uVar18 == extraout_ST0)
         ) {
        Math_FloatingPointRound(extraout_ECX_04,SUB82(dVar1,0),dVar1);
        uVar18 = Math_FloatToUInt64();
        iVar14 = (int)uVar18;
        SystemCall_Handler(extraout_ECX_05,(int)(uVar18 >> 0x20),dVar1);
        uVar18 = Math_FloatToUInt64();
        iVar7 = (int)uVar18;
        if (-1 < iVar14) {
          iVar13 = iVar14 + 1;
          (**(code **)(**(int **)(*(int *)((int)param_1 + 0x5c) + 0x438) + 0x14))
                    (iVar13,(_DAT_0052a0f0 - (dVar1 - (double)iVar14)) *
                            *(double *)(&DAT_0052bcb0 + iVar14 * 0x18));
          iVar15 = **(int **)((int)param_1 + 0x5c);
          uVar18 = Math_FloatToUInt64();
          (**(code **)(iVar15 + 0xb8))(iVar13,(int)uVar18);
          (**(code **)(**(int **)(*(int *)((int)param_1 + 0x5c) + 0x438) + 0x14))
                    (iVar13,*(undefined4 *)(&DAT_0052bcb0 + iVar14 * 0x18),
                     *(undefined4 *)(&DAT_0052bcb4 + iVar14 * 0x18));
        }
        if (iVar7 < 5) {
          iVar15 = iVar7 + 1;
          (**(code **)(**(int **)(*(int *)((int)param_1 + 0x5c) + 0x438) + 0x14))
                    (iVar15,(_DAT_0052a0f0 - ((double)iVar7 - dVar1)) *
                            *(double *)(&DAT_0052bcb0 + iVar7 * 0x18));
          iVar14 = **(int **)((int)param_1 + 0x5c);
          uVar18 = Math_FloatToUInt64();
          (**(code **)(iVar14 + 0xb8))(iVar15,(int)uVar18);
          (**(code **)(**(int **)(*(int *)((int)param_1 + 0x5c) + 0x438) + 0x14))
                    (iVar15,*(undefined4 *)(&DAT_0052bcb0 + iVar7 * 0x18),
                     *(undefined4 *)(&DAT_0052bcb4 + iVar7 * 0x18));
        }
      }
      else {
        iVar14 = *piVar11;
        uVar18 = Math_FloatToUInt64();
        uVar6 = (undefined4)uVar18;
        uVar18 = Math_FloatToUInt64();
        (**(code **)(iVar14 + 0xb8))((int)uVar18,uVar6);
      }
      fVar17 = (float10)dVar2 * (float10)_DAT_0052a0d8;
      fVar16 = (float10)fsin(fVar17);
      dVar1 = (double)((float10)(*(int *)((int)param_1 + 0x98) + -0xc) -
                      fVar16 * (float10)_DAT_0052c548);
      fVar17 = (float10)fcos(fVar17);
      dVar2 = (double)((float10)*(double *)((int)param_1 + 0x90) - fVar17 * (float10)_DAT_0052c548);
      GameObject_Create8Parameters
                (param_1,SUB84(dVar2,0),(int)((ulonglong)dVar2 >> 0x20),SUB84(dVar1,0),
                 (int)((ulonglong)dVar1 >> 0x20),(undefined4)local_24,local_24._4_4_,0,0);
      iVar14 = 0;
      if (_DAT_0052a0c0 < local_2c != (_DAT_0052a0c0 == local_2c)) {
        do {
          uVar18 = Math_FloatToUInt64();
          SexyAppFramework_HandleFullscreen(param_1,local_3c,0,(int)uVar18);
          iVar14 = iVar14 + 1;
        } while ((double)iVar14 < local_2c != ((double)iVar14 == local_2c));
      }
      pdVar8 = (double *)operator_new(0x20);
      puVar9 = (undefined4 *)operator_new(0xc);
      puVar9[2] = *(undefined4 *)((int)param_1 + 0x28c);
      puVar9[1] = 0;
      *(undefined4 **)(*(int *)((int)param_1 + 0x28c) + 4) = puVar9;
      *puVar9 = pdVar8;
      *(undefined4 **)((int)param_1 + 0x28c) = puVar9;
      *(int *)((int)param_1 + 0x290) = *(int *)((int)param_1 + 0x290) + 1;
      *pdVar8 = *(double *)((int)param_1 + 0x90) - _DAT_0052c628;
      iVar14 = *(int *)((int)param_1 + 0x98);
      *(undefined4 *)(pdVar8 + 3) = 0;
      *(undefined4 *)((int)pdVar8 + 0x1c) = 0xbff80000;
      pdVar8[1] = (double)(iVar14 + -10);
      pdVar8[2] = local_24 - _DAT_0052c620;
    }
    if (*(int *)(*(int *)((int)param_1 + 0x5c) + 0x958) == 0) {
      if ((*(int *)(*(int *)((int)param_1 + 0x5c) + 0x994) != 0) &&
         (*(int *)((int)param_1 + 0xc0) == 0)) {
        *(undefined4 *)((int)param_1 + 0xc0) = 0x32;
        pvVar10 = operator_new(0x118);
        local_8 = 0;
        if (pvVar10 != (void *)0x0) {
          XML_ParseLevelData(pvVar10,(int)param_1);
        }
        local_8 = 0xffffffff;
      }
      iVar14 = *(int *)(*(int *)((int)param_1 + 0x5c) + 0x984);
      if ((iVar14 != 0) && (*(int *)((int)param_1 + 0xb0) == 0)) {
        *(int *)((int)param_1 + 0xb0) = iVar14 * -0xf + 0x55;
        pvVar10 = operator_new(0x68);
        local_8 = 1;
        if (pvVar10 != (void *)0x0) {
          Array_Set(pvVar10,(int)param_1,*(undefined4 *)((int)param_1 + 0x90),
                    *(undefined4 *)((int)param_1 + 0x94),
                    SUB84((double)*(int *)((int)param_1 + 0x98),0),
                    (int)((ulonglong)(double)*(int *)((int)param_1 + 0x98) >> 0x20));
        }
        local_8 = 0xffffffff;
      }
      if ((*(int *)(*(int *)((int)param_1 + 0x5c) + 0x990) != 0) &&
         (*(int *)((int)param_1 + 0xbc) == 0)) {
        *(undefined4 *)((int)param_1 + 0xbc) = 0x32;
        pvVar10 = operator_new(0x48);
        local_8 = 2;
        if (pvVar10 != (void *)0x0) {
          Hash_Initialize(pvVar10,(int)param_1);
        }
        local_8 = 0xffffffff;
      }
      if (((*(int **)((int)param_1 + 0x5c))[0x262] != 0) && (*(int *)((int)param_1 + 0xb4) == 0)) {
        *(undefined4 *)((int)param_1 + 0xb4) = 100;
        iVar14 = **(int **)((int)param_1 + 0x5c);
        uVar18 = Math_FloatToUInt64();
        (**(code **)(iVar14 + 0xb8))(0x14,(int)uVar18);
      }
      if ((*(int *)(*(int *)((int)param_1 + 0x5c) + 0x98c) != 0) &&
         (*(int *)((int)param_1 + 0xb8) == 0)) {
        *(undefined4 *)((int)param_1 + 0xb8) = 0x28;
        iVar14 = 0;
        if (0 < *(int *)(*(int *)((int)param_1 + 0x5c) + 0x98c)) {
          do {
            iVar7 = *(int *)(*(int *)((int)param_1 + 0x5c) + 0x98c);
            iVar15 = (int)(0x5a / (longlong)iVar7) * iVar14;
            if (1 < iVar7) {
              iVar15 = iVar15 + (uint)(iVar7 == 3) * -8 + -0x16;
            }
            puVar9 = (undefined4 *)operator_new(0x68);
            local_8 = 3;
            if (puVar9 != (undefined4 *)0x0) {
              List_Initialize(puVar9,(int)param_1,*(undefined8 *)((int)param_1 + 0x90),
                              SUB84((double)*(int *)((int)param_1 + 0x98),0),
                              (int)((ulonglong)(double)*(int *)((int)param_1 + 0x98) >> 0x20),iVar15
                             );
            }
            iVar14 = iVar14 + 1;
            local_8 = 0xffffffff;
          } while (iVar14 < *(int *)(*(int *)((int)param_1 + 0x5c) + 0x98c));
        }
        iVar14 = **(int **)((int)param_1 + 0x5c);
        uVar18 = Math_FloatToUInt64();
        (**(code **)(iVar14 + 0xb8))(0x13,(int)uVar18);
      }
    }
  }
  if ((*(int *)((int)param_1 + 0x130) != 0) && (*(int *)((int)param_1 + 0x310) == 0)) {
    piVar11 = (int *)(**(code **)(**(int **)(*(int *)((int)param_1 + 0x5c) + 0x438) + 0x1c))(0x29);
    *(int **)((int)param_1 + 0x310) = piVar11;
    if (piVar11 != (int *)0x0) {
      iVar14 = *piVar11;
      fVar17 = (float10)(**(code **)(**(int **)((int)param_1 + 0x5c) + 200))();
      (**(code **)(iVar14 + 0x14))((double)fVar17);
      (**(code **)(**(int **)((int)param_1 + 0x310) + 0x1c))(1,1);
    }
  }
  if (*(int *)((int)param_1 + 0x130) == 0) {
    if (*(int **)((int)param_1 + 0x310) != (int *)0x0) {
      (**(code **)(**(int **)((int)param_1 + 0x310) + 4))();
    }
    *(undefined4 *)((int)param_1 + 0x310) = 0;
  }
  ExceptionList = local_10;
  return;
}


