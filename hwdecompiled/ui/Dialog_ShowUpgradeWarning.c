/*
 * Function: Dialog_ShowUpgradeWarning
 * Address: 0040fa90
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Dialog_ShowUpgradeWarning(void *this,int param_1)

{
  void *this_00;
  undefined4 *puVar1;
  int extraout_ECX;
  int extraout_ECX_00;
  int iVar2;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint uVar3;
  uint extraout_EDX_01;
  bool bVar4;
  undefined1 local_4c [4];
  uint local_48;
  undefined4 local_38;
  uint local_34;
  _String_base local_30 [4];
  uint local_2c;
  undefined4 local_1c;
  uint local_18;
  undefined4 local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x510169;
  local_10 = ExceptionList;
  local_14 = 0;
  ExceptionList = &local_10;
  (**(code **)(**(int **)((int)this + 4) + 0xb8))(0x12,0);
  if (param_1 == 1000) {
    if (*(int *)((int)this + 0x48) != *(int *)((int)this + 0x44) &&
        -1 < *(int *)((int)this + 0x48) - *(int *)((int)this + 0x44)) {
      this_00 = operator_new(0x11c);
      bVar4 = this_00 == (void *)0x0;
      local_8 = 0;
      if (bVar4) {
        puVar1 = (undefined4 *)0x0;
        iVar2 = extraout_ECX;
        uVar3 = extraout_EDX;
      }
      else {
        Level_InitializeDictastroika
                  (local_4c,
                   "You\'re going to need all the help you can get! You must use all of your upgrade points before you may continue."
                  );
        local_8 = CONCAT31(local_8._1_3_,1);
        local_14 = 1;
        Level_InitializeDictastroika(local_30,"NOT YET!");
        local_8 = 2;
        local_14 = 3;
        puVar1 = ParticleSystem_Constructor
                           (this_00,*(int *)((int)this + 4),300,0xe6,local_30,(uint)local_4c);
        iVar2 = extraout_ECX_00;
        uVar3 = extraout_EDX_00;
      }
      if (!bVar4) {
        if (0xf < local_18) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(iVar2,local_2c);
        }
        local_18 = 0xf;
        local_1c = 0;
        local_2c = local_2c & 0xffffff00;
      }
      local_8 = 0xffffffff;
      if (!bVar4) {
        if (0xf < local_34) {
                    /* WARNING: Subroutine does not return */
          System_ShutdownHandler(iVar2,uVar3);
        }
        local_34 = 0xf;
        local_38 = 0;
        local_48 = local_48 & 0xffffff00;
      }
      (**(code **)(**(int **)((int)this + 4) + 0x100))(0x1f,puVar1);
      ExceptionList = local_10;
      return;
    }
    GameEngine_ProcessGameLogic(*(int *)((int)this + 4));
    UserDataSystem_SaveUserProfiles(*(void **)((int)this + 4));
    GameMenu_ProcessMainMenu(*(void **)((int)this + 4),extraout_EDX_01);
  }
  else {
    if (param_1 != 0x3e9) {
      ExceptionList = local_10;
      return;
    }
    GameEngine_ProcessGameLogic(*(int *)((int)this + 4));
    UserDataSystem_SaveUserProfiles(*(void **)((int)this + 4));
    GameSystem_InitializeObject(*(int **)((int)this + 4));
  }
  UI_ProcessChildAnimation(*(void **)(*(int *)((int)this + 4) + 0x2dc),(int *)((int)this + -0x58));
  (**(code **)(**(int **)((int)this + 4) + 0x78))((int *)((int)this + -0x58));
  ExceptionList = local_10;
  return;
}


