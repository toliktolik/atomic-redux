/*
 * Function: UI_ProcessChildZOrder
 * Address: 004652b0
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x00465567) */

void __thiscall
UI_ProcessChildZOrder
          (void *this,void *param_1,int param_2,int param_3,undefined4 param_4,int param_5,
          int param_6,char param_7,int param_8,int param_9)

{
  char cVar1;
  uint uVar2;
  char *pcVar3;
  int iVar4;
  undefined4 *puVar5;
  int iVar6;
  char *pcVar7;
  int *piVar8;
  byte bVar9;
  undefined4 *unaff_EBX;
  uint uVar10;
  int iVar11;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffc0;
  undefined1 local_24 [16];
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5140c8;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  Graphics_SetViewport((int)param_1);
  if (param_7 != '\0') {
    if (param_6 == 0) {
                    /* WARNING: Load size is inaccurate */
      iVar4 = (**(code **)(*this + 0x94))
                        (param_1,param_2,param_3,param_4,param_5,0xffffffff,0,param_8,param_9);
      param_3 = param_3 + (param_5 - iVar4) / 2;
    }
    else if (param_6 == 1) {
                    /* WARNING: Load size is inaccurate */
      iVar4 = (**(code **)(*this + 0x94))
                        (param_1,param_2,param_3,param_4,param_5,0xffffffff,0,param_8,param_9);
      param_3 = param_3 + (param_5 - iVar4);
    }
  }
  if ((param_9 < 0) || (param_9 = param_9 + param_8, *(int *)(param_2 + 0x14) < param_9)) {
    param_9 = *(int *)(param_2 + 0x14);
  }
  local_8 = 0;
  param_5 = 0;
  if (param_8 < param_9) {
    do {
      uVar2 = *(uint *)(param_2 + 0x18);
      if (uVar2 < 0x10) {
        iVar4 = param_2 + 4;
      }
      else {
        iVar4 = *(int *)(param_2 + 4);
      }
      if ((*(char *)(iVar4 + param_8) == '^') && (DAT_00566438 != '\0')) {
        if (param_9 + -8 < param_8) break;
        if (uVar2 < 0x10) {
          iVar4 = param_2 + 4;
        }
        else {
          iVar4 = *(int *)(param_2 + 4);
        }
        if (*(char *)(iVar4 + 1 + param_8) == '^') {
          Memory_AllocateSound((_String_base *)&stack0xffffffc0,1,(_String_base)0x5e);
          param_8 = param_8 + 1;
        }
        else {
          uVar10 = 0;
          iVar11 = 0;
          iVar4 = 0x14;
          do {
            puVar5 = (undefined4 *)(param_2 + 4);
            if (0xf < uVar2) {
              puVar5 = (undefined4 *)*puVar5;
            }
            cVar1 = *(char *)((int)puVar5 + param_8 + iVar11 + 1);
            iVar6 = 0;
            if ((cVar1 < '0') || ('9' < cVar1)) {
              if ((cVar1 < 'A') || ('F' < cVar1)) {
                if (('`' < cVar1) && (cVar1 < 'g')) {
                  iVar6 = cVar1 + -0x57;
                }
              }
              else {
                iVar6 = cVar1 + -0x37;
              }
            }
            else {
              iVar6 = cVar1 + -0x30;
            }
            bVar9 = (byte)iVar4;
            iVar4 = iVar4 + -4;
            uVar10 = uVar10 + (iVar6 << (bVar9 & 0x1f));
            iVar11 = iVar11 + 1;
          } while (-4 < iVar4);
          if (param_7 != '\0') {
            SexyWidget_DrawWithInterface(param_1,&stack0xffffffc0,param_5 + param_3,param_4);
            iVar4 = Graphics_BeginBatch((int)param_1);
            puVar5 = (undefined4 *)
                     CreateColor(local_24,uVar10 >> 0x10 & 0xff,uVar10 >> 8 & 0xff,uVar10 & 0xff,
                                 *(undefined4 *)(iVar4 + 0xc));
            SexyWidget_SetRectangle(param_1,puVar5);
          }
          param_8 = param_8 + 7;
          piVar8 = (int *)Graphics_SetViewport((int)param_1);
          iVar4 = (**(code **)(*piVar8 + 0x1c))(&stack0xffffffc0);
          param_5 = param_5 + iVar4;
          pcVar3 = "";
          do {
            pcVar7 = pcVar3;
            pcVar3 = pcVar7 + 1;
          } while (*pcVar7 != '\0');
          String_Assign(&stack0xffffffc0,(_String_base *)&DAT_0052c7cf,(uint)(pcVar7 + -0x52c7cf));
        }
      }
      else {
        if (uVar2 < 0x10) {
          iVar4 = param_2 + 4;
        }
        else {
          iVar4 = *(int *)(param_2 + 4);
        }
        Memory_AllocateSound((_String_base *)&stack0xffffffc0,1,*(_String_base *)(iVar4 + param_8));
      }
      param_8 = param_8 + 1;
    } while (param_8 < param_9);
  }
  if (param_7 != '\0') {
    SexyWidget_DrawWithInterface(param_1,&stack0xffffffc0,param_5 + param_3,param_4);
  }
  piVar8 = (int *)Graphics_SetViewport((int)param_1);
  (**(code **)(*piVar8 + 0x1c))(&stack0xffffffc0);
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),unaff_EBX,in_stack_ffffffc0);
  return;
}


