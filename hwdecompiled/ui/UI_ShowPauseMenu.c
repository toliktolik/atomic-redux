/*
 * Function: UI_ShowPauseMenu
 * Address: 0049a320
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


_String_base * __thiscall
UI_ShowPauseMenu(void *this,uint param_1,_String_base *param_2,uint param_3)

{
  _String_base *p_Var1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  uint uVar5;
  uint uVar6;
  
  uVar6 = *(uint *)((int)this + 0x18);
  if (uVar6 < 0x10) {
    p_Var1 = (_String_base *)((int)this + 4);
  }
  else {
    p_Var1 = *(_String_base **)((int)this + 4);
  }
  if (p_Var1 <= param_2) {
    puVar3 = (undefined4 *)((int)this + 4);
    puVar4 = puVar3;
    if (0xf < uVar6) {
      puVar4 = (undefined4 *)*puVar3;
    }
    if (param_2 < (_String_base *)(*(int *)((int)this + 0x14) + (int)puVar4)) {
      if (0xf < uVar6) {
        puVar3 = (undefined4 *)*puVar3;
      }
      p_Var1 = Array_Sort(this,param_1,(_String_base *)this,(int)param_2 - (int)puVar3,param_3);
      return p_Var1;
    }
  }
  if (*(uint *)((int)this + 0x14) < param_1) {
    std::_String_base::_Xran((_String_base *)this);
  }
  if (-*(int *)((int)this + 0x14) - 1U <= param_3) {
    std::_String_base::_Xlen((_String_base *)this);
  }
  if (param_3 != 0) {
    uVar6 = *(int *)((int)this + 0x14) + param_3;
    if (uVar6 == 0xffffffff) {
      std::_String_base::_Xlen((_String_base *)this);
    }
    if (*(uint *)((int)this + 0x18) < uVar6) {
      String_AllocateMemory(uVar6);
    }
    else if (uVar6 == 0) {
      *(undefined4 *)((int)this + 0x14) = 0;
      if (0xf < *(uint *)((int)this + 0x18)) {
        **(undefined1 **)((int)this + 4) = 0;
        return (_String_base *)this;
      }
      *(undefined1 *)((int)this + 4) = 0;
      return (_String_base *)this;
    }
    if (uVar6 != 0) {
      puVar3 = (undefined4 *)((int)this + 4);
      puVar2 = puVar3;
      puVar4 = puVar3;
      if (0xf < *(uint *)((int)this + 0x18)) {
        puVar2 = (undefined4 *)*puVar3;
        puVar4 = (undefined4 *)*puVar3;
      }
      STL_MemoryCopy((void *)((int)puVar2 + param_3 + param_1),(void *)((int)puVar4 + param_1),
                     *(int *)((int)this + 0x14) - param_1);
      if (0xf < *(uint *)((int)this + 0x18)) {
        puVar3 = (undefined4 *)*puVar3;
      }
      p_Var1 = (_String_base *)(param_1 + (int)puVar3);
      for (uVar5 = param_3 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *(undefined4 *)p_Var1 = *(undefined4 *)param_2;
        param_2 = param_2 + 4;
        p_Var1 = p_Var1 + 4;
      }
      for (uVar5 = param_3 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
        *p_Var1 = *param_2;
        param_2 = param_2 + 1;
        p_Var1 = p_Var1 + 1;
      }
      *(uint *)((int)this + 0x14) = uVar6;
      if (0xf < *(uint *)((int)this + 0x18)) {
        *(undefined1 *)(*(int *)((int)this + 4) + uVar6) = 0;
        return (_String_base *)this;
      }
      *(undefined1 *)((int)this + uVar6 + 4) = 0;
    }
  }
  return (_String_base *)this;
}


