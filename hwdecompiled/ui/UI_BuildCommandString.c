/*
 * Function: UI_BuildCommandString
 * Address: 004a2930
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void UI_BuildCommandString(int *param_1,_String_base *param_2)

{
  _String_base _Var1;
  char *pcVar2;
  char *pcVar3;
  _String_base *p_Var4;
  int extraout_ECX;
  int extraout_ECX_00;
  uint extraout_EDX;
  _String_base *p_Var5;
  int *piVar6;
  undefined8 uVar7;
  _String_base local_48 [24];
  uint local_30;
  _String_base local_2c [4];
  uint local_28;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_005159e0;
  local_10 = ExceptionList;
  if (*param_1 == 1) {
    ExceptionList = &local_10;
    uVar7 = Sound_SetPosition(local_48,"popup %d %d |");
    local_8 = 0;
    PowerUp_ProcessThunderstrike
              (param_2,(uint)((ulonglong)uVar7 >> 0x20),(_String_base *)uVar7,0,0xffffffff);
    local_8 = 0xffffffff;
    if (0xf < local_30) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,extraout_EDX);
    }
  }
  else {
    ExceptionList = &local_10;
    if (*param_1 == 2) {
      ExceptionList = &local_10;
      uVar7 = Sound_SetPosition(local_2c,"more %s %s |");
      local_8 = 1;
      PowerUp_ProcessThunderstrike
                (param_2,(uint)((ulonglong)uVar7 >> 0x20),(_String_base *)uVar7,0,0xffffffff);
      local_8 = 0xffffffff;
      if (0xf < local_14) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_00,local_28);
      }
      local_14 = 0xf;
      local_18 = 0;
      local_28 = local_28 & 0xffffff00;
    }
  }
  local_8 = 0xffffffff;
  if ((undefined4 *)param_1[4] == (undefined4 *)0x0) {
    piVar6 = (int *)0x0;
  }
  else {
    piVar6 = *(int **)param_1[4];
  }
  if (piVar6 != (int *)param_1[4]) {
    do {
      pcVar2 = " ";
      do {
        pcVar3 = pcVar2;
        pcVar2 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      Enemy_ProcessSatelliteLogic(param_2,(_String_base *)&DAT_00531ca0,(uint)(pcVar3 + -0x531ca0));
      Enemy_UpdateAI(param_2,(int)(piVar6 + 2),0,0xffffffff);
      piVar6 = (int *)*piVar6;
    } while (piVar6 != (int *)param_1[4]);
  }
  pcVar2 = " | ";
  do {
    pcVar3 = pcVar2;
    pcVar2 = pcVar3 + 1;
  } while (*pcVar3 != '\0');
  Enemy_ProcessSatelliteLogic(param_2,(_String_base *)&DAT_005358fc,(uint)(pcVar3 + -0x5358fc));
  p_Var5 = (_String_base *)&DAT_005358f8;
  if (*(char *)((int)param_1 + 0x19) == '\0') {
    p_Var5 = (_String_base *)&DAT_005358f4;
  }
  p_Var4 = p_Var5;
  do {
    _Var1 = *p_Var4;
    p_Var4 = p_Var4 + 1;
  } while (_Var1 != (_String_base)0x0);
  Enemy_ProcessSatelliteLogic(param_2,p_Var5,(int)p_Var4 - (int)(p_Var5 + 1));
  p_Var5 = (_String_base *)&DAT_005358f8;
  if (*(char *)((int)param_1 + 0x1a) == '\0') {
    p_Var5 = (_String_base *)&DAT_005358f4;
  }
  p_Var4 = p_Var5;
  do {
    _Var1 = *p_Var4;
    p_Var4 = p_Var4 + 1;
  } while (_Var1 != (_String_base)0x0);
  Enemy_ProcessSatelliteLogic(param_2,p_Var5,(int)p_Var4 - (int)(p_Var5 + 1));
  ExceptionList = local_10;
  return;
}


