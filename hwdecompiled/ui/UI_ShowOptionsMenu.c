/*
 * Function: UI_ShowOptionsMenu
 * Address: 0049a490
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


_String_base * __thiscall
UI_ShowOptionsMenu(_String_base *param_1,uint param_2,uint param_3,_String_base param_4)

{
  _String_base *p_Var1;
  _String_base *p_Var2;
  uint uVar3;
  uint uVar4;
  _String_base *p_Var5;
  
  if (*(uint *)(param_1 + 0x14) < param_2) {
    std::_String_base::_Xran(param_1);
  }
  if (-*(int *)(param_1 + 0x14) - 1U <= param_3) {
    std::_String_base::_Xlen(param_1);
  }
  if (param_3 != 0) {
    uVar4 = *(int *)(param_1 + 0x14) + param_3;
    if (uVar4 == 0xffffffff) {
      std::_String_base::_Xlen(param_1);
    }
    if (*(uint *)(param_1 + 0x18) < uVar4) {
      String_AllocateMemory(uVar4);
    }
    else if (uVar4 == 0) {
      *(undefined4 *)(param_1 + 0x14) = 0;
      if (0xf < *(uint *)(param_1 + 0x18)) {
        **(undefined1 **)(param_1 + 4) = 0;
        return param_1;
      }
      param_1[4] = (_String_base)0x0;
      return param_1;
    }
    if (uVar4 != 0) {
      p_Var5 = param_1 + 4;
      p_Var2 = p_Var5;
      p_Var1 = p_Var5;
      if (0xf < *(uint *)(param_1 + 0x18)) {
        p_Var2 = *(_String_base **)p_Var5;
        p_Var1 = *(_String_base **)p_Var5;
      }
      STL_MemoryCopy(p_Var2 + param_3 + param_2,p_Var1 + param_2,*(int *)(param_1 + 0x14) - param_2)
      ;
      if (0xf < *(uint *)(param_1 + 0x18)) {
        p_Var5 = *(_String_base **)p_Var5;
      }
      p_Var5 = p_Var5 + param_2;
      for (uVar3 = param_3 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(uint *)p_Var5 = CONCAT22(CONCAT11(param_4,param_4),CONCAT11(param_4,param_4));
        p_Var5 = p_Var5 + 4;
      }
      for (uVar3 = param_3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *p_Var5 = param_4;
        p_Var5 = p_Var5 + 1;
      }
      *(uint *)(param_1 + 0x14) = uVar4;
      if (0xf < *(uint *)(param_1 + 0x18)) {
        *(undefined1 *)(*(int *)(param_1 + 4) + uVar4) = 0;
        return param_1;
      }
      param_1[uVar4 + 4] = (_String_base)0x0;
    }
  }
  return param_1;
}


