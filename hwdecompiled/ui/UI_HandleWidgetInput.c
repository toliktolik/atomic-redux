/*
 * Function: UI_HandleWidgetInput
 * Address: 004633c0
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Removing unreachable block (ram,0x0046362c) */

void UI_HandleWidgetInput
               (void *param_1,undefined4 *param_2,int param_3,uint param_4,undefined4 param_5)

{
  byte bVar1;
  undefined4 *puVar2;
  uint uVar3;
  undefined4 *puVar4;
  int *piVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffa8;
  uint in_stack_ffffffac;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  int *local_2c;
  uint local_28;
  int *local_24;
  int local_20;
  uint local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puVar2 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &DAT_00513f48;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  puVar4 = (undefined4 *)Graphics_BeginBatch((int)param_1);
  local_3c = *puVar4;
  local_38 = puVar4[1];
  local_34 = puVar4[2];
  local_30 = puVar4[3];
  piVar5 = (int *)Graphics_SetViewport((int)param_1);
  local_2c = piVar5;
  iVar6 = (**(code **)(*piVar5 + 8))();
  local_18 = (**(code **)(*piVar5 + 4))();
  local_18 = local_18 - iVar6;
  if (param_4 == 0xffffffff) {
    param_4 = (**(code **)(*piVar5 + 0x18))();
  }
  puVar4 = (undefined4 *)(in_stack_ffffffac & 0xffffff00);
  uVar7 = *(uint *)(param_3 + 0x14);
  uVar10 = 0;
  local_1c = 0xffffffff;
  local_8 = 0;
  local_20 = 0;
  local_28 = local_28 & 0xffffff00;
  uVar8 = 0;
  if (uVar7 != 0) {
    do {
      if (*(uint *)(param_3 + 0x18) < 0x10) {
        iVar6 = param_3 + 4;
      }
      else {
        iVar6 = *(int *)(param_3 + 4);
      }
      bVar1 = *(byte *)(iVar6 + uVar8);
      param_2 = (undefined4 *)(uint)bVar1;
      uVar9 = uVar8;
      uVar3 = local_1c;
      if (bVar1 == 0x5e) {
        if ((DAT_00566438 == '\0') || (uVar7 <= uVar8 + 1)) goto LAB_004634d7;
        if (*(uint *)(param_3 + 0x18) < 0x10) {
          iVar6 = param_3 + 4;
        }
        else {
          iVar6 = *(int *)(param_3 + 4);
        }
        uVar9 = uVar8 + 1;
        if (*(char *)(iVar6 + 1 + uVar8) == '^') goto LAB_004634d7;
        uVar9 = uVar8 + 8;
      }
      else {
        uVar3 = uVar8;
        if ((bVar1 != 0x20) && (uVar3 = local_1c, bVar1 == 10)) {
          local_20 = puVar2[2] + 1;
          uVar9 = uVar8 + 1;
          uVar3 = uVar8;
        }
LAB_004634d7:
        local_1c = uVar3;
        iVar6 = (**(code **)(*local_2c + 0x24))(param_2,local_28);
        local_20 = local_20 + iVar6;
        iVar6 = puVar2[2];
        local_28 = CONCAT31(local_28._1_3_,bVar1);
        if (iVar6 < local_20) {
          if (local_1c == 0xffffffff) {
            if ((int)uVar9 < (int)(uVar10 + 1)) {
              uVar9 = uVar9 + 1;
            }
            (**(code **)(*local_24 + 0x94))
                      (param_1,param_3,*puVar2,puVar2[1] + local_18,iVar6,param_5,1,uVar10,
                       uVar9 - uVar10);
          }
          else {
            (**(code **)(*local_24 + 0x94))
                      (param_1,param_3,*puVar2,puVar2[1] + local_18,iVar6,param_5,1,uVar10,
                       local_1c - uVar10);
            uVar9 = local_1c + 1;
            if ((bVar1 != 10) && (uVar9 < *(uint *)(param_3 + 0x14))) {
              do {
                if (*(uint *)(param_3 + 0x18) < 0x10) {
                  iVar6 = param_3 + 4;
                }
                else {
                  iVar6 = *(int *)(param_3 + 4);
                }
              } while ((*(char *)(iVar6 + uVar9) == ' ') &&
                      (uVar9 = uVar9 + 1, uVar9 < *(uint *)(param_3 + 0x14)));
            }
          }
          local_18 = local_18 + param_4;
          local_1c = 0xffffffff;
          local_20 = 0;
          local_28 = local_28 & 0xffffff00;
          uVar10 = uVar9;
        }
        else {
          uVar9 = uVar9 + 1;
        }
      }
      uVar7 = *(uint *)(param_3 + 0x14);
      uVar8 = uVar9;
    } while (uVar9 < uVar7);
  }
  if ((int)uVar10 < *(int *)(param_3 + 0x14)) {
    (**(code **)(*local_24 + 0x94))
              (param_1,param_3,*puVar2,puVar2[1] + local_18,puVar2[2],param_5,1,uVar10,
               *(int *)(param_3 + 0x14) - uVar10);
  }
  SexyWidget_SetRectangle(param_1,&local_3c);
  (**(code **)(*local_2c + 0xc))();
  ExceptionList = local_10;
  Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffa8,puVar4);
  return;
}


