/*
 * Function: UI_ProcessChildDepth
 * Address: 004655e0
 * Category: ui
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall UI_ProcessChildDepth(int param_1,uint param_2,_String_base *param_3,int param_4)

{
  int *piVar1;
  int iVar2;
  void *pvVar3;
  _String_base *p_Var4;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  undefined4 extraout_ECX_02;
  int extraout_ECX_03;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint uVar5;
  uint extraout_EDX_02;
  uint extraout_EDX_03;
  undefined8 uVar6;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffb0;
  undefined4 *in_stack_ffffffb4;
  uint local_38;
  _String_base local_34 [4];
  uint local_30;
  uint local_20;
  uint local_1c;
  undefined4 local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00514100;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  local_18 = 0;
  local_1c = 0xf;
  local_20 = 0;
  local_30 = local_30 & 0xffffff00;
  ExceptionList = &local_10;
  PowerUp_ProcessThunderstrike
            (local_34,param_2,(_String_base *)(param_4 * 0x1c + *(int *)(param_1 + 0x70)),0,
             0xffffffff);
  local_8._1_3_ = 0;
  uVar5 = extraout_EDX;
  if (local_20 < *(uint *)(param_1 + 0xb8)) {
    do {
      local_8._0_1_ = 0;
      p_Var4 = Survival_LoadConfiguration
                         ((_String_base *)&stack0xffffffb0,(_String_base *)&DAT_0053296c,
                          (int)local_34);
      local_8._0_1_ = 1;
      PowerUp_ProcessThunderstrike(local_34,extraout_EDX_00,p_Var4,0,0xffffffff);
      local_8._0_1_ = 0;
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
      }
      local_38 = 0xf;
      in_stack_ffffffb4 = (undefined4 *)((uint)in_stack_ffffffb4 & 0xffffff00);
      uVar5 = extraout_EDX_01;
    } while (local_20 < *(uint *)(param_1 + 0xb8));
  }
  local_8._0_1_ = 0;
  piVar1 = *(int **)(param_1 + 0xb0);
  if (*(char *)(param_1 + 0xb4) == '\0') {
    if (piVar1 == (int *)0x0) {
      *(undefined4 *)(param_3 + 0x18) = 0xf;
      *(undefined4 *)(param_3 + 0x14) = 0;
      param_3[4] = (_String_base)0x0;
      PowerUp_ProcessThunderstrike(param_3,uVar5,local_34,0,0xffffffff);
      iVar2 = extraout_ECX_01;
      pvVar3 = ExceptionList;
      uVar5 = local_30;
      ExceptionList = local_10;
    }
    else {
      uVar6 = (**(code **)(*piVar1 + 0xc0))(&stack0xffffffb0,param_4);
      local_8._0_1_ = 3;
      Background_ProcessBackgroundLayer
                (extraout_ECX_02,(uint)((ulonglong)uVar6 >> 0x20),param_3,local_34,(int)uVar6);
      if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler((int)in_stack_ffffffb4,extraout_EDX_03);
      }
      in_stack_ffffffb4 = (undefined4 *)((uint)in_stack_ffffffb4 & 0xffffff00);
      iVar2 = extraout_ECX_03;
      pvVar3 = ExceptionList;
      uVar5 = local_30;
      ExceptionList = local_10;
    }
  }
  else {
    uVar6 = (**(code **)(*piVar1 + 0xc0))(&stack0xffffffb0,param_4);
    local_8._0_1_ = 2;
    Background_ProcessBackgroundLayer
              (local_34,(uint)((ulonglong)uVar6 >> 0x20),param_3,(_String_base *)uVar6,(int)local_34
              );
    if (0xf < local_38) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_00,(uint)in_stack_ffffffb4);
    }
    in_stack_ffffffb4 = (undefined4 *)((uint)in_stack_ffffffb4 & 0xffffff00);
    iVar2 = extraout_ECX_00;
    pvVar3 = ExceptionList;
    uVar5 = extraout_EDX_02;
    ExceptionList = local_10;
  }
  local_10 = ExceptionList;
  if (local_1c < 0x10) {
    Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffb0,in_stack_ffffffb4);
    return;
  }
  ExceptionList = pvVar3;
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(iVar2,uVar5);
}


