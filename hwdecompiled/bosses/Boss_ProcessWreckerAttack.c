/*
 * Function: Boss_ProcessWreckerAttack
 * Address: 00405f40
 * Category: bosses
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
Boss_ProcessWreckerAttack(void *this,undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  undefined4 *puVar1;
  uint uVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 uVar6;
  int iVar7;
  uint extraout_EDX;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 *local_18;
  undefined1 *local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puVar4 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &DAT_0050f780;
  local_10 = ExceptionList;
  local_20 = *param_3;
  local_14 = &stack0xffffffd4;
  iVar3 = *(int *)((int)this + 4);
  local_1c = param_3[1];
  if (iVar3 == 0) {
    uVar2 = 0;
  }
  else {
    uVar2 = *(int *)((int)this + 0xc) - iVar3 >> 3;
  }
  if (param_2 != (undefined4 *)0x0) {
    if (iVar3 == 0) {
      iVar7 = 0;
    }
    else {
      iVar7 = *(int *)((int)this + 8) - iVar3 >> 3;
    }
    if ((undefined4 *)(0x1fffffffU - iVar7) < param_2) {
      ExceptionList = &local_10;
      local_14 = &stack0xffffffd4;
      Level_InitializeVodkavania();
      ExceptionList = local_10;
      return;
    }
    if (iVar3 == 0) {
      iVar7 = 0;
    }
    else {
      iVar7 = *(int *)((int)this + 8) - iVar3 >> 3;
    }
    if (uVar2 < (uint)(iVar7 + (int)param_2)) {
      if (0x1fffffff - (uVar2 >> 1) < uVar2) {
        uVar2 = 0;
      }
      else {
        uVar2 = uVar2 + (uVar2 >> 1);
      }
      if (iVar3 == 0) {
        iVar7 = 0;
      }
      else {
        iVar7 = *(int *)((int)this + 8) - iVar3 >> 3;
      }
      if (uVar2 < (uint)(iVar7 + (int)param_2)) {
        if (iVar3 == 0) {
          iVar3 = 0;
        }
        else {
          iVar3 = *(int *)((int)this + 8) - iVar3 >> 3;
        }
        uVar2 = iVar3 + (int)param_2;
      }
      param_3 = (undefined4 *)(uVar2 << 3);
      ExceptionList = &local_10;
      local_14 = &stack0xffffffd4;
      puVar4 = (undefined4 *)operator_new((uint)param_3);
      local_8 = 0;
      local_18 = puVar4;
      puVar5 = (undefined4 *)LinkedList_Constructor(*(undefined4 **)((int)this + 4),param_1,puVar4);
      ListNode_Constructor(puVar5,(int)param_2,&local_20);
      LinkedList_Constructor(param_1,*(undefined4 **)((int)this + 8),puVar5 + (int)param_2 * 2);
      iVar3 = *(int *)((int)this + 4);
      if (iVar3 == 0) {
        iVar7 = 0;
      }
      else {
        iVar7 = *(int *)((int)this + 8) - iVar3 >> 3;
      }
      if (iVar3 != 0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar3,extraout_EDX);
      }
      *(undefined4 **)((int)this + 8) = puVar4 + ((int)param_2 + iVar7) * 2;
      *(int *)((int)this + 0xc) = (int)param_3 + (int)puVar4;
      *(undefined4 **)((int)this + 4) = puVar4;
      ExceptionList = local_10;
      return;
    }
    puVar5 = *(undefined4 **)((int)this + 8);
    if ((undefined4 *)((int)puVar5 - (int)param_1 >> 3) < param_2) {
      iVar3 = (int)param_2 * 8;
      param_3 = (undefined4 *)&stack0xffffffc8;
      ExceptionList = &local_10;
      local_14 = &stack0xffffffd4;
      PowerUp_ProcessDefenseOrb(param_1,puVar5,param_1 + (int)param_2 * 2);
      local_8 = 2;
      Enemy_ProcessJetFighterLogic
                (*(undefined4 **)((int)this + 8),
                 (int)param_2 - ((int)*(undefined4 **)((int)this + 8) - (int)param_1 >> 3),&local_20
                );
      iVar3 = *(int *)((int)this + 8) + iVar3;
      *(int *)((int)this + 8) = iVar3;
      puVar4 = (undefined4 *)(iVar3 + (int)puVar4 * -8);
    }
    else {
      param_2 = puVar5 + (int)param_2 * -2;
      ExceptionList = &local_10;
      uVar6 = PowerUp_ProcessDefenseOrb(param_2,puVar5,puVar5);
      puVar1 = param_2;
      *(undefined4 *)((int)this + 8) = uVar6;
      param_3 = (undefined4 *)&stack0xffffffcc;
      param_2 = (undefined4 *)&stack0xffffffc8;
      MemoryCopy_Backward_8ByteObjects(&param_2,(int)param_1,(int)puVar1,puVar5);
      puVar4 = param_1 + (int)puVar4 * 2;
    }
    param_2 = (undefined4 *)&stack0xffffffc8;
    MemoryCopy_8ByteObjects(param_1,puVar4,&local_20);
  }
  ExceptionList = local_10;
  return;
}


