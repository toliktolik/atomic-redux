/*
 * Function: Boss_SetupInvasionUI
 * Address: 00425500
 * Category: bosses
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 * __thiscall Boss_SetupInvasionUI(void *this,void *param_1)

{
  char *pcVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  char *pcVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  void *pvVar9;
  int *piVar10;
  int local_80 [22];
  undefined1 local_28 [16];
  void *local_18;
  int local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x51126c;
  local_10 = ExceptionList;
  ExceptionList = &local_10;
  local_18 = this;
  SexyWidget_Constructor((undefined4 *)this);
  puVar2 = (undefined4 *)((int)this + 0x58);
  *puVar2 = &PTR_EmptyFunction_NoOp_0053127c;
  *(undefined ***)this = &PTR_Score_ProcessMedalAward_0052dca8;
  *puVar2 = &PTR_EmptyFunction_NoOp_0052dc88;
  *(undefined4 *)((int)this + 0xcc) = 0;
  *(undefined4 *)((int)this + 0xd0) = 0;
  *(undefined4 *)((int)this + 0xd4) = 0;
  local_8._0_1_ = 1;
  local_8._1_3_ = 0;
  *(void **)((int)this + 0x5c) = param_1;
  *(undefined1 *)((int)this + 0x9c) = 1;
  *(undefined1 *)((int)this + 0x9d) = 1;
  *(undefined4 *)((int)this + 0x94) = 0;
  *(undefined4 *)((int)this + 0x98) = 0x32;
  *(undefined4 *)((int)this + 0x90) = 0;
  *(undefined4 *)((int)this + 0x70) = 0;
  *(undefined4 *)((int)this + 0x74) = 0;
  *(undefined4 *)((int)this + 0x78) = 0;
  *(undefined4 *)((int)this + 0x7c) = 0;
  *(undefined4 *)((int)this + 0x80) = 0;
  *(undefined4 *)((int)this + 0x84) = 0x40840000;
  *(undefined4 *)((int)this + 0x88) = 0;
  *(undefined4 *)((int)this + 0x8c) = 0x407e0000;
  *(undefined4 *)((int)this + 100) = 0;
  *(undefined1 *)((int)this + 0x9e) = 0;
  *(undefined4 *)((int)this + 0xa0) = 0;
  *(undefined4 *)((int)this + 0xa8) = 0;
  *(undefined4 *)((int)this + 0xac) = 0;
  *(undefined4 *)((int)this + 0xb0) = 0xffffffff;
  *(undefined4 *)((int)this + 0xbc) = 0;
  *(undefined4 *)((int)this + 0xc0) = 0;
  *(undefined1 *)((int)this + 0xc4) = 1;
  param_1 = operator_new(0x118);
  local_8._0_1_ = 2;
  if (param_1 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = SexyWidget_ProcessTiming(param_1,0,(uint)puVar2);
  }
  *(undefined4 **)((int)this + 0x60) = puVar2;
  local_8._0_1_ = 1;
  pcVar1 = "Click here to invade!";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign(puVar2 + 0x17,(_String_base *)"Click here to invade!",(uint)(pcVar4 + -0x52dda4));
  iVar6 = **(int **)((int)this + 0x60);
  uVar3 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x92c) + 0x2c))();
  (**(code **)(iVar6 + 0xc0))(uVar3);
  iVar6 = **(int **)((int)this + 0x60);
  uVar3 = CreateColor(local_28,0xff,0xff,0xff,0xff);
  (**(code **)(iVar6 + 0x1c))(0,uVar3);
  (**(code **)(**(int **)((int)this + 0x60) + 0x10))(0);
  param_1 = operator_new(0x118);
  local_8._0_1_ = 3;
  if (param_1 == (void *)0x0) {
    puVar2 = (undefined4 *)0x0;
  }
  else {
    puVar2 = SexyWidget_ProcessTiming(param_1,1,(int)this + 0x58);
  }
  *(undefined4 **)((int)this + 0x68) = puVar2;
  local_8 = CONCAT31(local_8._1_3_,1);
  pcVar1 = "";
  do {
    pcVar4 = pcVar1;
    pcVar1 = pcVar4 + 1;
  } while (*pcVar4 != '\0');
  String_Assign(puVar2 + 0x17,(_String_base *)&DAT_0052c7cf,(uint)(pcVar4 + -0x52c7cf));
  iVar6 = **(int **)((int)this + 0x68);
  uVar3 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x93c) + 0x2c))();
  (**(code **)(iVar6 + 0xc0))(uVar3);
  (**(code **)(**(int **)((int)this + 0x68) + 0x10))(0);
  GetBossIndex(*(void **)((int)this + 0x5c),*(int *)((int)*(void **)((int)this + 0x5c) + 0x960));
  param_1 = (void *)0x0;
  iVar6 = *(int *)((int)this + 0x5c);
  local_14 = 0;
  piVar10 = local_80;
  for (iVar7 = 0x16; iVar7 != 0; iVar7 = iVar7 + -1) {
    *piVar10 = 0;
    piVar10 = piVar10 + 1;
  }
  while( true ) {
    iVar5 = *(int *)(iVar6 + 0x960) * 0x10 + *(int *)(iVar6 + 0x146c);
    iVar7 = *(int *)(iVar5 + 4);
    if ((iVar7 == 0) || ((void *)((*(int *)(iVar5 + 8) - iVar7) / 0x28) <= param_1)) break;
    iVar5 = *(int *)(*(int *)(iVar6 + 0x146c) + 4 + *(int *)(iVar6 + 0x960) * 0x10) + local_14;
    iVar7 = *(int *)(iVar5 + 0xc);
    for (uVar8 = 0; (iVar7 != 0 && (uVar8 < (uint)(*(int *)(iVar5 + 0x10) - iVar7 >> 2)));
        uVar8 = uVar8 + 1) {
      local_80[*(int *)(*(int *)(iVar5 + 0xc) + uVar8 * 4)] =
           local_80[*(int *)(*(int *)(iVar5 + 0xc) + uVar8 * 4)] + 1;
    }
    param_1 = (void *)((int)param_1 + 1);
    local_14 = local_14 + 0x28;
  }
  param_1 = (void *)0x1;
  do {
    pvVar9 = param_1;
    if (0 < local_80[(int)param_1]) {
      iVar6 = *(int *)((int)this + 0xcc);
      if ((iVar6 == 0) ||
         ((uint)(*(int *)((int)this + 0xd4) - iVar6 >> 2) <=
          (uint)(*(int *)((int)this + 0xd0) - iVar6 >> 2))) {
        Boss_ProcessBattleshipAttack
                  ((void *)((int)this + 200),*(undefined4 **)((int)this + 0xd0),(undefined4 *)0x1,
                   &param_1);
      }
      else {
        puVar2 = *(undefined4 **)((int)this + 0xd0);
        ArrayInit_4ByteObjects(puVar2,1,&param_1);
        *(undefined4 **)((int)this + 0xd0) = puVar2 + 1;
        pvVar9 = param_1;
      }
    }
    param_1 = (void *)((int)pvVar9 + 1);
  } while ((int)param_1 < 0x16);
  UI_ValidateWidgetLayout(this,0,0,0x280,0x1e0);
  iVar6 = (**(code **)(**(int **)(*(int *)((int)this + 0x5c) + 0x92c) + 0x1c))
                    (*(int *)((int)this + 0x60) + 0x5c);
  (**(code **)(**(int **)((int)this + 0x60) + 0x34))(0xa0 - iVar6 / 2,0x1b8,iVar6,0x19);
  (**(code **)(**(int **)((int)this + 0x68) + 0x34))(0x140,0xfa,0x140,0xe6);
  ExceptionList = local_10;
  return (undefined4 *)this;
}


