/*
 * Function: HighScoreScreen_Draw
 * Address: 00422780
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall HighScoreScreen_Draw(void *this,void *param_1)

{
  _String_base _Var1;
  void *this_00;
  int iVar2;
  undefined4 *puVar3;
  char *pcVar4;
  char *pcVar5;
  undefined4 *puVar6;
  _String_base *p_Var7;
  _String_base *p_Var8;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int extraout_ECX_03;
  int extraout_ECX_04;
  int extraout_ECX_05;
  int extraout_ECX_06;
  int extraout_ECX_07;
  int extraout_ECX_08;
  int extraout_ECX_09;
  int extraout_ECX_10;
  int extraout_ECX_11;
  int extraout_ECX_12;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  byte *extraout_EDX_03;
  uint extraout_EDX_04;
  uint extraout_EDX_05;
  uint extraout_EDX_06;
  byte *extraout_EDX_07;
  uint extraout_EDX_08;
  uint extraout_EDX_09;
  uint uVar9;
  ulonglong uVar10;
  undefined8 uVar11;
  uint unaff_retaddr;
  undefined4 *puVar12;
  char cVar13;
  int iVar14;
  int iVar15;
  char cVar16;
  undefined1 local_15c [16];
  undefined1 local_14c [16];
  undefined1 local_13c [16];
  undefined1 local_12c [4];
  uint local_128;
  undefined4 local_118;
  uint local_114;
  undefined1 local_110 [4];
  uint local_10c;
  undefined4 local_fc;
  uint local_f8;
  undefined1 local_f4 [4];
  uint local_f0;
  undefined4 local_e0;
  uint local_dc;
  undefined1 local_d8 [4];
  uint local_d4;
  undefined4 local_c4;
  uint local_c0;
  undefined1 local_bc [4];
  uint local_b8;
  undefined4 local_a8;
  uint local_a4;
  undefined1 local_a0 [4];
  uint local_9c;
  undefined4 local_8c;
  uint local_88;
  _String_base local_84 [4];
  uint local_80;
  undefined4 local_70;
  uint local_6c;
  _String_base local_68 [20];
  undefined4 local_54 [4];
  _String_base *local_44;
  int local_40;
  uint local_3c;
  undefined4 local_38;
  uint local_34;
  undefined4 local_24;
  uint local_20;
  _String_base *local_1c;
  int local_18;
  uint local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  this_00 = param_1;
  local_8 = 0xffffffff;
  puStack_c = &DAT_005110d2;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x80c),param_1,0,0,'\0',0,0,'\0');
  SexyWidget_SetColorizeFlag2(param_1,1);
  SexyWidget_SetDrawMode(param_1,1);
  *(undefined4 *)((int)this + 0x74) = *(undefined4 *)((int)this + 0x70);
  while (iVar2 = *(int *)(*(int *)((int)this + 0x74) + 4), iVar2 != 0) {
    *(int *)((int)this + 0x74) = iVar2;
    uVar10 = Math_FloatToUInt64();
    local_18 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    local_40 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    iVar2 = (int)uVar10;
    if (0xff < local_18) {
      local_18 = 0xff;
    }
    if (0xff < local_40) {
      local_40 = 0xff;
    }
    if (0xff < iVar2) {
      iVar2 = 0xff;
    }
    puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_54,local_18,local_40,iVar2);
    SexyWidget_SetRectangle(param_1,puVar3);
    cVar16 = '\0';
    iVar15 = 0;
    iVar14 = 0;
    cVar13 = '\x01';
    uVar10 = Math_FloatToUInt64();
    iVar2 = (int)uVar10;
    uVar10 = Math_FloatToUInt64();
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x810),param_1,(int)uVar10,iVar2,cVar13,
               iVar14,iVar15,cVar16);
  }
  SexyWidget_SetDrawMode(param_1,0);
  SexyWidget_SetColorizeFlag2(param_1,0);
  puVar3 = (undefined4 *)CreateColor(local_54,0,0,0,0x40);
  SexyWidget_SetRectangle(param_1,puVar3);
  Graphics_FillRect(param_1,0x32,0x32,0x21c,0x17c);
  Graphics_FillRect(param_1,0x32,0x32,0x21c,0x14);
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_54,0,0,0);
  SexyWidget_SetRectangle(param_1,puVar3);
  Graphics_DrawFilledRect(param_1,0x32,0x32,0x21c,0x17c);
  Graphics_ProcessBlit(param_1,0x32,0x46,0x24e,0x46);
  if (*(char *)((int)this + 0x80) == '\0') {
    Graphics_ProcessBlit(param_1,0x136,0x32,0x136,0x1ae);
    Graphics_ProcessBlit(param_1,0x1cc,0x32,0x1cc,0x1ae);
    Graphics_ProcessBlit(param_1,0x212,0x32,0x212,0x1ae);
    puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_54,0xff,0xff,0xff);
    SexyWidget_SetRectangle(param_1,puVar3);
    Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x940));
    SexyWidget_Translate(param_1,-0x8c,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "PLAYER NAME";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)"PLAYER NAME",(uint)(pcVar4 + -0x52d9c8));
                    /* WARNING: Load size is inaccurate */
    local_8 = 3;
    (**(code **)(*this + 0x90))(local_54,param_1,0x43,&local_38);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_02,local_34);
    }
    SexyWidget_Translate(param_1,0xd2,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "SCORE";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)"SCORE",(uint)(pcVar4 + -0x52d99c));
                    /* WARNING: Load size is inaccurate */
    puVar3 = local_54;
    local_8 = 4;
    (**(code **)(*this + 0x90))(puVar3,param_1,0x43,&local_38);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_03,extraout_EDX_00);
    }
    SexyWidget_Translate(param_1,0x6c,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "LVL";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)&DAT_0052d998,(uint)(pcVar4 + -0x52d998));
                    /* WARNING: Load size is inaccurate */
    puVar12 = &local_38;
    local_8 = 5;
    (**(code **)(*this + 0x90))(local_54,param_1,0x43);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_04,local_34);
    }
    SexyWidget_Translate(param_1,0x3e,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "RANK";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)&DAT_0052d990,(uint)(pcVar4 + -0x52d990));
                    /* WARNING: Load size is inaccurate */
    local_8 = 6;
    (**(code **)(*this + 0x90))(local_54,param_1,0x43,&local_38);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_05,extraout_EDX_01);
    }
    SexyWidget_Translate(param_1,-0xfa,0);
    Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x928));
    pcVar5 = "?TOP 10 HEROES (MISSION)";
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    do {
      pcVar5 = pcVar5 + 1;
    } while (*pcVar5 != '\0');
    String_Assign(&local_38,(_String_base *)0x52d978,(uint)(pcVar5 + -0x52d978));
                    /* WARNING: Load size is inaccurate */
    local_8 = 7;
    (**(code **)(*this + 0x90))(local_54,param_1,0x23,&local_38);
    iVar2 = extraout_ECX_06;
    uVar9 = extraout_EDX_02;
  }
  else {
    Graphics_ProcessBlit(param_1,0x1b8,0x32,0x1b8,0x1ae);
    puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_54,0xff,0xff,0xff);
    SexyWidget_SetRectangle(param_1,puVar3);
    Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x940));
    SexyWidget_Translate(param_1,-0x50,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "PLAYER NAME";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)"PLAYER NAME",(uint)(pcVar4 + -0x52d9c8));
                    /* WARNING: Load size is inaccurate */
    local_8 = 0;
    (**(code **)(*this + 0x90))(local_54,param_1,0x43,&local_38);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX,extraout_EDX);
    }
    SexyWidget_Translate(param_1,0x113,0);
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "TIME";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)&DAT_0052d9c0,(uint)(pcVar4 + -0x52d9c0));
                    /* WARNING: Load size is inaccurate */
    puVar3 = local_54;
    local_8 = 1;
    (**(code **)(*this + 0x90))(puVar3,param_1,0x43,&local_38);
    local_8 = 0xffffffff;
    if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(extraout_ECX_00,local_34);
    }
    SexyWidget_Translate(param_1,-0xc3,0);
    Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x928));
    local_20 = 0xf;
    local_24 = 0;
    local_34 = local_34 & 0xffffff00;
    pcVar5 = "TOP 10 HEROES (SURVIVAL)";
    do {
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 1;
    } while (*pcVar4 != '\0');
    String_Assign(&local_38,(_String_base *)"TOP 10 HEROES (SURVIVAL)",(uint)(pcVar4 + -0x52d9a4));
                    /* WARNING: Load size is inaccurate */
    puVar12 = &local_38;
    local_8 = 2;
    (**(code **)(*this + 0x90))(local_54,param_1,0x23);
    iVar2 = extraout_ECX_01;
    uVar9 = local_34;
  }
  if (0xf < local_20) {
    local_8 = 0xffffffff;
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar2,uVar9);
  }
  local_8 = 0xffffffff;
  SexyWidget_SetColorizeFlag2(param_1,1);
  local_40 = 0;
  param_1 = (void *)0x0;
  local_3c = 0;
  local_18 = 100;
  do {
    local_6c = 0xf;
    local_70 = 0;
    local_80 = local_80 & 0xffffff00;
    local_8 = 8;
    puVar6 = (undefined4 *)SexyWidget_ApplyMatrix(local_54,0xff,0xff,0xff);
    SexyWidget_SetRectangle(this_00,puVar6);
    if (*(char *)((int)this + 0x80) == '\0') {
      if ((local_40 == *(int *)((int)this + 0x84)) && (*(char *)((int)this + 0x88) == '\0')) {
        local_1c = (_String_base *)(*(int *)(*(int *)((int)this + 0x5c) + 0x414) % 0x28);
        fcos((float10)(int)local_1c * (float10)_DAT_0052d970);
        uVar10 = Math_FloatToUInt64();
        puVar6 = (undefined4 *)CreateColor(local_14c,0xff,0xff,0xff,(int)uVar10);
        SexyWidget_SetRectangle(this_00,puVar6);
      }
      local_a4 = 0xf;
      local_a8 = 0;
      local_b8 = local_b8 & 0xffffff00;
      p_Var8 = (_String_base *)(local_3c + *(int *)(*(int *)((int)this + 0x5c) + 0x143c));
      local_1c = p_Var8 + 1;
      p_Var7 = p_Var8;
      do {
        _Var1 = *p_Var7;
        p_Var7 = p_Var7 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_bc,p_Var8,(int)p_Var7 - (int)local_1c);
      local_8._0_1_ = 9;
      uVar11 = Image_LoadFromFile(local_12c,extraout_EDX_03,(_String_base *)local_12c,(int)local_bc)
      ;
      local_8._0_1_ = 10;
      PowerUp_ProcessThunderstrike
                (local_84,(uint)((ulonglong)uVar11 >> 0x20),(_String_base *)uVar11,0,0xffffffff);
      if (0xf < local_114) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_07,local_128);
      }
      local_114 = 0xf;
      local_118 = 0;
      local_128 = local_128 & 0xffffff00;
      local_8._0_1_ = 8;
      if (0xf < local_a4) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_07,extraout_EDX_04);
      }
                    /* WARNING: Load size is inaccurate */
      local_a4 = 0xf;
      local_a8 = 0;
      local_b8 = local_b8 & 0xffffff00;
      (**(code **)(*this + 0x94))
                (this_00,local_84,0x46,local_18,0xffffffff,0xffffffff,1,0,0xffffffff);
      Exception_Release(local_68,&DAT_0052c7cc);
      p_Var8 = local_68;
      local_dc = 0xf;
      local_e0 = 0;
      local_f0 = local_f0 & 0xffffff00;
      do {
        _Var1 = *p_Var8;
        p_Var8 = p_Var8 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_f4,local_68,(int)p_Var8 - (int)(local_68 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8._0_1_ = 0xb;
      (**(code **)(*this + 0x94))(this_00,local_f4,0x1cc,local_18,0xffffffff,1,1,0,0xffffffff);
      local_8 = CONCAT31(local_8._1_3_,8);
      if (0xf < local_dc) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_08,extraout_EDX_05);
      }
      local_dc = 0xf;
      local_e0 = 0;
      local_f0 = local_f0 & 0xffffff00;
      if (*(int *)(*(int *)(*(int *)((int)this + 0x5c) + 0x143c) + 0x1c + local_3c) < 0x13) {
        Exception_Release(local_68,&DAT_0052c7cc);
      }
      else {
        Exception_Release(local_68,&DAT_0052d964);
      }
      SexyWidget_Translate(this_00,0xb9,0);
      p_Var8 = local_68;
      local_88 = 0xf;
      local_8c = 0;
      local_9c = local_9c & 0xffffff00;
      do {
        _Var1 = *p_Var8;
        p_Var8 = p_Var8 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_a0,local_68,(int)p_Var8 - (int)(local_68 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8._0_1_ = 0xc;
      (**(code **)(*this + 0x90))(local_15c,this_00,local_18,local_a0);
      local_8 = CONCAT31(local_8._1_3_,8);
      if (0xf < local_88) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_09,local_9c);
      }
      local_88 = 0xf;
      local_8c = 0;
      local_9c = local_9c & 0xffffff00;
      SexyWidget_Translate(this_00,-0xb9,0);
      iVar2 = *(int *)(*(int *)((int)this + 0x5c) + 0x143c);
      uVar9 = local_3c;
      if (0 < *(int *)(iVar2 + 0x20 + local_3c)) {
        DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x808),this_00,0x22e,local_18 + -0x18,
                   '\0',*(int *)(iVar2 + 0x20 + local_3c) + -1,0,'\0');
        iVar2 = extraout_ECX_10;
        uVar9 = extraout_EDX_06;
      }
    }
    else {
      if ((local_40 == *(int *)((int)this + 0x84)) && (*(char *)((int)this + 0x88) != '\0')) {
        local_1c = (_String_base *)(*(int *)(*(int *)((int)this + 0x5c) + 0x414) % 0x28);
        fcos((float10)(int)local_1c * (float10)_DAT_0052d970);
        uVar10 = Math_FloatToUInt64();
        puVar6 = (undefined4 *)CreateColor(local_13c,0xff,0xff,0xff,(int)uVar10);
        SexyWidget_SetRectangle(this_00,puVar6);
      }
      local_20 = 0xf;
      local_24 = 0;
      local_34 = local_34 & 0xffffff00;
      p_Var8 = (_String_base *)(*(int *)(*(int *)((int)this + 0x5c) + 0x144c) + (int)param_1);
      local_1c = p_Var8 + 1;
      p_Var7 = p_Var8;
      do {
        _Var1 = *p_Var7;
        p_Var7 = p_Var7 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(&local_38,p_Var8,(int)p_Var7 - (int)local_1c);
      local_8._0_1_ = 0xd;
      uVar11 = Image_LoadFromFile(local_110,extraout_EDX_07,(_String_base *)local_110,(int)&local_38
                                 );
      local_8._0_1_ = 0xe;
      PowerUp_ProcessThunderstrike
                (local_84,(uint)((ulonglong)uVar11 >> 0x20),(_String_base *)uVar11,0,0xffffffff);
      if (0xf < local_f8) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_11,local_10c);
      }
      local_f8 = 0xf;
      local_fc = 0;
      local_10c = local_10c & 0xffffff00;
      local_8 = CONCAT31(local_8._1_3_,8);
      if (0xf < local_20) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_11,extraout_EDX_08);
      }
                    /* WARNING: Load size is inaccurate */
      local_20 = 0xf;
      local_24 = 0;
      local_34 = local_34 & 0xffffff00;
      (**(code **)(*this + 0x94))
                (this_00,local_84,0x46,local_18,0xffffffff,0xffffffff,1,0,0xffffffff);
      local_44 = *(_String_base **)(*(int *)((int)this + 0x5c) + 0x144c);
      if (*(int *)(local_44 + 0x18 + (int)param_1) < 720000) {
        local_44 = *(_String_base **)(*(int *)((int)this + 0x5c) + 0x144c);
        Exception_Release(local_68,"%02i:%02i");
      }
      else {
        local_1c = local_44;
        Exception_Release(local_68,"%i:%02i:%02i");
      }
      p_Var8 = local_68;
      local_c0 = 0xf;
      local_c4 = 0;
      local_d4 = local_d4 & 0xffffff00;
      do {
        _Var1 = *p_Var8;
        p_Var8 = p_Var8 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_d8,local_68,(int)p_Var8 - (int)(local_68 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8 = CONCAT31(local_8._1_3_,0xf);
      (**(code **)(*this + 0x94))(this_00,local_d8,0x244,local_18,0xffffffff,1,1,0,0xffffffff);
      if (0xf < local_c0) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX_12,local_d4);
      }
      local_c0 = 0xf;
      local_c4 = 0;
      local_d4 = local_d4 & 0xffffff00;
      iVar2 = extraout_ECX_12;
      uVar9 = extraout_EDX_09;
    }
    local_8 = 0xffffffff;
    if (0xf < local_6c) {
                    /* WARNING: Subroutine does not return */
      System_ShutdownHandler(iVar2,uVar9);
    }
    param_1 = (void *)((int)param_1 + 0x1c);
    local_18 = local_18 + 0x23;
    local_40 = local_40 + 1;
    local_3c = local_3c + 0x24;
    local_6c = 0xf;
    local_70 = 0;
    local_80 = local_80 & 0xffffff00;
    if (0x1c1 < local_18) {
      SexyWidget_SetColorizeFlag2(this_00,0);
      ExceptionList = local_10;
      Exception_SetMessage((void *)(local_14 ^ unaff_retaddr),puVar12,puVar3);
      return;
    }
  } while( true );
}


