/*
 * Function: Graphics_SetProjection
 * Address: 0047f460
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __cdecl
Graphics_SetProjection(char *param_1,int *param_2,int *param_3,uint param_4,locale *param_5)

{
  char cVar1;
  bool bVar2;
  facet *this;
  undefined4 uVar3;
  uint uVar4;
  void *pvVar5;
  char *pcVar6;
  int extraout_ECX;
  int extraout_ECX_00;
  int extraout_ECX_01;
  int extraout_ECX_02;
  int iVar7;
  undefined1 uVar8;
  char *pcVar9;
  int iVar10;
  uint unaff_retaddr;
  undefined4 *in_stack_ffffffa4;
  char *in_stack_ffffffa8;
  uint local_44;
  _String_base local_40 [4];
  undefined4 local_3c;
  undefined4 local_2c;
  uint local_28;
  size_t local_24;
  uint local_20;
  char *local_1c;
  char local_16;
  char local_15;
  uint local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5148b0;
  local_10 = ExceptionList;
  local_14 = DAT_00569f5c ^ unaff_retaddr;
  ExceptionList = &local_10;
  this = Renderer_SetModelViewMatrix(param_5);
  UI_ProcessTextInput(this,&stack0xffffffa4);
  local_8 = 0;
  local_16 = (**(code **)(*(int *)this + 8))();
  local_1c = param_1;
  uVar3 = Graphics_LoadTexture(param_2,param_3);
  if ((char)uVar3 == '\0') {
    if ((char)param_2[1] == '\0') {
      Graphics_BindTexture(param_2);
    }
    if (*(char *)((int)param_2 + 5) == '+') {
      *param_1 = '+';
    }
    else {
      if ((char)param_2[1] == '\0') {
        Graphics_BindTexture(param_2);
      }
      if (*(char *)((int)param_2 + 5) != '-') goto LAB_0047f505;
      *param_1 = '-';
    }
    local_1c = param_1 + 1;
    Graphics_SetViewport(param_2);
  }
LAB_0047f505:
  uVar4 = param_4 & 0xe00;
  if (uVar4 == 0x400) {
    uVar4 = 8;
  }
  else if (uVar4 == 0x800) {
    uVar4 = 0x10;
  }
  else {
    uVar4 = -(uint)(uVar4 != 0) & 10;
  }
  uVar8 = 0;
  bVar2 = false;
  local_15 = '\0';
  local_20 = uVar4;
  uVar3 = Graphics_LoadTexture(param_2,param_3);
  if ((char)uVar3 == '\0') {
    if ((char)param_2[1] == '\0') {
      Graphics_BindTexture(param_2);
    }
    if (*(char *)((int)param_2 + 5) != '0') goto LAB_0047f5d5;
    uVar8 = 1;
    bVar2 = true;
    Graphics_SetViewport(param_2);
    uVar3 = Graphics_LoadTexture(param_2,param_3);
    if ((char)uVar3 != '\0') {
LAB_0047f5c7:
      if (uVar4 == 0) {
        uVar4 = 8;
        local_20 = 8;
        goto LAB_0047f5de;
      }
      goto LAB_0047f5d9;
    }
    if ((char)param_2[1] == '\0') {
      Graphics_BindTexture(param_2);
    }
    if (*(char *)((int)param_2 + 5) != 'x') {
      if ((char)param_2[1] == '\0') {
        Graphics_BindTexture(param_2);
      }
      if (*(char *)((int)param_2 + 5) != 'X') goto LAB_0047f5c7;
    }
    if ((uVar4 != 0) && (uVar4 != 0x10)) goto LAB_0047f5c7;
    uVar8 = 0;
    uVar4 = 0x10;
    local_20 = 0x10;
    bVar2 = false;
    Graphics_SetViewport(param_2);
LAB_0047f5de:
    local_24 = ((uVar4 != 8) - 1 & 0xfffffff2) + 0x16;
  }
  else {
LAB_0047f5d5:
    if (uVar4 != 0) {
LAB_0047f5d9:
      if (uVar4 != 10) goto LAB_0047f5de;
    }
    local_24 = 10;
  }
  local_28 = 0xf;
  local_3c = (char *)CONCAT31((int3)((uint)local_3c >> 8),uVar8);
  local_2c = 1;
                    /* WARNING: Ignoring partial resolution of indirect */
  local_3c._1_1_ = 0;
  local_8 = CONCAT31(local_8._1_3_,1);
  iVar10 = 0;
  uVar3 = Graphics_LoadTexture(param_2,param_3);
  iVar7 = extraout_ECX;
  pcVar9 = local_1c;
  if ((char)uVar3 == '\0') {
    do {
      if ((char)param_2[1] == '\0') {
        Graphics_BindTexture(param_2);
      }
      cVar1 = *(char *)((int)param_2 + 5);
      *pcVar9 = cVar1;
      pvVar5 = _memchr("0123456789abcdefABCDEF",(int)cVar1,local_24);
      if (pvVar5 == (void *)0x0) {
        pcVar9 = local_3c;
        if (local_28 < 0x10) {
          pcVar9 = (char *)&local_3c;
        }
        iVar7 = extraout_ECX_00;
        if ((pcVar9[iVar10] == '\0') || (local_16 == '\0')) break;
        if ((char)param_2[1] == '\0') {
          Graphics_BindTexture(param_2);
          iVar7 = extraout_ECX_01;
        }
        if (*(char *)((int)param_2 + 5) != local_16) break;
        Memory_AllocateSound(local_40,1,(_String_base)0x0);
        iVar10 = iVar10 + 1;
        pcVar9 = local_1c;
      }
      else {
        if (((local_15 != '\0') || (*pcVar9 != '0')) && (pcVar9 < param_1 + 0x1f)) {
          pcVar9 = pcVar9 + 1;
          local_1c = pcVar9;
          local_15 = '\x01';
        }
        bVar2 = true;
        pcVar6 = local_3c;
        if (local_28 < 0x10) {
          pcVar6 = (char *)&local_3c;
        }
        if (pcVar6[iVar10] != '\x7f') {
          pcVar6 = local_3c;
          if (local_28 < 0x10) {
            pcVar6 = (char *)&local_3c;
          }
          pcVar6[iVar10] = pcVar6[iVar10] + '\x01';
        }
      }
      Graphics_SetViewport(param_2);
      uVar3 = Graphics_LoadTexture(param_2,param_3);
      iVar7 = extraout_ECX_02;
    } while ((char)uVar3 == '\0');
    if (iVar10 != 0) {
      pcVar9 = local_3c;
      if (local_28 < 0x10) {
        pcVar9 = (char *)&local_3c;
      }
      if (pcVar9[iVar10] < '\x01') {
        bVar2 = false;
      }
      else {
        iVar10 = iVar10 + 1;
      }
    }
  }
  pcVar9 = in_stack_ffffffa8;
  if (local_44 < 0x10) {
    pcVar9 = &stack0xffffffa8;
  }
  if (bVar2) {
    while (iVar10 != 0) {
      cVar1 = *pcVar9;
      iVar7 = CONCAT31((int3)((uint)iVar7 >> 8),cVar1);
      if (cVar1 == '\x7f') break;
      iVar10 = iVar10 + -1;
      if (iVar10 != 0) {
        pcVar6 = local_3c;
        if (local_28 < 0x10) {
          pcVar6 = (char *)&local_3c;
        }
        if (cVar1 != pcVar6[iVar10]) goto LAB_0047f79d;
      }
      if (iVar10 == 0) {
        pcVar6 = local_3c;
        if (local_28 < 0x10) {
          pcVar6 = (char *)&local_3c;
        }
        if (cVar1 < *pcVar6) goto LAB_0047f79d;
      }
      if ('\0' < pcVar9[1]) {
        pcVar9 = pcVar9 + 1;
      }
    }
    param_1 = local_1c;
    if (local_15 == '\0') {
      *local_1c = '0';
      param_1 = local_1c + 1;
    }
  }
LAB_0047f79d:
  *param_1 = '\0';
  if (0xf < local_28) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar7,(uint)pcVar9);
  }
  local_28 = 0xf;
  local_2c = 0;
  local_3c = (char *)((uint)local_3c & 0xffffff00);
  if (0xf < local_44) {
                    /* WARNING: Subroutine does not return */
    System_ShutdownHandler(iVar7,(uint)in_stack_ffffffa8);
  }
  ExceptionList = local_10;
  Exception_SetMessage
            ((void *)(local_14 ^ unaff_retaddr),in_stack_ffffffa4,(undefined4 *)in_stack_ffffffa8);
  return;
}


