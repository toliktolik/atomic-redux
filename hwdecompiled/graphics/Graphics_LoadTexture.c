/*
 * Function: Graphics_LoadTexture
 * Address: 004e47f0
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


undefined4 __cdecl Graphics_LoadTexture(int param_1,int param_2,int *param_3,undefined4 *param_4)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  void *pvVar7;
  void *local_8;
  
  iVar1 = *(int *)(param_2 + 0x308);
  iVar4 = *(int *)(*(int *)(*(int *)(*(int *)(param_1 + 0x48) + 4) + 0x1c) +
                  *(int *)(param_1 + 0x20) * 4) / 2;
  pvVar7 = (void *)0x0;
  if (param_3 == (int *)0x0) {
    for (; iVar4 != 0; iVar4 = iVar4 + -1) {
      *param_4 = 0;
      param_4 = param_4 + 1;
    }
    return 0;
  }
  iVar5 = *(int *)(iVar1 + 0x340) * *param_3;
  local_8 = (void *)0x0;
  param_1 = 1;
  iVar6 = iVar5;
  if (1 < *(int *)(param_2 + 0x2fc)) {
    do {
      iVar2 = *(int *)(param_2 + param_1 * 4);
      uVar3 = param_3[iVar2] & 0x7fff;
      iVar5 = iVar6;
      if (uVar3 == param_3[iVar2]) {
        pvVar7 = *(void **)(iVar1 + 0x344 + iVar2 * 4);
        iVar5 = *(int *)(iVar1 + 0x340) * uVar3;
        Graphics_ResetDevice(local_8,(int)pvVar7,iVar6,(int)param_4);
        local_8 = pvVar7;
      }
      param_1 = param_1 + 1;
      iVar6 = iVar5;
    } while (param_1 < *(int *)(param_2 + 0x2fc));
  }
  for (; (int)pvVar7 < iVar4; pvVar7 = (void *)((int)pvVar7 + 1)) {
    param_4[(int)pvVar7] = param_4[(int)pvVar7] * iVar5;
  }
  return 1;
}


