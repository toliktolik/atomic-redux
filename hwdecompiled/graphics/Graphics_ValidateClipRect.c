/*
 * Function: Graphics_ValidateClipRect
 * Address: 00479450
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Graphics_ValidateClipRect(void *this,int *param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  undefined1 local_154 [88];
  undefined1 local_fc [88];
  undefined1 local_a4 [88];
  int local_4c;
  int local_48;
  int local_44;
  int local_40;
  int local_3c;
  int local_38;
  int local_34;
  int local_30;
  int local_2c;
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  void *local_18;
  int local_14;
  void *local_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  piVar4 = param_2;
  local_8 = 0xffffffff;
  puStack_c = &DAT_00514681;
  local_10 = ExceptionList;
  iVar2 = param_1[2] / 3;
  iVar3 = param_1[3] / 3;
  local_38 = *param_1;
  iVar1 = param_1[1];
  local_34 = param_1[2] + iVar2 * -2;
  local_30 = param_1[3] + iVar3 * -2;
  ExceptionList = &local_10;
  local_2c = local_38;
  local_28 = iVar1;
  local_24 = iVar2;
  local_20 = iVar3;
  local_18 = this;
  Graphics_ProcessImageTransform(this,param_3,*param_2,param_2[1],&local_2c);
  local_3c = local_34 + local_38 + iVar2;
  local_2c = local_3c;
  local_28 = iVar1;
  local_24 = iVar2;
  local_20 = iVar3;
  Graphics_ProcessImageTransform
            (local_18,param_3,(*param_2 - iVar2) + param_2[2],param_2[1],&local_2c);
  local_2c = local_38;
  local_28 = local_30 + iVar1 + iVar3;
  local_24 = iVar2;
  local_20 = iVar3;
  local_1c = local_28;
  Graphics_ProcessImageTransform
            (local_18,param_3,*param_2,(param_2[3] - iVar3) + param_2[1],&local_2c);
  local_2c = local_3c;
  local_28 = local_1c;
  local_24 = iVar2;
  local_20 = iVar3;
  Graphics_ProcessImageTransform
            (local_18,param_3,(*param_2 - iVar2) + param_2[2],(param_2[3] - iVar3) + param_2[1],
             &local_2c);
  Graphics_SetRenderTarget(local_fc,(int)local_18);
  iVar5 = param_2[2] + iVar2 * -2;
  local_8 = 0;
  Graphics_SetClipRect(local_fc,*param_2 + iVar2,param_2[1],iVar5,param_2[3]);
  local_14 = 0;
  if (0 < (iVar5 + -1 + local_34) / local_34) {
    local_4c = local_38 + iVar2;
    local_24 = local_34;
    local_48 = local_1c;
    local_44 = local_34;
    param_2 = (int *)0x0;
    local_40 = iVar3;
    local_28 = iVar1;
    local_20 = iVar3;
    do {
      local_2c = local_38 + iVar2;
      Graphics_ProcessImageTransform
                (local_fc,param_3,(int)param_2 + iVar2 + *piVar4,piVar4[1],&local_2c);
      Graphics_ProcessImageTransform
                (local_fc,param_3,(int)param_2 + iVar2 + *piVar4,(piVar4[3] - iVar3) + piVar4[1],
                 &local_4c);
      local_14 = local_14 + 1;
      param_2 = (int *)((int)param_2 + local_34);
    } while (local_14 < (local_34 + iVar2 * -2 + -1 + piVar4[2]) / local_34);
  }
  Graphics_SetRenderTarget(local_a4,(int)local_18);
  local_1c = piVar4[3] + iVar3 * -2;
  local_8 = CONCAT31(local_8._1_3_,1);
  Graphics_SetClipRect(local_a4,*piVar4,piVar4[1] + iVar3,piVar4[2],local_1c);
  param_2 = (int *)0x0;
  if (0 < (local_1c + -1 + local_30) / local_30) {
    local_4c = local_38;
    local_28 = iVar1 + iVar3;
    local_40 = local_30;
    local_2c = local_3c;
    local_20 = local_30;
    local_14 = 0;
    local_44 = iVar2;
    local_24 = iVar2;
    do {
      local_48 = iVar1 + iVar3;
      Graphics_ProcessImageTransform
                (local_a4,param_3,*piVar4,piVar4[1] + local_14 + iVar3,&local_4c);
      Graphics_ProcessImageTransform
                (local_a4,param_3,(*piVar4 - iVar2) + piVar4[2],piVar4[1] + local_14 + iVar3,
                 &local_2c);
      local_14 = local_14 + local_30;
      param_2 = (int *)((int)param_2 + 1);
    } while ((int)param_2 < (piVar4[3] + iVar3 * -2 + -1 + local_30) / local_30);
  }
  Graphics_SetRenderTarget(local_154,(int)local_18);
  local_1c = piVar4[3] + iVar3 * -2;
  iVar5 = piVar4[2] + iVar2 * -2;
  local_8 = CONCAT31(local_8._1_3_,2);
  Graphics_SetClipRect(local_154,*piVar4 + iVar2,piVar4[1] + iVar3,iVar5,local_1c);
  local_14 = 0;
  if (0 < (iVar5 + -1 + local_34) / local_34) {
    local_3c = (local_1c + -1 + local_30) / local_30;
    local_18 = (void *)0x0;
    do {
      param_2 = (int *)0x0;
      if (0 < local_3c) {
        local_4c = local_38 + iVar2;
        local_48 = iVar1 + iVar3;
        local_44 = local_34;
        local_40 = local_30;
        local_1c = 0;
        do {
          Graphics_ProcessImageTransform
                    (local_154,param_3,*piVar4 + (int)local_18 + iVar2,piVar4[1] + local_1c + iVar3,
                     &local_4c);
          local_1c = local_1c + local_30;
          param_2 = (int *)((int)param_2 + 1);
          local_3c = (piVar4[3] + iVar3 * -2 + -1 + local_30) / local_30;
        } while ((int)param_2 < local_3c);
      }
      local_14 = local_14 + 1;
      local_18 = (void *)((int)local_18 + local_34);
    } while (local_14 < (local_34 + iVar2 * -2 + -1 + piVar4[2]) / local_34);
  }
  ExceptionList = local_10;
  return;
}


