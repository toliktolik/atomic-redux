/*
 * Function: Renderer_Translate
 * Address: 004cc8c0
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall Renderer_Translate(void *this,void *param_1,byte *param_2,int *param_3)

{
  byte *pbVar1;
  char *pcVar2;
  byte bVar3;
  char cVar4;
  bool bVar5;
  void *this_00;
  byte *pbVar6;
  uint uVar7;
  void *extraout_ECX;
  void *extraout_ECX_00;
  void *this_01;
  void *extraout_ECX_01;
  char *pcVar8;
  char *pcVar9;
  undefined4 *in_stack_ffffffd0;
  undefined4 *in_stack_ffffffd4;
  
  this_00 = DAT_00569f5c;
  *param_3 = 0;
  if (param_2 != (byte *)0x0) {
    pbVar6 = param_2;
    do {
      bVar3 = *pbVar6;
      this = (void *)CONCAT31((int3)((uint)this >> 8),bVar3);
      pbVar6 = pbVar6 + 1;
    } while (bVar3 != 0);
    uVar7 = (int)pbVar6 - (int)(param_2 + 1);
    if (uVar7 != 0) {
      pbVar6 = (byte *)CPU_Instruction12((int)param_1,uVar7 + 1);
      *param_3 = (int)pbVar6;
      bVar3 = *param_2;
      this_01 = extraout_ECX;
      while (bVar3 != 0) {
        bVar3 = *param_2;
        if (((char)bVar3 < ' ') || (('~' < (char)bVar3 && (bVar3 < 0xa1)))) {
          Exception_Release(&stack0xffffffd0,"invalid keyword character 0x%02X");
          CPU_Instruction23(&stack0xffffffd0,(int)param_1,(undefined4 *)&stack0xffffffd0);
          *pbVar6 = 0x20;
          this_01 = extraout_ECX_00;
        }
        else {
          *pbVar6 = bVar3;
        }
        pbVar1 = param_2 + 1;
        param_2 = param_2 + 1;
        pbVar6 = pbVar6 + 1;
        bVar3 = *pbVar1;
      }
      *pbVar6 = 0;
      pcVar9 = (char *)(*param_3 + -1 + uVar7);
      if (*pcVar9 == ' ') {
        CPU_Instruction23(param_1,(int)param_1,(undefined4 *)"trailing spaces removed from keyword")
        ;
        cVar4 = *pcVar9;
        while (this_01 = extraout_ECX_01, cVar4 == ' ') {
          *pcVar9 = '\0';
          pcVar8 = pcVar9 + -1;
          pcVar9 = pcVar9 + -1;
          uVar7 = uVar7 - 1;
          cVar4 = *pcVar8;
        }
      }
      pcVar9 = (char *)*param_3;
      if (*pcVar9 == ' ') {
        CPU_Instruction23(this_01,(int)param_1,(undefined4 *)"leading spaces removed from keyword");
        cVar4 = *pcVar9;
        while (cVar4 == ' ') {
          pcVar8 = pcVar9 + 1;
          pcVar9 = pcVar9 + 1;
          uVar7 = uVar7 - 1;
          cVar4 = *pcVar8;
        }
      }
      pcVar8 = (char *)*param_3;
      bVar5 = false;
      cVar4 = *pcVar9;
      while (cVar4 != '\0') {
        if (cVar4 == ' ') {
          if (bVar5) {
            uVar7 = uVar7 - 1;
          }
          else {
            *pcVar8 = ' ';
            pcVar8 = pcVar8 + 1;
            bVar5 = true;
          }
        }
        else {
          *pcVar8 = cVar4;
          pcVar8 = pcVar8 + 1;
          bVar5 = false;
        }
        pcVar2 = pcVar9 + 1;
        pcVar9 = pcVar9 + 1;
        cVar4 = *pcVar2;
      }
      *pcVar8 = '\0';
      if (uVar7 != 0) {
        if (0x4f < uVar7) {
          CPU_Instruction23(param_1,(int)param_1,
                            (undefined4 *)"keyword length must be 1 - 79 characters");
          param_3[0x4f] = 0;
        }
        Exception_SetMessage(this_00,in_stack_ffffffd0,in_stack_ffffffd4);
        return;
      }
      CPU_Instruction23(pcVar8,(int)param_1,(undefined4 *)"zero length keyword");
      Exception_SetMessage(this_00,in_stack_ffffffd0,in_stack_ffffffd4);
      return;
    }
  }
  CPU_Instruction23(this,(int)param_1,(undefined4 *)"zero length keyword");
  Exception_SetMessage(this_00,in_stack_ffffffd0,in_stack_ffffffd4);
  return;
}


