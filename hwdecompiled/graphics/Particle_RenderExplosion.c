/*
 * Function: Particle_RenderExplosion
 * Address: 00437c50
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __fastcall Particle_RenderExplosion(int param_1)

{
  char *pcVar1;
  int iVar2;
  void *pvVar3;
  char *pcVar4;
  int *piVar5;
  int extraout_ECX;
  int extraout_ECX_00;
  bool bVar6;
  ulonglong uVar7;
  undefined1 uVar8;
  _String_base local_44 [4];
  uint local_40;
  undefined4 local_30;
  uint local_2c;
  undefined1 local_28 [16];
  void *local_18;
  undefined4 local_14;
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x5120a2;
  local_10 = ExceptionList;
  bVar6 = false;
  local_14 = 0;
  ExceptionList = &local_10;
  Boss_ProcessWormMechworm(param_1);
  Boss_ProcessRobotXBot(param_1);
  pvVar3 = *(void **)(param_1 + 0x4c);
  if (*(char *)((int)pvVar3 + 0x327) == '\0') {
    uVar7 = Math_FloatToUInt64();
    iVar2 = (int)uVar7;
    uVar7 = Math_FloatToUInt64();
    Game_DisplayScoreChange(pvVar3,-1000,(int)uVar7,iVar2);
  }
  else {
    pvVar3 = operator_new(0x4c);
    local_8 = 0;
    iVar2 = extraout_ECX;
    local_18 = pvVar3;
    if (pvVar3 != (void *)0x0) {
      local_30 = 0;
      local_40 = local_40 & 0xffffff00;
      local_2c = 0xf;
      pcVar1 = "-0:30";
      do {
        pcVar4 = pcVar1;
        pcVar1 = pcVar4 + 1;
      } while (*pcVar4 != '\0');
      String_Assign(local_44,(_String_base *)&DAT_00530648,(uint)(pcVar4 + -0x530648));
      bVar6 = true;
      local_8 = CONCAT31(local_8._1_3_,1);
      local_14 = 1;
      piVar5 = (int *)SexyWidget_ApplyMatrix(local_28,0xff,0,0);
      uVar8 = 0;
      uVar7 = Math_FloatToUInt64();
      iVar2 = (int)uVar7;
      uVar7 = Math_FloatToUInt64();
      FloatingText_Constructor
                (pvVar3,*(int *)(param_1 + 0x4c),local_44,(int)uVar7,iVar2,uVar8,piVar5);
      iVar2 = extraout_ECX_00;
    }
    local_8 = 0xffffffff;
    if (bVar6) {
      if (0xf < local_2c) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(iVar2,local_40);
      }
      local_2c = 0xf;
      local_30 = 0;
      local_40 = local_40 & 0xffffff00;
    }
    *(int *)(*(int *)(param_1 + 0x4c) + 0x180) = *(int *)(*(int *)(param_1 + 0x4c) + 0x180) + 6000;
    iVar2 = *(int *)(param_1 + 0x4c);
    if (*(int *)(iVar2 + 0x17c) - *(int *)(iVar2 + 0x180) < 0) {
      *(int *)(iVar2 + 0x180) = *(int *)(iVar2 + 0x17c);
    }
  }
  iVar2 = **(int **)(*(int *)(param_1 + 0x4c) + 0x5c);
  uVar7 = Math_FloatToUInt64();
  (**(code **)(iVar2 + 0xb8))(0x28,(int)uVar7);
  *(int *)(*(int *)(param_1 + 0x4c) + 0x1bc) = *(int *)(*(int *)(param_1 + 0x4c) + 0x1bc) + -1;
  ExceptionList = local_10;
  return;
}


