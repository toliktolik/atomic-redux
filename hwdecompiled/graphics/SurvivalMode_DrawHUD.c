/*
 * Function: SurvivalMode_DrawHUD
 * Address: 0042e220
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall SurvivalMode_DrawHUD(void *this,undefined4 *param_1)

{
  _String_base _Var1;
  undefined4 *this_00;
  char *pcVar2;
  undefined4 *puVar3;
  _String_base *p_Var4;
  char *pcVar5;
  uint uVar6;
  int iVar7;
  int extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  ulonglong uVar8;
  uint unaff_retaddr;
  char cVar9;
  int iVar10;
  int iVar11;
  char cVar12;
  undefined4 *puVar13;
  undefined1 local_70 [4];
  uint local_6c;
  undefined4 local_5c;
  uint local_58;
  _String_base local_54 [20];
  undefined1 local_40 [16];
  undefined1 local_30 [4];
  uint local_2c;
  int local_24 [5];
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  this_00 = param_1;
  local_8 = 0xffffffff;
  uStack_c = 0x511bf8;
  local_10 = ExceptionList;
  local_24[4] = DAT_00569f5c ^ unaff_retaddr;
  puVar13 = (undefined4 *)0x0;
  ExceptionList = &local_10;
  DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x6b4),param_1,0,0,'\0',0,0,'\0');
  Graphics_SetProjection(param_1,*(undefined4 *)(*(int *)((int)this + 0x5c) + 0x938));
  puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0,0xff,0);
  SexyWidget_SetRectangle(param_1,puVar3);
  if (*(char *)(*(int *)((int)this + 0x60) + 0x327) == '\0') {
    Exception_Release(local_54,&DAT_0052c7cc);
    param_1 = (undefined4 *)0x0;
    puVar3 = (undefined4 *)0x75;
    while( true ) {
      iVar7 = *(int *)(*(int *)((int)this + 0x5c) + 0x964);
      if (2 < iVar7) {
        iVar7 = 2;
      }
      if (iVar7 <= (int)param_1) break;
      puVar13 = puVar3;
      DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7f0),this_00,(int)puVar3,7,'\0',0,0,'\0')
      ;
      param_1 = (undefined4 *)((int)param_1 + 1);
      puVar3 = (undefined4 *)((int)puVar3 + 0x16);
    }
  }
  else {
    DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x874),param_1,0x6c,2,'\0',0,0,'\0');
    puVar13 = (undefined4 *)0x42e387;
    Exception_Release(local_54,"%i:%02i:%02i");
  }
  p_Var4 = local_54;
  local_24[3] = 0xf;
  local_24[2] = 0;
  local_2c = local_2c & 0xffffff00;
  do {
    _Var1 = *p_Var4;
    p_Var4 = p_Var4 + 1;
  } while (_Var1 != (_String_base)0x0);
  String_Assign(local_30,local_54,(int)p_Var4 - (int)(local_54 + 1));
  local_8 = 0;
  SexyWidget_DrawWithInterface(this_00,local_30,10,0x14);
  local_8 = 0xffffffff;
  if ((uint)local_24[3] < 0x10) {
    SexyWidget_SetColorizeFlag2(this_00,1);
    iVar7 = *(int *)(*(int *)((int)this + 0x60) + 300);
    if (iVar7 == 0) {
      puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0,0xff,0);
      SexyWidget_SetRectangle(this_00,puVar3);
      if (0 < *(int *)(*(int *)((int)this + 0x60) + 0x1a8)) {
        param_1 = (undefined4 *)0x1b6;
        iVar7 = 0;
        do {
          puVar13 = param_1;
          DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7f8),this_00,(int)param_1,7,'\0',
                     iVar7,0,'\0');
          iVar7 = iVar7 + 1;
          param_1 = param_1 + 5;
        } while (iVar7 < *(int *)(*(int *)((int)this + 0x60) + 0x1a8));
      }
    }
    else {
      uVar8 = Math_FloatToUInt64();
      uVar6 = (iVar7 * 5 & 0x2000007fU) * 4;
      if ((int)uVar6 < 0) {
        uVar6 = (uVar6 - 1 | 0xfffffe00) + 1;
      }
      if ((int)uVar6 < 0x100) {
        uVar6 = uVar6 & 0x800000ff;
        if ((int)uVar6 < 0) {
          uVar6 = (uVar6 - 1 | 0xffffff00) + 1;
        }
        uVar6 = 0xff - uVar6;
      }
      else {
        uVar6 = uVar6 & 0x800000ff;
        if ((int)uVar6 < 0) {
          uVar6 = (uVar6 - 1 | 0xffffff00) + 1;
        }
      }
      puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0xff,uVar6,0);
      SexyWidget_SetRectangle(this_00,puVar3);
      local_24[0] = 0;
      local_24[1] = 0;
      local_24[3] = 0x12;
      local_24[2] = (int)uVar8;
      Graphics_ProcessImageTransform
                (this_00,*(int *)(*(int *)(*(int *)((int)this + 0x5c) + 0x7ac) + 8),0x1b4,6,local_24
                );
    }
    SexyWidget_SetColorizeFlag2(this_00,0);
    puVar3 = (undefined4 *)SexyWidget_ApplyMatrix(local_24,0,0xff,0);
    SexyWidget_SetRectangle(this_00,puVar3);
    if (*(char *)(*(int *)((int)this + 0x60) + 0x327) == '\0') {
      SexyWidget_Translate(this_00,0x41,0);
      Exception_Release(local_54,&DAT_0052faf0);
      p_Var4 = local_54;
      local_58 = 0xf;
      local_5c = 0;
      local_6c = local_6c & 0xffffff00;
      do {
        _Var1 = *p_Var4;
        p_Var4 = p_Var4 + 1;
      } while (_Var1 != (_String_base)0x0);
      String_Assign(local_70,local_54,(int)p_Var4 - (int)(local_54 + 1));
                    /* WARNING: Load size is inaccurate */
      local_8 = 2;
      puVar3 = (undefined4 *)0x42e60c;
      (**(code **)(*this + 0x90))(local_40,this_00,0x14,local_70);
      local_8 = 0xffffffff;
      if (0xf < local_58) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(extraout_ECX,extraout_EDX_01);
      }
      local_58 = 0xf;
      local_5c = 0;
      local_6c = local_6c & 0xffffff00;
      SexyWidget_Translate(this_00,-0x41,0);
      DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x6c4),this_00,0xc4,6,'\0',0,0,'\0');
      cVar12 = '\0';
      iVar11 = 0;
      iVar10 = 0;
      cVar9 = '\x01';
      iVar7 = 0xb;
      uVar8 = Math_FloatToUInt64();
      DrawSprite(*(void **)(*(int *)((int)this + 0x5c) + 0x7f4),this_00,(int)uVar8,iVar7,cVar9,
                 iVar10,iVar11,cVar12);
    }
    else {
      local_24[3] = 0xf;
      local_24[2] = 0;
      local_2c = local_2c & 0xffffff00;
      pcVar2 = "SURVIVAL MODE";
      do {
        pcVar5 = pcVar2;
        pcVar2 = pcVar5 + 1;
      } while (*pcVar5 != '\0');
      String_Assign(local_30,(_String_base *)"SURVIVAL MODE",(uint)(pcVar5 + -0x52c828));
                    /* WARNING: Load size is inaccurate */
      puVar3 = (undefined4 *)0xffffffff;
      puVar13 = (undefined4 *)0x14;
      local_8 = 1;
      (**(code **)(*this + 0x94))(this_00,local_30,0xd1,0x14,0xffffffff,0xffffffff,1,0,0xffffffff);
      if (0xf < (uint)local_24[3]) {
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler(local_2c,extraout_EDX_00);
      }
    }
    ExceptionList = local_10;
    Exception_SetMessage((void *)(local_24[4] ^ unaff_retaddr),puVar13,puVar3);
    return;
  }
                    /* WARNING: Subroutine does not return */
  System_ShutdownHandler(local_2c,extraout_EDX);
}


