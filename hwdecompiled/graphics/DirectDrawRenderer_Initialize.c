/*
 * Function: DirectDrawRenderer_Initialize
 * Address: 0045cf40
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall DirectDrawRenderer_Initialize(void *this,char param_1,undefined4 param_2)

{
  int iVar1;
  void *pvVar2;
  _String_base *p_Var3;
  undefined4 uVar4;
  undefined4 extraout_ECX;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint extraout_EDX_01;
  uint extraout_EDX_02;
  undefined1 local_80 [28];
  _String_base local_64 [28];
  undefined1 local_48 [28];
  undefined1 local_2c [28];
  void *local_10;
  undefined4 uStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  uStack_c = 0x513aa0;
  local_10 = ExceptionList;
  if (*(char *)(*(int *)((int)this + 0x328) + 0x38) != param_1) {
    ExceptionList = &local_10;
    *(undefined1 *)((int)this + 0x546) = 1;
    *(char *)(*(int *)((int)this + 0x328) + 0x38) = param_1;
    if ((char)param_2 != '\0') {
                    /* WARNING: Load size is inaccurate */
      (**(code **)(*this + 0xb0))();
                    /* WARNING: Load size is inaccurate */
      (**(code **)(*this + 0x38))();
      iVar1 = DirectXRenderer_Initialize3DGraphics
                        (*(void **)((int)this + 0x328),*(HWND *)((int)this + 0x30c),
                         (int *)(uint)*(byte *)((int)this + 0x2ff));
      Threading_InitializeAndSetupMusic((int)this);
      if (param_1 == '\0') {
        if (iVar1 != 0) {
          pvVar2 = System_CreateThread(local_80,iVar1);
          local_8 = 0;
          p_Var3 = Survival_LoadConfiguration
                             (local_64,(_String_base *)"Failed to initialize DirectDraw: ",
                              (int)pvVar2);
          local_8._0_1_ = 1;
          p_Var3 = Intel_DisplayPopulationData
                             (extraout_ECX,(uint)local_48,(_String_base *)local_48,p_Var3,
                              (_String_base *)&DAT_00531ca0);
          iVar1 = *(int *)((int)this + 0x328) + 0xce4;
          local_8._0_1_ = 2;
          p_Var3 = Background_ProcessBackgroundLayer
                             (iVar1,(uint)local_2c,(_String_base *)local_2c,p_Var3,iVar1);
                    /* WARNING: Load size is inaccurate */
          local_8 = CONCAT31(local_8._1_3_,3);
          (**(code **)(*this + 0x70))(p_Var3);
          String_Destructor((int)local_2c,extraout_EDX);
          String_Destructor((int)local_48,extraout_EDX_00);
          String_Destructor((int)local_64,extraout_EDX_01);
          local_8 = 0xffffffff;
          String_Destructor((int)local_80,extraout_EDX_02);
          Algorithm_EqualRange(this,(char *)0x1);
        }
      }
      else if (iVar1 != 0) {
        DirectDrawRenderer_Initialize(this,'\0',param_2);
        ExceptionList = local_10;
        return;
      }
      uVar4 = SexyWidget_GetRotation(*(int *)((int)this + 0x328));
      *(undefined4 *)(*(int *)((int)this + 0x2dc) + 0x10) = uVar4;
      UI_Widget_ValidateRender(*(int *)((int)this + 0x2dc));
    }
  }
  ExceptionList = local_10;
  return;
}


