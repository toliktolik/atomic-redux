/*
 * Function: Graphics_DrawImageTransformed
 * Address: 004740b0
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __thiscall Graphics_DrawImageTransformed(void *this,void *param_1,int *param_2,double *param_3)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double *pdVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int iVar11;
  uint *puVar12;
  uint *extraout_ECX;
  uint *extraout_ECX_00;
  int *piVar13;
  int iVar14;
  char *extraout_ECX_01;
  uint *extraout_ECX_02;
  uint *extraout_ECX_03;
  int *piVar15;
  undefined2 extraout_DX;
  int *piVar16;
  uint uVar17;
  byte *pbVar18;
  int *piVar19;
  int unaff_EBX;
  int iVar20;
  uint unaff_ESI;
  int iVar21;
  uint uVar22;
  int *piVar23;
  uint uVar24;
  uint *puVar25;
  int iVar26;
  undefined4 *puVar27;
  int iVar28;
  ulonglong uVar29;
  ulonglong uVar30;
  undefined4 in_stack_ffffffa4;
  byte *in_stack_ffffffa8;
  uint uStack_54;
  char *pcStack_44;
  char *pcStack_3c;
  int *local_30;
  int *local_2c;
  int *local_24;
  int *local_20;
  int local_1c;
  int local_18;
  int local_14;
  int *local_10;
  
  pdVar5 = param_3;
                    /* WARNING: Load size is inaccurate */
  (**(code **)(*this + 100))();
  uVar29 = Memory_ValidateHeap(param_1,(undefined1 *)param_1,0,0x566184,
                               &Sexy::MemoryImage::RTTI_Type_Descriptor,0,unaff_ESI,unaff_EBX,
                               in_stack_ffffffa4,in_stack_ffffffa8);
  piVar13 = (int *)uVar29;
  if (piVar13 != (int *)0x0) {
    iVar6 = piVar13[10];
    if (iVar6 == 0) {
      iVar6 = (**(code **)(*piVar13 + 100))();
                    /* WARNING: Load size is inaccurate */
      iVar7 = (**(code **)(*this + 100))();
      iVar8 = SexyWidget_GetWidth((int)piVar13);
      Math_FloatingPointRound(*(char **)((int)param_3 + 4),(short)*(undefined4 *)param_3,*param_3);
      uVar29 = Math_FloatToUInt64();
      local_1c = (int)uVar29;
      Math_FloatingPointRound(*(char **)(param_3 + 1),(short)(uVar29 >> 0x20),param_3[1]);
      uVar29 = Math_FloatToUInt64();
      local_18 = (int)uVar29;
      SystemCall_Handler(extraout_ECX,(int)(uVar29 >> 0x20),
                         (*param_3 - (double)local_1c) + param_3[2]);
      uVar29 = Math_FloatToUInt64();
      local_10 = (int *)uVar29;
      SystemCall_Handler(extraout_ECX_00,(int)(uVar29 >> 0x20),
                         (param_3[1] - (double)local_18) + param_3[3]);
      uVar29 = Math_FloatToUInt64();
      piVar13 = (int *)uVar29;
      if (local_1c < 0) {
        local_1c = 0;
      }
      if (local_18 < 0) {
        local_18 = 0;
      }
      if (*(int *)((int)param_1 + 4) < (int)local_10 + local_1c) {
        local_10 = (int *)(*(int *)((int)param_1 + 4) - local_1c);
      }
      if (*(int *)((int)param_1 + 8) < (int)piVar13 + local_18) {
        piVar13 = (int *)(*(int *)((int)param_1 + 8) - local_18);
      }
      if ((0 < (int)local_10) && (0 < (int)piVar13)) {
        iVar10 = param_2[2];
        iVar21 = param_2[3];
        iVar20 = iVar10 + 4;
        uVar24 = iVar20 * (int)piVar13 * 0x10;
        piVar9 = (int *)operator_new(uVar24);
        piVar16 = piVar9;
        for (uVar24 = uVar24 >> 2; uVar24 != 0; uVar24 = uVar24 - 1) {
          *piVar16 = 0;
          piVar16 = piVar16 + 1;
        }
        for (iVar14 = 0; iVar14 != 0; iVar14 = iVar14 + -1) {
          *(undefined1 *)piVar16 = 0;
          piVar16 = (int *)((int)piVar16 + 1);
        }
        if ((double)param_2[2] < param_3[2] == ((double)param_2[2] == param_3[2])) {
          local_1c = 1;
          if (1 < iVar10 + 3) {
            piVar16 = piVar9;
            do {
              piVar16 = piVar16 + 4;
              uVar29 = Math_FloatToUInt64();
              uVar30 = Math_FloatToUInt64();
              iVar14 = (int)uVar30;
              puVar12 = (uint *)(iVar6 + (local_18 * iVar8 + (int)uVar29) * 4);
              iVar26 = 0x101 - iVar14;
              piVar19 = piVar16;
              local_10 = piVar13;
              if (0 < (int)piVar13) {
                do {
                  uVar24 = *puVar12;
                  uVar17 = puVar12[1];
                  *piVar19 = (uVar17 & 0xff) * iVar26 + (uVar24 & 0xff) * iVar14;
                  piVar19[1] = (uVar17 >> 8 & 0xff) * iVar26 + (uVar24 >> 8 & 0xff) * iVar14;
                  piVar19[2] = (uVar17 >> 0x10 & 0xff) * iVar26 + (uVar24 >> 0x10 & 0xff) * iVar14;
                  piVar19[3] = (uVar17 >> 0x18) * iVar26 + (uVar24 >> 0x18) * iVar14;
                  puVar12 = puVar12 + 1 + iVar8 + -1;
                  local_10 = (int *)((int)local_10 + -1);
                  piVar19 = piVar19 + 3 + iVar20 * 4 + -3;
                } while (local_10 != (int *)0x0);
              }
              local_1c = local_1c + 1;
            } while (local_1c < iVar10 + 3);
          }
        }
        else {
          local_24 = (int *)0x0;
          if (0 < (int)local_10) {
            puVar12 = (uint *)(iVar6 + (local_18 * iVar8 + local_1c) * 4);
            do {
              uVar29 = Math_FloatToUInt64();
              iVar6 = (int)uVar29;
              uVar29 = Math_FloatToUInt64();
              if (iVar6 == (int)uVar29) {
                piVar19 = piVar9 + iVar6 * 4;
                uVar29 = Math_FloatToUInt64();
                iVar6 = (int)uVar29;
                piVar16 = piVar13;
                puVar25 = puVar12;
                if (0 < (int)piVar13) {
                  do {
                    uVar24 = *puVar25;
                    *piVar19 = *piVar19 + (uVar24 & 0xff) * iVar6;
                    piVar19[1] = piVar19[1] + (uVar24 >> 8 & 0xff) * iVar6;
                    piVar19[2] = piVar19[2] + (uVar24 >> 0x10 & 0xff) * iVar6;
                    piVar19[3] = piVar19[3] + (uVar24 >> 0x18) * iVar6;
                    piVar19 = piVar19 + 3 + iVar20 * 4 + -3;
                    piVar16 = (int *)((int)piVar16 + -1);
                    puVar25 = puVar25 + iVar8;
                  } while (piVar16 != (int *)0x0);
                }
              }
              else {
                uVar29 = Math_FloatToUInt64();
                iVar14 = (int)uVar29;
                uVar29 = Math_FloatToUInt64();
                iVar26 = (int)uVar29;
                piVar16 = piVar9 + iVar6 * 4;
                puVar25 = puVar12;
                local_20 = piVar13;
                if (0 < (int)piVar13) {
                  do {
                    uVar24 = *puVar25;
                    *piVar16 = *piVar16 + (uVar24 & 0xff) * iVar14;
                    uVar17 = uVar24 >> 8 & 0xff;
                    piVar16[1] = piVar16[1] + uVar17 * iVar14;
                    uVar22 = uVar24 >> 0x10 & 0xff;
                    piVar16[2] = piVar16[2] + uVar22 * iVar14;
                    piVar16[3] = piVar16[3] + (uVar24 >> 0x18) * iVar14;
                    piVar16[4] = piVar16[4] + (uVar24 & 0xff) * iVar26;
                    piVar16[5] = piVar16[5] + uVar17 * iVar26;
                    piVar16[6] = piVar16[6] + uVar22 * iVar26;
                    piVar16[7] = piVar16[7] + (uVar24 >> 0x18) * iVar26;
                    piVar16 = piVar16 + 7 + iVar20 * 4 + -7;
                    local_20 = (int *)((int)local_20 + -1);
                    puVar25 = puVar25 + iVar8;
                  } while (local_20 != (int *)0x0);
                }
              }
              local_24 = (int *)((int)local_24 + 1);
              puVar12 = puVar12 + 1;
            } while ((int)local_24 < (int)local_10);
          }
        }
        uVar24 = (iVar21 + 4) * iVar20 * 0x10;
        local_10 = (int *)operator_new(uVar24);
        puVar27 = local_10;
        for (uVar24 = uVar24 >> 2; uVar24 != 0; uVar24 = uVar24 - 1) {
          *puVar27 = 0;
          puVar27 = puVar27 + 1;
        }
        for (iVar6 = 0; iVar6 != 0; iVar6 = iVar6 + -1) {
          *(undefined1 *)puVar27 = 0;
          puVar27 = (undefined4 *)((int)puVar27 + 1);
        }
        dVar1 = (double)param_2[3];
        if (dVar1 < param_3[3] == (dVar1 == param_3[3])) {
          local_24 = (int *)0x1;
          if (1 < param_2[3] + 1) {
            piVar16 = local_10 + iVar20 * 4 + 4;
            do {
              Math_FloatToUInt64();
              uVar29 = Math_FloatToUInt64();
              iVar6 = (int)uVar29;
              uVar29 = Math_FloatToUInt64();
              iVar8 = (int)uVar29;
              iVar21 = 0x100 - iVar8;
              piVar15 = piVar9 + (iVar6 * iVar20 + 1) * 4;
              piVar19 = piVar15;
              if (iVar6 != (int)piVar13 + -1) {
                piVar19 = piVar9 + ((iVar6 + 1) * iVar20 + 1) * 4;
              }
              if (1 < iVar10 + 3) {
                local_30 = (int *)(iVar10 + 2);
                piVar23 = piVar16;
                do {
                  *piVar23 = *piVar15 * iVar8 + *piVar19 * iVar21;
                  piVar23[1] = piVar15[1] * iVar8 + piVar19[1] * iVar21;
                  piVar23[2] = piVar15[2] * iVar8 + piVar19[2] * iVar21;
                  piVar23[3] = piVar15[3] * iVar8 + piVar19[3] * iVar21;
                  piVar23 = piVar23 + 4;
                  piVar19 = piVar19 + 4;
                  piVar15 = piVar15 + 4;
                  local_30 = (int *)((int)local_30 + -1);
                } while (local_30 != (int *)0x0);
              }
              local_24 = (int *)((int)local_24 + 1);
              piVar16 = piVar16 + iVar20 * 4;
            } while ((int)local_24 < param_2[3] + 1);
          }
        }
        else {
          dVar1 = dVar1 / param_3[3];
          param_3 = (double *)0x0;
          dVar4 = ((double)local_18 - pdVar5[1]) * dVar1 + _DAT_0052a0f0;
          local_24 = piVar9;
          if (0 < (int)piVar13) {
            do {
              dVar2 = (double)(int)param_3 * dVar1 + dVar4;
              dVar3 = dVar2 + dVar1;
              Math_FloatingPointRound((char *)piVar9,(short)((ulonglong)dVar2 >> 0x20),dVar2);
              uVar29 = Math_FloatToUInt64();
              iVar6 = (int)uVar29;
              pcStack_3c = (char *)((ulonglong)dVar3 >> 0x20);
              Math_FloatingPointRound(pcStack_3c,SUB82(dVar3,0),dVar3);
              uVar29 = Math_FloatToUInt64();
              if (iVar6 == (int)uVar29) {
                piVar16 = local_10 + iVar6 * iVar20 * 4;
                uVar29 = Math_FloatToUInt64();
                iVar8 = (int)uVar29;
                iVar6 = iVar20;
                piVar9 = local_24;
                if (0 < iVar20) {
                  do {
                    *piVar16 = *piVar16 + *piVar9 * iVar8;
                    piVar16[1] = piVar16[1] + piVar9[1] * iVar8;
                    piVar16[2] = piVar16[2] + piVar9[2] * iVar8;
                    piVar16[3] = piVar16[3] + piVar9[3] * iVar8;
                    piVar16 = piVar16 + 4;
                    iVar6 = iVar6 + -1;
                    piVar9 = piVar9 + 4;
                  } while (iVar6 != 0);
                }
              }
              else {
                uVar30 = Math_FloatToUInt64();
                iVar8 = (int)uVar30;
                uVar30 = Math_FloatToUInt64();
                iVar10 = (int)uVar30;
                piVar16 = local_10 + iVar6 * iVar20 * 4;
                piVar19 = local_10 + (int)uVar29 * iVar20 * 4;
                piVar9 = local_24;
                local_30 = (int *)iVar20;
                if (0 < iVar20) {
                  do {
                    *piVar16 = *piVar16 + *piVar9 * iVar8;
                    *piVar19 = *piVar19 + *piVar9 * iVar10;
                    piVar16[1] = piVar16[1] + piVar9[1] * iVar8;
                    piVar19[1] = piVar19[1] + piVar9[1] * iVar10;
                    piVar16[2] = piVar16[2] + piVar9[2] * iVar8;
                    piVar19[2] = piVar19[2] + piVar9[2] * iVar10;
                    piVar16[3] = piVar16[3] + piVar9[3] * iVar8;
                    piVar19[3] = piVar19[3] + piVar9[3] * iVar10;
                    piVar16 = piVar16 + 4;
                    piVar19 = piVar19 + 4;
                    local_30 = (int *)((int)local_30 + -1);
                    piVar9 = piVar9 + 4;
                  } while (local_30 != (int *)0x0);
                }
              }
              param_3 = (double *)((int)param_3 + 1);
              piVar9 = piVar13;
              local_24 = local_24 + iVar20 * 4;
            } while ((int)param_3 < (int)piVar13);
          }
        }
        uVar24 = 0;
        local_2c = (int *)0x0;
        if (0 < param_2[3]) {
          local_24 = local_10 + iVar20 * 4 + 6;
          do {
            puVar12 = (uint *)(iVar7 + ((param_2[1] + (int)local_2c) * *(int *)((int)this + 4) +
                                       *param_2) * 4);
            local_30 = (int *)0x0;
            piVar13 = local_24;
            if (0 < param_2[2]) {
              do {
                uVar24 = (uint)*(ushort *)((int)piVar13 + 6);
                if (uVar24 != 0) {
                  uVar17 = *puVar12;
                  uVar22 = uVar17 >> 0x18;
                  iVar6 = (int)((ulonglong)(uVar24 * 0xff) /
                               (ulonglong)(longlong)(int)(uVar22 + uVar24));
                  iVar8 = 0x100 - iVar6;
                  uStack_54 = (uint)*(ushort *)((int)piVar13 + -6);
                  *puVar12 = ((uint)*(ushort *)((int)piVar13 + 2) * iVar6 & 0xffffff00) * 0x100 +
                             ((uVar17 & 0xff0000) * iVar8 >> 8 & 0xff0000) |
                             ((uVar17 & 0xff) * iVar8 >> 8 & 0xff) + ((int)(iVar6 * uStack_54) >> 8)
                             | ((uVar17 & 0xff00) * iVar8 >> 8 & 0xff00) +
                               (iVar6 * (uint)*(ushort *)((int)piVar13 + -2) & 0xffffff00) |
                             ((int)((0xff - uVar22) * uVar24) / 0xff + uVar22) * 0x1000000;
                }
                puVar12 = puVar12 + 1;
                local_30 = (int *)((int)local_30 + 1);
                piVar13 = piVar13 + 4;
              } while ((int)local_30 < param_2[2]);
            }
            uVar24 = (int)local_2c + 1;
            local_24 = local_24 + iVar20 * 4;
            local_2c = (int *)uVar24;
          } while ((int)uVar24 < param_2[3]);
        }
LAB_0047541e:
                    /* WARNING: Subroutine does not return */
        System_ShutdownHandler((int)local_10,uVar24);
      }
    }
    else {
      iVar7 = piVar13[0xb];
                    /* WARNING: Load size is inaccurate */
      iVar8 = (**(code **)(*this + 100))();
      iVar10 = SexyWidget_GetWidth((int)piVar13);
      Math_FloatingPointRound(*(char **)param_3,extraout_DX,*param_3);
      uVar29 = Math_FloatToUInt64();
      local_18 = (int)uVar29;
      Math_FloatingPointRound(extraout_ECX_01,(short)*(undefined4 *)((int)param_3 + 0xc),param_3[1])
      ;
      uVar29 = Math_FloatToUInt64();
      local_1c = (int)uVar29;
      SystemCall_Handler(extraout_ECX_02,(int)(uVar29 >> 0x20),
                         (*param_3 - (double)local_18) + param_3[2]);
      uVar29 = Math_FloatToUInt64();
      local_14 = (int)uVar29;
      SystemCall_Handler(extraout_ECX_03,(int)(uVar29 >> 0x20),
                         (param_3[1] - (double)local_1c) + param_3[3]);
      uVar29 = Math_FloatToUInt64();
      piVar13 = (int *)uVar29;
      if (local_18 < 0) {
        local_18 = 0;
      }
      if (local_1c < 0) {
        local_1c = 0;
      }
      if (*(int *)((int)param_1 + 4) < local_14 + local_18) {
        local_14 = *(int *)((int)param_1 + 4) - local_18;
      }
      if (*(int *)((int)param_1 + 8) < (int)piVar13 + local_1c) {
        piVar13 = (int *)(*(int *)((int)param_1 + 8) - local_1c);
      }
      if ((0 < local_14) && (0 < (int)piVar13)) {
        iVar21 = param_2[2];
        iVar20 = param_2[3];
        iVar14 = iVar21 + 4;
        uVar24 = iVar14 * (int)piVar13 * 0x10;
        piVar9 = (int *)operator_new(uVar24);
        piVar16 = piVar9;
        for (uVar24 = uVar24 >> 2; uVar24 != 0; uVar24 = uVar24 - 1) {
          *piVar16 = 0;
          piVar16 = piVar16 + 1;
        }
        for (iVar26 = 0; iVar26 != 0; iVar26 = iVar26 + -1) {
          *(undefined1 *)piVar16 = 0;
          piVar16 = (int *)((int)piVar16 + 1);
        }
        if ((double)param_2[2] < param_3[2] == ((double)param_2[2] == param_3[2])) {
          local_18 = 1;
          if (1 < iVar21 + 3) {
            piVar16 = piVar9;
            do {
              piVar16 = piVar16 + 4;
              uVar29 = Math_FloatToUInt64();
              uVar30 = Math_FloatToUInt64();
              iVar26 = (int)uVar30;
              iVar28 = 0x101 - iVar26;
              pbVar18 = (byte *)(local_1c * iVar10 + iVar7 + (int)uVar29);
              piVar19 = piVar16;
              local_30 = piVar13;
              if (0 < (int)piVar13) {
                do {
                  uVar24 = *(uint *)(iVar6 + (uint)*pbVar18 * 4);
                  uVar17 = *(uint *)(iVar6 + (uint)pbVar18[1] * 4);
                  *piVar19 = (uVar17 & 0xff) * iVar28 + (uVar24 & 0xff) * iVar26;
                  piVar19[1] = (uVar17 >> 8 & 0xff) * iVar28 + (uVar24 >> 8 & 0xff) * iVar26;
                  piVar19[2] = (uVar17 >> 0x10 & 0xff) * iVar28 + (uVar24 >> 0x10 & 0xff) * iVar26;
                  piVar19[3] = (uVar17 >> 0x18) * iVar28 + (uVar24 >> 0x18) * iVar26;
                  pbVar18 = pbVar18 + 1 + iVar10 + -1;
                  local_30 = (int *)((int)local_30 + -1);
                  piVar19 = piVar19 + 3 + iVar14 * 4 + -3;
                } while (local_30 != (int *)0x0);
              }
              local_18 = local_18 + 1;
            } while (local_18 < iVar21 + 3);
          }
        }
        else {
          local_20 = (int *)0x0;
          if (0 < local_14) {
            iVar7 = local_1c * iVar10 + local_18 + iVar7;
            do {
              uVar29 = Math_FloatToUInt64();
              iVar26 = (int)uVar29;
              uVar29 = Math_FloatToUInt64();
              pbVar18 = (byte *)((int)local_20 + iVar7);
              if (iVar26 == (int)uVar29) {
                piVar19 = piVar9 + iVar26 * 4;
                uVar29 = Math_FloatToUInt64();
                iVar26 = (int)uVar29;
                piVar16 = piVar13;
                if (0 < (int)piVar13) {
                  do {
                    uVar24 = *(uint *)(iVar6 + (uint)*pbVar18 * 4);
                    *piVar19 = *piVar19 + (uVar24 & 0xff) * iVar26;
                    piVar19[1] = piVar19[1] + (uVar24 >> 8 & 0xff) * iVar26;
                    piVar19[2] = piVar19[2] + (uVar24 >> 0x10 & 0xff) * iVar26;
                    piVar19[3] = piVar19[3] + (uVar24 >> 0x18) * iVar26;
                    piVar19 = piVar19 + 3 + iVar14 * 4 + -3;
                    pbVar18 = pbVar18 + iVar10;
                    piVar16 = (int *)((int)piVar16 + -1);
                  } while (piVar16 != (int *)0x0);
                }
              }
              else {
                uVar29 = Math_FloatToUInt64();
                iVar28 = (int)uVar29;
                uVar29 = Math_FloatToUInt64();
                iVar11 = (int)uVar29;
                piVar16 = piVar9 + iVar26 * 4;
                local_2c = piVar13;
                if (0 < (int)piVar13) {
                  do {
                    uVar24 = *(uint *)(iVar6 + (uint)*pbVar18 * 4);
                    *piVar16 = *piVar16 + iVar28 * (uVar24 & 0xff);
                    uStack_54 = uVar24 & 0xff;
                    uVar17 = uVar24 >> 8 & 0xff;
                    piVar16[1] = piVar16[1] + iVar28 * uVar17;
                    uVar22 = uVar24 >> 0x10 & 0xff;
                    piVar16[2] = piVar16[2] + iVar28 * uVar22;
                    piVar16[3] = piVar16[3] + iVar28 * (uVar24 >> 0x18);
                    piVar16[4] = piVar16[4] + iVar11 * uStack_54;
                    piVar16[5] = piVar16[5] + iVar11 * uVar17;
                    piVar16[6] = piVar16[6] + iVar11 * uVar22;
                    piVar16[7] = piVar16[7] + iVar11 * (uVar24 >> 0x18);
                    pbVar18 = pbVar18 + iVar10;
                    piVar16 = piVar16 + 7 + iVar14 * 4 + -7;
                    local_2c = (int *)((int)local_2c + -1);
                  } while (local_2c != (int *)0x0);
                }
              }
              local_20 = (int *)((int)local_20 + 1);
            } while ((int)local_20 < local_14);
          }
        }
        uVar24 = (iVar20 + 4) * iVar14 * 0x10;
        local_10 = (int *)operator_new(uVar24);
        puVar27 = local_10;
        for (uVar24 = uVar24 >> 2; uVar24 != 0; uVar24 = uVar24 - 1) {
          *puVar27 = 0;
          puVar27 = puVar27 + 1;
        }
        for (iVar6 = 0; iVar6 != 0; iVar6 = iVar6 + -1) {
          *(undefined1 *)puVar27 = 0;
          puVar27 = (undefined4 *)((int)puVar27 + 1);
        }
        dVar1 = (double)param_2[3];
        if (dVar1 < param_3[3] == (dVar1 == param_3[3])) {
          local_20 = (int *)0x1;
          if (1 < param_2[3] + 1) {
            piVar16 = local_10 + 4;
            do {
              piVar16 = piVar16 + iVar14 * 4;
              Math_FloatToUInt64();
              uVar29 = Math_FloatToUInt64();
              iVar6 = (int)uVar29;
              uVar29 = Math_FloatToUInt64();
              iVar7 = (int)uVar29;
              iVar10 = 0x100 - iVar7;
              piVar15 = piVar9 + (iVar6 * iVar14 + 1) * 4;
              piVar19 = piVar15;
              if (iVar6 != (int)piVar13 + -1) {
                piVar19 = piVar9 + ((iVar6 + 1) * iVar14 + 1) * 4;
              }
              if (1 < iVar21 + 3) {
                local_30 = (int *)(iVar21 + 2);
                piVar23 = piVar16;
                do {
                  *piVar23 = *piVar15 * iVar7 + *piVar19 * iVar10;
                  piVar23[1] = piVar15[1] * iVar7 + piVar19[1] * iVar10;
                  piVar23[2] = piVar15[2] * iVar7 + piVar19[2] * iVar10;
                  piVar23[3] = piVar15[3] * iVar7 + piVar19[3] * iVar10;
                  piVar23 = piVar23 + 4;
                  piVar19 = piVar19 + 4;
                  piVar15 = piVar15 + 4;
                  local_30 = (int *)((int)local_30 + -1);
                } while (local_30 != (int *)0x0);
              }
              local_20 = (int *)((int)local_20 + 1);
            } while ((int)local_20 < param_2[3] + 1);
          }
        }
        else {
          dVar1 = dVar1 / param_3[3];
          param_3 = (double *)0x0;
          dVar4 = ((double)local_1c - pdVar5[1]) * dVar1 + _DAT_0052a0f0;
          if (0 < (int)piVar13) {
            iVar6 = iVar14 * 0x10;
            local_2c = piVar9;
            do {
              dVar2 = (double)(int)param_3 * dVar1 + dVar4;
              dVar3 = dVar2 + dVar1;
              Math_FloatingPointRound((char *)piVar9,(short)((ulonglong)dVar2 >> 0x20),dVar2);
              uVar29 = Math_FloatToUInt64();
              iVar7 = (int)uVar29;
              pcStack_44 = (char *)((ulonglong)dVar3 >> 0x20);
              Math_FloatingPointRound(pcStack_44,SUB82(dVar3,0),dVar3);
              uVar29 = Math_FloatToUInt64();
              if (iVar7 == (int)uVar29) {
                piVar16 = local_10 + iVar7 * iVar14 * 4;
                uVar29 = Math_FloatToUInt64();
                iVar10 = (int)uVar29;
                iVar7 = iVar14;
                piVar9 = local_2c;
                if (0 < iVar14) {
                  do {
                    *piVar16 = *piVar16 + *piVar9 * iVar10;
                    piVar16[1] = piVar16[1] + piVar9[1] * iVar10;
                    piVar16[2] = piVar16[2] + piVar9[2] * iVar10;
                    piVar16[3] = piVar16[3] + piVar9[3] * iVar10;
                    piVar16 = piVar16 + 4;
                    iVar7 = iVar7 + -1;
                    piVar9 = piVar9 + 4;
                  } while (iVar7 != 0);
                }
              }
              else {
                uVar30 = Math_FloatToUInt64();
                iVar10 = (int)uVar30;
                uVar30 = Math_FloatToUInt64();
                iVar21 = (int)uVar30;
                piVar16 = local_10 + iVar7 * iVar14 * 4;
                piVar19 = local_10 + (int)uVar29 * iVar14 * 4;
                piVar9 = local_2c;
                local_30 = (int *)iVar14;
                if (0 < iVar14) {
                  do {
                    *piVar16 = *piVar16 + *piVar9 * iVar10;
                    *piVar19 = *piVar19 + *piVar9 * iVar21;
                    piVar16[1] = piVar16[1] + piVar9[1] * iVar10;
                    piVar19[1] = piVar19[1] + piVar9[1] * iVar21;
                    piVar16[2] = piVar16[2] + piVar9[2] * iVar10;
                    piVar19[2] = piVar19[2] + piVar9[2] * iVar21;
                    piVar16[3] = piVar16[3] + piVar9[3] * iVar10;
                    piVar19[3] = piVar19[3] + piVar9[3] * iVar21;
                    piVar16 = piVar16 + 4;
                    piVar19 = piVar19 + 4;
                    local_30 = (int *)((int)local_30 + -1);
                    piVar9 = piVar9 + 4;
                  } while (local_30 != (int *)0x0);
                }
              }
              local_2c = (int *)((int)local_2c + iVar6);
              param_3 = (double *)((int)param_3 + 1);
              piVar9 = piVar13;
            } while ((int)param_3 < (int)piVar13);
          }
        }
        uVar24 = 0;
        local_24 = (int *)0x0;
        if (0 < param_2[3]) {
          local_2c = local_10 + 6;
          do {
            local_2c = local_2c + iVar14 * 4;
            puVar12 = (uint *)(iVar8 + ((param_2[1] + (int)local_24) * *(int *)((int)this + 4) +
                                       *param_2) * 4);
            local_30 = (int *)0x0;
            piVar13 = local_2c;
            if (0 < param_2[2]) {
              do {
                uVar24 = (uint)*(ushort *)((int)piVar13 + 6);
                if (uVar24 != 0) {
                  uVar17 = *puVar12;
                  uVar22 = uVar17 >> 0x18;
                  iVar6 = (int)((ulonglong)(uVar24 * 0xff) /
                               (ulonglong)(longlong)(int)(uVar22 + uVar24));
                  iVar7 = 0x100 - iVar6;
                  *puVar12 = ((uint)*(ushort *)((int)piVar13 + 2) * iVar6 & 0xffffff00) * 0x100 +
                             ((uVar17 & 0xff0000) * iVar7 >> 8 & 0xff0000) |
                             ((uVar17 & 0xff) * iVar7 >> 8 & 0xff) +
                             ((int)(iVar6 * (uint)*(ushort *)((int)piVar13 + -6)) >> 8) |
                             ((uVar17 & 0xff00) * iVar7 >> 8 & 0xff00) +
                             (iVar6 * (uint)*(ushort *)((int)piVar13 + -2) & 0xffffff00) |
                             ((int)((0xff - uVar22) * uVar24) / 0xff + uVar22) * 0x1000000;
                }
                puVar12 = puVar12 + 1;
                local_30 = (int *)((int)local_30 + 1);
                piVar13 = piVar13 + 4;
              } while ((int)local_30 < param_2[2]);
            }
            uVar24 = (int)local_24 + 1;
            local_24 = (int *)uVar24;
          } while ((int)uVar24 < param_2[3]);
        }
        goto LAB_0047541e;
      }
    }
  }
  return;
}


