/*
 * Function: Graphics_DrawImageRLE
 * Address: 00473410
 * Category: graphics
 * Generated by Ghidra Bulk Exporter
 */

#include "../heavy_weapon_deluxe.h"


void __thiscall
Graphics_DrawImageRLE
          (void *this,undefined1 *param_1,uint *param_2,uint *param_3,int *param_4,int *param_5)

{
  uint uVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  uint *puVar7;
  byte *pbVar8;
  int iVar9;
  byte *pbVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int unaff_EBX;
  uint *puVar15;
  int iVar16;
  uint uVar17;
  uint unaff_EDI;
  ulonglong uVar18;
  undefined4 in_stack_ffffffd0;
  byte *in_stack_ffffffd4;
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  int local_18;
  byte local_14;
  uint *local_8;
  
  uVar18 = Memory_ValidateHeap(this,param_1,0,0x566184,&Sexy::MemoryImage::RTTI_Type_Descriptor,0,
                               unaff_EDI,unaff_EBX,in_stack_ffffffd0,in_stack_ffffffd4);
  piVar2 = (int *)uVar18;
  if (piVar2 != (int *)0x0) {
    iVar3 = piVar2[10];
    if (iVar3 == 0) {
      iVar3 = (**(code **)(*piVar2 + 100))();
      local_8 = (uint *)(iVar3 + (*(int *)(param_1 + 4) * param_4[1] + *param_4) * 4);
                    /* WARNING: Load size is inaccurate */
      iVar3 = (**(code **)(*this + 100))();
      param_3 = (uint *)(iVar3 + (int)(*(int *)((int)this + 4) * (int)param_3 + (int)param_2) * 4);
      if (((*(char *)((int)this + 0x32) == '\0') && (*(char *)((int)this + 0x31) == '\0')) &&
         (uVar4 = SexyWidget_SetTexture(param_5,&DAT_005a2378), (char)uVar4 == '\0')) {
        iVar3 = (**(code **)(*piVar2 + 0x38))();
        pbVar8 = (byte *)(*(int *)(param_1 + 4) * param_4[1] + *param_4 + iVar3);
        local_24 = 0;
        if (0 < param_4[3]) {
          do {
            pbVar10 = pbVar8;
            puVar7 = param_3;
            param_2 = local_8;
            for (iVar3 = param_4[2]; 0 < iVar3; iVar3 = iVar3 - (uint)local_14) {
              local_14 = *pbVar10;
              uVar5 = *param_2;
              if (iVar3 < (int)(uint)local_14) {
                local_14 = (byte)iVar3;
              }
              iVar16 = 0x100 - (uVar5 >> 0x18);
              if (iVar16 == 1) {
                for (uVar5 = (uint)local_14; uVar5 != 0; uVar5 = uVar5 - 1) {
                  *puVar7 = *param_2;
                  puVar7 = puVar7 + 1;
                  param_2 = param_2 + 1;
                }
              }
              else if (iVar16 == 0x100) {
                puVar7 = puVar7 + local_14;
                param_2 = param_2 + local_14;
              }
              else {
                uVar1 = *puVar7;
                param_2 = param_2 + 1;
                iVar9 = 0x100 - iVar16;
                *puVar7 = ((uVar1 & 0xff) * iVar16 >> 8) + ((uVar5 & 0xff) * iVar9 >> 8) & 0xff |
                          ((uVar1 & 0xff0000) * iVar16 >> 8) + ((uVar5 & 0xff0000) * iVar9 >> 8) &
                          0xffff0000 |
                          ((uVar1 & 0xff00) * iVar16 >> 8) + ((uVar5 & 0xff00) * iVar9 >> 8) &
                          0xff00 | 0xff000000;
                puVar7 = puVar7 + 1;
                if (1 < local_14) {
                  local_18 = local_14 - 1;
                  do {
                    uVar5 = *param_2;
                    param_2 = param_2 + 1;
                    uVar1 = *puVar7;
                    uVar17 = uVar5 >> 0x18;
                    iVar16 = 0x100 - uVar17;
                    *puVar7 = ((uVar1 & 0xff) * iVar16 >> 8) + ((uVar5 & 0xff) * uVar17 >> 8) & 0xff
                              | ((uVar1 & 0xff0000) * iVar16 >> 8) +
                                ((uVar5 & 0xff0000) * uVar17 >> 8) & 0xffff0000 |
                              ((uVar1 & 0xff00) * iVar16 >> 8) + ((uVar5 & 0xff00) * uVar17 >> 8) &
                              0xff00 | 0xff000000;
                    puVar7 = puVar7 + 1;
                    local_18 = local_18 + -1;
                  } while (local_18 != 0);
                }
              }
              pbVar10 = pbVar10 + local_14;
            }
            param_3 = param_3 + *(int *)((int)this + 4);
            local_8 = local_8 + *(int *)(param_1 + 4);
            pbVar8 = pbVar8 + *(int *)(param_1 + 4);
            local_24 = local_24 + 1;
          } while (local_24 < param_4[3]);
                    /* WARNING: Load size is inaccurate */
          (**(code **)(*this + 0x4c))();
          return;
        }
      }
      else {
        uVar4 = SexyWidget_ProcessTexture(param_5,&DAT_005a2378);
        if ((char)uVar4 == '\0') {
          iVar3 = *param_5;
          iVar16 = param_5[3];
          iVar9 = param_5[1];
          iVar13 = param_5[2];
          local_1c = 0;
          if (0 < param_4[3]) {
            do {
              param_2 = param_3;
              local_20 = 0;
              puVar7 = local_8;
              if (0 < param_4[2]) {
                do {
                  uVar5 = *param_2;
                  uVar1 = *puVar7;
                  uVar17 = ((uVar1 >> 0x18) * iVar16) / 0xff;
                  if (uVar17 != 0) {
                    iVar11 = (int)((0xff - (uVar5 >> 0x18)) * uVar17) / 0xff + (uVar5 >> 0x18);
                    iVar6 = (int)(uVar17 * 0xff) / iVar11;
                    iVar12 = 0x100 - iVar6;
                    *param_2 = (((uVar1 & 0xff0000) * iVar6 >> 8) * iVar3 >> 8) +
                               ((uVar5 & 0xff0000) * iVar12 >> 8) & 0xff0000 |
                               ((uVar1 & 0xff) * iVar6 * iVar13 >> 0x10) +
                               ((uVar5 & 0xff) * iVar12 >> 8) & 0xff |
                               ((uVar1 & 0xff00) * iVar6 * iVar9 >> 0x10) +
                               ((uVar5 & 0xff00) * iVar12 >> 8) & 0xff00 | iVar11 * 0x1000000;
                  }
                  param_2 = param_2 + 1;
                  local_20 = local_20 + 1;
                  puVar7 = puVar7 + 1;
                } while (local_20 < param_4[2]);
              }
              param_3 = param_3 + *(int *)((int)this + 4);
              local_8 = local_8 + *(int *)(param_1 + 4);
              local_1c = local_1c + 1;
            } while (local_1c < param_4[3]);
                    /* WARNING: Load size is inaccurate */
            (**(code **)(*this + 0x4c))();
            return;
          }
        }
        else {
          local_20 = 0;
          if (0 < param_4[3]) {
            do {
              local_24 = 0;
              puVar7 = param_3;
              puVar15 = local_8;
              if (0 < param_4[2]) {
                do {
                  uVar5 = *puVar15;
                  uVar1 = *puVar7;
                  uVar17 = uVar5 >> 0x18;
                  if (uVar17 != 0) {
                    iVar16 = (int)((0xff - (uVar1 >> 0x18)) * uVar17) / 0xff + (uVar1 >> 0x18);
                    iVar3 = (int)(uVar17 * 0xff) / iVar16;
                    iVar9 = 0x100 - iVar3;
                    *puVar7 = ((uVar1 & 0xff0000) * iVar9 >> 8) + ((uVar5 & 0xff0000) * iVar3 >> 8)
                              & 0xff0000 |
                              ((uVar1 & 0xff) * iVar9 >> 8) + ((uVar5 & 0xff) * iVar3 >> 8) & 0xff |
                              ((uVar1 & 0xff00) * iVar9 >> 8) + ((uVar5 & 0xff00) * iVar3 >> 8) &
                              0xff00 | iVar16 * 0x1000000;
                  }
                  local_24 = local_24 + 1;
                  puVar7 = puVar7 + 1;
                  puVar15 = puVar15 + 1;
                } while (local_24 < param_4[2]);
              }
              param_3 = param_3 + *(int *)((int)this + 4);
              local_8 = local_8 + *(int *)(param_1 + 4);
              local_20 = local_20 + 1;
            } while (local_20 < param_4[3]);
                    /* WARNING: Load size is inaccurate */
            (**(code **)(*this + 0x4c))();
            return;
          }
        }
      }
    }
    else {
      local_8 = (uint *)(*(int *)(param_1 + 4) * param_4[1] + piVar2[0xb] + *param_4);
                    /* WARNING: Load size is inaccurate */
      iVar16 = (**(code **)(*this + 100))();
      param_3 = (uint *)(iVar16 + (int)(*(int *)((int)this + 4) * (int)param_3 + (int)param_2) * 4);
      if (((*(char *)((int)this + 0x32) == '\0') && (*(char *)((int)this + 0x31) == '\0')) &&
         (uVar4 = SexyWidget_SetTexture(param_5,&DAT_005a2378), (char)uVar4 == '\0')) {
        iVar16 = (**(code **)(*piVar2 + 0x38))();
        pbVar8 = (byte *)(*(int *)(param_1 + 4) * param_4[1] + *param_4 + iVar16);
        local_28 = 0;
        if (0 < param_4[3]) {
          do {
            pbVar10 = pbVar8;
            puVar7 = param_3;
            param_2 = local_8;
            for (iVar16 = param_4[2]; 0 < iVar16; iVar16 = iVar16 - (uint)(byte)local_18) {
              uVar5 = *(uint *)(iVar3 + (uint)(byte)*param_2 * 4);
              local_18._0_1_ = *pbVar10;
              if (iVar16 < (int)(uint)(byte)local_18) {
                local_18._0_1_ = (byte)iVar16;
              }
              iVar9 = 0x100 - (uVar5 >> 0x18);
              if (iVar9 == 1) {
                for (uVar5 = (uint)(byte)local_18; uVar5 != 0; uVar5 = uVar5 - 1) {
                  *puVar7 = *(uint *)(iVar3 + (uint)(byte)*param_2 * 4);
                  puVar7 = puVar7 + 1;
                  param_2 = (uint *)((int)param_2 + 1);
                }
              }
              else if (iVar9 == 0x100) {
                puVar7 = puVar7 + (byte)local_18;
                param_2 = (uint *)((int)param_2 + (uint)(byte)local_18);
              }
              else {
                uVar1 = *puVar7;
                iVar13 = 0x100 - iVar9;
                param_2 = (uint *)((int)param_2 + 1);
                *puVar7 = ((uVar1 & 0xff) * iVar9 >> 8) + ((uVar5 & 0xff) * iVar13 >> 8) & 0xff |
                          ((uVar1 & 0xff0000) * iVar9 >> 8) + ((uVar5 & 0xff0000) * iVar13 >> 8) &
                          0xffff0000 |
                          ((uVar1 & 0xff00) * iVar9 >> 8) + ((uVar5 & 0xff00) * iVar13 >> 8) &
                          0xff00 | 0xff000000;
                puVar7 = puVar7 + 1;
                if (1 < (byte)local_18) {
                  local_20 = (byte)local_18 - 1;
                  do {
                    uVar5 = *(uint *)(iVar3 + (uint)(byte)*param_2 * 4);
                    param_2 = (uint *)((int)param_2 + 1);
                    uVar1 = *puVar7;
                    uVar17 = uVar5 >> 0x18;
                    iVar9 = 0x100 - uVar17;
                    *puVar7 = ((uVar1 & 0xff) * iVar9 >> 8) + ((uVar5 & 0xff) * uVar17 >> 8) & 0xff
                              | ((uVar1 & 0xff0000) * iVar9 >> 8) +
                                ((uVar5 & 0xff0000) * uVar17 >> 8) & 0xffff0000 |
                              ((uVar1 & 0xff00) * iVar9 >> 8) + ((uVar5 & 0xff00) * uVar17 >> 8) &
                              0xff00 | 0xff000000;
                    puVar7 = puVar7 + 1;
                    local_20 = local_20 + -1;
                  } while (local_20 != 0);
                }
              }
              pbVar10 = pbVar10 + (byte)local_18;
            }
            param_3 = param_3 + *(int *)((int)this + 4);
            local_8 = (uint *)((int)local_8 + *(int *)(param_1 + 4));
            pbVar8 = pbVar8 + *(int *)(param_1 + 4);
            local_28 = local_28 + 1;
          } while (local_28 < param_4[3]);
                    /* WARNING: Load size is inaccurate */
          (**(code **)(*this + 0x4c))();
          return;
        }
      }
      else {
        uVar4 = SexyWidget_ProcessTexture(param_5,&DAT_005a2378);
        if ((char)uVar4 == '\0') {
          iVar16 = param_5[3];
          iVar9 = *param_5;
          iVar13 = param_5[1];
          iVar6 = param_5[2];
          local_20 = 0;
          if (0 < param_4[3]) {
            do {
              param_2 = param_3;
              local_24 = 0;
              puVar7 = local_8;
              if (0 < param_4[2]) {
                do {
                  uVar5 = *(uint *)(iVar3 + (uint)(byte)*puVar7 * 4);
                  uVar1 = *param_2;
                  uVar17 = ((uVar5 >> 0x18) * iVar16) / 0xff;
                  if (uVar17 != 0) {
                    iVar12 = (int)((0xff - (uVar1 >> 0x18)) * uVar17) / 0xff + (uVar1 >> 0x18);
                    iVar11 = (int)(uVar17 * 0xff) / iVar12;
                    iVar14 = 0x100 - iVar11;
                    *param_2 = (((uVar5 & 0xff0000) * iVar11 >> 8) * iVar9 >> 8) +
                               ((uVar1 & 0xff0000) * iVar14 >> 8) & 0xff0000 |
                               ((uVar5 & 0xff) * iVar11 * iVar6 >> 0x10) +
                               ((uVar1 & 0xff) * iVar14 >> 8) & 0xff |
                               ((uVar5 & 0xff00) * iVar11 * iVar13 >> 0x10) +
                               ((uVar1 & 0xff00) * iVar14 >> 8) & 0xff00 | iVar12 * 0x1000000;
                  }
                  param_2 = param_2 + 1;
                  local_24 = local_24 + 1;
                  puVar7 = (uint *)((int)puVar7 + 1);
                } while (local_24 < param_4[2]);
              }
              param_3 = param_3 + *(int *)((int)this + 4);
              local_8 = (uint *)((int)local_8 + *(int *)(param_1 + 4));
              local_20 = local_20 + 1;
            } while (local_20 < param_4[3]);
          }
        }
        else {
          local_24 = 0;
          if (0 < param_4[3]) {
            do {
              local_28 = 0;
              puVar7 = param_3;
              puVar15 = local_8;
              if (0 < param_4[2]) {
                do {
                  uVar5 = *(uint *)(iVar3 + (uint)(byte)*puVar15 * 4);
                  uVar1 = *puVar7;
                  uVar17 = uVar5 >> 0x18;
                  if (uVar17 != 0) {
                    iVar9 = (int)((0xff - (uVar1 >> 0x18)) * uVar17) / 0xff + (uVar1 >> 0x18);
                    iVar16 = (int)(uVar17 * 0xff) / iVar9;
                    iVar13 = 0x100 - iVar16;
                    *puVar7 = ((uVar1 & 0xff0000) * iVar13 >> 8) +
                              ((uVar5 & 0xff0000) * iVar16 >> 8) & 0xff0000 |
                              ((uVar1 & 0xff) * iVar13 >> 8) + ((uVar5 & 0xff) * iVar16 >> 8) & 0xff
                              | ((uVar1 & 0xff00) * iVar13 >> 8) + ((uVar5 & 0xff00) * iVar16 >> 8)
                                & 0xff00 | iVar9 * 0x1000000;
                  }
                  local_28 = local_28 + 1;
                  puVar7 = puVar7 + 1;
                  puVar15 = (uint *)((int)puVar15 + 1);
                } while (local_28 < param_4[2]);
              }
              param_3 = param_3 + *(int *)((int)this + 4);
              local_8 = (uint *)((int)local_8 + *(int *)(param_1 + 4));
              local_24 = local_24 + 1;
            } while (local_24 < param_4[3]);
                    /* WARNING: Load size is inaccurate */
            (**(code **)(*this + 0x4c))();
            return;
          }
        }
      }
    }
                    /* WARNING: Load size is inaccurate */
    (**(code **)(*this + 0x4c))();
  }
  return;
}


